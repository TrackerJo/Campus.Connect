import{c as S,j as e,r as s,a as f}from"./index-CKNi8vpN.js";import{g as w}from"./db-DROJG-1T.js";S(document.getElementById("root")).render(e.jsx(s.StrictMode,{children:e.jsx(y,{})}));function y(){const[i,d]=s.useState(""),[h,u]=s.useState(""),[g,n]=s.useState(!1),[m,p]=s.useState([]),[x,o]=s.useState(""),[a,c]=s.useState("accountType"),[j,l]=s.useState("student");return s.useEffect(()=>{async function t(){const r=await w();p(r),o(r[0].schoolId)}t()},[]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"center",children:e.jsx("div",{className:"Login",children:a=="accountType"?e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Account Type"}),e.jsx("button",{className:"actionBtn",onClick:()=>{l("student"),c("login")},children:"Student"}),e.jsx("button",{className:"actionBtn",onClick:()=>{l("teacher"),c("login")},children:"Teacher"})]}):a=="login"?e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Login"}),e.jsx("input",{type:"text",placeholder:"Email",onChange:t=>{d(t.target.value)}}),e.jsx("input",{type:"password",placeholder:"Password",onChange:t=>{u(t.target.value)}}),e.jsx("select",{onChange:t=>{o(t.target.value)},children:m.map(t=>e.jsx("option",{value:t.schoolId,children:t.schoolName}))}),g?e.jsx("div",{className:"center",children:e.jsx("div",{className:"loader"})}):e.jsx("button",{className:"actionBtn",onClick:async()=>{if(n(!0),!await f(i,h,x)){n(!1),alert("Wrong email or password");return}localStorage.setItem("accountType",j),n(!1),window.location.href="/Campus.Connect/"},children:"Login"}),e.jsx("button",{className:"actionBtn",onClick:()=>{c("createAccount")},children:"Create an Account"})]}):e.jsx(e.Fragment,{children:" "})})})})}
