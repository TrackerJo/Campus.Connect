import{r as u,j as e,c as Ae,i as ue}from"./index-U3pxML4x.js";import{A as V,b as F,c as E,d as O,e as U,F as H,D as R,f as D,g as X,h as fe}from"./constants-CZ2ZrUdU.js";import{T as Z}from"./trash-BnpXJPEK.js";import{A as Ie}from"./arrow_forward-CHD_SwLW.js";import{C as P,S as z}from"./Show_Group_Tile-CZBAts4Y.js";import{E as $}from"./Ensemble_Section_Tile-DmwxS9lX.js";import{F as _}from"./Full_Cast_Tile-CJX3OvfU.js";import{n as ge,m as Be,o as pe,p as be}from"./db-9G2sMR9v.js";import{B as je}from"./back-C9T8y7K2.js";const ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAVCAYAAAAjODzXAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIqADAAQAAAABAAAAFQAAAAARe8XCAAAB10lEQVRIDbWVTStEURjHzYuZZjBIyleRkiwkRVEIRUlJSbFgYWNjY1azsWLBAkVJUSKKoijKQtn5DuT9ZfyO3Jkzz3Wv++bUv/s8z/m/nLln6hYV+VjZbLYaZEAalPuw8i4luAbcAGNdUFR4d/SgJFC9iWvjBNrzjDrlwdK9hKAqcKWFy/KEQal7ZxcKAirBpUi+o38SsyP6pAtr51SMU+BcBN7T14Fm8Cz2DugTzhMcMDEsA6ci6IG+3pBTt4JXwdmljxscX0+MSsCxCHikb5TGzNrBm+Bu08ck11WPQQIcCmN1BU1WRux1gneh2aSPWmls5wjjYE8YvtC32ArZhNMDPoR2nT7yl7ZgH0EM7Agjdf9tBUSbBm4/kIdZYRa2keW3IBaDLaAvde8deZazCs0g+NSNqJeA/WEgRMEG0Je67y5n0WYW2mEgD7PALGRmM2EjAlaBvtSr7ftV4GKIx6hu+lPPmyzYCINlQVa/YsBE9jjAa1z4qzaTs6MJgUU11ZY6xFCOFFCB56SWYZTpb3u6OWOiPUcCyjbZkDGt5RjllPpvqI+WvsZM6oAHhM3ogdS36iD72nAi4ExLOzJntdw1dZAk6AW1lqp/2iCzAXQDf9+iIM/3BR81SrYDkG4vAAAAAElFTkSuQmCC",te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAVCAYAAAAjODzXAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIqADAAQAAAABAAAAFQAAAAARe8XCAAABy0lEQVRIDc2Wx0pDURBAg+50IWKNxt6wtyAREgQXLvwUf8FP8iPcCi4Exa6x915RBJ9nAgmTm/vCS/ISHDhmZu40X55zDQT+kziOUwllpZ6JnuVQkeiLsgi/cA6TpRqGXjNwCz+wEODHCyTlAWW02MPQIwrvyaZ8xmWQZeUQ9Q6GijUMtSPwClqWZJAg7Gov+g30+z0MNcPwDFpWMaoSvVCa4UCfol9Cr1/DUGscHkHLGkZ1Wg8crXAEWuQF7koLzMOgxjDc68LoG1BrLcdBB5yClhOMdmuCBye5AyB/HVq2MOqzphPQDRc6Cz0OLVkTLYfk9MEVaNnDCFrCM10ESoFrnY2+D02Z0XYPsbZf6BB/yJ7h4iVhEMxHuoOv0SUl5SbG9hUf429LBeWikDgCsuS0bGLUudXhTF56aarlDKPTLceTnwIT8KSroq9DjVkAXwjk8WuRNdBjxuZlU2gK9FUgjdJ2ALYsRnkRtfi/GKk+DW+6C3piK/LZANvGWfGuChrF4MNouIIty0mLbNCxvB6/1yQazMKn7mrocpeEvdYrKI5Gc/BlDCCm3KqRgornmkzDefiGpMj/F9Fc6/gST2MZRnaEXAGxQor+ARxhTdM0H96WAAAAAElFTkSuQmCC",se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAVCAYAAAAjODzXAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIqADAAQAAAABAAAAFQAAAAARe8XCAAADK0lEQVRIDb1VX0hTURy+5171zq0pEm0+2HPRQ2DQQ0ER+SClhlaj/0bsT7u7QxkRDephgQU2WDDcpmnZnwepyIEyUCKJoMKXHvfSQw/Rg/hSS9K03dN3ame7c9PmUi+M37nfOef7fb/vd84dEf7jCYfD2yorTTcopYupVLrH77/8rVw6Uu7GSCRSL4rya0LIjgzHh/n5VJPP5/taDqdYzibmhCgaXulEMJo9BoN5EnM15XCu2ZG+vr6tkmSYgojdxRJSKrzTtIVmVVXnis2vhK3JkWg0WgcRL5eJ+A7yBZ6AEGG/JMmJQGDAyLFSYslCmOWEyJMQ0ciJcUjn8DuSTtMOxJ8cFwRy0GqtGA+FQtU5bPVRSUJ6e++bq6qME6h2b46O/kinhRZFcbxVVceEpgk2QaBLfB5rD1dX18ZRgMyx1eI/hQSDQVNNDU2gyn2cCOdgHg60eb2ONxyDmHFKtVPAf3EMYppRwItAIFDFsZXiqkKYtWZz3TjacYATsBag+nZFcU5xjEdFccUh8ize0xxDAS319Q1PIaYihxWOpELoL8IsleUtYxDRpFuzSAg97vE4JnRY3jCRGEu2trZ9hKAO7M3cSrLTZKrdZTTKo8lkkuZtyLwUvb7MSqu1IQ6eo7lNdEnTyEmPxz6Ww1Ye9fcPdlJKhsGRdR3iRmZmPp8Hv7Z8Z3YRn3C5Bioh4rleBOs7bsbpUkUwLrfb+RjBiV/WAfhzxmLZPgwhBXnzANbHxkZpBCKOMbLMg35r51TVOcqBUiNu1AMUoWB9VowoCp0Qcw9YXjeyQmw2mwQnnkDECZ4IJBrsvIhD+Ixja40QMwCeLv0+iLHHYkMRPfZHFbMKIh5CxAXdJNU0egkH85EOK3uIxD7wh/QEKDKsKPZuhjFHCEQMFhHhWi8RLBGcuQtnrrExf3BmuqLRoSB7Jzjdd6DnKp9kER3x4DsR02PrNY7FBq/jIvXo+eC8H46Ibj0IEd0bJYLlAfct5Lipz4luuEX0aZqD+GJewcIwf9+oiBwBiLnN+fGRnCbs79pikdrxsfrk9drf88nNiGjTIRRvnZ39Et+MfCXl+A2cpS9BEQ2bFQAAAABJRU5ErkJggg==",ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAVCAYAAAAjODzXAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIqADAAQAAAABAAAAFQAAAAARe8XCAAADWUlEQVRIDc1W30tUQRSeufcubFmRUZRZQmX0gyKKiIJidTUIX4rAl156WFf2l/YSvfSy0KMP4q53d2+rf0GvFWFpSi8FGkJGlFEapmA/VDJS9947faOOczdd2wWTBu7Ome/MfPPtOWfmXkL+p9bU1FQUjUaV9dZUW1urRqPGRr4vTSbTtylV7jBGRhmzL4dC/r71EJRI3PVQqt4jhBVTSm4gCsotLgiDUkWhHalU6sS/FqLrxnlFUR9gzx3YWMN+NyGEvZQb022EaE+SybZjEltbK5FIn1VV7SFYiwQzY7RPmZmxrkHMOwEiONvxdOp6+ojE1sZKpdpPI+qPwLZZMrLeqSmzjnIgmUyWUurqgYADjgljpmlXRCL1DpHSW6iFKJ/Emk6koliuZf22PecNhUIT8yclGAx+np21vCjYITmJlqiq2hWLGQ5x0luIFY8bx/EnHztFMMYGpqeti1wE55qPiCCNx9P7NE3pQRHtFRjS9omxjAdihySWv4XiP8qYq5sXplgFEW8IyVSAc1xgWXdHQ4P/o20zRIaNignQWoa0dem67hAnvatZiUT7IYhAOpwiyCDqssopgnNkRUSQcgJFYbxmdgoM4t6bJvU0NPgcIoV3ea/rbeWKQhBdult4kfoPmYztaWz0jwhM9FkREWAo5HuLQq3Cwi8CA2G5pjEemV0Cy9XzFON0dGWLYMOWxbwrieA8KwrhDpyW17hpq1Ej3/mYNxAjUu7OWCy2lO8Fj/xtaTHKNI0+/aPORhib80YidcNyZra1YmqcU1pbjVOapnUC2+rAX5nmr8pIJPLNgZFYLL3H5Zov9v0SZ2OEmJ5AIDAoseXWX4XwJbgDziAeOH5ki6SQdwDHmpuNErdb68Gcg2IOUjtu23ZFOOzHKVm95SWEU7S2tp9TVdaB9GySlKx3ctKqdrsVN55u4Icdvq8QUhkM1g1ILLeVtxBOgffEhYUrms6/uhdpX+BEFUHg0vsJ4wlEwhsO1/fn3jrbU5AQvhSfDV7U+H2kYEM2lRixKaSxOhDw9Qoknz7nqcm1OBj0d9k2uYJ/PbvCnB+4EC8VKoLzFCyELwqHfagVdhXmHB8vtp+WZdbgw+q5AArpC06NkzyVStcgDQawDCJxHSKeOf2F2L8B6DpBSa9fWgMAAAAASUVORK5CYII=";function Se({act:t,setAct:m,isCreate:I,removeAct:C,isAssign:p,characters:G,showGroups:x,hasEnsemble:y,selectAct:w,canMoveDown:k,canMoveUp:B,moveDown:N,moveUp:j}){const[M,o]=u.useState(0);return u.useEffect(()=>{o(Math.floor(Math.random()*1e5))},[]),e.jsx("div",{className:"ActTile",id:"act-tile-"+t.actId,onClick:l=>{l.target.classList.contains("TrashIcon")||l.target.tagName!="INPUT"&&(l.target.classList.contains("UpIcon")||l.target.classList.contains("DownIcon")||w(t))},children:e.jsxs("div",{className:"header",children:[e.jsx("div",{children:e.jsx("img",{src:Z,alt:"",className:"TrashIcon",onClick:()=>{C()}})}),e.jsxs("div",{className:"ActNameDiv",children:[e.jsx("label",{htmlFor:"Act",children:"Act Name: "}),e.jsx("input",{type:"text",name:"",id:"",value:t.name,onChange:l=>{m(V.fromBlank(l.target.value,t.scenes,t.actId))}})]}),e.jsxs("div",{className:"ActActions",children:[e.jsx("img",{src:B?ee:se,alt:"",className:"UpIcon "+(B?"":"disabled"),onClick:()=>{B&&j()}}),e.jsx("img",{src:k?te:ne,alt:"",className:"DownIcon "+(k?"":"disabled"),onClick:()=>{k&&N()}}),e.jsx("img",{src:Ie,alt:"",className:"ForwardIcon"})]})]})})}function Ce({song:t,setSong:m,isCreate:I,removeSong:C,isAssign:p,characters:G,showGroups:x,hasEnsemble:y}){const[w,k]=u.useState(!1),[B,N]=u.useState(!1),[j,M]=u.useState(0);return u.useEffect(()=>{M(Math.floor(Math.random()*1e5))},[]),e.jsxs("div",{className:"SongTile",id:"song-tile-"+t.songId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"SongNameDiv",children:[e.jsx("label",{htmlFor:"Scene",children:"Song Name: "}),e.jsx("input",{type:"text",name:"",id:"",value:t.name,onChange:o=>{m(F.fromBlank(o.target.value,t.characters,t.songId))}})]}),e.jsx("div",{children:e.jsx("img",{src:Z,alt:"",className:"TrashIcon",onClick:()=>{C()}})})]}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Characters",children:"Characters: "}),e.jsx("div",{className:"song-characters",id:"characters-"+j,children:t.characters.map((o,l)=>{if(o instanceof E)return e.jsx(P,{character:o,isCreate:I,actors:[],characters:G,isAssign:p,setCharacter:g=>{m(F.fromBlank(t.name,t.characters.map((f,h)=>h===l?g:f),t.songId))},removeCharacter:()=>{m(F.fromBlank(t.name,t.characters.filter((g,f)=>f!==l),t.songId))}},l);if(o instanceof O)return e.jsx($,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:o,isAssign:p,actors:[],isCustom:!1,isCreate:I,setEnsembleSection:g=>{m(F.fromBlank(t.name,t.characters.map((f,h)=>h===l?g:f),t.songId))},removeEnsembleSection:()=>{k(!1),m(F.fromBlank(t.name,t.characters.filter((g,f)=>f!==l),t.songId))}},l);if(o instanceof U)return e.jsx(z,{showGroup:o,hasEnsemble:y,actors:[],characters:G,isCreate:I,isAssign:p,showGroups:x,setShowGroup:g=>{m(F.fromBlank(t.name,t.characters.map((f,h)=>h===l?g:f),t.songId))},removeShowGroup:()=>{m(F.fromBlank(t.name,t.characters.filter((g,f)=>f!==l),t.songId))}},l);if(o instanceof H)return e.jsx(_,{canDelete:!0,onDelete:()=>{N(!1),m(F.fromBlank(t.name,t.characters.filter((g,f)=>f!==l),t.songId))}},l)})}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(B?"disabled":""),disabled:B,onClick:()=>{const o=Math.floor(Math.random()*1e5);m(F.fromBlank(t.name,[...t.characters,E.fromBlank("",null,o)],t.songId)),setTimeout(()=>{const l=document.getElementById("characters-"+j);l.scrollTop=l.scrollHeight,document.getElementById("song-tile-"+t.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(B?"disabled":""),disabled:B,onClick:()=>{const o=Math.floor(Math.random()*1e5);m(F.fromBlank(t.name,[...t.characters,U.fromBlank("",[],o)],t.songId)),setTimeout(()=>{const l=document.getElementById("characters-"+j);l.scrollTop=l.scrollHeight,document.getElementById("song-tile-"+t.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(B?"disabled":""),disabled:B,onClick:()=>{N(!0),m(F.fromBlank(t.name,[...t.characters,new H],t.songId)),setTimeout(()=>{const o=document.getElementById("characters"+j);o.scrollTop=o.scrollHeight,document.getElementById("song-tile-"+t.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Full Cast"}),e.jsx("br",{}),y&&e.jsx("button",{className:"ActionBtn "+(w||B?"disabled":""),disabled:w||B,onClick:()=>{w||(k(!0),setTimeout(()=>{const o=document.getElementById("characters-"+j);o.scrollTop=o.scrollHeight,document.getElementById("song-tile-"+t.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),m(F.fromBlank(t.name,[...t.characters,O.fromBlank(!0,!1,!1,!1,[])],t.songId)))},children:"Add Ensemble"})]})]})}function we({dance:t,setDance:m,isCreate:I,removeDance:C,isAssign:p,characters:G,showGroups:x,hasEnsemble:y}){const[w,k]=u.useState(!1),[B,N]=u.useState(!1),[j,M]=u.useState(0);return u.useEffect(()=>{M(Math.floor(Math.random()*1e5))},[]),e.jsxs("div",{className:"DanceTile",id:"dance-tile-"+t.danceId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"DanceNameDiv",children:[e.jsx("label",{htmlFor:"Scene",children:"Song Name: "}),e.jsx("input",{type:"text",name:"",id:"",value:t.name,onChange:o=>{m(R.fromBlank(o.target.value,t.characters,t.danceId))}})]}),e.jsx("div",{children:e.jsx("img",{src:Z,alt:"",className:"TrashIcon",onClick:()=>{C()}})})]}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Characters",children:"Characters: "}),e.jsx("div",{className:"characters",id:"characters-"+j,children:t.characters.map((o,l)=>{if(o instanceof E)return e.jsx(P,{character:o,actors:[],isCreate:I,characters:G,isAssign:p,setCharacter:g=>{m(R.fromBlank(t.name,t.characters.map((f,h)=>h===l?g:f),t.danceId))},removeCharacter:()=>{m(R.fromBlank(t.name,t.characters.filter((g,f)=>f!==l),t.danceId))}},l);if(o instanceof O)return e.jsx($,{isGroupChatCreate:!1,onAddEnsemble:()=>{},isAssign:!1,ensembleSection:o,isCustom:!1,isCreate:I,actors:[],setEnsembleSection:g=>{m(R.fromBlank(t.name,t.characters.map((f,h)=>h===l?g:f),t.danceId))},removeEnsembleSection:()=>{k(!1),m(R.fromBlank(t.name,t.characters.filter((g,f)=>f!==l),t.danceId))}},l);if(o instanceof U)return e.jsx(z,{showGroup:o,hasEnsemble:y,characters:G,actors:[],isCreate:I,isAssign:p,showGroups:x,setShowGroup:g=>{m(R.fromBlank(t.name,t.characters.map((f,h)=>h===l?g:f),t.danceId))},removeShowGroup:()=>{m(R.fromBlank(t.name,t.characters.filter((g,f)=>f!==l),t.danceId))}},l);if(o instanceof H)return e.jsx(_,{canDelete:!0,onDelete:()=>{m(R.fromBlank(t.name,t.characters.filter((g,f)=>f!==l),t.danceId)),N(!1)}},l)})}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(B?"disabled":""),disabled:B,onClick:()=>{const o=Math.floor(Math.random()*1e5);m(R.fromBlank(t.name,[...t.characters,E.fromBlank("",null,o)],t.danceId)),setTimeout(()=>{const l=document.getElementById("characters-"+j);l.scrollTop=l.scrollHeight,document.getElementById("dance-tile-"+t.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(B?"disabled":""),disabled:B,onClick:()=>{const o=Math.floor(Math.random()*1e5);m(R.fromBlank(t.name,[...t.characters,U.fromBlank("",[],o)],t.danceId)),setTimeout(()=>{const l=document.getElementById("characters-"+j);l.scrollTop=l.scrollHeight,document.getElementById("dance-tile-"+t.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(B?"disabled":""),disabled:B,onClick:()=>{N(!0),m(R.fromBlank(t.name,[...t.characters,new H],t.danceId)),setTimeout(()=>{const o=document.getElementById("characters-"+j);o.scrollTop=o.scrollHeight,document.getElementById("dance-tile-"+t.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Full Cast"}),e.jsx("br",{}),y&&e.jsx("button",{className:"ActionBtn "+(w||B?"disabled":""),disabled:w||B,onClick:()=>{w||(k(!0),setTimeout(()=>{const o=document.getElementById("characters-"+j);o.scrollTop=o.scrollHeight,document.getElementById("dance-tile-"+t.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),m(R.fromBlank(t.name,[...t.characters,O.fromBlank(!0,!1,!1,!1,[])],t.danceId)))},children:"Add Ensemble"})]})]})}function Ee({scene:t,setScene:m,isCreate:I,removeScene:C,isAssign:p,characters:G,showGroups:x,hasEnsemble:y,canMoveUp:w,canMoveDown:k,moveUp:B,moveDown:N}){const[j,M]=u.useState(!1),[o,l]=u.useState(!1),[g,f]=u.useState(0);return u.useEffect(()=>{f(Math.floor(Math.random()*1e5))},[]),e.jsxs("div",{className:"SceneTile",id:"scene-tile-"+t.sceneId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"SceneNameDiv",children:[e.jsx("label",{htmlFor:"Scene",children:"Scene Name: "}),e.jsx("input",{type:"text",name:"",id:"",value:t.name,onChange:h=>{m(D.fromBlank(h.target.value,t.characters,t.sceneId))}})]}),e.jsxs("div",{className:"SceneActions",children:[e.jsx("img",{src:w?ee:se,alt:"",className:"UpIcon "+(w?"":"disabled"),onClick:()=>{w&&B()}}),e.jsx("img",{src:k?te:ne,alt:"",className:"DownIcon "+(k?"":"disabled"),onClick:()=>{k&&N()}}),e.jsx("img",{src:Z,alt:"",className:"TrashIcon",onClick:()=>{C()}})]})]}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Characters",children:"Characters: "}),e.jsx("div",{className:"scene-characters",id:"characters-"+g,children:t.characters.map((h,S)=>{if(h instanceof E)return e.jsx(P,{character:h,isCreate:I,actors:[],characters:G,isAssign:p,setCharacter:v=>{m(D.fromBlank(t.name,t.characters.map((T,L)=>L===S?v:T),t.sceneId))},removeCharacter:()=>{m(D.fromBlank(t.name,t.characters.filter((v,T)=>T!==S),t.sceneId))}},S);if(h instanceof O)return e.jsx($,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:h,isCustom:!1,isCreate:I,isAssign:p,actors:[],setEnsembleSection:v=>{m(D.fromBlank(t.name,t.characters.map((T,L)=>L===S?v:T),t.sceneId))},removeEnsembleSection:()=>{M(!1),m(D.fromBlank(t.name,t.characters.filter((v,T)=>T!==S),t.sceneId))}},S);if(h instanceof U)return e.jsx(z,{showGroup:h,isCreate:I,isAssign:p,characters:G,actors:[],hasEnsemble:y,showGroups:x,setShowGroup:v=>{m(D.fromBlank(t.name,t.characters.map((T,L)=>L===S?v:T),t.sceneId))},removeShowGroup:()=>{m(D.fromBlank(t.name,t.characters.filter((v,T)=>T!==S),t.sceneId))}},S);if(h instanceof H)return e.jsx(_,{canDelete:!0,onDelete:()=>{l(!1),m(D.fromBlank(t.name,t.characters.filter((v,T)=>T!==S),t.sceneId))}},S)})}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(o?"disabled":""),disabled:o,onClick:()=>{const h=Math.floor(Math.random()*1e5);m(D.fromBlank(t.name,[...t.characters,E.fromBlank("",null,h)],t.sceneId)),setTimeout(()=>{const S=document.getElementById("characters-"+g);S.scrollTop=S.scrollHeight,document.getElementById("scene-tile-"+t.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(o?"disabled":""),disabled:o,onClick:()=>{const h=Math.floor(Math.random()*1e5);m(D.fromBlank(t.name,[...t.characters,U.fromBlank("",[],h)],t.sceneId)),setTimeout(()=>{const S=document.getElementById("characters-"+g);S.scrollTop=S.scrollHeight,document.getElementById("scene-tile-"+t.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),e.jsx("br",{}),y&&e.jsx("button",{className:"ActionBtn "+(j||o?"disabled":""),disabled:j||o,onClick:()=>{j||(M(!0),setTimeout(()=>{const h=document.getElementById("characters-"+g);h.scrollTop=h.scrollHeight,document.getElementById("scene-tile-"+t.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),m(D.fromBlank(t.name,[...t.characters,O.fromBlank(!0,!1,!1,!1,[])],t.sceneId)))},children:"Add Ensemble"}),y&&e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(o?"disabled":""),disabled:o,onClick:()=>{o||(l(!0),setTimeout(()=>{const h=document.getElementById("characters-"+g);h.scrollTop=h.scrollHeight,document.getElementById("scene-tile-"+t.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),m(D.fromBlank(t.name,[...t.characters,new H],t.sceneId)))},children:"Add Full Cast"})]})]})}Ae(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(ke,{})}));function ke(){const[t,m]=u.useState(""),[I,C]=u.useState([]),[p,G]=u.useState([]),[x,y]=u.useState([]),[w,k]=u.useState([]),[B,N]=u.useState([]),[j,M]=u.useState(""),[o,l]=u.useState(!1),[g,f]=u.useState(!1),[h,S]=u.useState(!1),[v,T]=u.useState(!1),[L,ae]=u.useState(""),[J,re]=u.useState(""),[q,ce]=u.useState(null),[K,oe]=u.useState(null),[le,ie]=u.useState(!1),[Q,Y]=u.useState("Characters"),[i,W]=u.useState(null);function de(){let s=!0;for(let c=0;c<p.length;c++)p[c].actor==null&&(console.log("Actor is null"),s=!1);for(let c=0;c<x.length;c++){const a=x[c];for(let n=0;n<a.characters.length;n++){const r=a.characters[n];r instanceof E&&r.actor==null&&(s=!1)}}return s}function me(){let s=!0;return x.forEach(c=>{c.characters.forEach(a=>{a instanceof E&&a.name==""&&(s=!1)})}),I.forEach(c=>{c.scenes.forEach(a=>{a.characters.forEach(n=>{n instanceof E?n.name==""&&(s=!1):n instanceof U&&n.name==""&&(s=!1)})})}),w.forEach(c=>{c.characters.forEach(a=>{a instanceof E?a.name==""&&(s=!1):a instanceof U&&a.name==""&&(s=!1)})}),B.forEach(c=>{c.characters.forEach(a=>{a instanceof E?a.name==""&&(s=!1):a instanceof U&&a.name==""&&(s=!1)})}),s}u.useEffect(()=>{ue(()=>{});const s=new URLSearchParams(window.location.search),c=s.get("activityId");if(c&&m(c),s.get("isEditing")){S(!0);const n=X.fromMap(JSON.parse(localStorage.getItem("show")));oe(n);for(const r of n.layout){r.hasCreatedSchedule=!0;for(const d of r.scenes)d.hasCreatedSchedule=!0}for(const r of n.songs)r.hasCreatedSchedule=!0;for(const r of n.dances)r.hasCreatedSchedule=!0;for(const r of n.showGroups)r.hasCreatedSchedule=!0;for(const r of n.characters)r.hasCreatedSchedule=!0;re(n.templateId),M(n.name),l(n.hasEnsemble),G(n.characters),console.log(n.characters),y(n.showGroups),C(n.layout),k(n.songs),N(n.dances),ae(n.id),ce(n.ensemble),T(n.isCreatingSchedule),n.isCreatingSchedule&&!le&&ie(!0)}},[]);function he(s){for(let c=0;c<s.showGroups.length;c++){const a=s.showGroups[c];for(let n=0;n<a.characters.length;n++){const r=a.characters[n];r instanceof E&&(a.characters[n]=s.characters.find(d=>d.characterId==r.characterId))}}for(let c=0;c<s.layout.length;c++){const a=s.layout[c];for(let n=0;n<a.scenes.length;n++){const r=a.scenes[n];for(let d=0;d<r.characters.length;d++){const A=r.characters[d];A instanceof E&&(r.characters[d]=s.characters.find(b=>b.characterId==A.characterId)),A instanceof U&&(r.characters[d]=s.showGroups.find(b=>b.showGroupId==A.showGroupId))}}}for(let c=0;c<s.songs.length;c++){const a=s.songs[c];for(let n=0;n<a.characters.length;n++){const r=a.characters[n];r instanceof E&&(a.characters[n]=s.characters.find(d=>d.characterId==r.characterId)),r instanceof U&&(a.characters[n]=s.showGroups.find(d=>d.showGroupId==r.showGroupId))}}for(let c=0;c<s.dances.length;c++){const a=s.dances[c];for(let n=0;n<a.characters.length;n++){const r=a.characters[n];r instanceof E&&(a.characters[n]=s.characters.find(d=>d.characterId==r.characterId)),r instanceof U&&(a.characters[n]=s.showGroups.find(d=>d.showGroupId==r.showGroupId))}}return s}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"title",children:e.jsxs("h1",{children:[v?"Edit":"Create"," Show Template"]})}),e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:"form-question",children:[e.jsx("label",{htmlFor:"name",children:"Show Name: "}),v?e.jsx("label",{className:"showNameLabel",children:j}):e.jsx("input",{type:"text",id:"name",value:j,onChange:s=>M(s.target.value)})]}),!v&&e.jsxs("div",{className:"form-question",children:[e.jsx("label",{htmlFor:"ensemble",children:"Has Ensemble: "}),e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:o,onChange:s=>l(s.target.checked)}),e.jsx("span",{className:"checkmark"})]})]}),e.jsxs("div",{className:"sections",children:[e.jsx("h2",{className:"section "+(Q=="Characters"?"selected":""),onClick:()=>{Y("Characters")},children:"Characters"}),e.jsx("h2",{className:"section "+(Q=="Show Groups"?"selected":""),onClick:()=>{Y("Show Groups")},children:"Show Groups"}),e.jsx("h2",{className:"section "+(Q=="Layout"?"selected":""),onClick:()=>{Y("Layout")},children:"Layout"}),e.jsx("h2",{className:"section "+(Q=="Songs"?"selected":""),onClick:()=>{Y("Songs")},children:"Songs"}),e.jsx("h2",{className:"section "+(Q=="Dances"?"selected":""),onClick:()=>{Y("Dances")},children:"Dances"})]}),Q=="Characters"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"characters",id:"create-characters",children:p.map((s,c)=>e.jsx(P,{actors:[],character:s,characters:[],hasCreatedSchedule:s.hasCreatedSchedule,isAssign:!1,setCharacter:a=>{G(n=>{const r=[...n];return r[c]=a,r})},removeCharacter:()=>{const a=s.characterId;y(n=>{const r=[...n];for(let d=0;d<r.length;d++){const A=r[d];A.characters=A.characters.filter(b=>b instanceof E?b.characterId!==a:!0)}return r}),C(n=>{const r=[...n];for(let d=0;d<r.length;d++){const A=r[d];A.scenes=A.scenes.filter(b=>b instanceof E?b.characterId!==a:!0)}return r}),k(n=>{const r=[...n];for(let d=0;d<r.length;d++){const A=r[d];A.characters=A.characters.filter(b=>b instanceof E?b.characterId!==a:!0)}return r}),N(n=>{const r=[...n];for(let d=0;d<r.length;d++){const A=r[d];A.characters=A.characters.filter(b=>b instanceof E?b.characterId!==a:!0)}return r}),G(p.filter((n,r)=>r!==c))},isCreate:!0},c))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();G([...p,E.fromBlank("",null,s)]),setTimeout(()=>{const c=document.getElementById("create-characters");c.scrollTop=c.scrollHeight,document.getElementById("character-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"})]}),Q=="Show Groups"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"showGroups",id:"create-showGroups",children:x.map((s,c)=>e.jsx(z,{showGroup:s,showGroups:[],actors:[],hasCreatedSchedule:s.hasCreatedSchedule,hasEnsemble:o,characters:p,isAssign:!1,setShowGroup:a=>{y(n=>{const r=[...n];return r[c]=a,r})},removeShowGroup:()=>{y(x.filter((a,n)=>n!==c))},isCreate:!0},c))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();y([...x,U.fromBlank("",[],s)]),setTimeout(()=>{const c=document.getElementById("create-showGroups");c.scrollTop=c.scrollHeight,document.getElementById("show-group-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"})]}),Q=="Layout"&&e.jsx(e.Fragment,{children:i==null?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"layout",id:"create-layout",children:I.map((s,c)=>e.jsx(Se,{canMoveDown:I.indexOf(s)!=I.length-1,canMoveUp:I.indexOf(s)!=0,moveDown:()=>{C(a=>{const n=[...a],r=I.indexOf(s)+1;return n[I.indexOf(s)]=I[r],n[r]=s,n}),setTimeout(()=>{const a=document.getElementById("create-layout");a.scrollTop=a.scrollHeight,document.getElementById("act-tile-"+s.actId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},moveUp:()=>{C(a=>{const n=[...a],r=I.indexOf(s)-1;return n[I.indexOf(s)]=I[r],n[r]=s,n}),setTimeout(()=>{const a=document.getElementById("create-layout");a.scrollTop=a.scrollHeight,document.getElementById("act-tile-"+s.actId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},selectAct:a=>{W(a)},hasEnsemble:o,act:s,characters:p,showGroups:x,isAssign:!1,setAct:a=>{C(n=>{const r=[...n];return r[c]=a,r})},isCreate:!1,removeAct:()=>{C(I.filter((a,n)=>n!==c))}},c))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();C([...I,V.fromBlank("Act "+(I.length+1),[],s)]),setTimeout(()=>{const c=document.getElementById("create-layout");c.scrollTop=c.scrollHeight,document.getElementById("act-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Act"})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"act-header",children:[e.jsx("img",{src:je,alt:"",onClick:()=>{W(null)}}),e.jsx("h2",{children:i.name})]}),e.jsx("label",{htmlFor:"Scene",children:"Scenes: "}),e.jsx("div",{id:"scenes-"+i.actId,className:"scenes",children:i.scenes.map((s,c)=>e.jsx(Ee,{canMoveDown:i.scenes.indexOf(s)!=i.scenes.length-1,canMoveUp:i.scenes.indexOf(s)!=0,moveDown:()=>{C(a=>{const n=[...a],r=i.scenes.indexOf(s)+1;return W(V.fromBlank(i.name,i.scenes.map((d,A)=>A===c?i.scenes[r]:A===r?s:d),i.actId)),n[I.findIndex(d=>d.actId==i.actId)].scenes[i.scenes.indexOf(s)]=i.scenes[r],n[I.findIndex(d=>d.actId==i.actId)].scenes[r]=s,n}),setTimeout(()=>{document.getElementById("scenes-"+i.actId),document.getElementById("scene-tile-"+s.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},moveUp:()=>{C(a=>{const n=[...a],r=i.scenes.indexOf(s)-1,d=i.scenes[r];return console.log(d),W(V.fromBlank(i.name,i.scenes.map((A,b)=>b===c?d:b===r?s:A),i.actId)),n[I.findIndex(A=>A.actId==i.actId)].scenes[i.scenes.indexOf(s)]=i.scenes[r],n[I.findIndex(A=>A.actId==i.actId)].scenes[r]=s,n}),setTimeout(()=>{document.getElementById("scenes-"+i.actId),document.getElementById("scene-tile-"+s.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},hasEnsemble:o,scene:s,isCreate:!1,characters:p,showGroups:x,isAssign:!1,setScene:a=>{C(n=>{const r=[...n],d=r.findIndex(A=>A.actId==i.actId);return r[d]=V.fromBlank(i.name,i.scenes.map((A,b)=>b===c?a:A),i.actId),W(V.fromBlank(i.name,i.scenes.map((A,b)=>b===c?a:A),i.actId)),r})},removeScene:()=>{C(a=>{const n=[...a],r=n.findIndex(d=>d.actId==i.actId);return n[r]=V.fromBlank(i.name,i.scenes.filter((d,A)=>A!==c),i.actId),W(V.fromBlank(i.name,i.scenes.filter((d,A)=>A!==c),i.actId)),n})}},c))}),i.scenes.length==0&&e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();C(c=>{const a=[...c],n=a.findIndex(r=>r.actId==i.actId);return a[n]=V.fromBlank(i.name,[...i.scenes,D.fromBlank("Scene "+(i.scenes.length+1),[],s)],i.actId),W(V.fromBlank(i.name,[...i.scenes,D.fromBlank("Scene "+(i.scenes.length+1),[],s)],i.actId)),a}),setTimeout(()=>{const c=document.getElementById("scenes-"+i.actId);c.scrollTop=c.scrollHeight,document.getElementById("scene-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Scene"})]})})}),Q=="Songs"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"songs",id:"create-songs",children:w.map((s,c)=>e.jsx(Ce,{song:s,hasEnsemble:o,characters:p,showGroups:x,isAssign:!1,setSong:a=>{k(n=>{const r=[...n];return r[c]=a,r})},removeSong:()=>{k(w.filter((a,n)=>n!==c))},isCreate:!1},c))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();k([...w,F.fromBlank("Song "+(w.length+1),[],s)]),setTimeout(()=>{const c=document.getElementById("create-songs");c.scrollTop=c.scrollHeight,document.getElementById("song-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Song"})," "]}),Q=="Dances"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"dances",id:"create-dances",children:B.map((s,c)=>e.jsx(we,{dance:s,hasEnsemble:o,characters:p,showGroups:x,isAssign:!1,setDance:a=>{N(n=>{const r=[...n];return r[c]=a,r})},removeDance:()=>{N(B.filter((a,n)=>n!==c))},isCreate:!1},c))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();N([...B,R.fromBlank("Dance "+(B.length+1),[],s)]),setTimeout(()=>{const c=document.getElementById("create-dances");c.scrollTop=c.scrollHeight,document.getElementById("dance-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Dance"})," "]}),g?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(f(!0),!me()){alert("Please select all characters and show groups before creating the show template"),f(!1);return}const s=he(X.fromBlank(j,L,t,J,I,p,o?fe.fromBlank((q==null?void 0:q.actors)??[],Date.now()):null,x,w,B,!1,o,null,[],"open",v,Date.now()));s.templateId=J,console.log(J),console.log(s.toMap());let c=L;if(h)X.fromMap(s.toMap()),s.formStatus=K.formStatus,s.isCreatingSchedule=K.isCreatingSchedule,s.conflictForm=K.conflictForm,s.canCreateSchedule=de(),s.resources=K.resources,s.templateId=K.templateId,s.canCreateSchedule||alert("Since there are characters that haven't been assigned to actors, you will not be able to edit/create the schedule until you assign actors to all characters"),await pe(s),v&&await be(s),localStorage.removeItem("show"),localStorage.setItem("show",JSON.stringify(s==null?void 0:s.toMap()));else{const a=await ge(s);s.templateId=a,c=await Be(s)}window.location.href=`/Activity/Shows/Show/?activityId=${t}&showId=${c}`,f(!1)},children:h?"Save Show Template":"Create Show Template"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const c=new URLSearchParams(window.location.search).get("showId");if(h){window.location.href=`/Activity/Shows/Show/?activityId=${t}&showId=${c}`;return}window.location.href=`/Activity/Shows/Add/?activityId=${t}`},children:"Back"})]})]})}
