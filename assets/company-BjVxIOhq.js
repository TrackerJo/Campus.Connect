import{r as s,j as e,c as p,i as f}from"./index-CBYUpoa4.js";import{C as y}from"./constants-CiIGZTLG.js";import{ac as L,ah as j}from"./db-DzzlND-e.js";import{A as g}from"./Add_Location_Dialog-BZWBC07o.js";import{E as v}from"./Edit_Location_Dialog-B96JV3Kd.js";import"./distance-DNOHIura.js";function x({location:r,onEdit:m,onDelete:u,canEdit:h,canDelete:a}){const[o,l]=s.useState(!1),[d,c]=s.useState(!1);return e.jsxs("div",{className:"saved-location",children:[e.jsx("label",{htmlFor:"",children:r.name}),e.jsx("label",{htmlFor:"",children:r.address}),h?d?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{c(!0),await m(),c(!1)},children:"Edit"}):e.jsx(e.Fragment,{}),a?o?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{l(!0),await u(),l(!1)},children:"Delete"}):e.jsx(e.Fragment,{})]})}p(document.getElementById("root")).render(e.jsx(s.StrictMode,{children:e.jsx(w,{})}));function w(){const[r,m]=s.useState("student"),[u,h]=s.useState(!0),[a,o]=s.useState(null),[l,d]=s.useState(void 0),c=s.useRef(null),i=s.useRef(null);return s.useEffect(()=>{f(()=>{}),new URLSearchParams(window.location.search);const t=localStorage.getItem("accountType");t&&m(t),L().then(n=>{n||(window.location.href="/"),o(n),h(!1)})},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"title",children:e.jsx("h1",{children:a==null?"":a.name})}),e.jsxs("div",{className:"center",children:[u?e.jsx("div",{className:"loader"}):a!=null?e.jsxs("div",{className:"companyInfo",children:[e.jsx("button",{className:"ActionBtn",children:"Edit Company Name"}),e.jsxs("h2",{children:["Join Code: ",a.joinCode]}),e.jsxs("div",{className:"row",children:[e.jsx("h2",{children:"Company Type:"}),e.jsx("select",{name:"",id:"",value:a.type,onChange:t=>{const n={...a};n.type=t.target.value,o(n)},children:Object.keys(y).map(t=>e.jsx("option",{value:t,children:t}))})]}),e.jsx("h2",{children:"Default Location"}),e.jsx("div",{className:"center-location",children:e.jsx(x,{location:a.location,canEdit:!0,canDelete:!1,onEdit:async()=>{d(a.location),i.current.showModal()},onDelete:async()=>{}})}),e.jsx("h2",{children:"Saved Locations"}),e.jsx("div",{className:"saved-locations",children:a.savedLocations.map(t=>e.jsx(x,{location:t,canEdit:!0,canDelete:!0,onEdit:async()=>{d(t),i.current.showModal()},onDelete:async()=>{a.savedLocations=a.savedLocations.filter(n=>n.name!=t.name),a.lastUpdated=Date.now(),await j(a),o({...a})}}))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{c.current.showModal()},children:"Add Location"})]}):e.jsx(e.Fragment,{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/"},children:"Back"})]}),e.jsx(g,{dialogRef:c,savedLocations:[],close:()=>{c.current.close()},addLocation:async t=>{a.savedLocations.push(t),a.lastUpdated=Date.now(),await j(a),o({...a}),c.current.close()}}),e.jsx(v,{dialogRef:i,location:l,close:()=>{i.current.close()},editLocation:async t=>{a.savedLocations=a.savedLocations.map(n=>n.name==t.name?t:n),a.lastUpdated=Date.now(),await j(a),o({...a}),i.current.close()}})]})}
