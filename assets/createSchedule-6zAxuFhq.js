import{j as s,c as ye,r as u,i as Me}from"./index-U3pxML4x.js";import{j as Re,c as j,e as U,d as C,F as q,k as Be,l as He}from"./constants-CrK5oAWg.js";import{i as $e,w as Ge,q as Ye,x as Oe,y as Pe,z as _e,A as Ue}from"./db-BXeq32WU.js";import{A as ze,S as Je,D as Ve,C as qe,E as We,a as Ke}from"./Show_Group_Display_Tile-DkGRkKqe.js";import{B as ge,C as Qe}from"./Calendar-BG4YQB9j.js";import{C as Xe,S as Ze}from"./Show_Group_Tile-CHoPKXi2.js";import{E as et}from"./Ensemble_Section_Tile-DXys-Uwj.js";import{F as tt}from"./Full_Cast_Tile-CJX3OvfU.js";import"./trash-BnpXJPEK.js";import"./arrow_forward-CHD_SwLW.js";function pe({conflictResponseDate:v,actor:X}){return s.jsx("div",{className:"ConflictDisplayTile ",id:"conflict-display-tile-"+X.userId,children:s.jsx("div",{className:"header",children:s.jsxs("div",{className:"CharacterNameDiv",children:[s.jsxs("label",{htmlFor:"Actor",children:["Actor: ",X.name]}),s.jsx("br",{}),s.jsxs("label",{htmlFor:"Actor",children:["Date: ",v.date.toDateString()]}),s.jsx("br",{}),v.canAttend?s.jsxs("label",{htmlFor:"Actor",children:[v.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",v.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):s.jsx("label",{htmlFor:"Actor",children:"Can't Attend"})]})})})}ye(document.getElementById("root")).render(s.jsx(u.StrictMode,{children:s.jsx(st,{})}));function st(){const[v,X]=u.useState(""),[l,xe]=u.useState(),[W,be]=u.useState(""),[i,Ce]=u.useState(),[z,g]=u.useState("date"),[M,D]=u.useState(null),[R,T]=u.useState(null),[B,w]=u.useState(null),[H,N]=u.useState("custom"),[K,x]=u.useState(""),[Q,L]=u.useState(""),[ve,E]=u.useState(""),[De,k]=u.useState(""),[y,$]=u.useState(void 0),[Ie,ce]=u.useState(!1),[J,Z]=u.useState([]),[ee,te]=u.useState([]),[m,f]=u.useState([]),[re,G]=u.useState(!1),[p,Te]=u.useState([]),[ie,h]=u.useState([]),[le,we]=u.useState(!1),[I,A]=u.useState(null),[F,se]=u.useState(!1),[Ee,ke]=u.useState(null),[Y,O]=u.useState(),[P,_]=u.useState(void 0),[ne,Se]=u.useState(!1),[de,ue]=u.useState(!1),[fe,Ae]=u.useState([]),[b,Fe]=u.useState(void 0),[je,oe]=u.useState(!1),[V,me]=u.useState("Layout");u.useEffect(()=>{Me(()=>{});const a=new URLSearchParams(window.location.search),c=a.get("activityId");c&&(X(c),$e(c).then(t=>{t instanceof Re||(xe(t),O(t==null?void 0:t.rehearsalLocations[0]),_(t==null?void 0:t.eventTypes[0]),$(t==null?void 0:t.defaultLocation))}));const e=a.get("showId");e&&(be(e),Ge(c,e).then(t=>{const n=[];for(const r of t)for(const d of r.dates)n.find(S=>S.conflictResponseDate.date.getTime()==d.date.getTime()&&S.actor.userId==r.actor.userId)||n.push({conflictResponseDate:d,actor:r.actor});n.sort((r,d)=>r.conflictResponseDate.date.getTime()-d.conflictResponseDate.date.getTime()),Te(n),h([...n])})),Ye(c,e).then(t=>{Ce(t),t!=null&&t.hasEnsemble&&Ae(t.ensemble.actors)}),Oe(c,e).then(t=>{Z(t);const n=[];for(const r of t){console.log(r);const d=r.date.from;console.log(r.date.date),d.setDate(r.date.date.getDate()),d.setMonth(r.date.date.getMonth()),d.setFullYear(r.date.date.getFullYear());const S=r.date.to;S.setDate(r.date.date.getDate()),S.setMonth(r.date.date.getMonth()),S.setFullYear(r.date.date.getFullYear()),console.log(d),console.log(S),console.log(r.rehearsalLocation.color),n.push({title:r.name,start:d.toISOString(),end:S.toISOString(),isAllDay:!1,interactive:!0,color:r.rehearsalLocation.color.setAlpha(.8).toHex(),description:r.info,id:r.id,location:r.rehearsalLocation.name})}te(n)});const o=()=>{window.innerWidth<800?Se(!0):Se(!1)};return window.addEventListener("resize",o),o(),()=>window.removeEventListener("resize",o)},[]);const Ne=a=>{const c=a.target.value,[e,o]=c.split(":").map(Number),t=new Date(M);t.setHours(e,o,0,0),T(t),E(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},Le=a=>{const c=a.target.value,[e,o]=c.split(":").map(Number),t=new Date(M);t.setHours(e,o,0,0),w(t),k(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};Date.prototype.addHours=function(a){return this.setTime(this.getTime()+a*60*60*1e3),this};function ae(){return J}return s.jsxs("div",{className:"center",children:[s.jsx("h1",{className:"title",children:"Create Schedule"}),z=="date"?s.jsxs("div",{className:"page-title",children:[s.jsx("img",{src:ge,alt:"back arrow",onClick:()=>{window.location.href="/Activity/Shows/Show/?activityId="+v+"&showId="+W}}),s.jsx("h2",{className:"mode",children:"Select a Date"})," "]}):s.jsx(s.Fragment,{}),s.jsxs("div",{className:"container",children:[z=="date"?s.jsx(s.Fragment,{children:s.jsxs("div",{className:"box left",children:[s.jsxs("h2",{children:["Conflicts",I!=null?" on "+I.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&s.jsxs(s.Fragment,{children:[s.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),s.jsxs("label",{className:"custom-checkbox",children:[s.jsx("input",{type:"checkbox",id:"ensemble",checked:de,onChange:a=>{if(ue(a.target.checked),a.target.checked){const c=[];for(const e of p)fe.find(o=>o.userId==e.actor.userId)||(I!=null?e.conflictResponseDate.date.getTime()==I.getTime()&&c.push(e):c.push(e));h(c)}else if(I!=null){const c=[];for(const e of p)e.conflictResponseDate.date.getTime()==I.getTime()&&c.push(e);h(c)}else h([...p])}}),s.jsx("span",{className:"checkmark",children:" "})]})," "]}),s.jsx("div",{className:"conflicts",children:ie.map((a,c)=>s.jsx(pe,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},c))})]})}):s.jsx(s.Fragment,{}),s.jsx("div",{className:z!="date"?"datePicker hidden":"datePicker",children:s.jsx(Qe,{canViewConflicts:!0,canPaste:b!=null,canCopy:!0,copyEvent:a=>{const c=ae().find(e=>e.id==a.id);Fe(c)},pasteEvent:a=>{const c=new Date(a);c.setHours(0,0,0,0),D(c),T(new Date(b.date.from)),E(b.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const e=new Date(b.date.to);w(e),console.log(e),k(e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),x(b.name),L(b.info),$(b.location),O(b.rehearsalLocation),f(b.characters),_(b.activityEventType),N(b.theaterEventType),g("info"),oe(!0)},isCreating:!0,canOpenContextMenu:!0,events:ee,editEvent:a=>{const c=ae().find(e=>e.id==a.id);c&&(console.log(c),g("info"),x(c.name),L(c.info),D(c.date.date),T(c.date.from),E(c.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),w(c.date.to),k(c.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),$(c.location),O(c.rehearsalLocation),f(c.characters),_(c.activityEventType),se(!0),N(c.theaterEventType),ke(c))},viewEvent:a=>{const c=ae().find(e=>e.id==a.id);c&&(localStorage.setItem("event",JSON.stringify(c.toMap())),localStorage.setItem("back","/Activity/Shows/Show/CreateSchedule/?activityId="+v+"&showId="+W),window.location.href="/Calendar/Event/")},viewConflicts:a=>{const c=new Date(a);c.setHours(0,0,0,0),A(c);const e=[];for(const o of p)o.conflictResponseDate.date.getTime()==c.getTime()&&e.push(o);h(e)},deleteEvent:async a=>{console.log(a);const c=J.find(t=>t.id==a.id),e=J.filter(t=>t.id!=a.id);Z(e);const o=ee.filter(t=>t.id!=a.id);te(o),await Pe(c)},dateClick:a=>{console.log(a.date),D(a.date);const c=new Date(a.date);c.setHours(0,0,0,0),A(c);const e=[];for(const t of p)t.conflictResponseDate.date.getTime()==c.getTime()&&e.push(t);h(e),T(new Date(a.date)),E(a.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(a.date);w(o.addHours(1)),console.log(o),k(a.date.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),g("type")},eventClick:a=>{if(ne){const t=ae().find(n=>n.id==a.event.id);t&&(localStorage.setItem("event",JSON.stringify(t.toMap())),localStorage.setItem("back","/Activity/Shows/Show/CreateSchedule/?activityId="+v+"&showId="+W),window.location.href="/Calendar/Event/");return}D(a.event.start);const c=new Date(a.event.start);c.setHours(0,0,0,0),A(c);const e=[];for(const t of p)t.conflictResponseDate.date.getTime()==c.getTime()&&e.push(t);h(e),T(new Date(a.event.start)),E(a.event.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(a.event.end);w(o),k(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),g("type")}})}),z=="date"?s.jsx(s.Fragment,{}):s.jsx(s.Fragment,{})]}),z=="date"?s.jsxs(s.Fragment,{children:[ne&&s.jsx("button",{className:"ActionBtn",onClick:()=>{const a=new Date;console.log(a),D(a);const c=new Date(a);c.setHours(0,0,0,0),A(c);const e=[];for(const t of p)t.conflictResponseDate.date.getTime()==c.getTime()&&e.push(t);h(e),T(new Date(a)),E(a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(a);w(o.addHours(1)),console.log(o),k(a.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),g("type")},children:"Create Event"}),s.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(J)),window.open("/Activity/Shows/Show/Schedule/Print/","_blank")},children:"Print"}),s.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/Shows/Show/?activityId="+v+"&showId="+W},children:"Back"})]}):z=="type"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"page-title",children:[s.jsx("img",{src:ge,alt:"back arrow",onClick:()=>{g("date"),A(null),h([...p])}}),s.jsx("h2",{className:"mode",children:F?"Add Characters from Show":"Select a Rehersal Type"})]}),!ne&&s.jsxs("div",{className:"conflicts-div",children:[s.jsxs("h2",{children:["Conflicts",I!=null?" on "+I.toDateString():""]}),s.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),(i==null?void 0:i.hasEnsemble)&&s.jsx(s.Fragment,{children:s.jsxs("label",{className:"custom-checkbox",children:[s.jsx("input",{type:"checkbox",id:"ensemble",checked:de,onChange:a=>{if(ue(a.target.checked),a.target.checked){const c=[],e=new Date(M);e.setHours(0,0,0,0);for(const o of p)fe.find(t=>t.userId==o.actor.userId)||o.conflictResponseDate.date.getTime()==e.getTime()&&c.push(o);h(c)}}}),s.jsx("span",{className:"checkmark",children:" "})]})}),s.jsx("div",{className:"conflicts",children:ie.map((a,c)=>s.jsx(pe,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},c))})]}),!F&&s.jsx("button",{onClick:()=>{g("info"),N("custom"),f([])},className:"ActionBtn",children:"Custom"}),s.jsxs("div",{className:"sections",children:[s.jsx("h2",{className:"section "+(V=="Layout"?"selected":""),onClick:()=>{me("Layout")},children:"Layout"}),i!=null&&i.dances.length>0&&s.jsx("h2",{className:"section "+(V=="Songs"?"selected":""),onClick:()=>{me("Songs")},children:"Songs"}),i!=null&&(i==null?void 0:i.songs.length)>0&&s.jsx("h2",{className:"section "+(V=="Dances"?"selected":""),onClick:()=>{me("Dances")},children:"Dances"})]}),V=="Layout"&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"mode",children:"Show Layout"}),s.jsx("div",{className:"layout",children:i==null?void 0:i.layout.map((a,c)=>s.jsx(ze,{act:a,onClick:e=>{N("scene"),x(e.name+" - "+a.name),g("info"),f(F?n=>[...n,...e.characters]:e.characters);const o=[];for(const n of[...e.characters,m])if(n instanceof j)o.includes(n.actor.userId)&&o.push(n.actor.userId);else if(n instanceof U){for(const r of n.characters)if(r instanceof j)o.includes(r.actor.userId)&&o.push(r.actor.userId);else if(r instanceof C){if(r.includeAll)for(const d of i.ensemble.actors)o.includes(d.userId)&&o.push(d.userId);else if(r.includeMale)for(const d of i.ensemble.actors)d.gender=="male"&&o.includes(d.userId)&&o.push(d.userId);else if(r.includeFemale)for(const d of i.ensemble.actors)d.gender=="female"&&o.includes(d.userId)&&o.push(d.userId);else if(r.includeCustom)for(const d of r.customActors)o.includes(d.userId)&&o.push(d.userId)}}else if(n instanceof C){if(n.includeAll)for(const r of i.ensemble.actors)o.includes(r.userId)&&o.push(r.userId);else if(n.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&o.includes(r.userId)&&o.push(r.userId);else if(n.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&o.includes(r.userId)&&o.push(r.userId);else if(n.includeCustom)for(const r of n.customActors)o.includes(r.userId)&&o.push(r.userId)}else if(n instanceof q){for(const r of i.ensemble.actors)o.includes(r.userId)&&o.push(r.userId);for(const r of i.characters)o.includes(r.actor.userId)||o.push(r.actor.userId)}const t=[];for(const n of p)o.includes(n.actor.userId)&&n.conflictResponseDate.date.getTime()==I.getTime()&&t.push(n);h(t)}},c))})," "]}),V=="Songs"&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"mode",children:"Songs"}),s.jsx("div",{className:"songs",children:i==null?void 0:i.songs.map((a,c)=>s.jsx(Je,{song:a,onClick:()=>{N("song"),x(a.name),f(F?t=>[...t,...a.characters]:a.characters),g("info");const e=[];for(const t of[...a.characters,m])if(t instanceof j)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof U){for(const n of t.characters)if(n instanceof j)e.includes(n.actor.userId)&&e.push(n.actor.userId);else if(n instanceof C){if(n.includeAll)for(const r of i.ensemble.actors)e.includes(r.userId)&&e.push(r.userId);else if(n.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&e.includes(r.userId)&&e.push(r.userId);else if(n.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&e.includes(r.userId)&&e.push(r.userId);else if(n.includeCustom)for(const r of n.customActors)e.includes(r.userId)&&e.push(r.userId)}}else if(t instanceof C){if(t.includeAll)for(const n of i.ensemble.actors)e.includes(n.userId)&&e.push(n.userId);else if(t.includeMale)for(const n of i.ensemble.actors)n.gender=="male"&&e.includes(n.userId)&&e.push(n.userId);else if(t.includeFemale)for(const n of i.ensemble.actors)n.gender=="female"&&e.includes(n.userId)&&e.push(n.userId);else if(t.includeCustom)for(const n of t.customActors)e.includes(n.userId)&&e.push(n.userId)}else if(t instanceof q){for(const n of i.ensemble.actors)e.includes(n.userId)&&e.push(n.userId);for(const n of i.characters)e.includes(n.actor.userId)||e.push(n.actor.userId)}const o=[];for(const t of p)e.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==I.getTime()&&o.push(t);h(o)}},c))})," "]}),V=="Dances"&&s.jsxs(s.Fragment,{children:[" ",s.jsx("h2",{className:"mode",children:"Dances"}),s.jsx("div",{className:"dances",children:i==null?void 0:i.dances.map((a,c)=>s.jsx(Ve,{dance:a,onClick:()=>{N("dance"),x(a.name),g("info"),f(F?t=>[...t,...a.characters]:a.characters);const e=[];for(const t of[...a.characters,m])if(t instanceof j)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof U){for(const n of t.characters)if(n instanceof j)e.includes(n.actor.userId)&&e.push(n.actor.userId);else if(n instanceof C){if(n.includeAll)for(const r of i.ensemble.actors)e.includes(r.userId)&&e.push(r.userId);else if(n.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&e.includes(r.userId)&&e.push(r.userId);else if(n.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&e.includes(r.userId)&&e.push(r.userId);else if(n.includeCustom)for(const r of n.customActors)e.includes(r.userId)&&e.push(r.userId)}}else if(t instanceof C){if(t.includeAll)for(const n of i.ensemble.actors)e.includes(n.userId)&&e.push(n.userId);else if(t.includeMale)for(const n of i.ensemble.actors)n.gender=="male"&&e.includes(n.userId)&&e.push(n.userId);else if(t.includeFemale)for(const n of i.ensemble.actors)n.gender=="female"&&e.includes(n.userId)&&e.push(n.userId);else if(t.includeCustom)for(const n of t.customActors)e.includes(n.userId)&&e.push(n.userId)}else if(t instanceof q){for(const n of i.ensemble.actors)e.push(n.userId);for(const n of i.characters)e.includes(n.actor.userId)||e.push(n.actor.userId)}const o=[];for(const t of p)e.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==I.getTime()&&o.push(t);h(o)}},c))})," "]}),s.jsx("button",{onClick:()=>{if(F){g("info");return}g("date"),A(null),h([...p])},className:"ActionBtn",children:"Back"})]}):s.jsxs(s.Fragment,{children:[!ne&&s.jsxs("div",{className:"conflicts-div",children:[s.jsxs("h2",{children:["Conflicts",I!=null?" on "+I.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&s.jsxs(s.Fragment,{children:[s.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),s.jsxs("label",{className:"custom-checkbox",children:[s.jsx("input",{type:"checkbox",id:"ensemble",checked:de,onChange:a=>{if(ue(a.target.checked),a.target.checked){const c=[],e=[];for(const o of m)if(o instanceof j)e.includes(o.actor.userId)&&e.push(o.actor.userId);else if(o instanceof U){for(const t of o.characters)if(t instanceof j)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t.includeAll)for(const n of i.ensemble.actors)e.includes(n.userId)&&e.push(n.userId);else if(t.includeMale)for(const n of i.ensemble.actors)n.gender=="male"&&e.includes(n.userId)&&e.push(n.userId);else if(t.includeFemale)for(const n of i.ensemble.actors)n.gender=="female"&&e.includes(n.userId)&&e.push(n.userId);else if(t.includeCustom)for(const n of t.customActors)e.includes(n.userId)&&e.push(n.userId)}else if(o instanceof C){if(o.includeAll)for(const t of i.ensemble.actors)e.includes(t.userId)&&e.push(t.userId);else if(o.includeMale)for(const t of i.ensemble.actors)t.gender=="male"&&e.includes(t.userId)&&e.push(t.userId);else if(o.includeFemale)for(const t of i.ensemble.actors)t.gender=="female"&&e.includes(t.userId)&&e.push(t.userId);else if(o.includeCustom)for(const t of o.customActors)e.includes(t.userId)&&e.push(t.userId)}else{for(const t of i.ensemble.actors)e.push(t.userId);for(const t of i.characters)e.includes(t.actor.userId)||e.push(t.actor.userId)}for(const o of p)fe.find(t=>t.userId==o.actor.userId)||e.includes(o.actor.userId)&&o.conflictResponseDate.date.getTime()==I.getTime()&&c.push(o);h(c)}}}),s.jsx("span",{className:"checkmark",children:" "})]})," "]}),s.jsx("div",{className:"conflicts",children:ie.map((a,c)=>s.jsx(pe,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},c))})]}),s.jsxs("div",{className:"page-title",children:[s.jsx("img",{src:ge,alt:"back arrow",onClick:()=>{if(F){g("date"),D(null),T(null),w(null),N("custom"),x(""),L(""),E(""),k(""),O(l==null?void 0:l.rehearsalLocations[0]),_(l==null?void 0:l.eventTypes[0]),$(l==null?void 0:l.defaultLocation),G(!1),A(null),h(p),se(!1);return}je?(oe(!1),g("date")):g("type"),L(""),x(""),G(!1);const a=[];for(const c of p)c.conflictResponseDate.date.getTime()==I.getTime()&&a.push(c);h(a)}}),s.jsx("h2",{className:"mode",children:"Enter Rehersal Information"})]}),s.jsx("label",{htmlFor:"Name",children:"Name: "}),s.jsx("input",{type:"text",value:K,onChange:a=>{x(a.target.value)}}),s.jsx("br",{}),s.jsx("label",{htmlFor:"Description",children:"Description: "}),s.jsx("textarea",{value:Q,onChange:a=>{L(a.target.value)}}),s.jsx("br",{}),s.jsx("label",{htmlFor:"",children:"Date: "}),s.jsx("input",{type:"date",value:M==null?void 0:M.toISOString().split("T")[0],onChange:a=>{const c=new Date(a.target.value);if(c=="Invalid Date"){D(null);return}c.setHours(0,0,0,0),c.setDate(c.getDate()+1),D(c);const e=new Date(c);e.setHours(R.getHours(),R.getMinutes(),0,0),T(e),E(e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(c);o.setHours(B.getHours(),B.getMinutes(),0,0),w(o),k(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),A(c);const t=[];for(const n of p)n.conflictResponseDate.date.getTime()==c.getTime()&&t.push(n);h(t)}}),s.jsx("br",{}),s.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),s.jsx("input",{type:"time",value:ve,onChange:Ne}),s.jsx("br",{}),s.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),s.jsx("input",{type:"time",value:De,onChange:Le}),s.jsx("br",{}),s.jsx("label",{htmlFor:"location",children:"Location: "}),s.jsx("select",{name:"location",id:"location",onChange:a=>{$(l==null?void 0:l.locations.find(c=>c.name==a.target.value))},children:l==null?void 0:l.locations.map((a,c)=>s.jsx("option",{value:a.name,selected:(y==null?void 0:y.name)==a.name,children:a.name+" ("+a.address+")"},c))}),s.jsx("br",{}),s.jsx("label",{htmlFor:"location",children:"Rehersal Location: "}),s.jsx("select",{name:"location",id:"rehersal-location",onChange:a=>{O(l==null?void 0:l.rehearsalLocations.find(c=>c.name==a.target.value))},children:l==null?void 0:l.rehearsalLocations.map((a,c)=>s.jsx("option",{value:a.name,selected:(Y==null?void 0:Y.name)==a.name,children:a.name},c))}),s.jsx("br",{}),s.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),s.jsx("select",{name:"eventType",id:"event-type",onChange:a=>{_(l==null?void 0:l.eventTypes.find(c=>c.name==a.target.value))},children:l==null?void 0:l.eventTypes.map((a,c)=>s.jsx("option",{value:a.name,selected:(P==null?void 0:P.name)==a.name,children:a.name},c))}),s.jsx("br",{}),H=="custom"?s.jsxs(s.Fragment,{children:[s.jsx("label",{htmlFor:"fullCast",children:"Full Cast: "}),s.jsxs("label",{className:"custom-checkbox",children:[s.jsx("input",{type:"checkbox",id:"ensemble",checked:le,onChange:a=>we(a.target.checked)}),s.jsx("span",{className:"checkmark"})]})]}):s.jsx(s.Fragment,{}),H=="custom"&&s.jsx("br",{}),le?s.jsx(s.Fragment,{}):s.jsxs(s.Fragment,{children:[" ",s.jsx("h2",{children:"Characters"}),s.jsx("div",{className:"characters",children:m.map((a,c)=>{if(a instanceof j)return H=="custom"?s.jsx(Xe,{character:a,isCreate:!1,actors:[],characters:i.characters,isAssign:!1,setCharacter:e=>{f(m.map((o,t)=>t===c?e:o))},removeCharacter:()=>{f(m.filter((e,o)=>o!==c))}},c):s.jsx(qe,{character:a,canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==c))},isMini:!1},c);if(a instanceof C)return H=="custom"?s.jsx(et,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:a,isCustom:!0,setEnsembleSection:e=>{f(m.map((o,t)=>t===c?e:o))},removeEnsembleSection:()=>{f(m.filter((e,o)=>o!==c)),G(!1)},isCreate:!1,isAssign:!1,actors:l.students},c):s.jsx(We,{ensembleSection:a,canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==c))},isMini:!1},c);if(a instanceof U)return H=="custom"?s.jsx(Ze,{showGroup:a,characters:i.characters,setShowGroup:e=>{f(m.map((o,t)=>t===c?e:o))},removeShowGroup:()=>{f(m.filter((e,o)=>o!==c))},isCreate:!1,isAssign:!1,actors:l.students,hasEnsemble:i.hasEnsemble,showGroups:i.showGroups},c):s.jsx(Ke,{showGroup:a,showCharacters:!0,canClick:!1,onClick:()=>{},canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==c))}},c);if(a instanceof q)return s.jsx(tt,{canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==c))}},c)})}),H=="custom"?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);f([...m,j.fromBlank("Character 1",null,a)])},children:"Add Character"}),s.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);f([...m,U.fromBlank("Show Group 1",[],a)])},children:"Add Show Group"}),(i==null?void 0:i.hasEnsemble)&&s.jsx("button",{className:"ActionBtn "+(re?"disabled":""),disabled:re,onClick:()=>{re||(G(!0),f([...m,C.fromBlank(!0,!1,!1,!1,[])]))},children:"Add Ensemble"})," "]}):s.jsx(s.Fragment,{children:s.jsx("button",{className:"ActionBtn",onClick:()=>{g("type")},children:"Add Characters from Show Template"})})," "]}),s.jsx("br",{}),Ie?s.jsx("div",{className:"loader"}):s.jsx("button",{onClick:async()=>{if(ce(!0),console.log(`Name: ${K}, Description: ${Q}, Start Time: ${R}, End Time: ${B}, Selected Location: ${y}, Rehearsal Location: ${Y}, Event Type: ${P}`),K==""||Q==""||R==null||B==null||y==null||Y==null||P==null){alert("Please fill out all fields"),console.log(`Name: ${K}, Description: ${Q}, Start Time: ${R}, End Time: ${B}, Selected Location: ${y}, Rehearsal Location: ${Y}, Event Type: ${P}`),ce(!1);return}console.log("Submit");const a=y??l.locations[0];console.log(R),console.log(B);const c=Be.fromBlank(M,R,B);console.log(c.toMap());const e=[];if(le){if(m.push(new q),i!=null&&i.hasEnsemble&&(i==null?void 0:i.ensemble)!=null)for(const t of i.ensemble.actors)e.push(t);for(const t of i.characters)e.find(n=>n.userId==t.actor.userId)==null&&e.push(t.actor)}else for(const t of m){if(t instanceof q){for(const n of i.ensemble.actors)e.push(n);for(const n of i.characters)e.find(r=>r.userId==n.actor.userId)==null&&e.push(n.actor);break}if(t instanceof j){if(e.find(n=>n.userId==t.actor.userId)!=null)continue;e.push(t.actor)}if(t instanceof C){if(t.includeAll)for(const n of i.ensemble.actors)e.find(r=>r.userId==n.userId)==null&&e.push(n);else if(t.includeMale){for(const n of i.ensemble.actors)if(n.gender=="male"){if(e.find(r=>r.userId==n.userId)!=null)continue;e.push(n)}}else if(t.includeFemale){for(const n of i.ensemble.actors)if(n.gender=="female"){if(e.find(r=>r.userId==n.userId)!=null)continue;e.push(n)}}else if(t.includeCustom)for(const n of t.customActors)e.find(r=>r.userId==n.userId)==null&&e.push(n)}if(t instanceof U)for(const n of t.characters){if(n instanceof j){if(e.find(r=>r.userId==n.actor.userId)!=null)continue;e.push(n.actor)}if(n instanceof C){if(n.includeAll)for(const r of i.ensemble.actors)e.find(d=>d.userId==r.userId)==null&&e.push(r);else if(n.includeMale){for(const r of i.ensemble.actors)if(r.gender=="male"){if(e.find(d=>d.userId==r.userId)!=null)continue;e.push(r)}}else if(n.includeFemale){for(const r of i.ensemble.actors)if(r.gender=="female"){if(e.find(d=>d.userId==r.userId)!=null)continue;e.push(r)}}else if(n.includeCustom)for(const r of n.customActors)e.find(d=>d.userId==r.userId)==null&&e.push(r)}}}const o=He.fromBlank(K,Q,a,c,"activity-theater-event",Date.now(),v,l.name,W,i.name,m,e,H,P,Y);if(console.log(o),F){o.id=Ee.id,await _e(o),se(!1);const t=o.date.from,n=o.date.to;t.setDate(o.date.date.getDate()),t.setMonth(o.date.date.getMonth()),t.setFullYear(o.date.date.getFullYear()),n.setDate(o.date.date.getDate()),n.setMonth(o.date.date.getMonth()),n.setFullYear(o.date.date.getFullYear());const r={title:o.name,start:t.toISOString(),end:n.toISOString(),isAllDay:!1,interactive:!0,description:o.info,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),location:o.rehearsalLocation.name,id:o.id},d=ee.filter(he=>he.id!=o.id);d.push(r),te(d);const S=J.filter(he=>he.id!=o.id);S.push(o),console.log(S),Z([...S])}else{await Ue(o);const t=o.date.from,n=o.date.to;t.setDate(o.date.date.getDate()),t.setMonth(o.date.date.getMonth()),t.setFullYear(o.date.date.getFullYear()),n.setDate(o.date.date.getDate()),n.setMonth(o.date.date.getMonth()),n.setFullYear(o.date.date.getFullYear());const r={title:o.name,start:t.toISOString(),end:n.toISOString(),isAllDay:!1,interactive:!0,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),id:o.id,location:o.rehearsalLocation.name,description:o.info};te([...ee,r]),Z([...J,o])}ce(!1),g("date"),D(null),T(null),w(null),N("custom"),x(""),L(""),E(""),k(""),O(l==null?void 0:l.rehearsalLocations[0]),_(l==null?void 0:l.eventTypes[0]),$(l==null?void 0:l.defaultLocation),f([]),G(!1),A(null),h(p),oe(!1)},className:"ActionBtn",children:F?"Save":"Submit"}),!Ie&&s.jsx("button",{onClick:()=>{if(F){g("date"),D(null),T(null),w(null),N("custom"),x(""),L(""),E(""),k(""),O(l==null?void 0:l.rehearsalLocations[0]),_(l==null?void 0:l.eventTypes[0]),$(l==null?void 0:l.defaultLocation),G(!1),A(null),h(p),se(!1);return}je?(oe(!1),g("date")):g("type"),L(""),x(""),G(!1);const a=[];for(const c of p)c.conflictResponseDate.date.getTime()==I.getTime()&&a.push(c);h(a)},className:"ActionBtn",children:"Back"})]})]})}
