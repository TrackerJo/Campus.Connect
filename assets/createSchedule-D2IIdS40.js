import{j as t,c as Ne,r as u,i as Le,m as Me,C as x,e as _,E as S,F as J,n as ye,o as Re}from"./index-Dxkwjn9p.js";import{h as Be,v as He,p as $e,w as Ge,x as Ye,y as Oe,z as Pe}from"./db-Lpff6m6P.js";import{A as _e,S as Ue,D as ze,C as Je,E as Ve,a as We}from"./Show_Group_Display_Tile-D4B0tAUF.js";import{B as fe,C as qe}from"./Calendar-B5gyV4Ol.js";import{C as Ke,S as Qe}from"./Show_Group_Tile-2Wq01eAP.js";import{E as Xe}from"./Ensemble_Section_Tile-DTxZsvb-.js";import{F as Ze}from"./Full_Cast_Tile-CkV54VzP.js";import"./trash-BnpXJPEK.js";import"./arrow_forward-CHD_SwLW.js";function he({conflictResponseDate:C,actor:q}){return t.jsx("div",{className:"ConflictDisplayTile ",id:"conflict-display-tile-"+q.userId,children:t.jsx("div",{className:"header",children:t.jsxs("div",{className:"CharacterNameDiv",children:[t.jsxs("label",{htmlFor:"Actor",children:["Actor: ",q.name]}),t.jsx("br",{}),t.jsxs("label",{htmlFor:"Actor",children:["Date: ",C.date.toDateString()]}),t.jsx("br",{}),C.canAttend?t.jsxs("label",{htmlFor:"Actor",children:[C.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",C.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):t.jsx("label",{htmlFor:"Actor",children:"Can't Attend"})]})})})}Ne(document.getElementById("root")).render(t.jsx(u.StrictMode,{children:t.jsx(et,{})}));function et(){const[C,q]=u.useState(""),[l,Ie]=u.useState(),[K,xe]=u.useState(""),[i,je]=u.useState(),[U,p]=u.useState("date"),[M,F]=u.useState(null),[y,v]=u.useState(null),[R,D]=u.useState(null),[B,T]=u.useState("custom"),[V,j]=u.useState(""),[W,N]=u.useState(""),[be,w]=u.useState(""),[Se,E]=u.useState(""),[L,H]=u.useState(void 0),[Ce,ne]=u.useState(!1),[z,Q]=u.useState([]),[X,Z]=u.useState([]),[h,f]=u.useState([]),[oe,$]=u.useState(!1),[g,ve]=u.useState([]),[ae,m]=u.useState([]),[ce,De]=u.useState(!1),[I,k]=u.useState(null),[ee,te]=u.useState(!1),[Te,we]=u.useState(null),[G,Y]=u.useState(),[O,P]=u.useState(void 0),[me,pe]=u.useState(!1),[re,ie]=u.useState(!1),[le,Ee]=u.useState([]),[b,ke]=u.useState(void 0),[ge,se]=u.useState(!1);u.useEffect(()=>{Le(()=>{});const a=new URLSearchParams(window.location.search),c=a.get("activityId");c&&(q(c),Be(c).then(s=>{s instanceof Me||(Ie(s),Y(s==null?void 0:s.rehearsalLocations[0]),P(s==null?void 0:s.eventTypes[0]),H(s==null?void 0:s.defaultLocation))}));const e=a.get("showId");e&&(xe(e),He(c,e).then(s=>{const n=[];for(const r of s)for(const d of r.dates)n.push({conflictResponseDate:d,actor:r.actor});n.sort((r,d)=>r.conflictResponseDate.date.getTime()-d.conflictResponseDate.date.getTime()),ve(n),m([...n])})),$e(c,e).then(s=>{je(s),s!=null&&s.hasEnsemble&&Ee(s.ensemble.actors)}),Ge(c,e).then(s=>{Q(s);const n=[];for(const r of s){console.log(r);const d=r.date.from;console.log(r.date.date),d.setDate(r.date.date.getDate()),d.setMonth(r.date.date.getMonth()),d.setFullYear(r.date.date.getFullYear());const A=r.date.to;A.setDate(r.date.date.getDate()),A.setMonth(r.date.date.getMonth()),A.setFullYear(r.date.date.getFullYear()),console.log(d),console.log(A),console.log(r.rehearsalLocation.color),n.push({title:r.name,start:d.toISOString(),end:A.toISOString(),isAllDay:!1,interactive:!0,color:r.rehearsalLocation.color.setAlpha(.8).toHex(),description:r.info,id:r.id,location:r.rehearsalLocation.name})}Z(n)});const o=()=>{window.innerWidth<800?pe(!0):pe(!1)};return window.addEventListener("resize",o),o(),()=>window.removeEventListener("resize",o)},[]);const Ae=a=>{const c=a.target.value,[e,o]=c.split(":").map(Number),s=new Date(M);s.setHours(e,o,0,0),v(s),w(s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},Fe=a=>{const c=a.target.value,[e,o]=c.split(":").map(Number),s=new Date(M);s.setHours(e,o,0,0),D(s),E(s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};Date.prototype.addHours=function(a){return this.setTime(this.getTime()+a*60*60*1e3),this};function de(){return z}return t.jsxs("div",{className:"center",children:[t.jsx("h1",{className:"title",children:"Create Schedule"}),U=="date"?t.jsxs("div",{className:"page-title",children:[t.jsx("img",{src:fe,alt:"back arrow",onClick:()=>{window.location.href="/Activity/Shows/Show/?activityId="+C+"&showId="+K}}),t.jsx("h2",{className:"mode",children:"Select a Date"})," "]}):t.jsx(t.Fragment,{}),t.jsxs("div",{className:"container",children:[U=="date"?t.jsx(t.Fragment,{children:t.jsxs("div",{className:"box left",children:[t.jsxs("h2",{children:["Conflicts",I!=null?" on "+I.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&t.jsxs(t.Fragment,{children:[t.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),t.jsxs("label",{className:"custom-checkbox",children:[t.jsx("input",{type:"checkbox",id:"ensemble",checked:re,onChange:a=>{if(ie(a.target.checked),a.target.checked){const c=[];for(const e of g)le.find(o=>o.userId==e.actor.userId)||c.push(e);m(c)}}}),t.jsx("span",{className:"checkmark",children:" "})]})," "]}),t.jsx("div",{className:"conflicts",children:ae.map((a,c)=>t.jsx(he,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},c))})]})}):t.jsx(t.Fragment,{}),t.jsx("div",{className:U!="date"?"datePicker hidden":"datePicker",children:t.jsx(qe,{canViewConflicts:!0,canPaste:b!=null,canCopy:!0,copyEvent:a=>{const c=de().find(e=>e.id==a.id);ke(c)},pasteEvent:a=>{const c=new Date(a);c.setHours(0,0,0,0),F(c),v(new Date(b.date.from)),w(b.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const e=new Date(b.date.to);D(e),console.log(e),E(e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),j(b.name),N(b.info),H(b.location),Y(b.rehearsalLocation),f(b.characters),P(b.activityEventType),T(b.theaterEventType),p("info"),se(!0)},isCreating:!0,canOpenContextMenu:!0,events:X,editEvent:a=>{const c=de().find(e=>e.id==a.id);c&&(console.log(c),p("info"),j(c.name),N(c.info),F(c.date.date),v(c.date.from),w(c.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),D(c.date.to),E(c.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),H(c.location),Y(c.rehearsalLocation),f(c.characters),P(c.activityEventType),te(!0),T(c.theaterEventType),we(c))},viewEvent:a=>{const c=de().find(e=>e.id==a.id);c&&(localStorage.setItem("event",JSON.stringify(c.toMap())),localStorage.setItem("back","/Activity/Shows/Show/CreateSchedule/?activityId="+C+"&showId="+K),window.location.href="/Calendar/Event/")},viewConflicts:a=>{const c=new Date(a);c.setHours(0,0,0,0),k(c);const e=[];for(const o of g)o.conflictResponseDate.date.getTime()==c.getTime()&&e.push(o);m(e)},deleteEvent:async a=>{console.log(a);const c=z.find(s=>s.id==a.id),e=z.filter(s=>s.id!=a.id);Q(e);const o=X.filter(s=>s.id!=a.id);Z(o),await Ye(c)},dateClick:a=>{console.log(a.date),F(a.date);const c=new Date(a.date);c.setHours(0,0,0,0),k(c);const e=[];for(const s of g)s.conflictResponseDate.date.getTime()==c.getTime()&&e.push(s);m(e),v(new Date(a.date)),w(a.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(a.date);D(o.addHours(1)),console.log(o),E(a.date.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),p("type")},eventClick:a=>{F(a.event.start);const c=new Date(a.event.start);c.setHours(0,0,0,0),k(c);const e=[];for(const s of g)s.conflictResponseDate.date.getTime()==c.getTime()&&e.push(s);m(e),v(new Date(a.event.start)),w(a.event.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(a.event.end);D(o),E(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),p("type")}})}),U=="date"?t.jsx(t.Fragment,{children:t.jsxs("div",{className:"box right",children:[t.jsx("h2",{children:"How To Schedule Events"}),t.jsxs("ul",{children:[t.jsx("li",{children:"Click a time slot to start creating an event"}),t.jsx("li",{children:"Right click a time slot to view conflicts for that day"}),t.jsx("li",{children:"Right click a current event to view/edit the event or delete the event"})]})]})}):t.jsx(t.Fragment,{})]}),U=="date"?t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(z)),window.open("/Activity/Shows/Show/Schedule/Print/","_blank")},children:"Print"}),t.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/Shows/Show/?activityId="+C+"&showId="+K},children:"Back"})]}):U=="type"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-title",children:[t.jsx("img",{src:fe,alt:"back arrow",onClick:()=>{p("date"),k(null),m([...g])}}),t.jsx("h2",{className:"mode",children:"Select a Rehersal Type"})]}),!me&&t.jsxs("div",{className:"conflicts-div",children:[t.jsxs("h2",{children:["Conflicts",I!=null?" on "+I.toDateString():""]}),t.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),(i==null?void 0:i.hasEnsemble)&&t.jsx(t.Fragment,{children:t.jsxs("label",{className:"custom-checkbox",children:[t.jsx("input",{type:"checkbox",id:"ensemble",checked:re,onChange:a=>{if(ie(a.target.checked),a.target.checked){const c=[],e=new Date(M);e.setHours(0,0,0,0);for(const o of g)le.find(s=>s.userId==o.actor.userId)||o.conflictResponseDate.date.getTime()==e.getTime()&&c.push(o);m(c)}}}),t.jsx("span",{className:"checkmark",children:" "})]})}),t.jsx("div",{className:"conflicts",children:ae.map((a,c)=>t.jsx(he,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},c))})]}),t.jsx("button",{onClick:()=>{p("info"),T("custom"),f([])},className:"ActionBtn",children:"Custom"}),t.jsx("h2",{className:"mode",children:"Show Layout"}),t.jsx("div",{className:"layout",children:i==null?void 0:i.layout.map((a,c)=>t.jsx(_e,{act:a,onClick:e=>{T("scene"),j(e.name+" - "+a.name),p("info"),f(e.characters);const o=[];for(const n of e.characters)if(n instanceof x)o.includes(n.actor.userId)&&o.push(n.actor.userId);else if(n instanceof _){for(const r of n.characters)if(r instanceof x)o.includes(r.actor.userId)&&o.push(r.actor.userId);else if(r instanceof S){if(r.includeAll)for(const d of i.ensemble.actors)o.includes(d.userId)&&o.push(d.userId);else if(r.includeMale)for(const d of i.ensemble.actors)d.gender=="male"&&o.includes(d.userId)&&o.push(d.userId);else if(r.includeFemale)for(const d of i.ensemble.actors)d.gender=="female"&&o.includes(d.userId)&&o.push(d.userId);else if(r.includeCustom)for(const d of r.customActors)o.includes(d.userId)&&o.push(d.userId)}}else if(n instanceof S){if(n.includeAll)for(const r of i.ensemble.actors)o.includes(r.userId)&&o.push(r.userId);else if(n.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&o.includes(r.userId)&&o.push(r.userId);else if(n.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&o.includes(r.userId)&&o.push(r.userId);else if(n.includeCustom)for(const r of n.customActors)o.includes(r.userId)&&o.push(r.userId)}else if(n instanceof J){for(const r of i.ensemble.actors)o.includes(r.userId)&&o.push(r.userId);for(const r of i.characters)o.includes(r.actor.userId)||o.push(r.actor.userId)}const s=[];for(const n of g)o.includes(n.actor.userId)&&n.conflictResponseDate.date.getTime()==I.getTime()&&s.push(n);m(s)}},c))}),t.jsx("h2",{className:"mode",children:"Songs"}),t.jsx("div",{className:"songs",children:i==null?void 0:i.songs.map((a,c)=>t.jsx(Ue,{song:a,onClick:()=>{T("song"),j(a.name),f(a.characters),p("info");const e=[];for(const s of a.characters)if(s instanceof x)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof _){for(const n of s.characters)if(n instanceof x)e.includes(n.actor.userId)&&e.push(n.actor.userId);else if(n instanceof S){if(n.includeAll)for(const r of i.ensemble.actors)e.includes(r.userId)&&e.push(r.userId);else if(n.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&e.includes(r.userId)&&e.push(r.userId);else if(n.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&e.includes(r.userId)&&e.push(r.userId);else if(n.includeCustom)for(const r of n.customActors)e.includes(r.userId)&&e.push(r.userId)}}else if(s instanceof S){if(s.includeAll)for(const n of i.ensemble.actors)e.includes(n.userId)&&e.push(n.userId);else if(s.includeMale)for(const n of i.ensemble.actors)n.gender=="male"&&e.includes(n.userId)&&e.push(n.userId);else if(s.includeFemale)for(const n of i.ensemble.actors)n.gender=="female"&&e.includes(n.userId)&&e.push(n.userId);else if(s.includeCustom)for(const n of s.customActors)e.includes(n.userId)&&e.push(n.userId)}else if(s instanceof J){for(const n of i.ensemble.actors)e.includes(n.userId)&&e.push(n.userId);for(const n of i.characters)e.includes(n.actor.userId)||e.push(n.actor.userId)}const o=[];for(const s of g)e.includes(s.actor.userId)&&s.conflictResponseDate.date.getTime()==I.getTime()&&o.push(s);m(o)}},c))}),t.jsx("h2",{className:"mode",children:"Dances"}),t.jsx("div",{className:"dances",children:i==null?void 0:i.dances.map((a,c)=>t.jsx(ze,{dance:a,onClick:()=>{T("dance"),j(a.name),p("info"),f(a.characters);const e=[];for(const s of a.characters)if(s instanceof x)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof _){for(const n of s.characters)if(n instanceof x)e.includes(n.actor.userId)&&e.push(n.actor.userId);else if(n instanceof S){if(n.includeAll)for(const r of i.ensemble.actors)e.includes(r.userId)&&e.push(r.userId);else if(n.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&e.includes(r.userId)&&e.push(r.userId);else if(n.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&e.includes(r.userId)&&e.push(r.userId);else if(n.includeCustom)for(const r of n.customActors)e.includes(r.userId)&&e.push(r.userId)}}else if(s instanceof S){if(s.includeAll)for(const n of i.ensemble.actors)e.includes(n.userId)&&e.push(n.userId);else if(s.includeMale)for(const n of i.ensemble.actors)n.gender=="male"&&e.includes(n.userId)&&e.push(n.userId);else if(s.includeFemale)for(const n of i.ensemble.actors)n.gender=="female"&&e.includes(n.userId)&&e.push(n.userId);else if(s.includeCustom)for(const n of s.customActors)e.includes(n.userId)&&e.push(n.userId)}else if(s instanceof J){for(const n of i.ensemble.actors)e.push(n.userId);for(const n of i.characters)e.includes(n.actor.userId)||e.push(n.actor.userId)}const o=[];for(const s of g)e.includes(s.actor.userId)&&s.conflictResponseDate.date.getTime()==I.getTime()&&o.push(s);m(o)}},c))}),t.jsx("button",{onClick:()=>{p("date"),k(null),m([...g])},className:"ActionBtn",children:"Back"})]}):t.jsxs(t.Fragment,{children:[!me&&t.jsxs("div",{className:"conflicts-div",children:[t.jsxs("h2",{children:["Conflicts",I!=null?" on "+I.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&t.jsxs(t.Fragment,{children:[t.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),t.jsxs("label",{className:"custom-checkbox",children:[t.jsx("input",{type:"checkbox",id:"ensemble",checked:re,onChange:a=>{if(ie(a.target.checked),a.target.checked){const c=[],e=[];for(const o of h)if(o instanceof x)e.includes(o.actor.userId)&&e.push(o.actor.userId);else if(o instanceof _){for(const s of o.characters)if(s instanceof x)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s.includeAll)for(const n of i.ensemble.actors)e.includes(n.userId)&&e.push(n.userId);else if(s.includeMale)for(const n of i.ensemble.actors)n.gender=="male"&&e.includes(n.userId)&&e.push(n.userId);else if(s.includeFemale)for(const n of i.ensemble.actors)n.gender=="female"&&e.includes(n.userId)&&e.push(n.userId);else if(s.includeCustom)for(const n of s.customActors)e.includes(n.userId)&&e.push(n.userId)}else if(o instanceof S){if(o.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(o.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(o.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(o.includeCustom)for(const s of o.customActors)e.includes(s.userId)&&e.push(s.userId)}else{for(const s of i.ensemble.actors)e.push(s.userId);for(const s of i.characters)e.includes(s.actor.userId)||e.push(s.actor.userId)}for(const o of g)le.find(s=>s.userId==o.actor.userId)||e.includes(o.actor.userId)&&o.conflictResponseDate.date.getTime()==I.getTime()&&c.push(o);m(c)}}}),t.jsx("span",{className:"checkmark",children:" "})]})," "]}),t.jsx("div",{className:"conflicts",children:ae.map((a,c)=>t.jsx(he,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},c))})]}),t.jsxs("div",{className:"page-title",children:[t.jsx("img",{src:fe,alt:"back arrow",onClick:()=>{if(ee){p("date"),F(null),v(null),D(null),T("custom"),j(""),N(""),w(""),E(""),Y(l==null?void 0:l.rehearsalLocations[0]),P(l==null?void 0:l.eventTypes[0]),H(l==null?void 0:l.defaultLocation),$(!1),k(null),m(g),te(!1);return}ge?(se(!1),p("date")):p("type"),N(""),j(""),$(!1);const a=[];for(const c of g)c.conflictResponseDate.date.getTime()==I.getTime()&&a.push(c);m(a)}}),t.jsx("h2",{className:"mode",children:"Enter Rehersal Information"})]}),t.jsx("label",{htmlFor:"Name",children:"Name: "}),t.jsx("input",{type:"text",value:V,onChange:a=>{j(a.target.value)}}),t.jsx("br",{}),t.jsx("label",{htmlFor:"Description",children:"Description: "}),t.jsx("textarea",{value:W,onChange:a=>{N(a.target.value)}}),t.jsx("br",{}),t.jsx("label",{htmlFor:"",children:"Date: "}),t.jsx("input",{type:"date",value:M==null?void 0:M.toISOString().split("T")[0],onChange:a=>{const c=new Date(a.target.value);c.setHours(0,0,0,0),c.setDate(c.getDate()+1),F(c);const e=new Date(c);e.setHours(y.getHours(),y.getMinutes(),0,0),v(e),w(e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(c);o.setHours(R.getHours(),R.getMinutes(),0,0),D(o),E(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),k(c);const s=[];for(const n of g)n.conflictResponseDate.date.getTime()==c.getTime()&&s.push(n);m(s)}}),t.jsx("br",{}),t.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),t.jsx("input",{type:"time",value:be,onChange:Ae}),t.jsx("br",{}),t.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),t.jsx("input",{type:"time",value:Se,onChange:Fe}),t.jsx("br",{}),t.jsx("label",{htmlFor:"location",children:"Location: "}),t.jsx("select",{name:"location",id:"location",onChange:a=>{H(l==null?void 0:l.locations.find(c=>c.name==a.target.value))},children:l==null?void 0:l.locations.map((a,c)=>t.jsx("option",{value:a.name,selected:(L==null?void 0:L.name)==a.name,children:a.name+" ("+a.address+")"},c))}),t.jsx("br",{}),t.jsx("label",{htmlFor:"location",children:"Rehersal Location: "}),t.jsx("select",{name:"location",id:"rehersal-location",onChange:a=>{Y(l==null?void 0:l.rehearsalLocations.find(c=>c.name==a.target.value))},children:l==null?void 0:l.rehearsalLocations.map((a,c)=>t.jsx("option",{value:a.name,selected:(G==null?void 0:G.name)==a.name,children:a.name},c))}),t.jsx("br",{}),t.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),t.jsx("select",{name:"eventType",id:"event-type",onChange:a=>{P(l==null?void 0:l.eventTypes.find(c=>c.name==a.target.value))},children:l==null?void 0:l.eventTypes.map((a,c)=>t.jsx("option",{value:a.name,selected:(O==null?void 0:O.name)==a.name,children:a.name},c))}),t.jsx("br",{}),B=="custom"?t.jsxs(t.Fragment,{children:[t.jsx("label",{htmlFor:"fullCast",children:"Full Cast: "}),t.jsxs("label",{className:"custom-checkbox",children:[t.jsx("input",{type:"checkbox",id:"ensemble",checked:ce,onChange:a=>De(a.target.checked)}),t.jsx("span",{className:"checkmark"})]})]}):t.jsx(t.Fragment,{}),B=="custom"&&t.jsx("br",{}),ce?t.jsx(t.Fragment,{}):t.jsxs(t.Fragment,{children:[" ",t.jsx("h2",{children:"Characters"}),t.jsx("div",{className:"characters",children:h.map((a,c)=>{if(a instanceof x)return B=="custom"?t.jsx(Ke,{character:a,isCreate:!1,actors:[],characters:i.characters,isAssign:!1,setCharacter:e=>{f(h.map((o,s)=>s===c?e:o))},removeCharacter:()=>{f(h.filter((e,o)=>o!==c))}},c):t.jsx(Je,{character:a,canDelete:!0,onDelete:()=>{f(h.filter((e,o)=>o!==c))},isMini:!1},c);if(a instanceof S)return B=="custom"?t.jsx(Xe,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:a,isCustom:!0,setEnsembleSection:e=>{f(h.map((o,s)=>s===c?e:o))},removeEnsembleSection:()=>{f(h.filter((e,o)=>o!==c)),$(!1)},isCreate:!1,isAssign:!1,actors:l.students},c):t.jsx(Ve,{ensembleSection:a,canDelete:!0,onDelete:()=>{f(h.filter((e,o)=>o!==c))},isMini:!1},c);if(a instanceof _)return B=="custom"?t.jsx(Qe,{showGroup:a,characters:i.characters,setShowGroup:e=>{f(h.map((o,s)=>s===c?e:o))},removeShowGroup:()=>{f(h.filter((e,o)=>o!==c))},isCreate:!1,isAssign:!1,actors:l.students,hasEnsemble:i.hasEnsemble,showGroups:i.showGroups},c):t.jsx(We,{showGroup:a,showCharacters:!0,canClick:!1,onClick:()=>{},canDelete:!0,onDelete:()=>{f(h.filter((e,o)=>o!==c))}},c);if(a instanceof J)return t.jsx(Ze,{canDelete:!0,onDelete:()=>{f(h.filter((e,o)=>o!==c))}},c)})}),B=="custom"?t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);f([...h,x.fromBlank("Character 1",null,a)])},children:"Add Character"}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);f([...h,_.fromBlank("Show Group 1",[],a)])},children:"Add Show Group"}),(i==null?void 0:i.hasEnsemble)&&t.jsx("button",{className:"ActionBtn "+(oe?"disabled":""),disabled:oe,onClick:()=>{oe||($(!0),f([...h,S.fromBlank(!0,!1,!1,!1,[])]))},children:"Add Ensemble"})," "]}):t.jsx(t.Fragment,{})," "]}),t.jsx("br",{}),Ce?t.jsx("div",{className:"loader"}):t.jsx("button",{onClick:async()=>{if(ne(!0),console.log(`Name: ${V}, Description: ${W}, Start Time: ${y}, End Time: ${R}, Selected Location: ${L}, Rehearsal Location: ${G}, Event Type: ${O}`),V==""||W==""||y==null||R==null||L==null||G==null||O==null){alert("Please fill out all fields"),console.log(`Name: ${V}, Description: ${W}, Start Time: ${y}, End Time: ${R}, Selected Location: ${L}, Rehearsal Location: ${G}, Event Type: ${O}`),ne(!1);return}console.log("Submit");const a=L??l.locations[0];console.log(y),console.log(R);const c=ye.fromBlank(M,y,R);console.log(c.toMap());const e=[];if(ce){h.push(new J);for(const s of i.ensemble.actors)e.push(s);for(const s of i.characters)e.find(n=>n.userId==s.actor.userId)==null&&e.push(s.actor)}else for(const s of h){if(s instanceof J){for(const n of i.ensemble.actors)e.push(n);for(const n of i.characters)e.find(r=>r.userId==n.actor.userId)==null&&e.push(n.actor);break}if(s instanceof x){if(e.find(n=>n.userId==s.actor.userId)!=null)continue;e.push(s.actor)}if(s instanceof S){if(s.includeAll)for(const n of i.ensemble.actors)e.find(r=>r.userId==n.userId)==null&&e.push(n);else if(s.includeMale){for(const n of i.ensemble.actors)if(n.gender=="male"){if(e.find(r=>r.userId==n.userId)!=null)continue;e.push(n)}}else if(s.includeFemale){for(const n of i.ensemble.actors)if(n.gender=="female"){if(e.find(r=>r.userId==n.userId)!=null)continue;e.push(n)}}else if(s.includeCustom)for(const n of s.customActors)e.find(r=>r.userId==n.userId)==null&&e.push(n)}if(s instanceof _)for(const n of s.characters){if(n instanceof x){if(e.find(r=>r.userId==n.actor.userId)!=null)continue;e.push(n.actor)}if(n instanceof S){if(n.includeAll)for(const r of i.ensemble.actors)e.find(d=>d.userId==r.userId)==null&&e.push(r);else if(n.includeMale){for(const r of i.ensemble.actors)if(r.gender=="male"){if(e.find(d=>d.userId==r.userId)!=null)continue;e.push(r)}}else if(n.includeFemale){for(const r of i.ensemble.actors)if(r.gender=="female"){if(e.find(d=>d.userId==r.userId)!=null)continue;e.push(r)}}else if(n.includeCustom)for(const r of n.customActors)e.find(d=>d.userId==r.userId)==null&&e.push(r)}}}const o=Re.fromBlank(V,W,a,c,"activity-theater-event",Date.now(),C,l.name,K,i.name,h,e,B,O,G);if(console.log(o),ee){o.id=Te.id,await Oe(o),te(!1);const s=o.date.from,n=o.date.to;s.setDate(o.date.date.getDate()),s.setMonth(o.date.date.getMonth()),s.setFullYear(o.date.date.getFullYear()),n.setDate(o.date.date.getDate()),n.setMonth(o.date.date.getMonth()),n.setFullYear(o.date.date.getFullYear());const r={title:o.name,start:s.toISOString(),end:n.toISOString(),isAllDay:!1,interactive:!0,description:o.info,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),location:o.rehearsalLocation.name,id:o.id},d=X.filter(ue=>ue.id!=o.id);d.push(r),Z(d);const A=z.filter(ue=>ue.id!=o.id);A.push(o),console.log(A),Q([...A])}else{await Pe(o);const s=o.date.from,n=o.date.to;s.setDate(o.date.date.getDate()),s.setMonth(o.date.date.getMonth()),s.setFullYear(o.date.date.getFullYear()),n.setDate(o.date.date.getDate()),n.setMonth(o.date.date.getMonth()),n.setFullYear(o.date.date.getFullYear());const r={title:o.name,start:s.toISOString(),end:n.toISOString(),isAllDay:!1,interactive:!0,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),id:o.id,location:o.rehearsalLocation.name,description:o.info};Z([...X,r]),Q([...z,o])}ne(!1),p("date"),F(null),v(null),D(null),T("custom"),j(""),N(""),w(""),E(""),Y(l==null?void 0:l.rehearsalLocations[0]),P(l==null?void 0:l.eventTypes[0]),H(l==null?void 0:l.defaultLocation),f([]),$(!1),k(null),m(g),se(!1)},className:"ActionBtn",children:ee?"Save":"Submit"}),t.jsx("button",{onClick:()=>{if(ee){p("date"),F(null),v(null),D(null),T("custom"),j(""),N(""),w(""),E(""),Y(l==null?void 0:l.rehearsalLocations[0]),P(l==null?void 0:l.eventTypes[0]),H(l==null?void 0:l.defaultLocation),$(!1),k(null),m(g),te(!1);return}ge?(se(!1),p("date")):p("type"),N(""),j(""),$(!1);const a=[];for(const c of g)c.conflictResponseDate.date.getTime()==I.getTime()&&a.push(c);m(a)},className:"ActionBtn",children:"Back"})]})]})}
