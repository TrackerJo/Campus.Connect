import{r as i,j as e,c as ye,i as Ce}from"./index-CBYUpoa4.js";import{h as ae,v as ie}from"./constants-WQrXGkfb.js";import{a2 as ke,f as Fe,a3 as Ae,a4 as Ie,a5 as xe}from"./db-BmeP-Gam.js";import{B as Le,C as je}from"./Calendar-5K8PiRqc.js";import{T as Me}from"./trash-BnpXJPEK.js";import"./arrow_forward-CHD_SwLW.js";function Be({dialogRef:z,close:Q,addDate:v,eventDate:S}){const[f,P]=i.useState(new Date),[A,U]=i.useState(new Date),[J,Y]=i.useState(new Date),[D,w]=i.useState(""),[a,W]=i.useState(""),_=l=>{const c=l.target.value,[p,d]=c.split(":").map(Number),r=new Date(f);r.setHours(p,d,0,0),U(r),w(r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},g=l=>{const c=l.target.value,[p,d]=c.split(":").map(Number),r=new Date(f);r.setHours(p,d,0,0),Y(r),W(r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};return i.useEffect(()=>{S&&(P(S.date),U(S.from),Y(S.to),w(S.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),W(S.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})))},[S]),e.jsxs("dialog",{ref:z,className:"AddEventDateDialog",children:[e.jsx("h2",{children:"Add Event Date"}),e.jsx("label",{htmlFor:"",children:"Date: "}),e.jsx("input",{type:"date",value:f==null?void 0:f.toISOString().split("T")[0],onChange:l=>{const c=new Date(l.target.value);c.setHours(0,0,0,0),c.setDate(c.getDate()+1),P(c);const p=new Date(c);p.setHours(A.getHours(),A.getMinutes(),0,0),U(p),w(p.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const d=new Date(c);d.setHours(J.getHours(),J.getMinutes(),0,0),Y(d),W(d.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),e.jsx("input",{type:"time",value:D,onChange:_}),e.jsx("br",{}),e.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),e.jsx("input",{type:"time",value:a,onChange:g}),e.jsxs("div",{className:"actions",children:[e.jsx("button",{className:"ActionBtn",onClick:()=>{Q()},children:"Close"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{v(ae.fromBlank(f,A,J))},children:"Add Date"})]})]})}function $e({close:z,dialogRef:Q,events:v,activity:S}){const[f,P]=i.useState("schedule"),[A,U]=i.useState(!1),[J,Y]=i.useState(!1);function D(g){const l=Object.keys(g[0]),c=g.map(p=>l.map(d=>p[d]).join(","));return[l.join(","),...c].join(`
`)}const w=()=>{const g=[];A&&(v=_(v));for(let r=0;r<v.length;r++){const h=v[r];g.push({Date:h.date.date.getMonth()+1+"/"+h.date.date.getDate()+"/"+h.date.date.getFullYear().toString().slice(2),Start:h.date.from.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0}),End:h.date.to.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0}),Name:h.name,Location:h.location.name==S.defaultLocation.name?"default":h.location.name,"Event Type":h.eventType.name,"Extra Info":h.info,"Invite Type":h.generalTarget,"Custom/Group Targets":h.groupTargets.map(T=>T.groupName).join(", "),"Added to Campus Connect":""})}g.sort((r,h)=>r.Date==h.Date?r.Start==h.Start?r.End>h.End?1:-1:r.Start>h.Start?1:-1:r.Date>h.Date?1:-1);const l=D(g),c=new Blob([l],{type:"text/csv"}),p=window.URL.createObjectURL(c),d=document.createElement("a");d.href=p,d.download=f+".csv",d.click(),window.URL.revokeObjectURL(p)};function a(g,l,c,p){const d=new Date(g,l,1);let r=0;for(;d.getMonth()===l;){if(d.getDay()===c&&(r++,r===p))return d;d.setDate(d.getDate()+1)}return a(g,l+1,c,1)}function W(g){const l=g.getDay(),c=g.getFullYear()+1,p=g.getMonth();let d=1;const r=new Date(g);for(r.setDate(1);r.getMonth()===p;){if(r.getDay()===l){if(r.getDate()===g.getDate())break;d++}r.setDate(r.getDate()+1)}return a(c,p,l,d)}function _(g){return g.map(l=>{const c=W(l.date.date),p=ae.fromBlank(c,l.date.from,l.date.to);return ie.fromBlank(l.name,l.info,l.location,p,l.type,l.lastUpdated,l.activityId,l.groupNames,l.targets,l.generalTarget,l.eventType,l.groupTargets,l.hasSchoolEvent,l.schoolEventId,l.conflicts,l.activityName)})}return e.jsxs("dialog",{ref:Q,children:[e.jsx("h2",{children:"Export Schedule"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:f,onChange:g=>{P(g.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Move Schedule Forward a Year? "}),e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:A,onChange:g=>{U(g.target.checked)}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("br",{}),J?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(f==""){alert("Please fill out all fields");return}Y(!0),w(),Y(!1)},children:"Export Schedule"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{z()},children:"Close"})]})]})}ye(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(Oe,{})}));function Oe(){const[z,Q]=i.useState("student"),[v,S]=i.useState([]),[f,P]=i.useState([]),[A,U]=i.useState(null),[J,Y]=i.useState(!1),[D,w]=i.useState([]),[a,W]=i.useState(),[_,g]=i.useState("students"),[l,c]=i.useState("date"),[p,d]=i.useState(null),[r,h]=i.useState(null),[T,I]=i.useState(null),[R,y]=i.useState(""),[V,C]=i.useState(""),[le,L]=i.useState(""),[re,M]=i.useState(""),[j,E]=i.useState(void 0),[B,k]=i.useState([]),[b,G]=i.useState("students"),[ce,He]=i.useState(!1);i.useState(""),i.useState(""),i.useState(null),i.useState(null);const[de,Pe]=i.useState(""),[K,X]=i.useState(!1),[Z,Se]=i.useState(null),[N,F]=i.useState(void 0),[$,Te]=i.useState(void 0),[ee,ue]=i.useState([]),[Ee,De]=i.useState(void 0),ne=i.useRef(null),se=i.useRef(null),[me,q]=i.useState(!1);i.useEffect(()=>{Ce(()=>{});async function t(){Y(!0);const u=new URLSearchParams(window.location.search).get("activityId");if(u){U(u);const m=await Fe(u);W(m),console.log(m),E(m.defaultLocation)}const s=await Ae(u);console.log(s),S(s);const x=[];for(const m of s){console.log(m);const O=m.date.from;console.log(m.date.date),O.setDate(m.date.date.getDate()),O.setMonth(m.date.date.getMonth()),O.setFullYear(m.date.date.getFullYear());const H=m.date.to;H.setDate(m.date.date.getDate()),H.setMonth(m.date.date.getMonth()),H.setFullYear(m.date.date.getFullYear()),console.log(O),console.log(H),x.push({title:m.name,start:O.toISOString(),end:H.toISOString(),isAllDay:!1,interactive:!0,description:m.info,color:m.eventType.color.setAlpha(.8).toRBGAString(),id:m.id,location:m.location.name})}P(x),console.log(s),console.log(x),Y(!1)}t();const n=localStorage.getItem("accountType");n&&Q(n)},[]);function he(){return v}const ge=t=>{const n=t.target.value,[o,u]=n.split(":").map(Number),s=new Date(p);s.setHours(o,u,0,0),h(s),L(s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},pe=t=>{const n=t.target.value,[o,u]=n.split(":").map(Number),s=new Date(p);s.setHours(o,u,0,0),I(s),M(s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};Date.prototype.addHours=function(t){return this.setTime(this.getTime()+t*60*60*1e3),this};function ve(){return e.jsxs("div",{className:"custom-invite-view",children:[e.jsx("button",{className:_=="students"?"selected":"",onClick:()=>{g("students")},children:"Students"}),e.jsx("button",{className:_=="parents"?"selected":"",onClick:()=>{g("parents")},children:"Parents"}),e.jsx("div",{className:"current-view",children:_=="students"?e.jsx("div",{className:"students",children:a==null?void 0:a.students.map((t,n)=>e.jsxs("div",{className:"student",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"student",checked:B.find(o=>o.userId==t.userId)!=null,onChange:o=>{o.target.checked?k([...B,t]):k(B.filter(u=>u!=t))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.userId,children:t.name})]},t.userId))}):e.jsx("div",{className:"parents",children:a==null?void 0:a.parents.map((t,n)=>e.jsxs("div",{className:"parent",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"parent",onChange:o=>{o.target.checked?k([...B,t]):k(B.filter(u=>u!=t))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.userId,children:t.name})]},t.userId))})})]})}function be(){return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mode",children:"Enter Event Information"}),e.jsx("label",{htmlFor:"Name",children:"Name: "}),e.jsx("input",{type:"text",value:R,onChange:t=>{y(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Description",children:"Description: "}),e.jsx("textarea",{value:V,onChange:t=>{C(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Date: "}),e.jsx("input",{type:"date",value:p==null?void 0:p.toISOString().split("T")[0],onChange:t=>{const n=new Date(t.target.value);n.setHours(0,0,0,0),n.setDate(n.getDate()+1),d(n);const o=new Date(n);o.setHours(r.getHours(),r.getMinutes(),0,0),h(o),L(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const u=new Date(n);u.setHours(T.getHours(),T.getMinutes(),0,0),I(u),M(u.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),e.jsx("input",{type:"time",value:le,onChange:ge}),e.jsx("br",{}),e.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),e.jsx("input",{type:"time",value:re,onChange:pe}),e.jsx("br",{}),e.jsx("label",{htmlFor:"location",children:"Location: "}),e.jsx("select",{name:"location",id:"location",onChange:t=>{E(a==null?void 0:a.locations.find(n=>n.name==t.target.value))},children:a==null?void 0:a.locations.map((t,n)=>e.jsx("option",{value:t.name,selected:(j==null?void 0:j.name)==t.name,children:t.name+" ("+t.address+")"},n))}),e.jsx("br",{}),e.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),e.jsx("select",{name:"eventType",id:"event-type",onChange:t=>{F(a==null?void 0:a.eventTypes.find(n=>n.name==t.target.value))},children:a==null?void 0:a.eventTypes.map((t,n)=>e.jsx("option",{value:t.name,selected:(N==null?void 0:N.name)==t.name,children:t.name},n))}),e.jsx("br",{}),e.jsx("label",{htmlFor:"inviteType",children:"Invite Type: "}),e.jsxs("select",{name:"inviteType",id:"invite-type",onChange:t=>{G(t.target.value)},children:[e.jsx("option",{value:"students",selected:b=="students",children:"Students"}),e.jsx("option",{value:"parents",selected:b=="parents",children:"Parents"}),e.jsx("option",{value:"groups",selected:b=="groups",children:"Groups"}),e.jsx("option",{value:"custom",selected:b=="custom",children:"Custom"})]}),b=="groups"?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("label",{htmlFor:"groups",children:"Groups: "}),e.jsx("div",{className:"groups",children:a.groups.map((t,n)=>e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:D.find(o=>o.groupName==t.groupName)!=null,onChange:o=>{o.target.checked?(w([...D,t]),k([...B,...t.groupMembers])):(w(D.filter(u=>u.groupName!=t.groupName)),k(B.filter(u=>!t.groupMembers.includes(u))))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.groupName,children:t.groupName})]},t.groupName))})]}):e.jsx(e.Fragment,{}),b=="custom"?ve():e.jsx(e.Fragment,{}),e.jsx("br",{}),me?e.jsx("div",{className:"loader"}):e.jsx("button",{onClick:async()=>{if(q(!0),console.log(`Name: ${R}, Description: ${V}, Start Time: ${r}, End Time: ${T}, Selected Location: ${j},Event Type: ${N}`),R==""||r==null||T==null||j==null||N==null){alert("Please fill out all fields"),console.log(`Name: ${R}, Description: ${V}, Start Time: ${r}, End Time: ${T}, Selected Location: ${j},  Event Type: ${N}`),q(!1);return}console.log("Submit");const t=j??a.locations[0];console.log(r),console.log(T);const n=ae.fromBlank(p,r,T);console.log(n.toMap());const o=[],u=N;u.color.setAlpha(255);const s=ie.fromBlank(R,V,t,n,"activity-event",Date.now(),A,D.map(x=>x.groupName),B,b,u,D,ce,de,[],a.name);if(K){s.id=Z.id,Z.generalTarget=="groups"&&s.groupTargets.forEach(te=>{te.groupMembers.forEach(fe=>{o.find(we=>we.userId==fe.userId)||o.push(fe)})}),s.targets=[...o],await Ie(s),X(!1);const x=s.date.from,m=s.date.to,O={title:s.name,start:x.toISOString(),end:m.toISOString(),isAllDay:!1,interactive:!0,description:s.info,color:s.eventType.color.setAlpha(.8).toRBGAString(),id:s.id,location:s.location.name},H=f.filter(te=>te.id!=Z.id);console.log(H),console.log(Z.id),H.push(O),P([...H]);const oe=v.filter(te=>te.id!=Z.id);oe.push(s),console.log(oe),S([...oe])}else{await xe(s);const x=s.date.from,m=s.date.to;x.setDate(s.date.date.getDate()),x.setMonth(s.date.date.getMonth()),x.setFullYear(s.date.date.getFullYear()),m.setDate(s.date.date.getDate()),m.setMonth(s.date.date.getMonth()),m.setFullYear(s.date.date.getFullYear());const O={title:s.name,start:x.toISOString(),end:m.toISOString(),isAllDay:!1,interactive:!0,description:s.info,color:s.eventType.color.setAlpha(.8).toRBGAString(),id:s.id,location:s.location.name};P([...f,O]),S([...v,s])}q(!1),c("date"),d(null),h(null),I(null),y(""),C(""),L(""),M(""),F(a==null?void 0:a.eventTypes[0]),E(a==null?void 0:a.defaultLocation),k([]),G("students")},className:"ActionBtn",children:K?"Save":"Submit"}),e.jsx("button",{onClick:()=>{if(K){c("date"),d(null),h(null),I(null),y(""),C(""),L(""),M(""),E(a.defaultLocation),F(a.eventTypes[0]),E(a==null?void 0:a.defaultLocation),X(!1);return}c("date"),C(""),y(""),G("students")},className:"ActionBtn",children:"Back"})]})}function Ne(){return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mode",children:"Enter Event Information"}),e.jsx("label",{htmlFor:"Name",children:"Name: "}),e.jsx("input",{type:"text",value:R,onChange:t=>{y(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Description",children:"Description: "}),e.jsx("textarea",{value:V,onChange:t=>{C(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),e.jsx("input",{type:"time",value:le,onChange:ge}),e.jsx("br",{}),e.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),e.jsx("input",{type:"time",value:re,onChange:pe}),e.jsx("br",{}),e.jsx("label",{htmlFor:"location",children:"Location: "}),e.jsx("select",{name:"location",id:"location",onChange:t=>{E(a==null?void 0:a.locations.find(n=>n.name==t.target.value))},children:a==null?void 0:a.locations.map((t,n)=>e.jsx("option",{value:t.name,selected:(j==null?void 0:j.name)==t.name,children:t.name+" ("+t.address+")"},n))}),e.jsx("br",{}),e.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),e.jsx("select",{name:"eventType",id:"event-type",onChange:t=>{F(a==null?void 0:a.eventTypes.find(n=>n.name==t.target.value))},children:a==null?void 0:a.eventTypes.map((t,n)=>e.jsx("option",{value:t.name,selected:(N==null?void 0:N.name)==t.name,children:t.name},n))}),e.jsx("br",{}),e.jsx("label",{htmlFor:"inviteType",children:"Invite Type: "}),e.jsxs("select",{name:"inviteType",id:"invite-type",onChange:t=>{G(t.target.value)},children:[e.jsx("option",{value:"students",selected:b=="students",children:"Students"}),e.jsx("option",{value:"parents",selected:b=="parents",children:"Parents"}),e.jsx("option",{value:"groups",selected:b=="groups",children:"Groups"}),e.jsx("option",{value:"custom",selected:b=="custom",children:"Custom"})]}),b=="groups"?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("label",{htmlFor:"groups",children:"Groups: "}),e.jsx("div",{className:"groups",children:a.groups.map((t,n)=>e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:D.find(o=>o.groupName==t.groupName)!=null,onChange:o=>{o.target.checked?(w([...D,t]),k([...B,...t.groupMembers])):(w(D.filter(u=>u.groupName!=t.groupName)),k(B.filter(u=>!t.groupMembers.includes(u))))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.groupName,children:t.groupName})]},t.groupName))})]}):e.jsx(e.Fragment,{}),b=="custom"?ve():e.jsx(e.Fragment,{}),e.jsx("br",{}),e.jsx("h2",{children:"Event Dates"}),e.jsx("div",{className:"event-dates",children:ee.map((t,n)=>e.jsxs("div",{className:"event-date",children:[e.jsxs("div",{className:"event-date-title",children:[e.jsx("label",{htmlFor:"",className:"event-date-name",children:t.date.toDateString()}),e.jsx("label",{htmlFor:"",className:"event-date-time",children:t.from.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})+" - "+t.to.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})})]}),e.jsx("img",{src:Me,className:"event-date-icon",onClick:()=>{ue(ee.filter(o=>o!=t))}})]},n))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var o;if(r==null||T==null){alert("Please fill out start time and end time");return}const t=new Date;t.setHours(0,0,0,0);const n=ae.fromBlank(t,r,T);De(n),(o=ne.current)==null||o.showModal()},children:"Add Date"}),e.jsx("br",{}),me?e.jsx("div",{className:"loader"}):e.jsx("button",{onClick:async()=>{if(q(!0),console.log(`Name: ${R}, Description: ${V}, Start Time: ${r}, End Time: ${T}, Selected Location: ${j},Event Type: ${N}`),R==""||r==null||T==null||j==null||N==null||ee.length==0){alert("Please fill out all fields"),console.log(`Name: ${R}, Description: ${V}, Start Time: ${r}, End Time: ${T}, Selected Location: ${j},  Event Type: ${N}`),q(!1);return}console.log("Submit");const t=j??a.locations[0];console.log(r),console.log(T);const n=[];for(const o of ee){const u=N;u.color.setAlpha(255);const s=ie.fromBlank(R,V,t,o,"activity-event",Date.now(),A,D.map(H=>H.groupName),B,b,u,D,ce,de,[],a.name);await xe(s);const x=s.date.from,m=s.date.to;x.setDate(s.date.date.getDate()),x.setMonth(s.date.date.getMonth()),x.setFullYear(s.date.date.getFullYear()),m.setDate(s.date.date.getDate()),m.setMonth(s.date.date.getMonth()),m.setFullYear(s.date.date.getFullYear());const O={title:s.name,start:x.toISOString(),end:m.toISOString(),isAllDay:!1,interactive:!0,description:s.info,color:s.eventType.color.setAlpha(.8).toRBGAString(),id:s.id,location:s.location.name};n.push(O),S([...v,s])}P([...f,...n]),q(!1),c("date"),d(null),h(null),I(null),y(""),C(""),L(""),M(""),F(a==null?void 0:a.eventTypes[0]),E(a==null?void 0:a.defaultLocation),k([]),G("students")},className:"ActionBtn",children:K?"Save":"Submit"}),e.jsx("button",{onClick:()=>{if(K){c("date"),d(null),h(null),I(null),y(""),C(""),L(""),M(""),E(a.defaultLocation),F(a.eventTypes[0]),E(a==null?void 0:a.defaultLocation),X(!1);return}c("date"),C(""),y(""),G("students")},className:"ActionBtn",children:"Back"})]})}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-title",children:[e.jsx("img",{src:Le,alt:"back arrow",onClick:()=>{if(l!="date"){if(c("date"),K){c("date"),d(null),h(null),I(null),y(""),C(""),L(""),M(""),E(a.defaultLocation),F(a.eventTypes[0]),E(a==null?void 0:a.defaultLocation),X(!1);return}c("date"),C(""),y(""),G("students");return}window.location.href="/Activity/?activityId="+A}}),e.jsx("h1",{children:"Events"})]}),J?e.jsx("div",{className:"center",children:e.jsx("div",{className:"loader"})}):e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:l!="date"?"datePicker hidden":"datePicker",children:[" ",e.jsx(je,{canPaste:$!=null,canCopy:!0,copyEvent:t=>{const n=v.find(o=>o.id==t.id);for(const o of v)console.log(o.id);Te(n),console.log(n),console.log(t.id)},pasteEvent:t=>{console.log("PASTE EVENT"),console.log(t);const n=new Date(t);n.setHours(0,0,0,0),d(n),h(new Date($.date.from)),L($.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date($.date.to);I(o),console.log(o),M(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),E($.location),F($.eventType),y($.name),C($.info),k($.targets),G($.generalTarget),w($.groupTargets),c("info")},canViewConflicts:!1,isCreating:!0,canOpenContextMenu:!0,events:f,editEvent:t=>{const n=he().find(o=>o.id==t.id);console.log(t.id),n&&(console.log(n),c("info"),y(n.name),C(n.info),d(n.date.date),h(n.date.from),L(n.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),I(n.date.to),M(n.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),E(n.location),k(n.targets),console.log("FROM EDIT"),console.log(n.targets),F(n.eventType),X(!0),G(n.generalTarget),Se(n),w(n.groupTargets))},viewEvent:t=>{const n=he().find(o=>o.id==t.id);n&&(localStorage.setItem("event",JSON.stringify(n.toMap())),localStorage.setItem("back","/Activity/Events/?activityId="+A),window.location.href="/Calendar/Event/")},viewConflicts:t=>{},deleteEvent:async t=>{console.log(t);const n=v.find(s=>s.id==t.id),o=v.filter(s=>s.id!=t.id);S(o);const u=f.filter(s=>s.id!=t.id);P(u),await ke(n)},dateClick:t=>{console.log(t.date),d(t.date),new Date(t.date).setHours(0,0,0,0),h(new Date(t.date)),L(t.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(t.date);I(o.addHours(1)),console.log(o),M(t.date.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),E(a.defaultLocation),F(a.eventTypes[0]),c("info")},eventClick:t=>{d(t.event.start),new Date(t.event.start).setHours(0,0,0,0),h(new Date(t.event.start)),L(t.event.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(t.event.end);I(o),M(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),E(a.defaultLocation),F(a.eventTypes[0]),c("info")}}),e.jsx("button",{className:"ActionBtn",onClick:()=>{c("multipleEvents"),F(a.eventTypes[0])},children:"Add Multiple Events"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(v.map(t=>t.toMap()))),window.open("/Activity/Events/Print/","_blank")},children:"Print"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=se.current)==null||t.showModal()},children:"Export to CSV"})]}),z=="teacher"?l=="multipleEvents"?Ne():l=="date"?e.jsx(e.Fragment,{}):be():e.jsxs(e.Fragment,{children:[" ",e.jsx(je,{canPaste:!1,canCopy:!1,copyEvent:()=>{},pasteEvent:()=>{},viewEvent:t=>{},canViewConflicts:!1,events:f,canOpenContextMenu:!1,dateClick:()=>{},deleteEvent:()=>{},viewConflicts:()=>{},editEvent:()=>{},eventIdClick:t=>{const n=v.find(o=>o.id===t);n&&(localStorage.setItem("event",JSON.stringify(n.toMap())),localStorage.removeItem("back"),window.location.href="/Calendar/Event/")}})," ",e.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(v.map(t=>t.toMap()))),window.open("/Activity/Events/Print/","_blank")},children:"Print"})]})]}),e.jsx(Be,{dialogRef:ne,addDate:t=>{ue([...ee,t]),ne.current.close()},close:()=>{ne.current.close()},eventDate:Ee}),a!=null&&e.jsx($e,{dialogRef:se,events:v,close:()=>{se.current.close()},activity:a})]})}
