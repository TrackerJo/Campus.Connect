import{c as w,j as e,r as t,i as j,l as x}from"./index-CBYUpoa4.js";import{a8 as b,a9 as U}from"./db-DzzlND-e.js";import"./constants-CiIGZTLG.js";w(document.getElementById("root")).render(e.jsx(t.StrictMode,{children:e.jsx(y,{})}));function y(){const[c,d]=t.useState(""),[l,h]=t.useState(""),[N,u]=t.useState(""),[g,m]=t.useState(!1);return t.useEffect(()=>{j(()=>{});async function p(){const s=new URLSearchParams(window.location.search),n=s.get("parentName"),i=s.get("parentUid"),a=s.get("childUid");if(n&&i&&a){d(n.replace(/\+/g," ")),h(i.replace(/\+/g," "));const r=await U(i);r&&(r.requestedChildren.find(f=>f.uid===a)||(alert("This request has already been accepted or rejected"),window.location.href="/")),u(a.replace(/\+/g," "));const o=localStorage.getItem("userId");o&&o!==a&&(alert("You are going to be logged out because you are not the intended user, if you believe this is a mistake please log back in and click the link again"),window.location.href="/",x())}}p()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"center",children:[e.jsx("h1",{children:"Parent Child Add Request"}),e.jsxs("h3",{children:[c," wants to add you as a child"]}),e.jsx("label",{htmlFor:"",children:"This will allow them to be able to see your schedule"}),e.jsx("br",{}),g?e.jsx("div",{className:"loaderWhite"}):e.jsx("button",{className:"ActionBtnWhite",onClick:async()=>{m(!0),await b(l),window.location.href="/"},children:"Accept Request"})]})})}
