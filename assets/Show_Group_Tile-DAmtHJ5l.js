import{r as j,j as a}from"./index-CgOOottF.js";import{C as x,f as E,b as o,E as k}from"./constants-cstwFp1G.js";import{T as I}from"./trash-BnpXJPEK.js";import{A as N,E as A}from"./Ensemble_Section_Tile-ByDHaSxu.js";function T({character:e,setCharacter:r,isCreate:d,removeCharacter:u,isAssign:s,characters:h,actors:v}){const m=j.useRef(null);return a.jsxs("div",{className:"CharacterTile",id:"character-tile-"+e.characterId,children:[a.jsxs("div",{className:"header",children:[a.jsxs("div",{className:"CharacterNameDiv",children:[a.jsxs("label",{htmlFor:"Character",children:["Character:  ",s?e.name:""]}),d?a.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:t=>{r(x.fromBlank(t.target.value,e.actor,e.characterId,e.lastUpdated))}}):s?a.jsxs(a.Fragment,{children:[a.jsx("br",{}),a.jsx("div",{className:"CharacterActorDiv",children:e.actor!=null?a.jsxs(a.Fragment,{children:[a.jsxs("label",{htmlFor:"Actor",children:["Actor: ",e.actor.name]}),a.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=m.current)==null||t.showModal()},children:"Edit Actor"})]}):a.jsx(a.Fragment,{children:a.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=m.current)==null||t.showModal()},children:"Assign Actor"})})})]}):a.jsxs("select",{name:"characters",id:"characters",value:e.name,onChange:t=>{t.target.value!="null"&&r(h.find(c=>c.name==t.target.value))},children:[a.jsx("option",{value:"null",children:"Select a character"}),h.map((t,c)=>a.jsx("option",{value:t.name,children:t.name},c))]})]}),a.jsx("div",{children:a.jsx("img",{src:I,alt:"",className:"TrashIcon",onClick:()=>{u()}})})]}),a.jsx(N,{actor:e.actor??new E,actors:v,keepPastResult:!1,addedActors:[],setActor:t=>{var c;(c=m.current)==null||c.close(),r(x.fromBlank(e.name,t,e.characterId,e.lastUpdated))},dialogRef:m,close:()=>{var t;(t=m.current)==null||t.close()}})]})}function M({showGroup:e,setShowGroup:r,isCreate:d,removeShowGroup:u,isAssign:s,showGroups:h,hasEnsemble:v,characters:m,actors:t}){const[c,g]=j.useState(!1),[C,B]=j.useState(0);return j.useEffect(()=>{B(Math.floor(Math.random()*1e5))},[]),a.jsxs("div",{className:"ShowGroupTile"+(d||s?"Create":""),id:"show-group-tile-"+e.showGroupId,children:[a.jsxs("div",{className:"header",children:[a.jsxs("div",{className:"ShowGroupNameDiv",children:[a.jsx("label",{htmlFor:"ShowGroup",children:"Show Group: "}),d?a.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:l=>{r(o.fromBlank(l.target.value,e.characters,e.showGroupId,e.lastUpdated))}}):s?a.jsx(a.Fragment,{children:a.jsx("label",{htmlFor:"",children:e.name})}):a.jsxs("select",{name:"show groups",id:"showGroups",value:e.name,onChange:l=>{l.target.value!="null"&&r(h.find(n=>n.name==l.target.value))},children:[a.jsx("option",{value:"null",children:"Select a show group"}),h.map((l,n)=>a.jsx("option",{value:l.name,children:l.name},n))]})]}),a.jsx("div",{children:a.jsx("img",{src:I,alt:"",className:"TrashIcon",onClick:()=>{u()}})})]}),(d||s)&&a.jsx("br",{}),(d||s)&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"Characters",children:"Characters: "}),a.jsx("div",{className:"characters",id:"characters-"+C,children:e.characters.map((l,n)=>{if(l instanceof x&&!s)return a.jsx(T,{character:l,actors:[],isCreate:!1,characters:m,isAssign:s,setCharacter:f=>{r(o.fromBlank(e.name,e.characters.map((i,b)=>b===n?f:i),e.showGroupId,e.lastUpdated))},removeCharacter:()=>{r(o.fromBlank(e.name,e.characters.filter((f,i)=>i!==n),e.showGroupId,e.lastUpdated))}},n);if(l instanceof k)return a.jsx(A,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:l,isAssign:s,actors:t,isCustom:!1,isCreate:!0,setEnsembleSection:f=>{r(o.fromBlank(e.name,e.characters.map((i,b)=>b===n?f:i),e.showGroupId,e.lastUpdated))},removeEnsembleSection:()=>{g(!1),r(o.fromBlank(e.name,e.characters.filter((f,i)=>i!==n),e.showGroupId,e.lastUpdated))}},n)})}),d&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"ActionBtn",onClick:()=>{const l=Math.floor(Math.random()*1e5);r(o.fromBlank(e.name,[...e.characters,x.fromBlank("Character 1",null,l,0)],e.showGroupId,e.lastUpdated)),setTimeout(()=>{const n=document.getElementById("characters-"+C);n.scrollTop=n.scrollHeight},100)},children:"Add Character"}),a.jsx("br",{}),v&&a.jsx("button",{className:"ActionBtn "+(c?"disabled":""),disabled:c,onClick:()=>{c||(g(!0),setTimeout(()=>{const l=document.getElementById("characters-"+C);l.scrollTop=l.scrollHeight},100),r(o.fromBlank(e.name,[...e.characters,k.fromBlank(!0,!1,!1,!1,[],0)],e.showGroupId,e.lastUpdated)))},children:"Add Ensemble"})]})]})]})}export{T as C,M as S};
