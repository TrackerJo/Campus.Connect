import{c as S,j as n,r as s}from"./index-BvKDzgix.js";import{R as y,G as p,U as j,w as I,x as F}from"./db-BHX2A2ia.js";import{C as T}from"./Calendar-BWUfYSXF.js";S(document.getElementById("root")).render(n.jsx(s.StrictMode,{children:n.jsx(A,{})}));function A(){const[M,v]=s.useState("student"),[R,C]=s.useState([]),[E,x]=s.useState([]);return s.useState(null),s.useEffect(()=>{async function D(){const i=await y(),g=[];console.log(i),C(i);const f=[];for(const t of i){const w=t instanceof p;let l=null;if(t instanceof p){const a=g.find(e=>e.activityId===t.activityId&&e.showId===t.showId);if(a)l=a;else{const e=await j(t.activityId,t.showId);e&&(g.push(e),l=e)}}console.log(t);const o=t.date.from;console.log(t.date.date),o.setDate(t.date.date.getDate()),o.setMonth(t.date.date.getMonth()),o.setFullYear(t.date.date.getFullYear());const c=t.date.to;c.setDate(t.date.date.getDate()),c.setMonth(t.date.date.getMonth()),c.setFullYear(t.date.date.getFullYear()),console.log(o),console.log(c);let r=!1,d=!1,h=null,m=null;if(console.log(l),l)for(const a of l.dates){const e=new Date(a.date);e.getDate()===o.getDate()&&e.getMonth()===o.getMonth()&&e.getFullYear()===o.getFullYear()&&(r=!0,a.canAttend&&(d=!0,h=new Date(a.from),m=new Date(a.to)))}f.push({title:t.name,start:o.toISOString(),end:c.toISOString(),isAllDay:!1,interactive:!0,description:t.info+(d?` 
(Excused from ${h.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} to ${m.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:r&&!d?` 
(Fully Excused)`:""),color:r&&!d?"black":r?"grey":w?I(F(t.rehearsalLocation.color),.8):"blue",id:t.id})}x(f),console.log(i),console.log(f)}D();const u=localStorage.getItem("accountType");u&&v(u)},[]),n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"title",children:n.jsx("h1",{children:"Calendar"})}),n.jsxs("div",{className:"center",children:[n.jsx(T,{events:E,canOpenContextMenu:!1,dateClick:()=>{},deleteEvent:()=>{},viewConflicts:()=>{},editEvent:()=>{},eventClick:()=>{}}),n.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Campus.Connect/"},children:"Back"})]})]})}
