import{j as s,c as Ne,r as u,i as Le}from"./index-U3pxML4x.js";import{j as Me,c as b,e as _,d as S,F as J,k as ye,l as Re}from"./constants-UfU1BGwP.js";import{i as Be,w as He,q as $e,x as Ge,y as Ye,z as Oe,A as Pe}from"./db-DLNFf_2g.js";import{A as _e,S as Ue,D as ze,C as Je,E as Ve,a as qe}from"./Show_Group_Display_Tile-Bt6cHX8J.js";import{B as fe,C as We}from"./Calendar-BG4YQB9j.js";import{C as Ke,S as Qe}from"./Show_Group_Tile-wHbq2DuE.js";import{E as Xe}from"./Ensemble_Section_Tile-C5ZhvcIo.js";import{F as Ze}from"./Full_Cast_Tile-CJX3OvfU.js";import"./trash-BnpXJPEK.js";import"./arrow_forward-CHD_SwLW.js";function me({conflictResponseDate:C,actor:W}){return s.jsx("div",{className:"ConflictDisplayTile ",id:"conflict-display-tile-"+W.userId,children:s.jsx("div",{className:"header",children:s.jsxs("div",{className:"CharacterNameDiv",children:[s.jsxs("label",{htmlFor:"Actor",children:["Actor: ",W.name]}),s.jsx("br",{}),s.jsxs("label",{htmlFor:"Actor",children:["Date: ",C.date.toDateString()]}),s.jsx("br",{}),C.canAttend?s.jsxs("label",{htmlFor:"Actor",children:[C.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",C.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):s.jsx("label",{htmlFor:"Actor",children:"Can't Attend"})]})})})}Ne(document.getElementById("root")).render(s.jsx(u.StrictMode,{children:s.jsx(et,{})}));function et(){const[C,W]=u.useState(""),[l,be]=u.useState(),[K,je]=u.useState(""),[i,xe]=u.useState(),[U,g]=u.useState("date"),[M,v]=u.useState(null),[y,D]=u.useState(null),[R,T]=u.useState(null),[B,w]=u.useState("custom"),[V,j]=u.useState(""),[q,N]=u.useState(""),[Se,E]=u.useState(""),[Ce,A]=u.useState(""),[L,H]=u.useState(void 0),[he,ne]=u.useState(!1),[z,Q]=u.useState([]),[X,Z]=u.useState([]),[p,f]=u.useState([]),[oe,$]=u.useState(!1),[h,ve]=u.useState([]),[ae,m]=u.useState([]),[ce,De]=u.useState(!1),[I,k]=u.useState(null),[ee,te]=u.useState(!1),[Te,we]=u.useState(null),[G,Y]=u.useState(),[O,P]=u.useState(void 0),[pe,ge]=u.useState(!1),[re,ie]=u.useState(!1),[le,Ee]=u.useState([]),[x,Ae]=u.useState(void 0),[Ie,se]=u.useState(!1);u.useEffect(()=>{Le(()=>{});const c=new URLSearchParams(window.location.search),a=c.get("activityId");a&&(W(a),Be(a).then(t=>{t instanceof Me||(be(t),Y(t==null?void 0:t.rehearsalLocations[0]),P(t==null?void 0:t.eventTypes[0]),H(t==null?void 0:t.defaultLocation))}));const e=c.get("showId");e&&(je(e),He(a,e).then(t=>{const n=[];for(const r of t)for(const d of r.dates)n.push({conflictResponseDate:d,actor:r.actor});n.sort((r,d)=>r.conflictResponseDate.date.getTime()-d.conflictResponseDate.date.getTime()),ve(n),m([...n])})),$e(a,e).then(t=>{xe(t),t!=null&&t.hasEnsemble&&Ee(t.ensemble.actors)}),Ge(a,e).then(t=>{Q(t);const n=[];for(const r of t){console.log(r);const d=r.date.from;console.log(r.date.date),d.setDate(r.date.date.getDate()),d.setMonth(r.date.date.getMonth()),d.setFullYear(r.date.date.getFullYear());const F=r.date.to;F.setDate(r.date.date.getDate()),F.setMonth(r.date.date.getMonth()),F.setFullYear(r.date.date.getFullYear()),console.log(d),console.log(F),console.log(r.rehearsalLocation.color),n.push({title:r.name,start:d.toISOString(),end:F.toISOString(),isAllDay:!1,interactive:!0,color:r.rehearsalLocation.color.setAlpha(.8).toHex(),description:r.info,id:r.id,location:r.rehearsalLocation.name})}Z(n)});const o=()=>{window.innerWidth<800?ge(!0):ge(!1)};return window.addEventListener("resize",o),o(),()=>window.removeEventListener("resize",o)},[]);const ke=c=>{const a=c.target.value,[e,o]=a.split(":").map(Number),t=new Date(M);t.setHours(e,o,0,0),D(t),E(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},Fe=c=>{const a=c.target.value,[e,o]=a.split(":").map(Number),t=new Date(M);t.setHours(e,o,0,0),T(t),A(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};Date.prototype.addHours=function(c){return this.setTime(this.getTime()+c*60*60*1e3),this};function de(){return z}return s.jsxs("div",{className:"center",children:[s.jsx("h1",{className:"title",children:"Create Schedule"}),U=="date"?s.jsxs("div",{className:"page-title",children:[s.jsx("img",{src:fe,alt:"back arrow",onClick:()=>{window.location.href="/Activity/Shows/Show/?activityId="+C+"&showId="+K}}),s.jsx("h2",{className:"mode",children:"Select a Date"})," "]}):s.jsx(s.Fragment,{}),s.jsxs("div",{className:"container",children:[U=="date"?s.jsx(s.Fragment,{children:s.jsxs("div",{className:"box left",children:[s.jsxs("h2",{children:["Conflicts",I!=null?" on "+I.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&s.jsxs(s.Fragment,{children:[s.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),s.jsxs("label",{className:"custom-checkbox",children:[s.jsx("input",{type:"checkbox",id:"ensemble",checked:re,onChange:c=>{if(ie(c.target.checked),c.target.checked){const a=[];for(const e of h)le.find(o=>o.userId==e.actor.userId)||(I!=null?e.conflictResponseDate.date.getTime()==I.getTime()&&a.push(e):a.push(e));m(a)}else if(I!=null){const a=[];for(const e of h)e.conflictResponseDate.date.getTime()==I.getTime()&&a.push(e);m(a)}else m([...h])}}),s.jsx("span",{className:"checkmark",children:" "})]})," "]}),s.jsx("div",{className:"conflicts",children:ae.map((c,a)=>s.jsx(me,{conflictResponseDate:c.conflictResponseDate,actor:c.actor},a))})]})}):s.jsx(s.Fragment,{}),s.jsx("div",{className:U!="date"?"datePicker hidden":"datePicker",children:s.jsx(We,{canViewConflicts:!0,canPaste:x!=null,canCopy:!0,copyEvent:c=>{const a=de().find(e=>e.id==c.id);Ae(a)},pasteEvent:c=>{const a=new Date(c);a.setHours(0,0,0,0),v(a),D(new Date(x.date.from)),E(x.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const e=new Date(x.date.to);T(e),console.log(e),A(e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),j(x.name),N(x.info),H(x.location),Y(x.rehearsalLocation),f(x.characters),P(x.activityEventType),w(x.theaterEventType),g("info"),se(!0)},isCreating:!0,canOpenContextMenu:!0,events:X,editEvent:c=>{const a=de().find(e=>e.id==c.id);a&&(console.log(a),g("info"),j(a.name),N(a.info),v(a.date.date),D(a.date.from),E(a.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),T(a.date.to),A(a.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),H(a.location),Y(a.rehearsalLocation),f(a.characters),P(a.activityEventType),te(!0),w(a.theaterEventType),we(a))},viewEvent:c=>{const a=de().find(e=>e.id==c.id);a&&(localStorage.setItem("event",JSON.stringify(a.toMap())),localStorage.setItem("back","/Activity/Shows/Show/CreateSchedule/?activityId="+C+"&showId="+K),window.location.href="/Calendar/Event/")},viewConflicts:c=>{const a=new Date(c);a.setHours(0,0,0,0),k(a);const e=[];for(const o of h)o.conflictResponseDate.date.getTime()==a.getTime()&&e.push(o);m(e)},deleteEvent:async c=>{console.log(c);const a=z.find(t=>t.id==c.id),e=z.filter(t=>t.id!=c.id);Q(e);const o=X.filter(t=>t.id!=c.id);Z(o),await Ye(a)},dateClick:c=>{console.log(c.date),v(c.date);const a=new Date(c.date);a.setHours(0,0,0,0),k(a);const e=[];for(const t of h)t.conflictResponseDate.date.getTime()==a.getTime()&&e.push(t);m(e),D(new Date(c.date)),E(c.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(c.date);T(o.addHours(1)),console.log(o),A(c.date.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),g("type")},eventClick:c=>{v(c.event.start);const a=new Date(c.event.start);a.setHours(0,0,0,0),k(a);const e=[];for(const t of h)t.conflictResponseDate.date.getTime()==a.getTime()&&e.push(t);m(e),D(new Date(c.event.start)),E(c.event.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(c.event.end);T(o),A(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),g("type")}})}),U=="date"?s.jsx(s.Fragment,{}):s.jsx(s.Fragment,{})]}),U=="date"?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(z)),window.open("/Activity/Shows/Show/Schedule/Print/","_blank")},children:"Print"}),s.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/Shows/Show/?activityId="+C+"&showId="+K},children:"Back"})]}):U=="type"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"page-title",children:[s.jsx("img",{src:fe,alt:"back arrow",onClick:()=>{g("date"),k(null),m([...h])}}),s.jsx("h2",{className:"mode",children:"Select a Rehersal Type"})]}),!pe&&s.jsxs("div",{className:"conflicts-div",children:[s.jsxs("h2",{children:["Conflicts",I!=null?" on "+I.toDateString():""]}),s.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),(i==null?void 0:i.hasEnsemble)&&s.jsx(s.Fragment,{children:s.jsxs("label",{className:"custom-checkbox",children:[s.jsx("input",{type:"checkbox",id:"ensemble",checked:re,onChange:c=>{if(ie(c.target.checked),c.target.checked){const a=[],e=new Date(M);e.setHours(0,0,0,0);for(const o of h)le.find(t=>t.userId==o.actor.userId)||o.conflictResponseDate.date.getTime()==e.getTime()&&a.push(o);m(a)}}}),s.jsx("span",{className:"checkmark",children:" "})]})}),s.jsx("div",{className:"conflicts",children:ae.map((c,a)=>s.jsx(me,{conflictResponseDate:c.conflictResponseDate,actor:c.actor},a))})]}),s.jsx("button",{onClick:()=>{g("info"),w("custom"),f([])},className:"ActionBtn",children:"Custom"}),s.jsx("h2",{className:"mode",children:"Show Layout"}),s.jsx("div",{className:"layout",children:i==null?void 0:i.layout.map((c,a)=>s.jsx(_e,{act:c,onClick:e=>{w("scene"),j(e.name+" - "+c.name),g("info"),f(e.characters);const o=[];for(const n of e.characters)if(n instanceof b)o.includes(n.actor.userId)&&o.push(n.actor.userId);else if(n instanceof _){for(const r of n.characters)if(r instanceof b)o.includes(r.actor.userId)&&o.push(r.actor.userId);else if(r instanceof S){if(r.includeAll)for(const d of i.ensemble.actors)o.includes(d.userId)&&o.push(d.userId);else if(r.includeMale)for(const d of i.ensemble.actors)d.gender=="male"&&o.includes(d.userId)&&o.push(d.userId);else if(r.includeFemale)for(const d of i.ensemble.actors)d.gender=="female"&&o.includes(d.userId)&&o.push(d.userId);else if(r.includeCustom)for(const d of r.customActors)o.includes(d.userId)&&o.push(d.userId)}}else if(n instanceof S){if(n.includeAll)for(const r of i.ensemble.actors)o.includes(r.userId)&&o.push(r.userId);else if(n.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&o.includes(r.userId)&&o.push(r.userId);else if(n.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&o.includes(r.userId)&&o.push(r.userId);else if(n.includeCustom)for(const r of n.customActors)o.includes(r.userId)&&o.push(r.userId)}else if(n instanceof J){for(const r of i.ensemble.actors)o.includes(r.userId)&&o.push(r.userId);for(const r of i.characters)o.includes(r.actor.userId)||o.push(r.actor.userId)}const t=[];for(const n of h)o.includes(n.actor.userId)&&n.conflictResponseDate.date.getTime()==I.getTime()&&t.push(n);m(t)}},a))}),s.jsx("h2",{className:"mode",children:"Songs"}),s.jsx("div",{className:"songs",children:i==null?void 0:i.songs.map((c,a)=>s.jsx(Ue,{song:c,onClick:()=>{w("song"),j(c.name),f(c.characters),g("info");const e=[];for(const t of c.characters)if(t instanceof b)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof _){for(const n of t.characters)if(n instanceof b)e.includes(n.actor.userId)&&e.push(n.actor.userId);else if(n instanceof S){if(n.includeAll)for(const r of i.ensemble.actors)e.includes(r.userId)&&e.push(r.userId);else if(n.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&e.includes(r.userId)&&e.push(r.userId);else if(n.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&e.includes(r.userId)&&e.push(r.userId);else if(n.includeCustom)for(const r of n.customActors)e.includes(r.userId)&&e.push(r.userId)}}else if(t instanceof S){if(t.includeAll)for(const n of i.ensemble.actors)e.includes(n.userId)&&e.push(n.userId);else if(t.includeMale)for(const n of i.ensemble.actors)n.gender=="male"&&e.includes(n.userId)&&e.push(n.userId);else if(t.includeFemale)for(const n of i.ensemble.actors)n.gender=="female"&&e.includes(n.userId)&&e.push(n.userId);else if(t.includeCustom)for(const n of t.customActors)e.includes(n.userId)&&e.push(n.userId)}else if(t instanceof J){for(const n of i.ensemble.actors)e.includes(n.userId)&&e.push(n.userId);for(const n of i.characters)e.includes(n.actor.userId)||e.push(n.actor.userId)}const o=[];for(const t of h)e.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==I.getTime()&&o.push(t);m(o)}},a))}),s.jsx("h2",{className:"mode",children:"Dances"}),s.jsx("div",{className:"dances",children:i==null?void 0:i.dances.map((c,a)=>s.jsx(ze,{dance:c,onClick:()=>{w("dance"),j(c.name),g("info"),f(c.characters);const e=[];for(const t of c.characters)if(t instanceof b)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof _){for(const n of t.characters)if(n instanceof b)e.includes(n.actor.userId)&&e.push(n.actor.userId);else if(n instanceof S){if(n.includeAll)for(const r of i.ensemble.actors)e.includes(r.userId)&&e.push(r.userId);else if(n.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&e.includes(r.userId)&&e.push(r.userId);else if(n.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&e.includes(r.userId)&&e.push(r.userId);else if(n.includeCustom)for(const r of n.customActors)e.includes(r.userId)&&e.push(r.userId)}}else if(t instanceof S){if(t.includeAll)for(const n of i.ensemble.actors)e.includes(n.userId)&&e.push(n.userId);else if(t.includeMale)for(const n of i.ensemble.actors)n.gender=="male"&&e.includes(n.userId)&&e.push(n.userId);else if(t.includeFemale)for(const n of i.ensemble.actors)n.gender=="female"&&e.includes(n.userId)&&e.push(n.userId);else if(t.includeCustom)for(const n of t.customActors)e.includes(n.userId)&&e.push(n.userId)}else if(t instanceof J){for(const n of i.ensemble.actors)e.push(n.userId);for(const n of i.characters)e.includes(n.actor.userId)||e.push(n.actor.userId)}const o=[];for(const t of h)e.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==I.getTime()&&o.push(t);m(o)}},a))}),s.jsx("button",{onClick:()=>{g("date"),k(null),m([...h])},className:"ActionBtn",children:"Back"})]}):s.jsxs(s.Fragment,{children:[!pe&&s.jsxs("div",{className:"conflicts-div",children:[s.jsxs("h2",{children:["Conflicts",I!=null?" on "+I.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&s.jsxs(s.Fragment,{children:[s.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),s.jsxs("label",{className:"custom-checkbox",children:[s.jsx("input",{type:"checkbox",id:"ensemble",checked:re,onChange:c=>{if(ie(c.target.checked),c.target.checked){const a=[],e=[];for(const o of p)if(o instanceof b)e.includes(o.actor.userId)&&e.push(o.actor.userId);else if(o instanceof _){for(const t of o.characters)if(t instanceof b)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t.includeAll)for(const n of i.ensemble.actors)e.includes(n.userId)&&e.push(n.userId);else if(t.includeMale)for(const n of i.ensemble.actors)n.gender=="male"&&e.includes(n.userId)&&e.push(n.userId);else if(t.includeFemale)for(const n of i.ensemble.actors)n.gender=="female"&&e.includes(n.userId)&&e.push(n.userId);else if(t.includeCustom)for(const n of t.customActors)e.includes(n.userId)&&e.push(n.userId)}else if(o instanceof S){if(o.includeAll)for(const t of i.ensemble.actors)e.includes(t.userId)&&e.push(t.userId);else if(o.includeMale)for(const t of i.ensemble.actors)t.gender=="male"&&e.includes(t.userId)&&e.push(t.userId);else if(o.includeFemale)for(const t of i.ensemble.actors)t.gender=="female"&&e.includes(t.userId)&&e.push(t.userId);else if(o.includeCustom)for(const t of o.customActors)e.includes(t.userId)&&e.push(t.userId)}else{for(const t of i.ensemble.actors)e.push(t.userId);for(const t of i.characters)e.includes(t.actor.userId)||e.push(t.actor.userId)}for(const o of h)le.find(t=>t.userId==o.actor.userId)||e.includes(o.actor.userId)&&o.conflictResponseDate.date.getTime()==I.getTime()&&a.push(o);m(a)}}}),s.jsx("span",{className:"checkmark",children:" "})]})," "]}),s.jsx("div",{className:"conflicts",children:ae.map((c,a)=>s.jsx(me,{conflictResponseDate:c.conflictResponseDate,actor:c.actor},a))})]}),s.jsxs("div",{className:"page-title",children:[s.jsx("img",{src:fe,alt:"back arrow",onClick:()=>{if(ee){g("date"),v(null),D(null),T(null),w("custom"),j(""),N(""),E(""),A(""),Y(l==null?void 0:l.rehearsalLocations[0]),P(l==null?void 0:l.eventTypes[0]),H(l==null?void 0:l.defaultLocation),$(!1),k(null),m(h),te(!1);return}Ie?(se(!1),g("date")):g("type"),N(""),j(""),$(!1);const c=[];for(const a of h)a.conflictResponseDate.date.getTime()==I.getTime()&&c.push(a);m(c)}}),s.jsx("h2",{className:"mode",children:"Enter Rehersal Information"})]}),s.jsx("label",{htmlFor:"Name",children:"Name: "}),s.jsx("input",{type:"text",value:V,onChange:c=>{j(c.target.value)}}),s.jsx("br",{}),s.jsx("label",{htmlFor:"Description",children:"Description: "}),s.jsx("textarea",{value:q,onChange:c=>{N(c.target.value)}}),s.jsx("br",{}),s.jsx("label",{htmlFor:"",children:"Date: "}),s.jsx("input",{type:"date",value:M==null?void 0:M.toISOString().split("T")[0],onChange:c=>{const a=new Date(c.target.value);if(a=="Invalid Date"){v(null);return}a.setHours(0,0,0,0),a.setDate(a.getDate()+1),v(a);const e=new Date(a);e.setHours(y.getHours(),y.getMinutes(),0,0),D(e),E(e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(a);o.setHours(R.getHours(),R.getMinutes(),0,0),T(o),A(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),k(a);const t=[];for(const n of h)n.conflictResponseDate.date.getTime()==a.getTime()&&t.push(n);m(t)}}),s.jsx("br",{}),s.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),s.jsx("input",{type:"time",value:Se,onChange:ke}),s.jsx("br",{}),s.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),s.jsx("input",{type:"time",value:Ce,onChange:Fe}),s.jsx("br",{}),s.jsx("label",{htmlFor:"location",children:"Location: "}),s.jsx("select",{name:"location",id:"location",onChange:c=>{H(l==null?void 0:l.locations.find(a=>a.name==c.target.value))},children:l==null?void 0:l.locations.map((c,a)=>s.jsx("option",{value:c.name,selected:(L==null?void 0:L.name)==c.name,children:c.name+" ("+c.address+")"},a))}),s.jsx("br",{}),s.jsx("label",{htmlFor:"location",children:"Rehersal Location: "}),s.jsx("select",{name:"location",id:"rehersal-location",onChange:c=>{Y(l==null?void 0:l.rehearsalLocations.find(a=>a.name==c.target.value))},children:l==null?void 0:l.rehearsalLocations.map((c,a)=>s.jsx("option",{value:c.name,selected:(G==null?void 0:G.name)==c.name,children:c.name},a))}),s.jsx("br",{}),s.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),s.jsx("select",{name:"eventType",id:"event-type",onChange:c=>{P(l==null?void 0:l.eventTypes.find(a=>a.name==c.target.value))},children:l==null?void 0:l.eventTypes.map((c,a)=>s.jsx("option",{value:c.name,selected:(O==null?void 0:O.name)==c.name,children:c.name},a))}),s.jsx("br",{}),B=="custom"?s.jsxs(s.Fragment,{children:[s.jsx("label",{htmlFor:"fullCast",children:"Full Cast: "}),s.jsxs("label",{className:"custom-checkbox",children:[s.jsx("input",{type:"checkbox",id:"ensemble",checked:ce,onChange:c=>De(c.target.checked)}),s.jsx("span",{className:"checkmark"})]})]}):s.jsx(s.Fragment,{}),B=="custom"&&s.jsx("br",{}),ce?s.jsx(s.Fragment,{}):s.jsxs(s.Fragment,{children:[" ",s.jsx("h2",{children:"Characters"}),s.jsx("div",{className:"characters",children:p.map((c,a)=>{if(c instanceof b)return B=="custom"?s.jsx(Ke,{character:c,isCreate:!1,actors:[],characters:i.characters,isAssign:!1,setCharacter:e=>{f(p.map((o,t)=>t===a?e:o))},removeCharacter:()=>{f(p.filter((e,o)=>o!==a))}},a):s.jsx(Je,{character:c,canDelete:!0,onDelete:()=>{f(p.filter((e,o)=>o!==a))},isMini:!1},a);if(c instanceof S)return B=="custom"?s.jsx(Xe,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:c,isCustom:!0,setEnsembleSection:e=>{f(p.map((o,t)=>t===a?e:o))},removeEnsembleSection:()=>{f(p.filter((e,o)=>o!==a)),$(!1)},isCreate:!1,isAssign:!1,actors:l.students},a):s.jsx(Ve,{ensembleSection:c,canDelete:!0,onDelete:()=>{f(p.filter((e,o)=>o!==a))},isMini:!1},a);if(c instanceof _)return B=="custom"?s.jsx(Qe,{showGroup:c,characters:i.characters,setShowGroup:e=>{f(p.map((o,t)=>t===a?e:o))},removeShowGroup:()=>{f(p.filter((e,o)=>o!==a))},isCreate:!1,isAssign:!1,actors:l.students,hasEnsemble:i.hasEnsemble,showGroups:i.showGroups},a):s.jsx(qe,{showGroup:c,showCharacters:!0,canClick:!1,onClick:()=>{},canDelete:!0,onDelete:()=>{f(p.filter((e,o)=>o!==a))}},a);if(c instanceof J)return s.jsx(Ze,{canDelete:!0,onDelete:()=>{f(p.filter((e,o)=>o!==a))}},a)})}),B=="custom"?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"ActionBtn",onClick:()=>{const c=Math.floor(Math.random()*1e5);f([...p,b.fromBlank("Character 1",null,c)])},children:"Add Character"}),s.jsx("button",{className:"ActionBtn",onClick:()=>{const c=Math.floor(Math.random()*1e5);f([...p,_.fromBlank("Show Group 1",[],c)])},children:"Add Show Group"}),(i==null?void 0:i.hasEnsemble)&&s.jsx("button",{className:"ActionBtn "+(oe?"disabled":""),disabled:oe,onClick:()=>{oe||($(!0),f([...p,S.fromBlank(!0,!1,!1,!1,[])]))},children:"Add Ensemble"})," "]}):s.jsx(s.Fragment,{})," "]}),s.jsx("br",{}),he?s.jsx("div",{className:"loader"}):s.jsx("button",{onClick:async()=>{if(ne(!0),console.log(`Name: ${V}, Description: ${q}, Start Time: ${y}, End Time: ${R}, Selected Location: ${L}, Rehearsal Location: ${G}, Event Type: ${O}`),V==""||q==""||y==null||R==null||L==null||G==null||O==null){alert("Please fill out all fields"),console.log(`Name: ${V}, Description: ${q}, Start Time: ${y}, End Time: ${R}, Selected Location: ${L}, Rehearsal Location: ${G}, Event Type: ${O}`),ne(!1);return}console.log("Submit");const c=L??l.locations[0];console.log(y),console.log(R);const a=ye.fromBlank(M,y,R);console.log(a.toMap());const e=[];if(ce){p.push(new J);for(const t of i.ensemble.actors)e.push(t);for(const t of i.characters)e.find(n=>n.userId==t.actor.userId)==null&&e.push(t.actor)}else for(const t of p){if(t instanceof J){for(const n of i.ensemble.actors)e.push(n);for(const n of i.characters)e.find(r=>r.userId==n.actor.userId)==null&&e.push(n.actor);break}if(t instanceof b){if(e.find(n=>n.userId==t.actor.userId)!=null)continue;e.push(t.actor)}if(t instanceof S){if(t.includeAll)for(const n of i.ensemble.actors)e.find(r=>r.userId==n.userId)==null&&e.push(n);else if(t.includeMale){for(const n of i.ensemble.actors)if(n.gender=="male"){if(e.find(r=>r.userId==n.userId)!=null)continue;e.push(n)}}else if(t.includeFemale){for(const n of i.ensemble.actors)if(n.gender=="female"){if(e.find(r=>r.userId==n.userId)!=null)continue;e.push(n)}}else if(t.includeCustom)for(const n of t.customActors)e.find(r=>r.userId==n.userId)==null&&e.push(n)}if(t instanceof _)for(const n of t.characters){if(n instanceof b){if(e.find(r=>r.userId==n.actor.userId)!=null)continue;e.push(n.actor)}if(n instanceof S){if(n.includeAll)for(const r of i.ensemble.actors)e.find(d=>d.userId==r.userId)==null&&e.push(r);else if(n.includeMale){for(const r of i.ensemble.actors)if(r.gender=="male"){if(e.find(d=>d.userId==r.userId)!=null)continue;e.push(r)}}else if(n.includeFemale){for(const r of i.ensemble.actors)if(r.gender=="female"){if(e.find(d=>d.userId==r.userId)!=null)continue;e.push(r)}}else if(n.includeCustom)for(const r of n.customActors)e.find(d=>d.userId==r.userId)==null&&e.push(r)}}}const o=Re.fromBlank(V,q,c,a,"activity-theater-event",Date.now(),C,l.name,K,i.name,p,e,B,O,G);if(console.log(o),ee){o.id=Te.id,await Oe(o),te(!1);const t=o.date.from,n=o.date.to;t.setDate(o.date.date.getDate()),t.setMonth(o.date.date.getMonth()),t.setFullYear(o.date.date.getFullYear()),n.setDate(o.date.date.getDate()),n.setMonth(o.date.date.getMonth()),n.setFullYear(o.date.date.getFullYear());const r={title:o.name,start:t.toISOString(),end:n.toISOString(),isAllDay:!1,interactive:!0,description:o.info,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),location:o.rehearsalLocation.name,id:o.id},d=X.filter(ue=>ue.id!=o.id);d.push(r),Z(d);const F=z.filter(ue=>ue.id!=o.id);F.push(o),console.log(F),Q([...F])}else{await Pe(o);const t=o.date.from,n=o.date.to;t.setDate(o.date.date.getDate()),t.setMonth(o.date.date.getMonth()),t.setFullYear(o.date.date.getFullYear()),n.setDate(o.date.date.getDate()),n.setMonth(o.date.date.getMonth()),n.setFullYear(o.date.date.getFullYear());const r={title:o.name,start:t.toISOString(),end:n.toISOString(),isAllDay:!1,interactive:!0,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),id:o.id,location:o.rehearsalLocation.name,description:o.info};Z([...X,r]),Q([...z,o])}ne(!1),g("date"),v(null),D(null),T(null),w("custom"),j(""),N(""),E(""),A(""),Y(l==null?void 0:l.rehearsalLocations[0]),P(l==null?void 0:l.eventTypes[0]),H(l==null?void 0:l.defaultLocation),f([]),$(!1),k(null),m(h),se(!1)},className:"ActionBtn",children:ee?"Save":"Submit"}),!he&&s.jsx("button",{onClick:()=>{if(ee){g("date"),v(null),D(null),T(null),w("custom"),j(""),N(""),E(""),A(""),Y(l==null?void 0:l.rehearsalLocations[0]),P(l==null?void 0:l.eventTypes[0]),H(l==null?void 0:l.defaultLocation),$(!1),k(null),m(h),te(!1);return}Ie?(se(!1),g("date")):g("type"),N(""),j(""),$(!1);const c=[];for(const a of h)a.conflictResponseDate.date.getTime()==I.getTime()&&c.push(a);m(c)},className:"ActionBtn",children:"Back"})]})]})}
