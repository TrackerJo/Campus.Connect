import{r as j,j as e,C as x,k as B,e as h,E as b}from"./index-CTdd_IJn.js";import{T as N}from"./trash-BnpXJPEK.js";import{A as T,E as S}from"./Ensemble_Section_Tile-Ck4EDYVd.js";function A({character:a,setCharacter:c,isCreate:d,removeCharacter:g,isAssign:t,characters:u,actors:v,hasCreatedSchedule:f}){const i=j.useRef(null);return console.log("CHARACTER TILE"),console.log(u),console.log(d),console.log(t),console.log(f),e.jsxs("div",{className:"CharacterTile",id:"character-tile-"+a.characterId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"CharacterNameDiv",children:[e.jsxs("label",{htmlFor:"Character",children:["Character:  ",t?a.name:""]}),d?e.jsx("input",{type:"text",name:"",id:"",value:a.name,onChange:l=>{c(x.fromBlank(l.target.value,a.actor,a.characterId))}}):t?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("div",{className:"CharacterActorDiv",children:a.actor!=null?e.jsxs(e.Fragment,{children:[e.jsxs("label",{htmlFor:"Actor",children:["Actor: ",a.actor.name]}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var l;(l=i.current)==null||l.showModal()},children:"Edit Actor"})]}):e.jsx(e.Fragment,{children:e.jsx("button",{className:"ActionBtn",onClick:()=>{var l;(l=i.current)==null||l.showModal()},children:"Assign Actor"})})})]}):e.jsxs("select",{name:"characters",id:"characters",value:a.characterId,onChange:l=>{l.target.value!="null"&&c(u.find(s=>s.characterId==parseInt(l.target.value)))},children:[e.jsx("option",{value:"null",children:"Select a character"}),u.map((l,s)=>(console.log(l),e.jsx("option",{value:l.characterId,children:l.name},s)))]})]}),e.jsx("div",{children:!t&&e.jsx("img",{src:N,alt:"",className:"TrashIcon",onClick:()=>{g()}})})]}),e.jsx(T,{actor:a.actor??new B,actors:v,keepPastResult:!1,addedActors:[],setActor:l=>{var s;(s=i.current)==null||s.close(),c(x.fromBlank(a.name,l,a.characterId))},dialogRef:i,close:()=>{var l;(l=i.current)==null||l.close()}})]})}function y({showGroup:a,setShowGroup:c,isCreate:d,removeShowGroup:g,isAssign:t,showGroups:u,hasEnsemble:v,characters:f,actors:i,hasCreatedSchedule:l}){const[s,E]=j.useState(!1),[I,k]=j.useState(0);return j.useEffect(()=>{k(Math.floor(Math.random()*1e5))},[]),console.log("SHOW GROUP TILE"),console.log(f),e.jsxs("div",{className:"ShowGroupTile"+(d||t?"Create":""),id:"show-group-tile-"+a.showGroupId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"ShowGroupNameDiv",children:[e.jsx("label",{htmlFor:"ShowGroup",children:"Show Group: "}),d?e.jsx("input",{type:"text",name:"",id:"",value:a.name,onChange:n=>{c(h.fromBlank(n.target.value,a.characters,a.showGroupId))}}):t?e.jsx(e.Fragment,{children:e.jsx("label",{htmlFor:"",children:a.name})}):e.jsxs("select",{name:"show groups",id:"showGroups",value:a.showGroupId,onChange:n=>{n.target.value!="null"&&c(u.find(r=>r.showGroupId==parseInt(n.target.value)))},children:[e.jsx("option",{value:"null",children:"Select a show group"}),u.map((n,r)=>e.jsx("option",{value:n.showGroupId,children:n.name},r))]})]}),e.jsx("div",{children:!t&&e.jsx("img",{src:N,alt:"",className:"TrashIcon",onClick:()=>{g()}})})]}),(d||t)&&e.jsx("br",{}),(d||t)&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Characters",children:"Characters: "}),e.jsx("div",{className:"characters",id:"characters-"+I,children:a.characters.map((n,r)=>{if(console.log(n),n instanceof x&&!t)return e.jsx(A,{character:n,actors:[],isCreate:!1,characters:f,isAssign:t,hasCreatedSchedule:l,setCharacter:o=>{c(h.fromBlank(a.name,a.characters.map((m,C)=>C===r?o:m),a.showGroupId))},removeCharacter:()=>{c(h.fromBlank(a.name,a.characters.filter((o,m)=>m!==r),a.showGroupId))}},r);if(n instanceof b)return e.jsx(S,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:n,isAssign:t,actors:i,isCustom:!1,isCreate:!0,setEnsembleSection:o=>{console.log("NEW ENSEMBLE SECTION"),console.log(o.toMap());const m=h.fromBlank(a.name,a.characters.map((C,p)=>p===r?o:C),a.showGroupId);console.log("NEW SHOW GROUP"),console.log(m.toMap()),c(m)},removeEnsembleSection:()=>{E(!1),c(h.fromBlank(a.name,a.characters.filter((o,m)=>m!==r),a.showGroupId))}},r)})}),d&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"ActionBtn",onClick:()=>{const n=Math.floor(Math.random()*1e5),r=h.fromBlank(a.name,[...a.characters,x.fromBlank("",null,n)],a.showGroupId);r.hasCreatedSchedule=l??!1,c(r),setTimeout(()=>{const o=document.getElementById("characters-"+I);o.scrollTop=o.scrollHeight},100)},children:"Add Character"}),e.jsx("br",{}),v&&e.jsx("button",{className:"ActionBtn "+(s?"disabled":""),disabled:s,onClick:()=>{if(s)return;E(!0),setTimeout(()=>{const r=document.getElementById("characters-"+I);r.scrollTop=r.scrollHeight},100);const n=h.fromBlank(a.name,[...a.characters,b.fromBlank(!0,!1,!1,!1,[])],a.showGroupId);n.hasCreatedSchedule=l??!1,c(n)},children:"Add Ensemble"})]})]})]})}export{A as C,y as S};
