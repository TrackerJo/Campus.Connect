import{j as n,c as Ee,r as d,i as we}from"./index-C75OlIaX.js";import{g as Ae,C as g,b as y,E as x,F as O,h as ke,i as Fe}from"./constants-CXGD8REG.js";import{e as Ne,q as ye,m as Le,r as Re,t as Me,v as Be,w as He}from"./db-CkdnOClb.js";import{A as Ge,S as Oe,D as _e,C as $e,E as Pe,a as Ue}from"./Show_Group_Display_Tile-B0C4sC3I.js";import{C as Ye}from"./Calendar-DSdW6mUK.js";import{C as ze,S as Je}from"./Show_Group_Tile-B-0dS8oh.js";import{E as qe}from"./Ensemble_Section_Tile-D7gjP3nY.js";import{F as Ve}from"./Full_Cast_Tile-KT1s7OtA.js";import"./trash-BnpXJPEK.js";function ie({conflictResponseDate:S,actor:U}){return n.jsx("div",{className:"ConflictDisplayTile ",id:"conflict-display-tile-"+U.userId,children:n.jsx("div",{className:"header",children:n.jsxs("div",{className:"CharacterNameDiv",children:[n.jsxs("label",{htmlFor:"Actor",children:["Actor: ",U.name]}),n.jsx("br",{}),n.jsxs("label",{htmlFor:"Actor",children:["Date: ",S.date.toDateString()]}),n.jsx("br",{}),S.canAttend?n.jsxs("label",{htmlFor:"Actor",children:[S.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",S.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):n.jsx("label",{htmlFor:"Actor",children:"Can't Attend"})]})})})}Ee(document.getElementById("root")).render(n.jsx(d.StrictMode,{children:n.jsx(We,{})}));function We(){const[S,U]=d.useState(""),[u,me]=d.useState(),[Q,he]=d.useState(""),[i,pe]=d.useState(),[le,I]=d.useState("date"),[v,L]=d.useState(null),[R,C]=d.useState(null),[M,D]=d.useState(null),[T,E]=d.useState("custom"),[Y,w]=d.useState(""),[z,_]=d.useState(""),[ge,A]=d.useState(""),[Ie,k]=d.useState(""),[F,$]=d.useState(void 0),[be,X]=d.useState(!1),[B,J]=d.useState([]),[q,V]=d.useState([]),[m,f]=d.useState([]),[Z,P]=d.useState(!1),[p,xe]=d.useState([]),[ee,h]=d.useState([]),[te,je]=d.useState(!1),[b,N]=d.useState(null),[se,ne]=d.useState(!1),[Se,ve]=d.useState(null),[H,W]=d.useState(),[G,K]=d.useState(void 0),[de,ue]=d.useState(!1),[oe,ce]=d.useState(!1),[re,Ce]=d.useState([]);d.useEffect(()=>{we(()=>{});const c=new URLSearchParams(window.location.search),r=c.get("activityId");r&&(U(r),Ne(r).then(t=>{t instanceof Ae||(me(t),W(t==null?void 0:t.rehearsalLocations[0]),K(t==null?void 0:t.eventTypes[0]),$(t==null?void 0:t.defaultLocation))}));const e=c.get("showId");e&&(he(e),ye(r,e).then(t=>{const s=[];for(const a of t)for(const l of a.dates)s.push({conflictResponseDate:l,actor:a.actor});s.sort((a,l)=>a.conflictResponseDate.date.getTime()-l.conflictResponseDate.date.getTime()),xe(s),h([...s])})),Le(r,e).then(t=>{pe(t),t!=null&&t.hasEnsemble&&Ce(t.ensemble.actors)}),Re(r,e).then(t=>{J(t);const s=[];for(const a of t){console.log(a);const l=a.date.from;console.log(a.date.date),l.setDate(a.date.date.getDate()),l.setMonth(a.date.date.getMonth()),l.setFullYear(a.date.date.getFullYear());const j=a.date.to;j.setDate(a.date.date.getDate()),j.setMonth(a.date.date.getMonth()),j.setFullYear(a.date.date.getFullYear()),console.log(l),console.log(j),console.log(a.rehearsalLocation.color),s.push({title:a.name,start:l.toISOString(),end:j.toISOString(),isAllDay:!1,interactive:!0,color:a.rehearsalLocation.color.setAlpha(.8).toHex(),description:a.info,id:a.id,location:a.rehearsalLocation.name})}V(s)});const o=()=>{window.innerWidth<800?ue(!0):ue(!1)};return window.addEventListener("resize",o),o(),()=>window.removeEventListener("resize",o)},[]);const De=c=>{const r=c.target.value,[e,o]=r.split(":").map(Number),t=new Date(v);t.setHours(e,o,0,0),C(t),A(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},Te=c=>{const r=c.target.value,[e,o]=r.split(":").map(Number),t=new Date(v);t.setHours(e,o,0,0),D(t),k(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};Date.prototype.addHours=function(c){return this.setTime(this.getTime()+c*60*60*1e3),this};function fe(){return B}return n.jsxs("div",{className:"center",children:[n.jsx("h1",{className:"title",children:"Create Schedule"}),le=="date"?n.jsxs(n.Fragment,{children:[" ",n.jsx("h2",{className:"mode",children:"Select a Date"}),n.jsxs("div",{className:"container",children:[n.jsxs("div",{className:"box left",children:[n.jsxs("h2",{children:["Conflicts",b!=null?" on "+b.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:oe,onChange:c=>{if(ce(c.target.checked),c.target.checked){const r=[];for(const e of p)re.find(o=>o.userId==e.actor.userId)||r.push(e);h(r)}}}),n.jsx("span",{className:"checkmark",children:" "})]})," "]}),n.jsx("div",{className:"conflicts",children:ee.map((c,r)=>n.jsx(ie,{conflictResponseDate:c.conflictResponseDate,actor:c.actor},r))})]}),n.jsx(Ye,{canOpenContextMenu:!0,events:q,editEvent:c=>{const r=fe().find(e=>e.id==c.id);r&&(console.log(r),I("info"),w(r.name),_(r.info),L(r.date.date),C(r.date.from),A(r.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),D(r.date.to),k(r.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),$(r.location),W(r.rehearsalLocation),f(r.characters),K(r.activityEventType),ne(!0),E(r.theaterEventType),ve(r))},viewEvent:c=>{const r=fe().find(e=>e.id==c.id);r&&(localStorage.setItem("event",JSON.stringify(r)),localStorage.setItem("back","/Activity/Shows/Show/CreateSchedule/?activityId="+S+"&showId="+Q),window.location.href="/Calendar/Event/")},viewConflicts:c=>{const r=new Date(c);r.setHours(0,0,0,0),N(r);const e=[];for(const o of p)o.conflictResponseDate.date.getTime()==r.getTime()&&e.push(o);h(e)},deleteEvent:async c=>{console.log(c);const r=B.find(t=>t.id==c.id),e=B.filter(t=>t.id!=c.id);J(e);const o=q.filter(t=>t.id!=c.id);V(o),await Me(r)},dateClick:c=>{console.log(c.date),L(c.date);const r=new Date(c.date);r.setHours(0,0,0,0),N(r);const e=[];for(const t of p)t.conflictResponseDate.date.getTime()==r.getTime()&&e.push(t);h(e),C(new Date(c.date)),A(c.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(c.date);D(o.addHours(1)),console.log(o),k(c.date.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),I("type")},eventClick:c=>{L(c.event.start);const r=new Date(c.event.start);r.setHours(0,0,0,0),N(r);const e=[];for(const t of p)t.conflictResponseDate.date.getTime()==r.getTime()&&e.push(t);h(e),C(new Date(c.event.start)),A(c.event.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(c.event.end);D(o),k(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),I("type")}}),n.jsxs("div",{className:"box right",children:[n.jsx("h2",{children:"How To Schedule Events"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Click a time slot to start creating an event"}),n.jsx("li",{children:"Right click a time slot to view conflicts for that day"}),n.jsx("li",{children:"Right click a current event to view/edit the event or delete the event"})]})]})]}),n.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(B)),window.open("/Activity/Shows/Show/Schedule/Print/","_blank")},children:"Print"}),n.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/Shows/Show/?activityId="+S+"&showId="+Q},children:"Back"})]}):le=="type"?n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"mode",children:"Select a Rehersal Type"}),!de&&n.jsxs("div",{className:"conflicts-div",children:[n.jsxs("h2",{children:["Conflicts",b!=null?" on "+b.toDateString():""]}),n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),(i==null?void 0:i.hasEnsemble)&&n.jsx(n.Fragment,{children:n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:oe,onChange:c=>{if(ce(c.target.checked),c.target.checked){const r=[],e=new Date(v);e.setHours(0,0,0,0);for(const o of p)re.find(t=>t.userId==o.actor.userId)||o.conflictResponseDate.date.getTime()==e.getTime()&&r.push(o);h(r)}}}),n.jsx("span",{className:"checkmark",children:" "})]})}),n.jsx("div",{className:"conflicts",children:ee.map((c,r)=>n.jsx(ie,{conflictResponseDate:c.conflictResponseDate,actor:c.actor},r))})]}),n.jsx("button",{onClick:()=>{I("info"),E("custom"),f([])},className:"ActionBtn",children:"Custom"}),n.jsx("h2",{className:"mode",children:"Show Layout"}),n.jsx("div",{className:"layout",children:i==null?void 0:i.layout.map((c,r)=>n.jsx(Ge,{act:c,onClick:e=>{E("scene"),w(e.name+" - "+c.name),I("info"),f(e.characters);const o=[];for(const s of e.characters)if(s instanceof g)o.includes(s.actor.userId)&&o.push(s.actor.userId);else if(s instanceof y){for(const a of s.characters)if(a instanceof g)o.includes(a.actor.userId)&&o.push(a.actor.userId);else if(a instanceof x){if(a.includeAll)for(const l of i.ensemble.actors)o.includes(l.userId)&&o.push(l.userId);else if(a.includeMale)for(const l of i.ensemble.actors)l.gender=="male"&&o.includes(l.userId)&&o.push(l.userId);else if(a.includeFemale)for(const l of i.ensemble.actors)l.gender=="female"&&o.includes(l.userId)&&o.push(l.userId);else if(a.includeCustom)for(const l of a.customActors)o.includes(l.userId)&&o.push(l.userId)}}else if(s instanceof x){if(s.includeAll)for(const a of i.ensemble.actors)o.includes(a.userId)&&o.push(a.userId);else if(s.includeMale)for(const a of i.ensemble.actors)a.gender=="male"&&o.includes(a.userId)&&o.push(a.userId);else if(s.includeFemale)for(const a of i.ensemble.actors)a.gender=="female"&&o.includes(a.userId)&&o.push(a.userId);else if(s.includeCustom)for(const a of s.customActors)o.includes(a.userId)&&o.push(a.userId)}else if(s instanceof O){for(const a of i.ensemble.actors)o.includes(a.userId)&&o.push(a.userId);for(const a of i.characters)o.includes(a.actor.userId)||o.push(a.actor.userId)}const t=[];for(const s of p)o.includes(s.actor.userId)&&s.conflictResponseDate.date.getTime()==b.getTime()&&t.push(s);h(t)}},r))}),n.jsx("h2",{className:"mode",children:"Songs"}),n.jsx("div",{className:"songs",children:i==null?void 0:i.songs.map((c,r)=>n.jsx(Oe,{song:c,onClick:()=>{E("song"),w(c.name),f(c.characters),I("info");const e=[];for(const t of c.characters)if(t instanceof g)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof y){for(const s of t.characters)if(s instanceof g)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof x){if(s.includeAll)for(const a of i.ensemble.actors)e.includes(a.userId)&&e.push(a.userId);else if(s.includeMale)for(const a of i.ensemble.actors)a.gender=="male"&&e.includes(a.userId)&&e.push(a.userId);else if(s.includeFemale)for(const a of i.ensemble.actors)a.gender=="female"&&e.includes(a.userId)&&e.push(a.userId);else if(s.includeCustom)for(const a of s.customActors)e.includes(a.userId)&&e.push(a.userId)}}else if(t instanceof x){if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(t instanceof O){for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);for(const s of i.characters)e.includes(s.actor.userId)||e.push(s.actor.userId)}const o=[];for(const t of p)e.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==b.getTime()&&o.push(t);h(o)}},r))}),n.jsx("h2",{className:"mode",children:"Dances"}),n.jsx("div",{className:"dances",children:i==null?void 0:i.dances.map((c,r)=>n.jsx(_e,{dance:c,onClick:()=>{E("dance"),w(c.name),I("info"),f(c.characters);const e=[];for(const t of c.characters)if(t instanceof g)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof y){for(const s of t.characters)if(s instanceof g)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof x){if(s.includeAll)for(const a of i.ensemble.actors)e.includes(a.userId)&&e.push(a.userId);else if(s.includeMale)for(const a of i.ensemble.actors)a.gender=="male"&&e.includes(a.userId)&&e.push(a.userId);else if(s.includeFemale)for(const a of i.ensemble.actors)a.gender=="female"&&e.includes(a.userId)&&e.push(a.userId);else if(s.includeCustom)for(const a of s.customActors)e.includes(a.userId)&&e.push(a.userId)}}else if(t instanceof x){if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(t instanceof O){for(const s of i.ensemble.actors)e.push(s.userId);for(const s of i.characters)e.includes(s.actor.userId)||e.push(s.actor.userId)}const o=[];for(const t of p)e.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==b.getTime()&&o.push(t);h(o)}},r))}),n.jsx("button",{onClick:()=>{I("date"),N(null),h([...p])},className:"ActionBtn",children:"Back"})]}):n.jsxs(n.Fragment,{children:[!de&&n.jsxs("div",{className:"conflicts-div",children:[n.jsxs("h2",{children:["Conflicts",b!=null?" on "+b.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:oe,onChange:c=>{if(ce(c.target.checked),c.target.checked){const r=[],e=[];for(const o of m)if(o instanceof g)e.includes(o.actor.userId)&&e.push(o.actor.userId);else if(o instanceof y){for(const t of o.characters)if(t instanceof g)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(o instanceof x){if(o.includeAll)for(const t of i.ensemble.actors)e.includes(t.userId)&&e.push(t.userId);else if(o.includeMale)for(const t of i.ensemble.actors)t.gender=="male"&&e.includes(t.userId)&&e.push(t.userId);else if(o.includeFemale)for(const t of i.ensemble.actors)t.gender=="female"&&e.includes(t.userId)&&e.push(t.userId);else if(o.includeCustom)for(const t of o.customActors)e.includes(t.userId)&&e.push(t.userId)}else{for(const t of i.ensemble.actors)e.push(t.userId);for(const t of i.characters)e.includes(t.actor.userId)||e.push(t.actor.userId)}for(const o of p)re.find(t=>t.userId==o.actor.userId)||e.includes(o.actor.userId)&&o.conflictResponseDate.date.getTime()==b.getTime()&&r.push(o);h(r)}}}),n.jsx("span",{className:"checkmark",children:" "})]})," "]}),n.jsx("div",{className:"conflicts",children:ee.map((c,r)=>n.jsx(ie,{conflictResponseDate:c.conflictResponseDate,actor:c.actor},r))})]}),n.jsx("h2",{className:"mode",children:"Enter Rehersal Information"}),n.jsx("label",{htmlFor:"Name",children:"Name: "}),n.jsx("input",{type:"text",value:Y,onChange:c=>{w(c.target.value)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"Description",children:"Description: "}),n.jsx("textarea",{value:z,onChange:c=>{_(c.target.value)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"",children:"Date: "}),n.jsx("input",{type:"date",value:v==null?void 0:v.toISOString().split("T")[0],onChange:c=>{const r=new Date(c.target.value);r.setHours(0,0,0,0),r.setDate(r.getDate()+1),L(r);const e=new Date(r);e.setHours(R.getHours(),R.getMinutes(),0,0),C(e),A(e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(r);o.setHours(M.getHours(),M.getMinutes(),0,0),D(o),k(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),N(r);const t=[];for(const s of p)s.conflictResponseDate.date.getTime()==r.getTime()&&t.push(s);h(t)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),n.jsx("input",{type:"time",value:ge,onChange:De}),n.jsx("br",{}),n.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),n.jsx("input",{type:"time",value:Ie,onChange:Te}),n.jsx("br",{}),n.jsx("label",{htmlFor:"location",children:"Location: "}),n.jsx("select",{name:"location",id:"location",onChange:c=>{$(u==null?void 0:u.locations.find(r=>r.name==c.target.value))},children:u==null?void 0:u.locations.map((c,r)=>n.jsx("option",{value:c.name,selected:(F==null?void 0:F.name)==c.name,children:c.name+" ("+c.address+")"},r))}),n.jsx("br",{}),n.jsx("label",{htmlFor:"location",children:"Rehersal Location: "}),n.jsx("select",{name:"location",id:"rehersal-location",onChange:c=>{W(u==null?void 0:u.rehearsalLocations.find(r=>r.name==c.target.value))},children:u==null?void 0:u.rehearsalLocations.map((c,r)=>n.jsx("option",{value:c.name,selected:(H==null?void 0:H.name)==c.name,children:c.name},r))}),n.jsx("br",{}),n.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),n.jsx("select",{name:"eventType",id:"event-type",onChange:c=>{K(u==null?void 0:u.eventTypes.find(r=>r.name==c.target.value))},children:u==null?void 0:u.eventTypes.map((c,r)=>n.jsx("option",{value:c.name,selected:(G==null?void 0:G.name)==c.name,children:c.name},r))}),n.jsx("br",{}),T=="custom"?n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"fullCast",children:"Full Cast: "}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:te,onChange:c=>je(c.target.checked)}),n.jsx("span",{className:"checkmark"})]})]}):n.jsx(n.Fragment,{}),T=="custom"&&n.jsx("br",{}),te?n.jsx(n.Fragment,{}):n.jsxs(n.Fragment,{children:[" ",n.jsx("h2",{children:"Characters"}),n.jsx("div",{className:"characters",children:m.map((c,r)=>{if(c instanceof g)return T=="custom"?n.jsx(ze,{character:c,isCreate:!1,actors:[],characters:i.characters,isAssign:!1,setCharacter:e=>{f(m.map((o,t)=>t===r?e:o))},removeCharacter:()=>{f(m.filter((e,o)=>o!==r))}},r):n.jsx($e,{character:c,canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==r))},isMini:!1},r);if(c instanceof x)return T=="custom"?n.jsx(qe,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:c,isCustom:!0,setEnsembleSection:e=>{f(m.map((o,t)=>t===r?e:o))},removeEnsembleSection:()=>{f(m.filter((e,o)=>o!==r)),P(!1)},isCreate:!1,isAssign:!1,actors:u.students},r):n.jsx(Pe,{ensembleSection:c,canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==r))},isMini:!1},r);if(c instanceof y)return T=="custom"?n.jsx(Je,{showGroup:c,characters:i.characters,setShowGroup:e=>{f(m.map((o,t)=>t===r?e:o))},removeShowGroup:()=>{f(m.filter((e,o)=>o!==r))},isCreate:!1,isAssign:!1,actors:u.students,hasEnsemble:i.hasEnsemble,showGroups:i.showGroups},r):n.jsx(Ue,{showGroup:c,showCharacters:!0,canClick:!1,onClick:()=>{},canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==r))}},r);if(c instanceof O)return n.jsx(Ve,{canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==r))}},r)})}),T=="custom"?n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"ActionBtn",onClick:()=>{const c=Math.floor(Math.random()*1e5);f([...m,g.fromBlank("Character 1",null,c,0)])},children:"Add Character"}),n.jsx("button",{className:"ActionBtn",onClick:()=>{const c=Math.floor(Math.random()*1e5);f([...m,y.fromBlank("Show Group 1",[],c,0)])},children:"Add Show Group"}),(i==null?void 0:i.hasEnsemble)&&n.jsx("button",{className:"ActionBtn "+(Z?"disabled":""),disabled:Z,onClick:()=>{Z||(P(!0),f([...m,x.fromBlank(!0,!1,!1,!1,[],0)]))},children:"Add Ensemble"})," "]}):n.jsx(n.Fragment,{})," "]}),n.jsx("br",{}),be?n.jsx("div",{className:"loader"}):n.jsx("button",{onClick:async()=>{if(X(!0),Y==""||z==""||R==null||M==null||F==null||H==null||G==null){alert("Please fill out all fields"),console.log(`Name: ${Y}, Description: ${z}, Start Time: ${R}, End Time: ${M}, Selected Location: ${F}, Rehearsal Location: ${H}, Event Type: ${G}`),X(!1);return}console.log("Submit");const c=F??u.locations[0];console.log(R),console.log(M);const r=ke.fromBlank(v,R,M);console.log(r.toMap());const e=[];if(te){m.push(new O);for(const t of i.ensemble.actors)e.push(t);for(const t of i.characters)e.find(s=>s.userId==t.actor.userId)==null&&e.push(t.actor)}else for(const t of m){if(t instanceof O){for(const s of i.ensemble.actors)e.push(s);for(const s of i.characters)e.find(a=>a.userId==s.actor.userId)==null&&e.push(s.actor);break}if(t instanceof g){if(e.find(s=>s.userId==t.actor.userId)!=null)continue;e.push(t.actor)}if(t instanceof x){if(t.includeAll)for(const s of i.ensemble.actors)e.find(a=>a.userId==s.userId)==null&&e.push(s);else if(t.includeMale){for(const s of i.ensemble.actors)if(s.gender=="male"){if(e.find(a=>a.userId==s.userId)!=null)continue;e.push(s)}}else if(t.includeFemale){for(const s of i.ensemble.actors)if(s.gender=="female"){if(e.find(a=>a.userId==s.userId)!=null)continue;e.push(s)}}else if(t.includeCustom)for(const s of t.customActors)e.find(a=>a.userId==s.userId)==null&&e.push(s)}if(t instanceof y)for(const s of t.characters){if(s instanceof g){if(e.find(a=>a.userId==s.actor.userId)!=null)continue;e.push(s.actor)}if(s instanceof x){if(s.includeAll)for(const a of i.ensemble.actors)e.find(l=>l.userId==a.userId)==null&&e.push(a);else if(s.includeMale){for(const a of i.ensemble.actors)if(a.gender=="male"){if(e.find(l=>l.userId==a.userId)!=null)continue;e.push(a)}}else if(s.includeFemale){for(const a of i.ensemble.actors)if(a.gender=="female"){if(e.find(l=>l.userId==a.userId)!=null)continue;e.push(a)}}else if(s.includeCustom)for(const a of s.customActors)e.find(l=>l.userId==a.userId)==null&&e.push(a)}}}const o=Fe.fromBlank(Y,z,c,r,"activity-theater-event",Date.now(),S,u.name,Q,i.name,m,e,T,G,H);if(console.log(o),se){o.id=Se.id,await Be(o),ne(!1);const t=o.date.from,s=o.date.to,a={title:o.name,start:t.toISOString(),end:s.toISOString(),isAllDay:!1,interactive:!0,description:o.info,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),location:o.rehearsalLocation.name,id:o.id},l=q.filter(ae=>ae.id!=o.id);l.push(a),V(l);const j=B.filter(ae=>ae.id!=o.id);j.push(o),console.log(j),J([...j])}else{await He(o);const t=o.date.from,s=o.date.to,a={title:o.name,start:t.toISOString(),end:s.toISOString(),isAllDay:!1,interactive:!0,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),id:o.id,location:o.rehearsalLocation.name,description:o.info};V([...q,a]),J([...B,o])}X(!1),I("date"),L(null),C(null),D(null),E("custom"),w(""),_(""),A(""),k(""),$(void 0),W(void 0),K(void 0),f([]),P(!1),N(null),h(p)},className:"ActionBtn",children:se?"Save":"Submit"}),n.jsx("button",{onClick:()=>{if(se){I("date"),L(null),C(null),D(null),E("custom"),w(""),_(""),A(""),k(""),$(void 0),P(!1),N(null),h(p),ne(!1);return}I("type"),_(""),P(!1);const c=[];for(const r of p)r.conflictResponseDate.date.getTime()==b.getTime()&&c.push(r);h(c)},className:"ActionBtn",children:"Back"})]})]})}
