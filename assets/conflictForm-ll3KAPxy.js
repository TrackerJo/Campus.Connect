import{j as e,r as l,c as se,i as ne}from"./index-CgOOottF.js";import{m as E,j as M,n as C,d as A,o as ae,p as le,f as re}from"./constants-cstwFp1G.js";import{T as oe}from"./trash-BnpXJPEK.js";import{o as ie,v as ce,w as de,x as ue,y as me}from"./db-B2-RqaCO.js";import{A as he}from"./Add_User_Dialog-kFvmmHHs.js";function xe({conflict:n,canDelete:o,onDelete:j,setConflict:m}){return e.jsx("div",{className:"ConflictDateTile",id:"conflict-date-tile-"+n.date.date.toISOString(),children:e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"ConflictDateNameDiv",children:[e.jsx("label",{htmlFor:"Character",children:"Date: "}),e.jsx("input",{type:"date",value:n.date.date.toISOString().slice(0,10),onChange:a=>{const u=new Date(a.target.value);u.setHours(0,0,0,0),m(E.fromBlank(M.fromBlank(u,n.date.from,n.date.to),n.moreInfo))}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Actor",children:"From: "}),e.jsx("input",{type:"time",value:n.date.from.toTimeString().slice(0,5),onChange:a=>{console.log(a.target.value);const u=new Date,h=a.target.value.split(":");u.setHours(parseInt(h[0]),parseInt(h[1]),0,0),m(E.fromBlank(M.fromBlank(n.date.date,u,n.date.to),n.moreInfo))}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Actor",children:"To: "}),e.jsx("input",{type:"time",value:n.date.to.toTimeString().slice(0,5),onChange:a=>{console.log(a.target.value);const u=new Date,h=a.target.value.split(":");u.setHours(parseInt(h[0]),parseInt(h[1]),0,0),console.log({date:u}),m(E.fromBlank(M.fromBlank(n.date.date,n.date.from,u),n.moreInfo))}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Character",children:"More Info: "}),e.jsx("input",{type:"text",value:n.moreInfo,onChange:a=>{m(E.fromBlank(M.fromBlank(n.date.date,n.date.from,n.date.to),a.target.value))}})]}),o&&e.jsx("div",{children:e.jsx("img",{src:oe,alt:"",className:"TrashIcon",onClick:()=>{j()}})})]})})}function ge({minTime:n,maxTime:o,setConflict:j,dialogRef:m,close:a,date:u}){const[h,b]=l.useState(C.fromBlank(u,n,o,!0,""));return l.useEffect(()=>{b(C.fromBlank(u,n,o,!0,""))},[n,o,u]),e.jsxs("dialog",{ref:m,className:"AddConflictDialog",children:[e.jsx("h2",{children:"Add Conflict"}),e.jsxs("div",{className:"conflict-times",children:[e.jsx("label",{htmlFor:"",children:"From: "}),e.jsx("input",{type:"time",value:h.from.toTimeString().slice(0,5),onChange:k=>{const D=new Date,F=k.target.value.split(":");D.setHours(parseInt(F[0]),parseInt(F[1]),0,0),b(C.fromBlank(u,D,h.to,!0,h.note))}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"To: "}),e.jsx("input",{type:"time",value:h.to.toTimeString().slice(0,5),onChange:k=>{const D=new Date,F=k.target.value.split(":");D.setHours(parseInt(F[0]),parseInt(F[1]),0,0),b(C.fromBlank(u,h.from,D,!0,h.note))}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Note (Optional): "}),e.jsx("input",{type:"text",value:h.note,onChange:k=>{b(C.fromBlank(u,h.from,h.to,!0,k.target.value))}}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{b(C.fromBlank(u,n,o,!0,"")),j(h)},children:"Add Conflict"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{a()},children:"Close"})]})]})}function je({conflict:n,conflictResponseDate:o,setConflict:j}){const m=l.useRef(null);return e.jsxs("div",{className:"ConflictDateFormTile",id:"conflict-date-form-tile-"+n.date.date.toISOString(),children:[e.jsx("div",{className:"header",children:e.jsxs("div",{className:"ConflictDateFormNameDiv",children:[e.jsxs("label",{htmlFor:"Character",children:["Date: ",n.date.date.toDateString()]}),e.jsx("br",{}),e.jsxs("label",{htmlFor:"Actor",children:["From: ",n.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," "]}),e.jsx("br",{}),e.jsxs("label",{htmlFor:"Actor",children:["To: ",n.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsx("br",{}),n.moreInfo!=""&&e.jsxs("label",{htmlFor:"Character",children:["More Info: ",n.moreInfo]})]})}),e.jsxs("div",{className:"can-attend-div",children:[e.jsx("label",{htmlFor:"can-attend-cbox",children:"Can attend rehersal: "}),e.jsxs("div",{className:"custom-checkbox",onClick:()=>{j(C.fromBlank(n.date.date,null,null,!(o!=null&&o.canAttend),""))},children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:o==null?void 0:o.canAttend,onChange:a=>j(C.fromBlank(n.date.date,null,null,a.target.checked,""))}),e.jsx("span",{className:"checkmark"})]})]}),(o==null?void 0:o.from)&&e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Conflict:"}),e.jsx("br",{}),e.jsxs("label",{htmlFor:"",children:["From: ",o.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsx("br",{}),e.jsxs("label",{htmlFor:"",children:["To: ",o.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),o.note!=""&&e.jsx("br",{}),o.note!=""&&e.jsxs("label",{htmlFor:"",children:["Note: ",o.note]})]})}),(o==null?void 0:o.canAttend)&&e.jsx("button",{className:"ActionBtn",onClick:()=>{var a;if(o!=null&&o.from){j(C.fromBlank(n.date.date,null,null,!0,""));return}(a=m.current)==null||a.showModal()},children:o!=null&&o.from?"Remove Conflict":"Add Conflict"}),e.jsx(ge,{minTime:n.date.from,maxTime:n.date.to,setConflict:a=>{var u;j(C.fromBlank(n.date.date,a.from,a.to,!0,a.note)),(u=m.current)==null||u.close()},date:n.date.date,dialogRef:m,close:()=>{var a;(a=m.current)==null||a.close()}})]})}function fe({dialogRef:n,close:o,addConflicts:j}){const[m,a]=l.useState("daily"),[u,h]=l.useState(new Date),[b,k]=l.useState(new Date),[D,F]=l.useState(new Date),[p,f]=l.useState(new Date),[w,I]=l.useState(""),[i,x]=l.useState([]),[B,J]=l.useState(!1);return e.jsxs("dialog",{ref:n,className:"AddRecurringConflictDialog",children:[e.jsx("h2",{children:"Add Recurring Conflict"}),e.jsx("label",{htmlFor:"",children:"Note: Only use this if you can still attend part of the rehersal!"}),e.jsxs("div",{className:"conflict-times",children:[e.jsx("label",{htmlFor:"",children:"Recurring Type: "}),e.jsxs("select",{name:"recurring-type",id:"recurring-type",value:m,onChange:r=>{a(r.target.value)},children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"biweekly",children:"Every other week"})]}),m=="daily"&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Exclude weekends: "}),e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:B,onChange:r=>J(r.target.checked)}),e.jsx("span",{className:"checkmark"})]})]}),(m=="weekly"||m=="biweekly")&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Days of the week: "}),e.jsxs("div",{className:"repeat-days",children:[e.jsx("div",{className:"day-of-week noselect "+(i.includes(0)?"day-chosen":""),onClick:()=>{if(i.includes(0)){x(i.filter(r=>r!=0));return}x([...i,0])},children:e.jsx("label",{htmlFor:"",children:"Sun"})}),e.jsx("div",{className:"day-of-week noselect "+(i.includes(1)?"day-chosen":""),onClick:()=>{if(i.includes(1)){x(i.filter(r=>r!=1));return}x([...i,1])},children:e.jsx("label",{htmlFor:"",children:"Mon"})}),e.jsx("div",{className:"day-of-week noselect "+(i.includes(2)?"day-chosen":""),onClick:()=>{if(i.includes(2)){x(i.filter(r=>r!=2));return}x([...i,2])},children:e.jsx("label",{htmlFor:"",children:"Tue"})}),e.jsx("div",{className:"day-of-week noselect "+(i.includes(3)?"day-chosen":""),onClick:()=>{if(i.includes(3)){x(i.filter(r=>r!=3));return}x([...i,3])},children:e.jsx("label",{htmlFor:"",children:"Wed"})}),e.jsx("div",{className:"day-of-week noselect "+(i.includes(4)?"day-chosen":""),onClick:()=>{if(i.includes(4)){x(i.filter(r=>r!=4));return}x([...i,4])},children:e.jsx("label",{htmlFor:"",children:"Thu"})}),e.jsx("div",{className:"day-of-week noselect "+(i.includes(5)?"day-chosen":""),onClick:()=>{if(i.includes(5)){x(i.filter(r=>r!=5));return}x([...i,5])},children:e.jsx("label",{htmlFor:"",children:"Fri"})}),e.jsx("div",{className:"day-of-week noselect "+(i.includes(6)?"day-chosen":""),onClick:()=>{if(i.includes(6)){x(i.filter(r=>r!=6));return}x([...i,6])},children:e.jsx("label",{htmlFor:"",children:"Sat"})})]})]}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Start Date: "}),e.jsx("input",{type:"date",value:u.toISOString().slice(0,10),onChange:r=>{console.log(r.target.value);const c=new Date(r.target.value);c.setHours(0,0,0,0),c.setDate(c.getDate()+1),h(c)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"End Date: "}),e.jsx("input",{type:"date",value:b.toISOString().slice(0,10),onChange:r=>{console.log(r.target.value);const c=new Date(r.target.value);c.setHours(0,0,0,0),c.setDate(c.getDate()+1),k(c)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Start Time: "}),e.jsx("input",{type:"time",value:D.toTimeString().slice(0,5),onChange:r=>{const c=new Date,v=r.target.value.split(":");c.setHours(parseInt(v[0]),parseInt(v[1]),0,0),F(c)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"End Time: "}),e.jsx("input",{type:"time",value:p.toTimeString().slice(0,5),onChange:r=>{const c=new Date,v=r.target.value.split(":");c.setHours(parseInt(v[0]),parseInt(v[1]),0,0),f(c)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Note (Optional): "}),e.jsx("input",{type:"text",value:w,onChange:r=>{I(r.target.value)}}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const r=[],c=new Date(u);c.setHours(0,0,0,0),console.log("Start Date"),console.log(c),console.log("End Date"),console.log(b),b.setHours(0,0,0,0),console.log("End Date Changed"),console.log(b);let v=0;for(;c<=b;)if(console.log(c),m=="daily"?r.push(C.fromBlank(new Date(c),D,p,!0,w)):m=="weekly"?i.includes(c.getDay())&&r.push(C.fromBlank(new Date(c),D,p,!0,w)):m=="biweekly"&&(v%2==0&&i.includes(c.getDay())&&r.push(C.fromBlank(new Date(c),D,p,!0,w)),v++),c.setDate(c.getDate()+1),B)for(;c.getDay()==0||c.getDay()==6;)c.setDate(c.getDate()+1);console.log(r),j(r)},children:"Add Conflicts"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{o()},children:"Close"})]})]})}function pe({conflictResponseDate:n}){return e.jsx("div",{className:"SimpleConflictResponseDisplayTile",id:"simple-conflict-response-display-tile-"+n.date.toISOString(),children:e.jsx("div",{className:"header",children:e.jsxs("div",{className:"CharacterNameDiv",children:[e.jsxs("label",{htmlFor:"Actor",children:["Date: ",n.date.toDateString()]}),e.jsx("br",{}),e.jsx("br",{}),n.canAttend?e.jsxs("label",{htmlFor:"Actor",children:[n.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",n.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):e.jsx("label",{htmlFor:"Actor",children:"Can't Attend"}),n.note!=""&&e.jsx("br",{}),n.note!=""&&e.jsx("br",{}),n.note!=""&&e.jsxs("label",{htmlFor:"Actor",children:["Note: ",n.note]})]})})})}function be({dialogRef:n,close:o,addDay:j}){const[m,a]=l.useState(),[u,h]=l.useState(),[b,k]=l.useState(),[D,F]=l.useState("");return e.jsx("dialog",{ref:n,children:e.jsxs("div",{className:"AddAdditionalDayDialog",children:[e.jsx("h2",{children:"Add Additional Day"}),e.jsx("label",{children:"Date"}),e.jsx("input",{type:"date",onChange:p=>{const f=new Date(p.target.value);f.setDate(f.getDate()+1),f.setHours(0,0,0,0),a(f)}}),e.jsx("br",{}),e.jsx("label",{children:"Start Time"}),e.jsx("input",{type:"time",onChange:p=>{console.log(p.target.value);const f=new Date,w=p.target.value.split(":");f.setHours(parseInt(w[0]),parseInt(w[1]),0,0),h(f),console.log({date:f})}}),e.jsx("br",{}),e.jsx("label",{children:"End Time"}),e.jsx("input",{type:"time",onChange:p=>{console.log(p.target.value);const f=new Date,w=p.target.value.split(":");f.setHours(parseInt(w[0]),parseInt(w[1]),0,0),k(f),console.log({date:f})}}),e.jsx("h3",{children:"More Info"}),e.jsx("input",{type:"text",className:"MoreInfoInput",value:D,onChange:p=>{F(p.target.value)}}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{j(E.fromBlank(M.fromBlank(m,u,b),D))},children:"Add Day"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{o()},children:"Close"})]})})}se(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(De,{})}));function De(){var z;const[n,o]=l.useState(""),[j,m]=l.useState(""),[a,u]=l.useState(),[h,b]=l.useState(null),[k,D]=l.useState(null),[F,p]=l.useState(null),[f,w]=l.useState(null),[I,i]=l.useState([]),[x,B]=l.useState([]),[J,r]=l.useState("setDates"),[c,v]=l.useState(!1),[P,G]=l.useState("student"),[T,W]=l.useState([]),[$,K]=l.useState(!0),[q,Q]=l.useState(null),[U,R]=l.useState(!1),[V,X]=l.useState(),[Y,Z]=l.useState([]);l.useState([]);const H=l.useRef(null),O=l.useRef(null),L=l.useRef(null);return l.useEffect(()=>{ne(()=>{});const s=new URLSearchParams(window.location.search),t=s.get("activityId");t&&o(t);const d=s.get("showId");d&&m(d);const g=localStorage.getItem("show-"+d);if(g){u(A.fromMap(JSON.parse(g)));let N=[...A.fromMap(JSON.parse(g)).characters.map(S=>S.actor)];A.fromMap(JSON.parse(g)).ensemble&&(N=[...N,...A.fromMap(JSON.parse(g)).ensemble.actors]),N=N.filter((S,_,ee)=>_===ee.findIndex(te=>te.userId===S.userId)),Z(N),console.log(A.fromMap(JSON.parse(g))),ie(t,d).then(S=>{W(S),console.log(S)})}const y=localStorage.getItem("accountType");if(y&&(G(y),y=="student"&&g&&A.fromMap(JSON.parse(g)).conflictForm)){const N=[];A.fromMap(JSON.parse(g)).conflictForm.dates.map(S=>{N.push(C.fromBlank(S.date.date,null,null,!1,""))}),B(N)}},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"title",children:e.jsx("h1",{children:"Conflict Form"})}),e.jsxs("div",{className:"center",children:[!(a!=null&&a.conflictForm)&&P=="teacher"?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Create Conflict Form"}),e.jsx("br",{}),J=="setDates"?e.jsxs(e.Fragment,{children:[" ",e.jsx("label",{children:"Start Date"}),e.jsx("input",{type:"date",onChange:s=>{console.log(new Date(s.target.value));const t=new Date(s.target.value);t.setDate(t.getDate()+1),t.setHours(0,0,0,0),b(t)}}),e.jsx("br",{}),e.jsx("label",{children:"End Date"}),e.jsx("input",{type:"date",onChange:s=>{const t=new Date(s.target.value);t.setDate(t.getDate()+1),t.setHours(0,0,0,0),D(t)}}),e.jsx("br",{}),e.jsx("label",{children:"Default Rehersal Start Time"}),e.jsx("input",{type:"time",onChange:s=>{console.log(s.target.value);const t=new Date,d=s.target.value.split(":");t.setHours(parseInt(d[0]),parseInt(d[1]),0,0),p(t),console.log({date:t})}}),e.jsx("br",{}),e.jsx("label",{children:"Default Rehersal End Time"}),e.jsx("input",{type:"time",onChange:s=>{console.log(s.target.value);const t=new Date,d=s.target.value.split(":");t.setHours(parseInt(d[0]),parseInt(d[1]),0,0),w(t),console.log({date:t})}}),e.jsx("br",{}),e.jsx("label",{children:"Exclude Weekends"}),e.jsx("input",{type:"checkbox",checked:$,onChange:s=>{K(s.target.checked)}}),e.jsx("br",{}),e.jsx("label",{children:"Form Deadline"}),e.jsx("input",{type:"date",onChange:s=>{const t=new Date(s.target.value);t.setDate(t.getDate()+1),t.setHours(0,0,0,0),Q(t)}}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{if(h&&k&&F&&f){const s=[],t=new Date(h);for(console.log("Start Date"),console.log(t);t<=k;)if(console.log(t),s.push(E.fromBlank(M.fromBlank(new Date(t),F,f),"")),t.setDate(t.getDate()+1),$)for(;t.getDay()==0||t.getDay()==6;)t.setDate(t.getDate()+1);i(s),r("editDates"),console.log(s)}},children:"Next"})," "]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"ActionBtn",onClick:()=>{var s;(s=L.current)==null||s.showModal()},children:"Add Additional Day"}),e.jsx("div",{className:"conflicts",children:I.map((s,t)=>e.jsx(xe,{conflict:s,canDelete:!0,onDelete:()=>{const d=[...I];d.splice(t,1),i(d)},setConflict:d=>{const g=[...I];g[t]=d,i(g)}},s.date.date.toISOString()))}),e.jsx("br",{}),c?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(v(!0),q==null){alert("Please set a form deadline"),v(!1);return}const s=A.fromMap(a.toMap());s.conflictForm=ae.fromBlank(I,q,Date.now()),u(s),console.log(s),await ce(n,j,s.conflictForm),v(!1)},children:"Save Conflict Form"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{r("setDates"),i([])},children:"Back"})]})]}):P=="teacher"&&!U?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Conflict Form Responses"}),e.jsx("div",{className:"conflicts",children:T.map(s=>e.jsxs("div",{className:"conflict-response",children:[s.actor.name,e.jsx("br",{}),e.jsxs("div",{className:"conflict-response-dates",children:[s.dates.map(t=>t.canAttend?e.jsxs("div",{className:"conflict-response-date",children:[t.date.toDateString(),e.jsx("br",{}),t.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",t.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),t.note!=""&&e.jsx("br",{}),t.note!=""&&e.jsxs("label",{htmlFor:"Actor",children:["Note: ",t.note]})]}):e.jsxs("div",{className:"conflict-response-date",children:[t.date.toDateString(),e.jsx("br",{}),"Can't Attend"]})),e.jsx("button",{className:"ActionBtn",onClick:async()=>{const t=[...T];t.splice(T.indexOf(s),1),W(t),await de(n,j,s)},children:"Delete"})]})]}))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var s;(s=H.current)==null||s.showModal()},children:"Add Conflict Response"})]}):T.length==0&&(a==null?void 0:a.formStatus)=="open"||U?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Conflict Form"}),e.jsx("p",{children:"Select can attend even if you can't make the full rehersal, just add a conflict"}),e.jsxs("div",{className:"quick-actions",children:[e.jsx("button",{className:"ActionBtn",onClick:()=>{var t;const s=[];(t=a==null?void 0:a.conflictForm)==null||t.dates.map(d=>{s.push(C.fromBlank(d.date.date,null,null,!0,""))}),B(s)},children:"I can attend all the rehersals"}),e.jsx("button",{className:"ActionBtn",onClick:s=>{var t;(t=O.current)==null||t.showModal()},children:"Add recurring conflict"})]}),e.jsx("div",{className:"conflicts",children:(z=a==null?void 0:a.conflictForm)==null?void 0:z.dates.map((s,t)=>(console.log(s),e.jsx(je,{conflict:s,conflictResponseDate:x[t],setConflict:d=>{const g=[...x];console.log(g),g[t]=d,B(g)}})))}),e.jsx("br",{}),c?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{v(!0);const s=x.filter(y=>y.canAttend&&y.from||!y.canAttend);let t;U?t=V:t=await ue();const d=le.fromBlank(s,"",t,n,j,Date.now());console.log(d),await me(n,j,d);const g=[...T];g.push(d),W(g),v(!1),R(!1)},children:"Submit Conflict Form"})]}):(a==null?void 0:a.formStatus)=="open"?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Conflict Form Response"}),e.jsx("div",{className:"conflicts",children:T[0].dates.map(s=>e.jsx(pe,{conflictResponseDate:s}))})]}):e.jsx(e.Fragment,{children:e.jsx("h2",{children:"Conflict Form Closed"})}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href=`/Activity/Shows/Show/?activityId=${n}&showId=${j}`},children:"Close"})]}),e.jsx(fe,{dialogRef:O,addConflicts:s=>{const t=[...x];s.map(d=>{var N;if(console.log("FInding conflict"),console.log(d),x.findIndex(S=>(console.log("Checking date"),console.log(S.date.toDateString()),S.date.toDateString()==d.date.toDateString()))==-1)return;const g=x.findIndex(S=>S.date.toDateString()==d.date.toDateString());console.log("Index"),console.log(g),console.log("Current Conflicts"),console.log((N=a==null?void 0:a.conflictForm)==null?void 0:N.dates),console.log(x);const y=a.conflictForm.dates[g];y.date.from&&d.from<y.date.from&&(d.from=y.date.from),y.date.to&&d.to>y.date.to&&(d.to=y.date.to),t[t.findIndex(S=>S.date.toDateString()==d.date.toDateString())]=d}),B(t),O.current.close()},close:()=>{O.current.close()}}),e.jsx(he,{dialogRef:H,close:()=>{H.current.close()},members:Y,addedMembers:[],addUser:s=>{s instanceof re&&X(s),H.current.close(),R(!0)}}),e.jsx(be,{dialogRef:L,close:()=>{L.current.close()},addDay:s=>{const t=[...I];t.push(s),i(t),L.current.close()}})]})}
