import{r as i,j as e,n as ee,I as ae,c as Ee,i as De}from"./index-BU3vcrHQ.js";import{$ as be,h as Ne,a0 as we,a1 as ye,a2 as he}from"./db-CmuqGSBB.js";import{B as Ce,C as ge}from"./Calendar-DVVcVB_6.js";import{T as ke}from"./trash-BnpXJPEK.js";import"./arrow_forward-CHD_SwLW.js";function Fe({dialogRef:K,close:q,addDate:v,eventDate:j}){const[f,M]=i.useState(new Date),[k,J]=i.useState(new Date),[G,S]=i.useState(new Date),[D,y]=i.useState(""),[a,W]=i.useState(""),_=c=>{const d=c.target.value,[p,u]=d.split(":").map(Number),r=new Date(f);r.setHours(p,u,0,0),J(r),y(r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},g=c=>{const d=c.target.value,[p,u]=d.split(":").map(Number),r=new Date(f);r.setHours(p,u,0,0),S(r),W(r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};return i.useEffect(()=>{j&&(M(j.date),J(j.from),S(j.to),y(j.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),W(j.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})))},[j]),e.jsxs("dialog",{ref:K,className:"AddEventDateDialog",children:[e.jsx("h2",{children:"Add Event Date"}),e.jsx("label",{htmlFor:"",children:"Date: "}),e.jsx("input",{type:"date",value:f==null?void 0:f.toISOString().split("T")[0],onChange:c=>{const d=new Date(c.target.value);d.setHours(0,0,0,0),d.setDate(d.getDate()+1),M(d);const p=new Date(d);p.setHours(k.getHours(),k.getMinutes(),0,0),J(p),y(p.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const u=new Date(d);u.setHours(G.getHours(),G.getMinutes(),0,0),S(u),W(u.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),e.jsx("input",{type:"time",value:D,onChange:_}),e.jsx("br",{}),e.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),e.jsx("input",{type:"time",value:a,onChange:g}),e.jsxs("div",{className:"actions",children:[e.jsx("button",{className:"ActionBtn",onClick:()=>{q()},children:"Close"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{v(ee.fromBlank(f,k,G))},children:"Add Date"})]})]})}function Ae({close:K,dialogRef:q,events:v,activity:j}){const[f,M]=i.useState("schedule"),[k,J]=i.useState(!1),[G,S]=i.useState(!1);function D(g){const c=Object.keys(g[0]),d=g.map(p=>c.map(u=>p[u]).join(","));return[c.join(","),...d].join(`
`)}const y=()=>{const g=[];k&&(v=_(v));for(let r=0;r<v.length;r++){const m=v[r];g.push({Date:m.date.date.getMonth()+1+"/"+m.date.date.getDate()+"/"+m.date.date.getFullYear().toString().slice(2),Start:m.date.from.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0}),End:m.date.to.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0}),Name:m.name,Location:m.location.name==j.defaultLocation.name?"default":m.location.name,"Event Type":m.eventType.name,"Extra Info":m.info,"Invite Type":m.generalTarget,"Custom/Group Targets":m.groupTargets.map(T=>T.groupName).join(", "),"Added to Campus Connect":""})}g.sort((r,m)=>r.Date==m.Date?r.Start==m.Start?r.End>m.End?1:-1:r.Start>m.Start?1:-1:r.Date>m.Date?1:-1);const c=D(g),d=new Blob([c],{type:"text/csv"}),p=window.URL.createObjectURL(d),u=document.createElement("a");u.href=p,u.download=f+".csv",u.click(),window.URL.revokeObjectURL(p)};function a(g,c,d,p){const u=new Date(g,c,1);let r=0;for(;u.getMonth()===c;){if(u.getDay()===d&&(r++,r===p))return u;u.setDate(u.getDate()+1)}return a(g,c+1,d,1)}function W(g){const c=g.getDay(),d=g.getFullYear()+1,p=g.getMonth();let u=1;const r=new Date(g);for(r.setDate(1);r.getMonth()===p;){if(r.getDay()===c){if(r.getDate()===g.getDate())break;u++}r.setDate(r.getDate()+1)}return a(d,p,c,u)}function _(g){return g.map(c=>{const d=W(c.date.date),p=ee.fromBlank(d,c.date.from,c.date.to);return ae.fromBlank(c.name,c.info,c.location,p,c.type,c.lastUpdated,c.activityId,c.groupNames,c.targets,c.generalTarget,c.eventType,c.groupTargets,c.hasSchoolEvent,c.schoolEventId,c.conflicts,c.activityName)})}return e.jsxs("dialog",{ref:q,children:[e.jsx("h2",{children:"Export Schedule"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:f,onChange:g=>{M(g.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Move Schedule Forward a Year? "}),e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:k,onChange:g=>{J(g.target.checked)}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("br",{}),G?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(f==""){alert("Please fill out all fields");return}S(!0),y(),S(!1)},children:"Export Schedule"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{K()},children:"Close"})]})]})}Ee(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(Ie,{})}));function Ie(){const[K,q]=i.useState("student"),[v,j]=i.useState([]),[f,M]=i.useState([]),[k,J]=i.useState(null),[G,S]=i.useState(!1),[D,y]=i.useState([]),[a,W]=i.useState(),[_,g]=i.useState("students"),[c,d]=i.useState("date"),[p,u]=i.useState(null),[r,m]=i.useState(null),[T,B]=i.useState(null),[$,O]=i.useState(""),[V,H]=i.useState(""),[se,R]=i.useState(""),[oe,P]=i.useState(""),[x,w]=i.useState(void 0),[F,C]=i.useState([]),[b,U]=i.useState("students"),[ie,Le]=i.useState(!1);i.useState(""),i.useState(""),i.useState(null),i.useState(null);const[le,Me]=i.useState(""),[z,X]=i.useState(!1),[pe,ve]=i.useState(null),[N,A]=i.useState(void 0),[I,fe]=i.useState(void 0),[Q,re]=i.useState([]),[xe,je]=i.useState(void 0),Z=i.useRef(null),te=i.useRef(null);i.useEffect(()=>{De(()=>{});async function t(){S(!0);const s=new URLSearchParams(window.location.search).get("activityId");if(s){J(s);const h=await Ne(s);W(h),console.log(h),w(h.defaultLocation)}const l=await we(s);console.log(l),j(l);const E=[];for(const h of l){console.log(h);const Y=h.date.from;console.log(h.date.date),Y.setDate(h.date.date.getDate()),Y.setMonth(h.date.date.getMonth()),Y.setFullYear(h.date.date.getFullYear());const L=h.date.to;L.setDate(h.date.date.getDate()),L.setMonth(h.date.date.getMonth()),L.setFullYear(h.date.date.getFullYear()),console.log(Y),console.log(L),E.push({title:h.name,start:Y.toISOString(),end:L.toISOString(),isAllDay:!1,interactive:!0,description:h.info,color:h.eventType.color.setAlpha(.8).toRBGAString(),id:h.id,location:h.location.name})}M(E),console.log(l),console.log(E),S(!1)}t();const n=localStorage.getItem("accountType");n&&q(n)},[]);function ce(){return v}const de=t=>{const n=t.target.value,[o,s]=n.split(":").map(Number),l=new Date(p);l.setHours(o,s,0,0),m(l),R(l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},ue=t=>{const n=t.target.value,[o,s]=n.split(":").map(Number),l=new Date(p);l.setHours(o,s,0,0),B(l),P(l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};Date.prototype.addHours=function(t){return this.setTime(this.getTime()+t*60*60*1e3),this};function me(){return e.jsxs("div",{className:"custom-invite-view",children:[e.jsx("button",{className:_=="students"?"selected":"",onClick:()=>{g("students")},children:"Students"}),e.jsx("button",{className:_=="parents"?"selected":"",onClick:()=>{g("parents")},children:"Parents"}),e.jsx("div",{className:"current-view",children:_=="students"?e.jsx("div",{className:"students",children:a==null?void 0:a.students.map((t,n)=>e.jsxs("div",{className:"student",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"student",checked:F.find(o=>o.userId==t.userId)!=null,onChange:o=>{o.target.checked?C([...F,t]):C(F.filter(s=>s!=t))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.userId,children:t.name})]},t.userId))}):e.jsx("div",{className:"parents",children:a==null?void 0:a.parents.map((t,n)=>e.jsxs("div",{className:"parent",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"parent",onChange:o=>{o.target.checked?C([...F,t]):C(F.filter(s=>s!=t))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.userId,children:t.name})]},t.userId))})})]})}function Se(){return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mode",children:"Enter Event Information"}),e.jsx("label",{htmlFor:"Name",children:"Name: "}),e.jsx("input",{type:"text",value:$,onChange:t=>{O(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Description",children:"Description: "}),e.jsx("textarea",{value:V,onChange:t=>{H(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Date: "}),e.jsx("input",{type:"date",value:p==null?void 0:p.toISOString().split("T")[0],onChange:t=>{const n=new Date(t.target.value);n.setHours(0,0,0,0),n.setDate(n.getDate()+1),u(n);const o=new Date(n);o.setHours(r.getHours(),r.getMinutes(),0,0),m(o),R(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const s=new Date(n);s.setHours(T.getHours(),T.getMinutes(),0,0),B(s),P(s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),e.jsx("input",{type:"time",value:se,onChange:de}),e.jsx("br",{}),e.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),e.jsx("input",{type:"time",value:oe,onChange:ue}),e.jsx("br",{}),e.jsx("label",{htmlFor:"location",children:"Location: "}),e.jsx("select",{name:"location",id:"location",onChange:t=>{w(a==null?void 0:a.locations.find(n=>n.name==t.target.value))},children:a==null?void 0:a.locations.map((t,n)=>e.jsx("option",{value:t.name,selected:(x==null?void 0:x.name)==t.name,children:t.name+" ("+t.address+")"},n))}),e.jsx("br",{}),e.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),e.jsx("select",{name:"eventType",id:"event-type",onChange:t=>{A(a==null?void 0:a.eventTypes.find(n=>n.name==t.target.value))},children:a==null?void 0:a.eventTypes.map((t,n)=>e.jsx("option",{value:t.name,selected:(N==null?void 0:N.name)==t.name,children:t.name},n))}),e.jsx("br",{}),e.jsx("label",{htmlFor:"inviteType",children:"Invite Type: "}),e.jsxs("select",{name:"inviteType",id:"invite-type",onChange:t=>{U(t.target.value)},children:[e.jsx("option",{value:"students",selected:b=="students",children:"Students"}),e.jsx("option",{value:"parents",selected:b=="parents",children:"Parents"}),e.jsx("option",{value:"groups",selected:b=="groups",children:"Groups"}),e.jsx("option",{value:"custom",selected:b=="custom",children:"Custom"})]}),b=="groups"?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("label",{htmlFor:"groups",children:"Groups: "}),e.jsx("div",{className:"groups",children:a.groups.map((t,n)=>e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:D.find(o=>o.groupName==t.groupName)!=null,onChange:o=>{o.target.checked?(y([...D,t]),C([...F,...t.groupMembers])):(y(D.filter(s=>s.groupName!=t.groupName)),C(F.filter(s=>!t.groupMembers.includes(s))))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.groupName,children:t.groupName})]},t.groupName))})]}):e.jsx(e.Fragment,{}),b=="custom"?me():e.jsx(e.Fragment,{}),e.jsx("br",{}),G?e.jsx("div",{className:"loader"}):e.jsx("button",{onClick:async()=>{if(S(!0),console.log(`Name: ${$}, Description: ${V}, Start Time: ${r}, End Time: ${T}, Selected Location: ${x},Event Type: ${N}`),$==""||r==null||T==null||x==null||N==null){alert("Please fill out all fields"),console.log(`Name: ${$}, Description: ${V}, Start Time: ${r}, End Time: ${T}, Selected Location: ${x},  Event Type: ${N}`),S(!1);return}console.log("Submit");const t=x??a.locations[0];console.log(r),console.log(T);const n=ee.fromBlank(p,r,T);console.log(n.toMap());const o=N;o.color.setAlpha(255);const s=ae.fromBlank($,V,t,n,"activity-event",Date.now(),k,D.map(l=>l.groupName),F,b,o,D,ie,le,[],a.name);if(z){s.id=pe.id,await ye(s),X(!1);const l=s.date.from,E=s.date.to,h={title:s.name,start:l.toISOString(),end:E.toISOString(),isAllDay:!1,interactive:!0,description:s.info,color:s.eventType.color.setAlpha(.8).toRBGAString(),id:s.id,location:s.location.name},Y=f.filter(ne=>ne.id!=s.id);Y.push(h),M(Y);const L=v.filter(ne=>ne.id!=s.id);L.push(s),console.log(L),j([...L])}else{await he(s);const l=s.date.from,E=s.date.to;l.setDate(s.date.date.getDate()),l.setMonth(s.date.date.getMonth()),l.setFullYear(s.date.date.getFullYear()),E.setDate(s.date.date.getDate()),E.setMonth(s.date.date.getMonth()),E.setFullYear(s.date.date.getFullYear());const h={title:s.name,start:l.toISOString(),end:E.toISOString(),isAllDay:!1,interactive:!0,description:s.info,color:s.eventType.color.setAlpha(.8).toRBGAString(),id:s.id,location:s.location.name};M([...f,h]),j([...v,s])}S(!1),d("date"),u(null),m(null),B(null),O(""),H(""),R(""),P(""),A(a==null?void 0:a.eventTypes[0]),w(a==null?void 0:a.defaultLocation),C([]),U("students")},className:"ActionBtn",children:z?"Save":"Submit"}),e.jsx("button",{onClick:()=>{if(z){d("date"),u(null),m(null),B(null),O(""),H(""),R(""),P(""),w(a.defaultLocation),A(a.eventTypes[0]),w(a==null?void 0:a.defaultLocation),X(!1);return}d("date"),H(""),O(""),U("students")},className:"ActionBtn",children:"Back"})]})}function Te(){return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mode",children:"Enter Event Information"}),e.jsx("label",{htmlFor:"Name",children:"Name: "}),e.jsx("input",{type:"text",value:$,onChange:t=>{O(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Description",children:"Description: "}),e.jsx("textarea",{value:V,onChange:t=>{H(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),e.jsx("input",{type:"time",value:se,onChange:de}),e.jsx("br",{}),e.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),e.jsx("input",{type:"time",value:oe,onChange:ue}),e.jsx("br",{}),e.jsx("label",{htmlFor:"location",children:"Location: "}),e.jsx("select",{name:"location",id:"location",onChange:t=>{w(a==null?void 0:a.locations.find(n=>n.name==t.target.value))},children:a==null?void 0:a.locations.map((t,n)=>e.jsx("option",{value:t.name,selected:(x==null?void 0:x.name)==t.name,children:t.name+" ("+t.address+")"},n))}),e.jsx("br",{}),e.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),e.jsx("select",{name:"eventType",id:"event-type",onChange:t=>{A(a==null?void 0:a.eventTypes.find(n=>n.name==t.target.value))},children:a==null?void 0:a.eventTypes.map((t,n)=>e.jsx("option",{value:t.name,selected:(N==null?void 0:N.name)==t.name,children:t.name},n))}),e.jsx("br",{}),e.jsx("label",{htmlFor:"inviteType",children:"Invite Type: "}),e.jsxs("select",{name:"inviteType",id:"invite-type",onChange:t=>{U(t.target.value)},children:[e.jsx("option",{value:"students",selected:b=="students",children:"Students"}),e.jsx("option",{value:"parents",selected:b=="parents",children:"Parents"}),e.jsx("option",{value:"groups",selected:b=="groups",children:"Groups"}),e.jsx("option",{value:"custom",selected:b=="custom",children:"Custom"})]}),b=="groups"?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("label",{htmlFor:"groups",children:"Groups: "}),e.jsx("div",{className:"groups",children:a.groups.map((t,n)=>e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:D.find(o=>o.groupName==t.groupName)!=null,onChange:o=>{o.target.checked?(y([...D,t]),C([...F,...t.groupMembers])):(y(D.filter(s=>s.groupName!=t.groupName)),C(F.filter(s=>!t.groupMembers.includes(s))))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.groupName,children:t.groupName})]},t.groupName))})]}):e.jsx(e.Fragment,{}),b=="custom"?me():e.jsx(e.Fragment,{}),e.jsx("br",{}),e.jsx("h2",{children:"Event Dates"}),e.jsx("div",{className:"event-dates",children:Q.map((t,n)=>e.jsxs("div",{className:"event-date",children:[e.jsxs("div",{className:"event-date-title",children:[e.jsx("label",{htmlFor:"",className:"event-date-name",children:t.date.toDateString()}),e.jsx("label",{htmlFor:"",className:"event-date-time",children:t.from.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})+" - "+t.to.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})})]}),e.jsx("img",{src:ke,className:"event-date-icon",onClick:()=>{re(Q.filter(o=>o!=t))}})]},n))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var o;if(r==null||T==null){alert("Please fill out start time and end time");return}const t=new Date;t.setHours(0,0,0,0);const n=ee.fromBlank(t,r,T);je(n),(o=Z.current)==null||o.showModal()},children:"Add Date"}),e.jsx("br",{}),G?e.jsx("div",{className:"loader"}):e.jsx("button",{onClick:async()=>{if(S(!0),console.log(`Name: ${$}, Description: ${V}, Start Time: ${r}, End Time: ${T}, Selected Location: ${x},Event Type: ${N}`),$==""||r==null||T==null||x==null||N==null||Q.length==0){alert("Please fill out all fields"),console.log(`Name: ${$}, Description: ${V}, Start Time: ${r}, End Time: ${T}, Selected Location: ${x},  Event Type: ${N}`),S(!1);return}console.log("Submit");const t=x??a.locations[0];console.log(r),console.log(T);const n=[];for(const o of Q){const s=N;s.color.setAlpha(255);const l=ae.fromBlank($,V,t,o,"activity-event",Date.now(),k,D.map(L=>L.groupName),F,b,s,D,ie,le,[],a.name);await he(l);const E=l.date.from,h=l.date.to;E.setDate(l.date.date.getDate()),E.setMonth(l.date.date.getMonth()),E.setFullYear(l.date.date.getFullYear()),h.setDate(l.date.date.getDate()),h.setMonth(l.date.date.getMonth()),h.setFullYear(l.date.date.getFullYear());const Y={title:l.name,start:E.toISOString(),end:h.toISOString(),isAllDay:!1,interactive:!0,description:l.info,color:l.eventType.color.setAlpha(.8).toRBGAString(),id:l.id,location:l.location.name};n.push(Y),j([...v,l])}M([...f,...n]),S(!1),d("date"),u(null),m(null),B(null),O(""),H(""),R(""),P(""),A(a==null?void 0:a.eventTypes[0]),w(a==null?void 0:a.defaultLocation),C([]),U("students")},className:"ActionBtn",children:z?"Save":"Submit"}),e.jsx("button",{onClick:()=>{if(z){d("date"),u(null),m(null),B(null),O(""),H(""),R(""),P(""),w(a.defaultLocation),A(a.eventTypes[0]),w(a==null?void 0:a.defaultLocation),X(!1);return}d("date"),H(""),O(""),U("students")},className:"ActionBtn",children:"Back"})]})}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-title",children:[e.jsx("img",{src:Ce,alt:"back arrow",onClick:()=>{window.location.href="/Activity/?activityId="+k}}),e.jsx("h1",{children:"Events"})]}),G?e.jsx("div",{className:"center",children:e.jsx("div",{className:"loader"})}):e.jsx("div",{className:"center",children:K=="teacher"?c=="multipleEvents"?Te():c=="date"?e.jsxs(e.Fragment,{children:[" ",e.jsx(ge,{canPaste:I!=null,canCopy:!0,copyEvent:t=>{const n=v.find(o=>o.id==t.id);for(const o of v)console.log(o.id);fe(n),console.log(n),console.log(t.id)},pasteEvent:t=>{console.log("PASTE EVENT"),console.log(t);const n=new Date(t);n.setHours(0,0,0,0),u(n),m(new Date(I.date.from)),R(I.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(I.date.to);B(o),console.log(o),P(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),w(I.location),A(I.eventType),O(I.name),H(I.info),C(I.targets),U(I.generalTarget),y(I.groupTargets),d("info")},canViewConflicts:!1,isCreating:!0,canOpenContextMenu:!0,events:f,editEvent:t=>{const n=ce().find(o=>o.id==t.id);console.log(t.id),n&&(console.log(n),d("info"),O(n.name),H(n.info),u(n.date.date),m(n.date.from),R(n.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),B(n.date.to),P(n.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),w(n.location),C(n.targets),console.log("FROM EDIT"),console.log(n.targets),A(n.eventType),X(!0),U(n.generalTarget),ve(n),y(n.groupTargets))},viewEvent:t=>{const n=ce().find(o=>o.id==t.id);n&&(localStorage.setItem("event",JSON.stringify(n.toMap())),localStorage.setItem("back","/Activity/Events/?activityId="+k),window.location.href="/Calendar/Event/")},viewConflicts:t=>{},deleteEvent:async t=>{console.log(t);const n=v.find(l=>l.id==t.id),o=v.filter(l=>l.id!=t.id);j(o);const s=f.filter(l=>l.id!=t.id);M(s),await be(n)},dateClick:t=>{console.log(t.date),u(t.date),new Date(t.date).setHours(0,0,0,0),m(new Date(t.date)),R(t.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(t.date);B(o.addHours(1)),console.log(o),P(t.date.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),w(a.defaultLocation),A(a.eventTypes[0]),d("info")},eventClick:t=>{u(t.event.start),new Date(t.event.start).setHours(0,0,0,0),m(new Date(t.event.start)),R(t.event.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(t.event.end);B(o),P(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),w(a.defaultLocation),A(a.eventTypes[0]),d("info")}}),e.jsx("button",{className:"ActionBtn",onClick:()=>{d("multipleEvents"),A(a.eventTypes[0])},children:"Add Multiple Events"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(v.map(t=>t.toMap()))),window.open("/Activity/Events/Print/","_blank")},children:"Print"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=te.current)==null||t.showModal()},children:"Export to CSV"})]}):Se():e.jsxs(e.Fragment,{children:[" ",e.jsx(ge,{canPaste:!1,canCopy:!1,copyEvent:()=>{},pasteEvent:()=>{},viewEvent:t=>{},canViewConflicts:!1,events:f,canOpenContextMenu:!1,dateClick:()=>{},deleteEvent:()=>{},viewConflicts:()=>{},editEvent:()=>{},eventIdClick:t=>{const n=v.find(o=>o.id===t);n&&(localStorage.setItem("event",JSON.stringify(n.toMap())),localStorage.removeItem("back"),window.location.href="/Calendar/Event/")}})," ",e.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(v.map(t=>t.toMap()))),window.open("/Activity/Events/Print/","_blank")},children:"Print"})]})}),e.jsx(Fe,{dialogRef:Z,addDate:t=>{re([...Q,t]),Z.current.close()},close:()=>{Z.current.close()},eventDate:xe}),a!=null&&e.jsx(Ae,{dialogRef:te,events:v,close:()=>{te.current.close()},activity:a})]})}
