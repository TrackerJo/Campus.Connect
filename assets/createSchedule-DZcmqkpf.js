import{j as n,c as Ee,r as u,i as we}from"./index-C75OlIaX.js";import{g as Ae,C as g,b as B,E as S,F as G,h as ke,i as Fe}from"./constants-CXGD8REG.js";import{e as Ne,q as Le,m as ye,r as Re,t as Me,v as Be,w as He}from"./db-CkdnOClb.js";import{A as $e,S as Ge,D as Oe,C as _e,E as Pe,a as Ue}from"./Show_Group_Display_Tile-B0C4sC3I.js";import{C as Ye}from"./Calendar-CFlZF8as.js";import{C as ze,S as Je}from"./Show_Group_Tile-B-0dS8oh.js";import{E as qe}from"./Ensemble_Section_Tile-D7gjP3nY.js";import{F as Ve}from"./Full_Cast_Tile-KT1s7OtA.js";import"./trash-BnpXJPEK.js";function ie({conflictResponseDate:j,actor:q}){return n.jsx("div",{className:"ConflictDisplayTile ",id:"conflict-display-tile-"+q.userId,children:n.jsx("div",{className:"header",children:n.jsxs("div",{className:"CharacterNameDiv",children:[n.jsxs("label",{htmlFor:"Actor",children:["Actor: ",q.name]}),n.jsx("br",{}),n.jsxs("label",{htmlFor:"Actor",children:["Date: ",j.date.toDateString()]}),n.jsx("br",{}),j.canAttend?n.jsxs("label",{htmlFor:"Actor",children:[j.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",j.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):n.jsx("label",{htmlFor:"Actor",children:"Can't Attend"})]})})})}Ee(document.getElementById("root")).render(n.jsx(u.StrictMode,{children:n.jsx(We,{})}));function We(){const[j,q]=u.useState(""),[l,me]=u.useState(),[Q,he]=u.useState(""),[i,pe]=u.useState(),[le,I]=u.useState("date"),[T,H]=u.useState(null),[D,E]=u.useState(null),[w,A]=u.useState(null),[k,F]=u.useState("custom"),[O,C]=u.useState(""),[_,P]=u.useState(""),[ge,N]=u.useState(""),[Ie,L]=u.useState(""),[v,U]=u.useState(void 0),[be,X]=u.useState(!1),[$,V]=u.useState([]),[W,K]=u.useState([]),[m,f]=u.useState([]),[Z,Y]=u.useState(!1),[p,Se]=u.useState([]),[ee,h]=u.useState([]),[te,xe]=u.useState(!1),[b,y]=u.useState(null),[se,ne]=u.useState(!1),[je,Ce]=u.useState(null),[R,z]=u.useState(),[M,J]=u.useState(void 0),[de,ue]=u.useState(!1),[oe,ce]=u.useState(!1),[re,ve]=u.useState([]);u.useEffect(()=>{we(()=>{});const c=new URLSearchParams(window.location.search),r=c.get("activityId");r&&(q(r),Ne(r).then(t=>{t instanceof Ae||(me(t),z(t==null?void 0:t.rehearsalLocations[0]),J(t==null?void 0:t.eventTypes[0]),U(t==null?void 0:t.defaultLocation))}));const e=c.get("showId");e&&(he(e),Le(r,e).then(t=>{const s=[];for(const a of t)for(const d of a.dates)s.push({conflictResponseDate:d,actor:a.actor});s.sort((a,d)=>a.conflictResponseDate.date.getTime()-d.conflictResponseDate.date.getTime()),Se(s),h([...s])})),ye(r,e).then(t=>{pe(t),t!=null&&t.hasEnsemble&&ve(t.ensemble.actors)}),Re(r,e).then(t=>{V(t);const s=[];for(const a of t){console.log(a);const d=a.date.from;console.log(a.date.date),d.setDate(a.date.date.getDate()),d.setMonth(a.date.date.getMonth()),d.setFullYear(a.date.date.getFullYear());const x=a.date.to;x.setDate(a.date.date.getDate()),x.setMonth(a.date.date.getMonth()),x.setFullYear(a.date.date.getFullYear()),console.log(d),console.log(x),console.log(a.rehearsalLocation.color),s.push({title:a.name,start:d.toISOString(),end:x.toISOString(),isAllDay:!1,interactive:!0,color:a.rehearsalLocation.color.setAlpha(.8).toHex(),description:a.info,id:a.id,location:a.rehearsalLocation.name})}K(s)});const o=()=>{window.innerWidth<800?ue(!0):ue(!1)};return window.addEventListener("resize",o),o(),()=>window.removeEventListener("resize",o)},[]);const Te=c=>{const r=c.target.value,[e,o]=r.split(":").map(Number),t=new Date(T);t.setHours(e,o,0,0),E(t),N(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},De=c=>{const r=c.target.value,[e,o]=r.split(":").map(Number),t=new Date(T);t.setHours(e,o,0,0),A(t),L(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};Date.prototype.addHours=function(c){return this.setTime(this.getTime()+c*60*60*1e3),this};function fe(){return $}return n.jsxs("div",{className:"center",children:[n.jsx("h1",{className:"title",children:"Create Schedule"}),le=="date"?n.jsxs(n.Fragment,{children:[" ",n.jsx("h2",{className:"mode",children:"Select a Date"}),n.jsxs("div",{className:"container",children:[n.jsxs("div",{className:"box left",children:[n.jsxs("h2",{children:["Conflicts",b!=null?" on "+b.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:oe,onChange:c=>{if(ce(c.target.checked),c.target.checked){const r=[];for(const e of p)re.find(o=>o.userId==e.actor.userId)||r.push(e);h(r)}}}),n.jsx("span",{className:"checkmark",children:" "})]})," "]}),n.jsx("div",{className:"conflicts",children:ee.map((c,r)=>n.jsx(ie,{conflictResponseDate:c.conflictResponseDate,actor:c.actor},r))})]}),n.jsx(Ye,{isCreating:!0,canOpenContextMenu:!0,events:W,editEvent:c=>{const r=fe().find(e=>e.id==c.id);r&&(console.log(r),I("info"),C(r.name),P(r.info),H(r.date.date),E(r.date.from),N(r.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),A(r.date.to),L(r.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),U(r.location),z(r.rehearsalLocation),f(r.characters),J(r.activityEventType),ne(!0),F(r.theaterEventType),Ce(r))},viewEvent:c=>{const r=fe().find(e=>e.id==c.id);r&&(localStorage.setItem("event",JSON.stringify(r)),localStorage.setItem("back","/Activity/Shows/Show/CreateSchedule/?activityId="+j+"&showId="+Q),window.location.href="/Calendar/Event/")},viewConflicts:c=>{const r=new Date(c);r.setHours(0,0,0,0),y(r);const e=[];for(const o of p)o.conflictResponseDate.date.getTime()==r.getTime()&&e.push(o);h(e)},deleteEvent:async c=>{console.log(c);const r=$.find(t=>t.id==c.id),e=$.filter(t=>t.id!=c.id);V(e);const o=W.filter(t=>t.id!=c.id);K(o),await Me(r)},dateClick:c=>{console.log(c.date),H(c.date);const r=new Date(c.date);r.setHours(0,0,0,0),y(r);const e=[];for(const t of p)t.conflictResponseDate.date.getTime()==r.getTime()&&e.push(t);h(e),E(new Date(c.date)),N(c.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(c.date);A(o.addHours(1)),console.log(o),L(c.date.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),I("type")},eventClick:c=>{H(c.event.start);const r=new Date(c.event.start);r.setHours(0,0,0,0),y(r);const e=[];for(const t of p)t.conflictResponseDate.date.getTime()==r.getTime()&&e.push(t);h(e),E(new Date(c.event.start)),N(c.event.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(c.event.end);A(o),L(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),I("type")}}),n.jsxs("div",{className:"box right",children:[n.jsx("h2",{children:"How To Schedule Events"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Click a time slot to start creating an event"}),n.jsx("li",{children:"Right click a time slot to view conflicts for that day"}),n.jsx("li",{children:"Right click a current event to view/edit the event or delete the event"})]})]})]}),n.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify($)),window.open("/Activity/Shows/Show/Schedule/Print/","_blank")},children:"Print"}),n.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/Shows/Show/?activityId="+j+"&showId="+Q},children:"Back"})]}):le=="type"?n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"mode",children:"Select a Rehersal Type"}),!de&&n.jsxs("div",{className:"conflicts-div",children:[n.jsxs("h2",{children:["Conflicts",b!=null?" on "+b.toDateString():""]}),n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),(i==null?void 0:i.hasEnsemble)&&n.jsx(n.Fragment,{children:n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:oe,onChange:c=>{if(ce(c.target.checked),c.target.checked){const r=[],e=new Date(T);e.setHours(0,0,0,0);for(const o of p)re.find(t=>t.userId==o.actor.userId)||o.conflictResponseDate.date.getTime()==e.getTime()&&r.push(o);h(r)}}}),n.jsx("span",{className:"checkmark",children:" "})]})}),n.jsx("div",{className:"conflicts",children:ee.map((c,r)=>n.jsx(ie,{conflictResponseDate:c.conflictResponseDate,actor:c.actor},r))})]}),n.jsx("button",{onClick:()=>{I("info"),F("custom"),f([])},className:"ActionBtn",children:"Custom"}),n.jsx("h2",{className:"mode",children:"Show Layout"}),n.jsx("div",{className:"layout",children:i==null?void 0:i.layout.map((c,r)=>n.jsx($e,{act:c,onClick:e=>{F("scene"),C(e.name+" - "+c.name),I("info"),f(e.characters);const o=[];for(const s of e.characters)if(s instanceof g)o.includes(s.actor.userId)&&o.push(s.actor.userId);else if(s instanceof B){for(const a of s.characters)if(a instanceof g)o.includes(a.actor.userId)&&o.push(a.actor.userId);else if(a instanceof S){if(a.includeAll)for(const d of i.ensemble.actors)o.includes(d.userId)&&o.push(d.userId);else if(a.includeMale)for(const d of i.ensemble.actors)d.gender=="male"&&o.includes(d.userId)&&o.push(d.userId);else if(a.includeFemale)for(const d of i.ensemble.actors)d.gender=="female"&&o.includes(d.userId)&&o.push(d.userId);else if(a.includeCustom)for(const d of a.customActors)o.includes(d.userId)&&o.push(d.userId)}}else if(s instanceof S){if(s.includeAll)for(const a of i.ensemble.actors)o.includes(a.userId)&&o.push(a.userId);else if(s.includeMale)for(const a of i.ensemble.actors)a.gender=="male"&&o.includes(a.userId)&&o.push(a.userId);else if(s.includeFemale)for(const a of i.ensemble.actors)a.gender=="female"&&o.includes(a.userId)&&o.push(a.userId);else if(s.includeCustom)for(const a of s.customActors)o.includes(a.userId)&&o.push(a.userId)}else if(s instanceof G){for(const a of i.ensemble.actors)o.includes(a.userId)&&o.push(a.userId);for(const a of i.characters)o.includes(a.actor.userId)||o.push(a.actor.userId)}const t=[];for(const s of p)o.includes(s.actor.userId)&&s.conflictResponseDate.date.getTime()==b.getTime()&&t.push(s);h(t)}},r))}),n.jsx("h2",{className:"mode",children:"Songs"}),n.jsx("div",{className:"songs",children:i==null?void 0:i.songs.map((c,r)=>n.jsx(Ge,{song:c,onClick:()=>{F("song"),C(c.name),f(c.characters),I("info");const e=[];for(const t of c.characters)if(t instanceof g)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof B){for(const s of t.characters)if(s instanceof g)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof S){if(s.includeAll)for(const a of i.ensemble.actors)e.includes(a.userId)&&e.push(a.userId);else if(s.includeMale)for(const a of i.ensemble.actors)a.gender=="male"&&e.includes(a.userId)&&e.push(a.userId);else if(s.includeFemale)for(const a of i.ensemble.actors)a.gender=="female"&&e.includes(a.userId)&&e.push(a.userId);else if(s.includeCustom)for(const a of s.customActors)e.includes(a.userId)&&e.push(a.userId)}}else if(t instanceof S){if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(t instanceof G){for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);for(const s of i.characters)e.includes(s.actor.userId)||e.push(s.actor.userId)}const o=[];for(const t of p)e.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==b.getTime()&&o.push(t);h(o)}},r))}),n.jsx("h2",{className:"mode",children:"Dances"}),n.jsx("div",{className:"dances",children:i==null?void 0:i.dances.map((c,r)=>n.jsx(Oe,{dance:c,onClick:()=>{F("dance"),C(c.name),I("info"),f(c.characters);const e=[];for(const t of c.characters)if(t instanceof g)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof B){for(const s of t.characters)if(s instanceof g)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof S){if(s.includeAll)for(const a of i.ensemble.actors)e.includes(a.userId)&&e.push(a.userId);else if(s.includeMale)for(const a of i.ensemble.actors)a.gender=="male"&&e.includes(a.userId)&&e.push(a.userId);else if(s.includeFemale)for(const a of i.ensemble.actors)a.gender=="female"&&e.includes(a.userId)&&e.push(a.userId);else if(s.includeCustom)for(const a of s.customActors)e.includes(a.userId)&&e.push(a.userId)}}else if(t instanceof S){if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(t instanceof G){for(const s of i.ensemble.actors)e.push(s.userId);for(const s of i.characters)e.includes(s.actor.userId)||e.push(s.actor.userId)}const o=[];for(const t of p)e.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==b.getTime()&&o.push(t);h(o)}},r))}),n.jsx("button",{onClick:()=>{I("date"),y(null),h([...p])},className:"ActionBtn",children:"Back"})]}):n.jsxs(n.Fragment,{children:[!de&&n.jsxs("div",{className:"conflicts-div",children:[n.jsxs("h2",{children:["Conflicts",b!=null?" on "+b.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:oe,onChange:c=>{if(ce(c.target.checked),c.target.checked){const r=[],e=[];for(const o of m)if(o instanceof g)e.includes(o.actor.userId)&&e.push(o.actor.userId);else if(o instanceof B){for(const t of o.characters)if(t instanceof g)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(o instanceof S){if(o.includeAll)for(const t of i.ensemble.actors)e.includes(t.userId)&&e.push(t.userId);else if(o.includeMale)for(const t of i.ensemble.actors)t.gender=="male"&&e.includes(t.userId)&&e.push(t.userId);else if(o.includeFemale)for(const t of i.ensemble.actors)t.gender=="female"&&e.includes(t.userId)&&e.push(t.userId);else if(o.includeCustom)for(const t of o.customActors)e.includes(t.userId)&&e.push(t.userId)}else{for(const t of i.ensemble.actors)e.push(t.userId);for(const t of i.characters)e.includes(t.actor.userId)||e.push(t.actor.userId)}for(const o of p)re.find(t=>t.userId==o.actor.userId)||e.includes(o.actor.userId)&&o.conflictResponseDate.date.getTime()==b.getTime()&&r.push(o);h(r)}}}),n.jsx("span",{className:"checkmark",children:" "})]})," "]}),n.jsx("div",{className:"conflicts",children:ee.map((c,r)=>n.jsx(ie,{conflictResponseDate:c.conflictResponseDate,actor:c.actor},r))})]}),n.jsx("h2",{className:"mode",children:"Enter Rehersal Information"}),n.jsx("label",{htmlFor:"Name",children:"Name: "}),n.jsx("input",{type:"text",value:O,onChange:c=>{C(c.target.value)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"Description",children:"Description: "}),n.jsx("textarea",{value:_,onChange:c=>{P(c.target.value)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"",children:"Date: "}),n.jsx("input",{type:"date",value:T==null?void 0:T.toISOString().split("T")[0],onChange:c=>{const r=new Date(c.target.value);r.setHours(0,0,0,0),r.setDate(r.getDate()+1),H(r);const e=new Date(r);e.setHours(D.getHours(),D.getMinutes(),0,0),E(e),N(e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(r);o.setHours(w.getHours(),w.getMinutes(),0,0),A(o),L(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),y(r);const t=[];for(const s of p)s.conflictResponseDate.date.getTime()==r.getTime()&&t.push(s);h(t)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),n.jsx("input",{type:"time",value:ge,onChange:Te}),n.jsx("br",{}),n.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),n.jsx("input",{type:"time",value:Ie,onChange:De}),n.jsx("br",{}),n.jsx("label",{htmlFor:"location",children:"Location: "}),n.jsx("select",{name:"location",id:"location",onChange:c=>{U(l==null?void 0:l.locations.find(r=>r.name==c.target.value))},children:l==null?void 0:l.locations.map((c,r)=>n.jsx("option",{value:c.name,selected:(v==null?void 0:v.name)==c.name,children:c.name+" ("+c.address+")"},r))}),n.jsx("br",{}),n.jsx("label",{htmlFor:"location",children:"Rehersal Location: "}),n.jsx("select",{name:"location",id:"rehersal-location",onChange:c=>{z(l==null?void 0:l.rehearsalLocations.find(r=>r.name==c.target.value))},children:l==null?void 0:l.rehearsalLocations.map((c,r)=>n.jsx("option",{value:c.name,selected:(R==null?void 0:R.name)==c.name,children:c.name},r))}),n.jsx("br",{}),n.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),n.jsx("select",{name:"eventType",id:"event-type",onChange:c=>{J(l==null?void 0:l.eventTypes.find(r=>r.name==c.target.value))},children:l==null?void 0:l.eventTypes.map((c,r)=>n.jsx("option",{value:c.name,selected:(M==null?void 0:M.name)==c.name,children:c.name},r))}),n.jsx("br",{}),k=="custom"?n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"fullCast",children:"Full Cast: "}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:te,onChange:c=>xe(c.target.checked)}),n.jsx("span",{className:"checkmark"})]})]}):n.jsx(n.Fragment,{}),k=="custom"&&n.jsx("br",{}),te?n.jsx(n.Fragment,{}):n.jsxs(n.Fragment,{children:[" ",n.jsx("h2",{children:"Characters"}),n.jsx("div",{className:"characters",children:m.map((c,r)=>{if(c instanceof g)return k=="custom"?n.jsx(ze,{character:c,isCreate:!1,actors:[],characters:i.characters,isAssign:!1,setCharacter:e=>{f(m.map((o,t)=>t===r?e:o))},removeCharacter:()=>{f(m.filter((e,o)=>o!==r))}},r):n.jsx(_e,{character:c,canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==r))},isMini:!1},r);if(c instanceof S)return k=="custom"?n.jsx(qe,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:c,isCustom:!0,setEnsembleSection:e=>{f(m.map((o,t)=>t===r?e:o))},removeEnsembleSection:()=>{f(m.filter((e,o)=>o!==r)),Y(!1)},isCreate:!1,isAssign:!1,actors:l.students},r):n.jsx(Pe,{ensembleSection:c,canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==r))},isMini:!1},r);if(c instanceof B)return k=="custom"?n.jsx(Je,{showGroup:c,characters:i.characters,setShowGroup:e=>{f(m.map((o,t)=>t===r?e:o))},removeShowGroup:()=>{f(m.filter((e,o)=>o!==r))},isCreate:!1,isAssign:!1,actors:l.students,hasEnsemble:i.hasEnsemble,showGroups:i.showGroups},r):n.jsx(Ue,{showGroup:c,showCharacters:!0,canClick:!1,onClick:()=>{},canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==r))}},r);if(c instanceof G)return n.jsx(Ve,{canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==r))}},r)})}),k=="custom"?n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"ActionBtn",onClick:()=>{const c=Math.floor(Math.random()*1e5);f([...m,g.fromBlank("Character 1",null,c,0)])},children:"Add Character"}),n.jsx("button",{className:"ActionBtn",onClick:()=>{const c=Math.floor(Math.random()*1e5);f([...m,B.fromBlank("Show Group 1",[],c,0)])},children:"Add Show Group"}),(i==null?void 0:i.hasEnsemble)&&n.jsx("button",{className:"ActionBtn "+(Z?"disabled":""),disabled:Z,onClick:()=>{Z||(Y(!0),f([...m,S.fromBlank(!0,!1,!1,!1,[],0)]))},children:"Add Ensemble"})," "]}):n.jsx(n.Fragment,{})," "]}),n.jsx("br",{}),be?n.jsx("div",{className:"loader"}):n.jsx("button",{onClick:async()=>{if(X(!0),console.log(`Name: ${O}, Description: ${_}, Start Time: ${D}, End Time: ${w}, Selected Location: ${v}, Rehearsal Location: ${R}, Event Type: ${M}`),O==""||_==""||D==null||w==null||v==null||R==null||M==null){alert("Please fill out all fields"),console.log(`Name: ${O}, Description: ${_}, Start Time: ${D}, End Time: ${w}, Selected Location: ${v}, Rehearsal Location: ${R}, Event Type: ${M}`),X(!1);return}console.log("Submit");const c=v??l.locations[0];console.log(D),console.log(w);const r=ke.fromBlank(T,D,w);console.log(r.toMap());const e=[];if(te){m.push(new G);for(const t of i.ensemble.actors)e.push(t);for(const t of i.characters)e.find(s=>s.userId==t.actor.userId)==null&&e.push(t.actor)}else for(const t of m){if(t instanceof G){for(const s of i.ensemble.actors)e.push(s);for(const s of i.characters)e.find(a=>a.userId==s.actor.userId)==null&&e.push(s.actor);break}if(t instanceof g){if(e.find(s=>s.userId==t.actor.userId)!=null)continue;e.push(t.actor)}if(t instanceof S){if(t.includeAll)for(const s of i.ensemble.actors)e.find(a=>a.userId==s.userId)==null&&e.push(s);else if(t.includeMale){for(const s of i.ensemble.actors)if(s.gender=="male"){if(e.find(a=>a.userId==s.userId)!=null)continue;e.push(s)}}else if(t.includeFemale){for(const s of i.ensemble.actors)if(s.gender=="female"){if(e.find(a=>a.userId==s.userId)!=null)continue;e.push(s)}}else if(t.includeCustom)for(const s of t.customActors)e.find(a=>a.userId==s.userId)==null&&e.push(s)}if(t instanceof B)for(const s of t.characters){if(s instanceof g){if(e.find(a=>a.userId==s.actor.userId)!=null)continue;e.push(s.actor)}if(s instanceof S){if(s.includeAll)for(const a of i.ensemble.actors)e.find(d=>d.userId==a.userId)==null&&e.push(a);else if(s.includeMale){for(const a of i.ensemble.actors)if(a.gender=="male"){if(e.find(d=>d.userId==a.userId)!=null)continue;e.push(a)}}else if(s.includeFemale){for(const a of i.ensemble.actors)if(a.gender=="female"){if(e.find(d=>d.userId==a.userId)!=null)continue;e.push(a)}}else if(s.includeCustom)for(const a of s.customActors)e.find(d=>d.userId==a.userId)==null&&e.push(a)}}}const o=Fe.fromBlank(O,_,c,r,"activity-theater-event",Date.now(),j,l.name,Q,i.name,m,e,k,M,R);if(console.log(o),se){o.id=je.id,await Be(o),ne(!1);const t=o.date.from,s=o.date.to,a={title:o.name,start:t.toISOString(),end:s.toISOString(),isAllDay:!1,interactive:!0,description:o.info,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),location:o.rehearsalLocation.name,id:o.id},d=W.filter(ae=>ae.id!=o.id);d.push(a),K(d);const x=$.filter(ae=>ae.id!=o.id);x.push(o),console.log(x),V([...x])}else{await He(o);const t=o.date.from,s=o.date.to,a={title:o.name,start:t.toISOString(),end:s.toISOString(),isAllDay:!1,interactive:!0,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),id:o.id,location:o.rehearsalLocation.name,description:o.info};K([...W,a]),V([...$,o])}X(!1),I("date"),H(null),E(null),A(null),F("custom"),C(""),P(""),N(""),L(""),z(l==null?void 0:l.rehearsalLocations[0]),J(l==null?void 0:l.eventTypes[0]),U(l==null?void 0:l.defaultLocation),f([]),Y(!1),y(null),h(p)},className:"ActionBtn",children:se?"Save":"Submit"}),n.jsx("button",{onClick:()=>{if(se){I("date"),H(null),E(null),A(null),F("custom"),C(""),P(""),N(""),L(""),z(l==null?void 0:l.rehearsalLocations[0]),J(l==null?void 0:l.eventTypes[0]),U(l==null?void 0:l.defaultLocation),Y(!1),y(null),h(p),ne(!1);return}I("type"),P(""),C(""),Y(!1);const c=[];for(const r of p)r.conflictResponseDate.date.getTime()==b.getTime()&&c.push(r);h(c)},className:"ActionBtn",children:"Back"})]})]})}
