import{r,j as e,c as Oe,i as Ye}from"./index-U3pxML4x.js";import{k as le,y as ue,j as Pe}from"./constants-CrK5oAWg.js";import{a4 as Ge,a5 as pe,K as He,i as Ve,a6 as Ke,a7 as Je}from"./db-BXeq32WU.js";import{B as Ue,C as Ce}from"./Calendar-BG4YQB9j.js";import{T as We}from"./trash-BnpXJPEK.js";import{A as Qe}from"./Add_Location_Dialog-DALUhLYJ.js";import"./arrow_forward-CHD_SwLW.js";import"./distance-DNOHIura.js";function $e({dialogRef:Q,close:z,addDate:m,eventDate:A}){const[x,T]=r.useState(new Date),[B,U]=r.useState(new Date),[L,M]=r.useState(new Date),[D,R]=r.useState(""),[a,q]=r.useState(""),j=l=>{const c=l.target.value,[p,d]=c.split(":").map(Number),i=new Date(x);i.setHours(p,d,0,0),U(i),R(i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},h=l=>{const c=l.target.value,[p,d]=c.split(":").map(Number),i=new Date(x);i.setHours(p,d,0,0),M(i),q(i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};return r.useEffect(()=>{A&&(T(A.date),U(A.from),M(A.to),R(A.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),q(A.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})))},[A]),e.jsxs("dialog",{ref:Q,className:"AddEventDateDialog",children:[e.jsx("h2",{children:"Add Event Date"}),e.jsx("label",{htmlFor:"",children:"Date: "}),e.jsx("input",{type:"date",value:x==null?void 0:x.toISOString().split("T")[0],onChange:l=>{const c=new Date(l.target.value);if(c=="Invalid Date"){T(new Date);return}c.setHours(0,0,0,0),c.setDate(c.getDate()+1),T(c);const p=new Date(c);p.setHours(B.getHours(),B.getMinutes(),0,0),U(p),R(p.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const d=new Date(c);d.setHours(L.getHours(),L.getMinutes(),0,0),M(d),q(d.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),e.jsx("input",{type:"time",value:D,onChange:j}),e.jsx("br",{}),e.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),e.jsx("input",{type:"time",value:a,onChange:h}),e.jsxs("div",{className:"actions",children:[e.jsx("button",{className:"ActionBtn",onClick:()=>{z()},children:"Close"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{m(le.fromBlank(x,B,L))},children:"Add Date"})]})]})}function Ze({close:Q,dialogRef:z,events:m,activity:A}){const[x,T]=r.useState("schedule"),[B,U]=r.useState(!1),[L,M]=r.useState(!1);function D(h){const l=Object.keys(h[0]),c=h.map(p=>l.map(d=>p[d]).join(","));return[l.join(","),...c].join(`
`)}const R=()=>{const h=[];B&&(m=j(m));for(let i=0;i<m.length;i++){const g=m[i];h.push({Date:g.date.date.getMonth()+1+"/"+g.date.date.getDate()+"/"+g.date.date.getFullYear().toString().slice(2),Start:g.date.from.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0}),End:g.date.to.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0}),Name:g.name,Location:g.location.name==A.defaultLocation.name?"default":g.location.name,"Event Type":g.eventType.name,"Extra Info":g.info,"Invite Type":g.generalTarget,"Custom/Group Targets":g.groupTargets.map(E=>E.groupName).join(", "),"Added to Campus Connect":""})}h.sort((i,g)=>i.Date==g.Date?i.Start==g.Start?i.End>g.End?1:-1:i.Start>g.Start?1:-1:i.Date>g.Date?1:-1);const l=D(h),c=new Blob([l],{type:"text/csv"}),p=window.URL.createObjectURL(c),d=document.createElement("a");d.href=p,d.download=x+".csv",d.click(),window.URL.revokeObjectURL(p)};function a(h,l,c,p){const d=new Date(h,l,1);let i=0;for(;d.getMonth()===l;){if(d.getDay()===c&&(i++,i===p))return d;d.setDate(d.getDate()+1)}return a(h,l+1,c,1)}function q(h){const l=h.getDay(),c=h.getFullYear()+1,p=h.getMonth();let d=1;const i=new Date(h);for(i.setDate(1);i.getMonth()===p;){if(i.getDay()===l){if(i.getDate()===h.getDate())break;d++}i.setDate(i.getDate()+1)}return a(c,p,l,d)}function j(h){return h.map(l=>{const c=q(l.date.date),p=le.fromBlank(c,l.date.from,l.date.to);return ue.fromBlank(l.name,l.info,l.location,p,l.type,l.lastUpdated,l.activityId,l.groupNames,l.targets,l.generalTarget,l.eventType,l.groupTargets,l.hasSchoolEvent,l.schoolEventId,l.conflicts,l.activityName)})}return e.jsxs("dialog",{ref:z,children:[e.jsx("h2",{children:"Export Schedule"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:x,onChange:h=>{T(h.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Move Schedule Forward a Year? "}),e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:B,onChange:h=>{U(h.target.checked)}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("br",{}),L?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(x==""){alert("Please fill out all fields");return}M(!0),R(),M(!1)},children:"Export Schedule"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{Q()},children:"Close"})]})]})}const ze="data:image/png;base64,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";function qe({remove:Q,edit:z,event:m,activity:A}){return e.jsxs("div",{className:"event",children:[e.jsxs("div",{className:"event-info",children:[e.jsx("p",{children:m.name}),m.eventType!=null?e.jsx("p",{children:m.eventType.name}):e.jsxs("select",{onChange:x=>{m.eventType=A.eventTypes.find(T=>T.name===x.target.value),z(m)},children:[e.jsx("option",{value:"",children:"Select Event Type"}),A.eventTypes.map((x,T)=>e.jsx("option",{value:x.name,children:x.name},T))]}),e.jsx("p",{children:m.info}),m.location!=null?e.jsx("p",{children:m.location.name}):e.jsxs("select",{onChange:x=>{m.location=A.locations.find(T=>T.name===x.target.value),z(m)},children:[e.jsx("option",{value:"",children:"Select Location"}),A.locations.map((x,T)=>e.jsx("option",{value:x.name,children:x.name},T))]})]}),e.jsxs("div",{className:"event-date-add",children:[e.jsx("p",{children:m.date.date.toDateString()}),e.jsxs("p",{children:[m.date.from.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})," - ",m.date.to.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]})]}),e.jsx("div",{children:e.jsx("img",{src:ze,alt:"",className:"removeIcon",onClick:()=>{Q()}})})]},m.id)}function Xe({close:Q,dialogRef:z,activity:m,addEvents:A}){const[x,T]=r.useState(!1),[B,U]=r.useState(null),[L,M]=r.useState([]),D=r.useRef(null);function R(j){const h=j.split(`
`),l=[],c=h[0].split(",");for(let p=1;p<h.length;p++){const d={},i=h[p].split(",");for(let g=0;g<c.length;g++)d[c[g]]=i[g];l.push(d)}return JSON.stringify(l)}function a(j){var c;const h=JSON.parse(j),l=[];for(let p=0;p<h.length;p++){const d=h[p];if(((c=d["Added to Campus Connect"])==null?void 0:c.toLowerCase())=="yes"||d.Date=="")continue;const i=new Date(d.Date);i.getFullYear()==2001&&i.setFullYear(new Date().getFullYear());const g=new Date(i.toDateString()+" "+d.Start),E=new Date(i.toDateString()+" "+d.End),P=le.fromBlank(i,g,E),ne=d.Name;let ee=d.Location;ee=="default"?ee=m.defaultLocation:ee=m.locations.find(V=>V.name==ee);const ae=m.eventTypes.find(V=>V.name==d["Event Type"]),me=d["Extra Info"],F=d["Invite Type"],I=[],G=[],N=[];if(F=="groups"){const V=d["Custom/Group Targets"].split(",");for(let C=0;C<V.length;C++){const $=m.groups.find(b=>b.groupName==V[C].trim());$&&(I.push($),G.push($.groupName),$.groupMembers.forEach(b=>{N.find(S=>S.userId==b.userId)||N.push(b)}))}}else if(F=="custom"){const V=d["Custom/Group Targets"].split(", ");for(let C=0;C<V.length;C++){const $=m.students.find(b=>b.userId==V[C]);if($)N.push($);else{const b=m.parents.find(S=>S.userId==V[C]);b&&N.push(b.toActivityMember())}}}l.push(ue.fromBlank(ne,me,ee,P,"activity-event",Date.now(),m.id,G,N,F,ae,I,!1,"",[],m.name))}return l}function q(){const j=new Blob([`Date,Start,End,Name,Location,Event Type,Extra Info,Invite Type,Custom/Group Targets,Added to Campus Connect,,,Formatting Rules
,,,,,,,,,,,,Values for Invite Type,,
,,,,,,,,,,,,students,,
,,,,,,,,,,,,parents,,
,,,,,,,,,,,,groups,"Requires that you type group names into Custom/Group Targets column, each name should be separated by a comma",
,,,,,,,,,,,,custom,"Requires that you type members name into Custom/Group Targets column, each name should be separated by a comma",
,,,,,,,,,,,,,,
,,,,,,,,,,,,Values for Location,,
,,,,,,,,,,,,default,Connects to the default location of the activity,
,,,,,,,,,,,,(location name as specified in activity),,
,,,,,,,,,,,,If left blank or the website can't find the location you will be asked to specify when importing,,
,,,,,,,,,,,,,,
,,,,,,,,,,,,Extra Info is optional,,
,,,,,,,,,,,,Date must either be month/day/year or month/day and the current year will be assumed,,
,,,,,,,,,,,,Start and End must be in 12 hour format (i.e. 3:00 PM),,
,,,,,,,,,,,,You can leave Added to Campus Connect blank or put yes if you don't want to import the event,,`],{type:"text/csv"}),h=window.URL.createObjectURL(j),l=document.createElement("a");l.href=h,l.download="ScheduleTemplate.csv",l.click(),window.URL.revokeObjectURL(h)}return e.jsx("dialog",{ref:z,children:e.jsxs("div",{className:"import-schedule-dialog",children:[e.jsx("h2",{children:"Import Schedule"}),L.length==0?e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"CSV File: "}),e.jsx("input",{type:"file",accept:".csv",ref:D,onChange:j=>{j.target.files&&U(j.target.files[0])}}),x?e.jsx("div",{className:"center-loader",children:e.jsx("div",{className:"loader"})}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(B==null){alert("Please select a file");return}T(!0);const j=new FileReader;j.onload=function(h){const l=h.target.result,c=R(l),p=a(c);M(p),console.log(c),console.log(p)},j.readAsText(B),T(!1)},children:"Import Schedule"}),e.jsx("button",{className:"ActionBtn",onClick:q,children:"Download CSV Template"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{U(null),M([]),Q(),D.current.value=""},children:"Close"})]}):e.jsxs("div",{className:"events-view",children:[e.jsx("h3",{children:"Events"}),!x&&e.jsx("div",{className:"events",children:L.map((j,h)=>e.jsx(qe,{event:j,activity:m,edit:l=>{const c=[...L];c[h]=l,M(c)},remove:()=>{const l=[...L];l.splice(h,1),M(l)}},j.id))}),x?e.jsx("div",{className:"center-loader",children:e.jsx("div",{className:"loader"})}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{for(let j=0;j<L.length;j++)if(L[j].eventType==null){alert("Please select an event type for all events");return}for(let j=0;j<L.length;j++)if(L[j].location==null){alert("Please select a location for all events");return}T(!0),await A(L),M([]),U(null),T(!1),Q()},children:"Import Schedule"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{U(null),M([]),Q(),D.current.value=""},children:"Close"}),e.jsx("label",{htmlFor:"",className:"hiddenText",children:" s "})]})]})})}Oe(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(_e,{})}));function _e(){const[Q,z]=r.useState("student"),[m,A]=r.useState([]),[x,T]=r.useState([]),[B,U]=r.useState(null),[L,M]=r.useState(!1),[D,R]=r.useState([]),[a,q]=r.useState(),[j,h]=r.useState("students"),[l,c]=r.useState("date"),[p,d]=r.useState(null),[i,g]=r.useState(null),[E,P]=r.useState(null),[ne,ee]=r.useState(null),[ae,me]=r.useState(null),[F,I]=r.useState(""),[G,N]=r.useState(""),[V,C]=r.useState(""),[$,b]=r.useState(""),[S,k]=r.useState(void 0),[K,H]=r.useState([]),[y,W]=r.useState("students"),[fe,et]=r.useState(!1);r.useState(""),r.useState(""),r.useState(null),r.useState(null);const[ve,tt]=r.useState(""),[te,se]=r.useState(!1),[ie,ye]=r.useState(null),[w,O]=r.useState(void 0),[Z,we]=r.useState(void 0),[re,Ee]=r.useState([]),[ke,Fe]=r.useState(void 0),he=r.useRef(null),xe=r.useRef(null),je=r.useRef(null),oe=r.useRef(null),[Se,X]=r.useState(!1),[_,ge]=r.useState([]);r.useEffect(()=>{Ye(()=>{});async function t(){M(!0);const u=new URLSearchParams(window.location.search).get("activityId");if(u){U(u);const f=await Ve(u);q(f),console.log(f),k(f.defaultLocation)}const o=await Ke(u);console.log(o),A(o);const v=[];for(const f of o){console.log(f);const Y=f.date.from;console.log(f.date.date),Y.setDate(f.date.date.getDate()),Y.setMonth(f.date.date.getMonth()),Y.setFullYear(f.date.date.getFullYear());const J=f.date.to;J.setDate(f.date.date.getDate()),J.setMonth(f.date.date.getMonth()),J.setFullYear(f.date.date.getFullYear()),console.log(Y),console.log(J),v.push({title:f.name,start:Y.toISOString(),end:J.toISOString(),isAllDay:!1,interactive:!0,description:f.info,color:f.eventType.color.setAlpha(.8).toRBGAString(),id:f.id,location:f.location.name})}T(v),console.log(o),console.log(v),M(!1)}t();const n=localStorage.getItem("accountType");n&&z(n)},[]);function be(){return m}const Te=t=>{const n=t.target.value,[s,u]=n.split(":").map(Number),o=new Date(p);o.setHours(s,u,0,0),g(o),C(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},Ae=t=>{const n=t.target.value,[s,u]=n.split(":").map(Number),o=new Date(p);o.setHours(s,u,0,0),P(o),b(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};Date.prototype.addHours=function(t){return this.setTime(this.getTime()+t*60*60*1e3),this};function De(){return e.jsxs("div",{className:"custom-invite-view",children:[e.jsx("button",{className:j=="students"?"selected":"",onClick:()=>{h("students")},children:"Students"}),e.jsx("button",{className:j=="parents"?"selected":"",onClick:()=>{h("parents")},children:"Parents"}),e.jsx("div",{className:"current-view",children:j=="students"?e.jsx("div",{className:"students",children:a==null?void 0:a.students.map((t,n)=>e.jsxs("div",{className:"student",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"student",checked:K.find(s=>s.userId==t.userId)!=null,onChange:s=>{s.target.checked?H([...K,t]):H(K.filter(u=>u!=t))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.userId,children:t.name})]},t.userId))}):e.jsx("div",{className:"parents",children:a==null?void 0:a.parents.map((t,n)=>e.jsxs("div",{className:"parent",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"parent",onChange:s=>{s.target.checked?H([...K,t]):H(K.filter(u=>u!=t))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.userId,children:t.name})]},t.userId))})})]})}function Ie(){return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mode",children:"Enter Event Information"}),e.jsx("label",{htmlFor:"Name",children:"Name: "}),e.jsx("input",{type:"text",value:F,onChange:t=>{I(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Description",children:"Description: "}),e.jsx("textarea",{value:G,onChange:t=>{N(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Date: "}),e.jsx("input",{type:"date",value:p==null?void 0:p.toISOString().split("T")[0],onChange:t=>{const n=new Date(t.target.value);if(n=="Invalid Date"){d(null);return}n.setHours(0,0,0,0),n.setDate(n.getDate()+1),d(n);const s=new Date(n);s.setHours(i.getHours(),i.getMinutes(),0,0),g(s),C(s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const u=new Date(n);u.setHours(E.getHours(),E.getMinutes(),0,0),P(u),b(u.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),e.jsx("input",{type:"time",value:V,onChange:Te}),e.jsx("br",{}),e.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),e.jsx("input",{type:"time",value:$,onChange:Ae}),e.jsx("br",{}),e.jsx("label",{htmlFor:"location",children:"Location: "}),e.jsx("select",{name:"location",id:"location",onChange:t=>{k(a==null?void 0:a.locations.find(n=>n.name==t.target.value))},children:a==null?void 0:a.locations.map((t,n)=>e.jsx("option",{value:t.name,selected:(S==null?void 0:S.name)==t.name,children:t.name+" ("+t.address+")"},n))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=oe.current)==null||t.showModal()},children:"Add New Location"}),e.jsx("br",{}),e.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),e.jsx("select",{name:"eventType",id:"event-type",onChange:t=>{O(a==null?void 0:a.eventTypes.find(n=>n.name==t.target.value))},children:a==null?void 0:a.eventTypes.map((t,n)=>e.jsx("option",{value:t.name,selected:(w==null?void 0:w.name)==t.name,children:t.name},n))}),e.jsx("br",{}),e.jsx("label",{htmlFor:"inviteType",children:"Invite Type: "}),e.jsxs("select",{name:"inviteType",id:"invite-type",onChange:t=>{W(t.target.value)},children:[e.jsx("option",{value:"students",selected:y=="students",children:"Students"}),e.jsx("option",{value:"parents",selected:y=="parents",children:"Parents"}),e.jsx("option",{value:"groups",selected:y=="groups",children:"Groups"}),e.jsx("option",{value:"custom",selected:y=="custom",children:"Custom"})]}),y=="groups"?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("label",{htmlFor:"groups",children:"Groups: "}),e.jsx("div",{className:"groups",children:a.groups.map((t,n)=>e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:D.find(s=>s.groupName==t.groupName)!=null,onChange:s=>{s.target.checked?(R([...D,t]),H([...K,...t.groupMembers])):(R(D.filter(u=>u.groupName!=t.groupName)),H(K.filter(u=>!t.groupMembers.includes(u))))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.groupName,children:t.groupName})]},t.groupName))})]}):e.jsx(e.Fragment,{}),y=="custom"?De():e.jsx(e.Fragment,{}),e.jsx("br",{}),Se?e.jsx("div",{className:"loader"}):e.jsx("button",{onClick:async()=>{if(X(!0),console.log(`Name: ${F}, Description: ${G}, Start Time: ${i}, End Time: ${E}, Selected Location: ${S},Event Type: ${w}`),F==""||i==null||E==null||S==null||w==null){alert("Please fill out all fields"),console.log(`Name: ${F}, Description: ${G}, Start Time: ${i}, End Time: ${E}, Selected Location: ${S},  Event Type: ${w}`),X(!1);return}console.log("Submit");const t=S??a.locations[0];console.log(i),console.log(E);const n=le.fromBlank(p,i,E);console.log(n.toMap());const s=[],u=w;u.color.setAlpha(255);const o=ue.fromBlank(F,G,t,n,"activity-event",Date.now(),B,D.map(v=>v.groupName),K,y,u,D,fe,ve,[],a.name);if(te){o.id=ie.id,ie.generalTarget=="groups"&&o.groupTargets.forEach(de=>{de.groupMembers.forEach(Ne=>{s.find(Re=>Re.userId==Ne.userId)||s.push(Ne)})}),o.targets=[...s],await Je(o),se(!1);const v=o.date.from,f=o.date.to,Y={title:o.name,start:v.toISOString(),end:f.toISOString(),isAllDay:!1,interactive:!0,description:o.info,color:o.eventType.color.setAlpha(.8).toRBGAString(),id:o.id,location:o.location.name},J=x.filter(de=>de.id!=ie.id);console.log(J),console.log(ie.id),J.push(Y),T([...J]);const ce=m.filter(de=>de.id!=ie.id);ce.push(o),console.log(ce),A([...ce])}else{await pe(o);const v=o.date.from,f=o.date.to;v.setDate(o.date.date.getDate()),v.setMonth(o.date.date.getMonth()),v.setFullYear(o.date.date.getFullYear()),f.setDate(o.date.date.getDate()),f.setMonth(o.date.date.getMonth()),f.setFullYear(o.date.date.getFullYear());const Y={title:o.name,start:v.toISOString(),end:f.toISOString(),isAllDay:!1,interactive:!0,description:o.info,color:o.eventType.color.setAlpha(.8).toRBGAString(),id:o.id,location:o.location.name};T([...x,Y]),A([...m,o])}X(!1),c("date"),d(null),g(null),P(null),I(""),N(""),C(""),b(""),O(a==null?void 0:a.eventTypes[0]),k(a==null?void 0:a.defaultLocation),H([]),W("students")},className:"ActionBtn",children:te?"Save":"Submit"}),e.jsx("button",{onClick:()=>{if(te){c("date"),d(null),g(null),P(null),I(""),N(""),C(""),b(""),k(a.defaultLocation),O(a.eventTypes[0]),k(a==null?void 0:a.defaultLocation),se(!1);return}c("date"),N(""),I(""),W("students")},className:"ActionBtn",children:"Back"})]})}function Le(){return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mode",children:"Enter Event Information"}),e.jsx("label",{htmlFor:"Name",children:"Name: "}),e.jsx("input",{type:"text",value:F,onChange:t=>{I(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Description",children:"Description: "}),e.jsx("textarea",{value:G,onChange:t=>{N(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),e.jsx("input",{type:"time",value:V,onChange:Te}),e.jsx("br",{}),e.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),e.jsx("input",{type:"time",value:$,onChange:Ae}),e.jsx("br",{}),e.jsx("label",{htmlFor:"location",children:"Location: "}),e.jsx("select",{name:"location",id:"location",onChange:t=>{k(a==null?void 0:a.locations.find(n=>n.name==t.target.value))},children:a==null?void 0:a.locations.map((t,n)=>e.jsx("option",{value:t.name,selected:(S==null?void 0:S.name)==t.name,children:t.name+" ("+t.address+")"},n))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=oe.current)==null||t.showModal()},children:"Add New Location"}),e.jsx("br",{}),e.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),e.jsx("select",{name:"eventType",id:"event-type",onChange:t=>{O(a==null?void 0:a.eventTypes.find(n=>n.name==t.target.value))},children:a==null?void 0:a.eventTypes.map((t,n)=>e.jsx("option",{value:t.name,selected:(w==null?void 0:w.name)==t.name,children:t.name},n))}),e.jsx("br",{}),e.jsx("label",{htmlFor:"inviteType",children:"Invite Type: "}),e.jsxs("select",{name:"inviteType",id:"invite-type",onChange:t=>{W(t.target.value)},children:[e.jsx("option",{value:"students",selected:y=="students",children:"Students"}),e.jsx("option",{value:"parents",selected:y=="parents",children:"Parents"}),e.jsx("option",{value:"groups",selected:y=="groups",children:"Groups"}),e.jsx("option",{value:"custom",selected:y=="custom",children:"Custom"})]}),y=="groups"?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("label",{htmlFor:"groups",children:"Groups: "}),e.jsx("div",{className:"groups",children:a.groups.map((t,n)=>e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:D.find(s=>s.groupName==t.groupName)!=null,onChange:s=>{s.target.checked?(R([...D,t]),H([...K,...t.groupMembers])):(R(D.filter(u=>u.groupName!=t.groupName)),H(K.filter(u=>!t.groupMembers.includes(u))))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.groupName,children:t.groupName})]},t.groupName))})]}):e.jsx(e.Fragment,{}),y=="custom"?De():e.jsx(e.Fragment,{}),e.jsx("br",{}),e.jsx("h2",{children:"Event Dates"}),e.jsx("div",{className:"event-dates",children:re.map((t,n)=>e.jsxs("div",{className:"event-date",children:[e.jsxs("div",{className:"event-date-title",children:[e.jsx("label",{htmlFor:"",className:"event-date-name",children:t.date.toDateString()}),e.jsx("label",{htmlFor:"",className:"event-date-time",children:t.from.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})+" - "+t.to.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})})]}),e.jsx("img",{src:We,className:"event-date-icon",onClick:()=>{Ee(re.filter(s=>s!=t))}})]},n))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var s;if(i==null||E==null){alert("Please fill out start time and end time");return}const t=new Date;t.setHours(0,0,0,0);const n=le.fromBlank(t,i,E);Fe(n),(s=he.current)==null||s.showModal()},children:"Add Date"}),e.jsx("br",{}),Se?e.jsx("div",{className:"loader"}):e.jsx("button",{onClick:async()=>{if(X(!0),console.log(`Name: ${F}, Description: ${G}, Start Time: ${i}, End Time: ${E}, Selected Location: ${S},Event Type: ${w}`),F==""||i==null||E==null||S==null||w==null||re.length==0){alert("Please fill out all fields"),console.log(`Name: ${F}, Description: ${G}, Start Time: ${i}, End Time: ${E}, Selected Location: ${S},  Event Type: ${w}`),X(!1);return}console.log("Submit");const t=S??a.locations[0];console.log(i),console.log(E);const n=[];for(const s of re){const u=w;u.color.setAlpha(255);const o=ue.fromBlank(F,G,t,s,"activity-event",Date.now(),B,D.map(J=>J.groupName),K,y,u,D,fe,ve,[],a.name);await pe(o);const v=o.date.from,f=o.date.to;v.setDate(o.date.date.getDate()),v.setMonth(o.date.date.getMonth()),v.setFullYear(o.date.date.getFullYear()),f.setDate(o.date.date.getDate()),f.setMonth(o.date.date.getMonth()),f.setFullYear(o.date.date.getFullYear());const Y={title:o.name,start:v.toISOString(),end:f.toISOString(),isAllDay:!1,interactive:!0,description:o.info,color:o.eventType.color.setAlpha(.8).toRBGAString(),id:o.id,location:o.location.name};n.push(Y),A([...m,o])}T([...x,...n]),X(!1),c("date"),d(null),g(null),P(null),I(""),N(""),C(""),b(""),O(a==null?void 0:a.eventTypes[0]),k(a==null?void 0:a.defaultLocation),H([]),W("students")},className:"ActionBtn",children:te?"Save":"Submit"}),e.jsx("button",{onClick:()=>{if(te){c("date"),d(null),g(null),P(null),I(""),N(""),C(""),b(""),k(a.defaultLocation),O(a.eventTypes[0]),k(a==null?void 0:a.defaultLocation),se(!1);return}c("date"),N(""),I(""),W("students")},className:"ActionBtn",children:"Back"})]})}function Be(){if(_.length==0)return alert("Please select at least one day"),[];if(i==null||E==null)return alert("Please fill out start time and end time"),[];if(ne==null||ae==null)return alert("Please fill out start date and end date"),[];const t=[],n=new Date(ne);n.setHours(0,0,0,0);const s=new Date(ae);for(s.setHours(0,0,0,0),console.log(_),console.log(n),console.log(s);n<=s;){if(console.log(n),console.log(n.getDay()),_.includes(n.getDay())){console.log("Adding");const u=le.fromBlank(new Date(n),i,E);t.push(u)}n.setDate(n.getDate()+1)}return console.log(t),t}function Me(){return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mode",children:"Enter Event Information"}),e.jsx("label",{htmlFor:"Name",children:"Name: "}),e.jsx("input",{type:"text",value:F,onChange:t=>{I(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Description",children:"Description: "}),e.jsx("textarea",{value:G,onChange:t=>{N(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Repeats Every"}),e.jsx("br",{}),e.jsx("div",{className:"repeating-days",children:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((t,n)=>e.jsxs("label",{className:"custom-checkbox",onClick:s=>{console.log(s.target.tagName),!(s.target.tagName=="INPUT"||s.target.tagName=="SPAN")&&(_.includes(n)?ge(_.filter(u=>u!=n)):ge([..._,n]))},children:[e.jsx("input",{type:"checkbox",checked:_.includes(n),onChange:s=>{_.includes(n)?ge(_.filter(u=>u!=n)):ge([..._,n])}}),e.jsx("span",{className:"checkmark"}),e.jsx("span",{className:"spacer",children:" "}),e.jsx("label",{htmlFor:t,children:t})]},n))}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Start Date: "}),e.jsx("input",{type:"date",value:(ne==null?void 0:ne.toISOString().split("T")[0])??"",onChange:t=>{try{const n=new Date(t.target.value);if(n=="Invalid Date"){ee(null);return}n.setHours(0,0,0,0),n.setDate(n.getDate()+1),console.log(n),ee(n)}catch(n){ee(null),console.log(n)}}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"End Date: "}),e.jsx("input",{type:"date",value:ae==null?void 0:ae.toISOString().split("T")[0],onChange:t=>{const n=new Date(t.target.value);if(n=="Invalid Date"){me(null);return}n.setHours(0,0,0,0),n.setDate(n.getDate()+1),me(n)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),e.jsx("input",{type:"time",value:V,onChange:Te}),e.jsx("br",{}),e.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),e.jsx("input",{type:"time",value:$,onChange:Ae}),e.jsx("br",{}),e.jsx("label",{htmlFor:"location",children:"Location: "}),e.jsx("select",{name:"location",id:"location",onChange:t=>{k(a==null?void 0:a.locations.find(n=>n.name==t.target.value))},children:a==null?void 0:a.locations.map((t,n)=>e.jsx("option",{value:t.name,selected:(S==null?void 0:S.name)==t.name,children:t.name+" ("+t.address+")"},n))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=oe.current)==null||t.showModal()},children:"Add New Location"}),e.jsx("br",{}),e.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),e.jsx("select",{name:"eventType",id:"event-type",onChange:t=>{O(a==null?void 0:a.eventTypes.find(n=>n.name==t.target.value))},children:a==null?void 0:a.eventTypes.map((t,n)=>e.jsx("option",{value:t.name,selected:(w==null?void 0:w.name)==t.name,children:t.name},n))}),e.jsx("br",{}),e.jsx("label",{htmlFor:"inviteType",children:"Invite Type: "}),e.jsxs("select",{name:"inviteType",id:"invite-type",onChange:t=>{W(t.target.value)},children:[e.jsx("option",{value:"students",selected:y=="students",children:"Students"}),e.jsx("option",{value:"parents",selected:y=="parents",children:"Parents"}),e.jsx("option",{value:"groups",selected:y=="groups",children:"Groups"}),e.jsx("option",{value:"custom",selected:y=="custom",children:"Custom"})]}),y=="groups"?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("label",{htmlFor:"groups",children:"Groups: "}),e.jsx("div",{className:"groups",children:a.groups.map((t,n)=>e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:D.find(s=>s.groupName==t.groupName)!=null,onChange:s=>{s.target.checked?(R([...D,t]),H([...K,...t.groupMembers])):(R(D.filter(u=>u.groupName!=t.groupName)),H(K.filter(u=>!t.groupMembers.includes(u))))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.groupName,children:t.groupName})]},t.groupName))})]}):e.jsx(e.Fragment,{}),y=="custom"?De():e.jsx(e.Fragment,{}),e.jsx("br",{}),e.jsx("br",{}),Se?e.jsx("div",{className:"loader"}):e.jsx("button",{onClick:async()=>{if(X(!0),console.log(`Name: ${F}, Description: ${G}, Start Time: ${i}, End Time: ${E}, Selected Location: ${S},Event Type: ${w}`),F==""||i==null||E==null||S==null||w==null){alert("Please fill out all fields"),console.log(`Name: ${F}, Description: ${G}, Start Time: ${i}, End Time: ${E}, Selected Location: ${S},  Event Type: ${w}`),X(!1);return}console.log("Submit");const t=S??a.locations[0];console.log(i),console.log(E);const n=[],s=Be();if(s.length==0){X(!1);return}for(const u of s){const o=w;o.color.setAlpha(255);const v=ue.fromBlank(F,G,t,u,"activity-event",Date.now(),B,D.map(ce=>ce.groupName),K,y,o,D,fe,ve,[],a.name);await pe(v);const f=v.date.from,Y=v.date.to;f.setDate(v.date.date.getDate()),f.setMonth(v.date.date.getMonth()),f.setFullYear(v.date.date.getFullYear()),Y.setDate(v.date.date.getDate()),Y.setMonth(v.date.date.getMonth()),Y.setFullYear(v.date.date.getFullYear());const J={title:v.name,start:f.toISOString(),end:Y.toISOString(),isAllDay:!1,interactive:!0,description:v.info,color:v.eventType.color.setAlpha(.8).toRBGAString(),id:v.id,location:v.location.name};n.push(J),A([...m,v])}T([...x,...n]),X(!1),c("date"),d(null),g(null),P(null),I(""),N(""),C(""),b(""),O(a==null?void 0:a.eventTypes[0]),k(a==null?void 0:a.defaultLocation),H([]),W("students")},className:"ActionBtn",children:te?"Save":"Submit"}),e.jsx("button",{onClick:()=>{if(te){c("date"),d(null),g(null),P(null),I(""),N(""),C(""),b(""),k(a.defaultLocation),O(a.eventTypes[0]),k(a==null?void 0:a.defaultLocation),se(!1);return}c("date"),N(""),I(""),W("students")},className:"ActionBtn",children:"Back"})]})}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-title",children:[e.jsx("img",{src:Ue,alt:"back arrow",onClick:()=>{if(l!="date"){if(c("date"),te){c("date"),d(null),g(null),P(null),I(""),N(""),C(""),b(""),k(a.defaultLocation),O(a.eventTypes[0]),k(a==null?void 0:a.defaultLocation),se(!1);return}c("date"),N(""),I(""),W("students");return}window.location.href="/Activity/?activityId="+B}}),e.jsx("h1",{children:"Events"})]}),L?e.jsx("div",{className:"center",children:e.jsx("div",{className:"loader"})}):e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:l!="date"?"datePicker hidden":"datePicker",children:[" ",e.jsx(Ce,{canPaste:Z!=null,canCopy:!0,copyEvent:t=>{const n=m.find(s=>s.id==t.id);for(const s of m)console.log(s.id);we(n),console.log(n),console.log(t.id)},pasteEvent:t=>{console.log("PASTE EVENT"),console.log(t);const n=new Date(t);n.setHours(0,0,0,0),d(n),g(new Date(Z.date.from)),C(Z.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const s=new Date(Z.date.to);P(s),console.log(s),b(s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),k(Z.location),O(Z.eventType),I(Z.name),N(Z.info),H(Z.targets),W(Z.generalTarget),R(Z.groupTargets),c("info")},canViewConflicts:!1,isCreating:!0,canOpenContextMenu:!0,events:x,editEvent:t=>{const n=be().find(s=>s.id==t.id);console.log(t.id),n&&(console.log(n),c("info"),I(n.name),N(n.info),d(n.date.date),g(n.date.from),C(n.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),P(n.date.to),b(n.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),k(n.location),H(n.targets),console.log("FROM EDIT"),console.log(n.targets),O(n.eventType),se(!0),W(n.generalTarget),ye(n),R(n.groupTargets))},viewEvent:t=>{const n=be().find(s=>s.id==t.id);n&&(localStorage.setItem("event",JSON.stringify(n.toMap())),localStorage.setItem("back","/Activity/Events/?activityId="+B),window.location.href="/Calendar/Event/")},viewConflicts:t=>{},deleteEvent:async t=>{console.log(t);const n=m.find(o=>o.id==t.id),s=m.filter(o=>o.id!=t.id);A(s);const u=x.filter(o=>o.id!=t.id);T(u),await Ge(n)},dateClick:t=>{console.log(t.date),d(t.date),new Date(t.date).setHours(0,0,0,0),g(new Date(t.date)),C(t.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const s=new Date(t.date);P(s.addHours(1)),console.log(s),b(t.date.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),k(a.defaultLocation),O(a.eventTypes[0]),c("info")},eventClick:t=>{d(t.event.start),new Date(t.event.start).setHours(0,0,0,0),g(new Date(t.event.start)),C(t.event.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const s=new Date(t.event.end);P(s),b(s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),k(a.defaultLocation),O(a.eventTypes[0]),c("info")}}),e.jsx("button",{className:"ActionBtn",onClick:()=>{c("multipleEvents"),O(a.eventTypes[0])},children:"Add Multiple Events"}),e.jsx("button",{className:"ActionBtn",onClick:t=>{c("recurringEvent"),O(a.eventTypes[0])},children:"Add Recurring Event"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(m.map(t=>t.toMap()))),window.open("/Activity/Events/Print/","_blank")},children:"Print"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=xe.current)==null||t.showModal()},children:"Export to CSV"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=je.current)==null||t.showModal()},children:"Import from CSV"})]}),Q=="teacher"?l=="multipleEvents"?Le():l=="date"?e.jsx(e.Fragment,{}):l=="recurringEvent"?Me():Ie():e.jsxs(e.Fragment,{children:[" ",e.jsx(Ce,{canPaste:!1,canCopy:!1,copyEvent:()=>{},pasteEvent:()=>{},viewEvent:t=>{},canViewConflicts:!1,events:x,canOpenContextMenu:!1,dateClick:()=>{},deleteEvent:()=>{},viewConflicts:()=>{},editEvent:()=>{},eventIdClick:t=>{const n=m.find(s=>s.id===t);n&&(localStorage.setItem("event",JSON.stringify(n.toMap())),localStorage.removeItem("back"),window.location.href="/Calendar/Event/")}})," ",e.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(m.map(t=>t.toMap()))),window.open("/Activity/Events/Print/","_blank")},children:"Print"})]})]}),e.jsx($e,{dialogRef:he,addDate:t=>{Ee([...re,t]),he.current.close()},close:()=>{he.current.close()},eventDate:ke}),a!=null&&e.jsx(Ze,{dialogRef:xe,events:m,close:()=>{xe.current.close()},activity:a}),a!=null&&e.jsx(Xe,{activity:a,dialogRef:je,close:()=>{je.current.close()},addEvents:async t=>{const n=[];for(const s of t){await pe(s);const u=s.date.from,o=s.date.to;u.setDate(s.date.date.getDate()),u.setMonth(s.date.date.getMonth()),u.setFullYear(s.date.date.getFullYear()),o.setDate(s.date.date.getDate()),o.setMonth(s.date.date.getMonth()),o.setFullYear(s.date.date.getFullYear());const v={title:s.name,start:u.toISOString(),end:o.toISOString(),isAllDay:!1,interactive:!0,description:s.info,color:s.eventType.color.setAlpha(.8).toRBGAString(),id:s.id,location:s.location.name};n.push(v),A([...m,s])}T([...x,...n])}}),e.jsx(Qe,{existingLocations:(a==null?void 0:a.locations)??[],dialogRef:oe,addLocation:async t=>{const n=Pe.fromMap(a.toMap());n.locations.push(t),q(n),k(t),await He(B,t),oe.current.close()},close:()=>{oe.current.close()},savedLocations:[]})]})}
