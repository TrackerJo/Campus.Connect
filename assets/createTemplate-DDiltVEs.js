import{r as u,j as t,d as y,C,E as M,e as F,F as D,A as V,f as N,D as A,c as re,i as ne,g as O,h as le}from"./index-BfAiCOmw.js";import{C as P,S as $}from"./Show_Group_Tile-iW71gY4Y.js";import{E as U}from"./Ensemble_Section_Tile-Ckb4m-2Q.js";import{T as R}from"./trash-BnpXJPEK.js";import{F as W}from"./Full_Cast_Tile-CKD5vjT0.js";import{m as oe,l as ce,n as ie,o as me}from"./db-CCKL9Mgi.js";function de({scene:e,setScene:c,isCreate:p,removeScene:x,isAssign:I,characters:v,showGroups:g,hasEnsemble:B}){const[b,k]=u.useState(!1),[d,j]=u.useState(!1),[f,E]=u.useState(0);return u.useEffect(()=>{E(Math.floor(Math.random()*1e5))},[]),t.jsxs("div",{className:"SceneTile",id:"scene-tile-"+e.sceneId,children:[t.jsxs("div",{className:"header",children:[t.jsxs("div",{className:"SceneNameDiv",children:[t.jsx("label",{htmlFor:"Scene",children:"Scene Name: "}),t.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:s=>{c(y.fromBlank(s.target.value,e.characters,e.sceneId))}})]}),t.jsx("div",{children:t.jsx("img",{src:R,alt:"",className:"TrashIcon",onClick:()=>{x()}})})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"Characters",children:"Characters: "}),t.jsx("div",{className:"scene-characters",id:"characters-"+f,children:e.characters.map((s,r)=>{if(s instanceof C)return t.jsx(P,{character:s,isCreate:p,actors:[],characters:v,isAssign:I,setCharacter:h=>{c(y.fromBlank(e.name,e.characters.map((i,w)=>w===r?h:i),e.sceneId))},removeCharacter:()=>{c(y.fromBlank(e.name,e.characters.filter((h,i)=>i!==r),e.sceneId))}},r);if(s instanceof M)return t.jsx(U,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:s,isCustom:!1,isCreate:p,isAssign:I,actors:[],setEnsembleSection:h=>{c(y.fromBlank(e.name,e.characters.map((i,w)=>w===r?h:i),e.sceneId))},removeEnsembleSection:()=>{k(!1),c(y.fromBlank(e.name,e.characters.filter((h,i)=>i!==r),e.sceneId))}},r);if(s instanceof F)return t.jsx($,{showGroup:s,isCreate:p,isAssign:I,characters:v,actors:[],hasEnsemble:B,showGroups:g,setShowGroup:h=>{c(y.fromBlank(e.name,e.characters.map((i,w)=>w===r?h:i),e.sceneId))},removeShowGroup:()=>{c(y.fromBlank(e.name,e.characters.filter((h,i)=>i!==r),e.sceneId))}},r);if(s instanceof D)return t.jsx(W,{canDelete:!0,onDelete:()=>{j(!1),c(y.fromBlank(e.name,e.characters.filter((h,i)=>i!==r),e.sceneId))}},r)})}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(d?"disabled":""),disabled:d,onClick:()=>{const s=Math.floor(Math.random()*1e5);c(y.fromBlank(e.name,[...e.characters,C.fromBlank("",null,s)],e.sceneId)),setTimeout(()=>{const r=document.getElementById("characters-"+f);r.scrollTop=r.scrollHeight,document.getElementById("scene-tile-"+e.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(d?"disabled":""),disabled:d,onClick:()=>{const s=Math.floor(Math.random()*1e5);c(y.fromBlank(e.name,[...e.characters,F.fromBlank("",[],s)],e.sceneId)),setTimeout(()=>{const r=document.getElementById("characters-"+f);r.scrollTop=r.scrollHeight,document.getElementById("scene-tile-"+e.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),t.jsx("br",{}),B&&t.jsx("button",{className:"ActionBtn "+(b||d?"disabled":""),disabled:b||d,onClick:()=>{b||(k(!0),setTimeout(()=>{const s=document.getElementById("characters-"+f);s.scrollTop=s.scrollHeight,document.getElementById("scene-tile-"+e.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),c(y.fromBlank(e.name,[...e.characters,M.fromBlank(!0,!1,!1,!1,[])],e.sceneId)))},children:"Add Ensemble"}),B&&t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(d?"disabled":""),disabled:d,onClick:()=>{d||(j(!0),setTimeout(()=>{const s=document.getElementById("characters-"+f);s.scrollTop=s.scrollHeight,document.getElementById("scene-tile-"+e.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),c(y.fromBlank(e.name,[...e.characters,new D],e.sceneId)))},children:"Add Full Cast"})]})]})}function he({act:e,setAct:c,isCreate:p,removeAct:x,isAssign:I,characters:v,showGroups:g,hasEnsemble:B}){const[b,k]=u.useState(0);return u.useEffect(()=>{k(Math.floor(Math.random()*1e5))},[]),t.jsxs("div",{className:"ActTile",id:"act-tile-"+e.actId,children:[t.jsxs("div",{className:"header",children:[t.jsxs("div",{className:"ActNameDiv",children:[t.jsx("label",{htmlFor:"Act",children:"Act Name: "}),t.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:d=>{c(V.fromBlank(d.target.value,e.scenes,e.actId))}})]}),t.jsx("div",{children:t.jsx("img",{src:R,alt:"",className:"TrashIcon",onClick:()=>{x()}})})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"Scene",children:"Scenes: "}),t.jsx("div",{id:"scenes-"+b,className:"scenes",children:e.scenes.map((d,j)=>t.jsx(de,{hasEnsemble:B,scene:d,isCreate:p,characters:v,showGroups:g,isAssign:I,setScene:f=>{c(V.fromBlank(e.name,e.scenes.map((E,s)=>s===j?f:E),e.actId))},removeScene:()=>{c(V.fromBlank(e.name,e.scenes.filter((f,E)=>E!==j),e.actId))}},j))}),e.scenes.length==0&&t.jsx("br",{}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const d=Date.now();c(V.fromBlank(e.name,[...e.scenes,y.fromBlank("Scene "+(e.scenes.length+1),[],d)],e.actId)),setTimeout(()=>{const j=document.getElementById("scenes-"+b);j.scrollTop=j.scrollHeight,document.getElementById("scene-tile-"+d).scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),document.getElementById("act-tile-"+e.actId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Scene"})]})]})}function ue({song:e,setSong:c,isCreate:p,removeSong:x,isAssign:I,characters:v,showGroups:g,hasEnsemble:B}){const[b,k]=u.useState(!1),[d,j]=u.useState(!1),[f,E]=u.useState(0);return u.useEffect(()=>{E(Math.floor(Math.random()*1e5))},[]),t.jsxs("div",{className:"SongTile",id:"song-tile-"+e.songId,children:[t.jsxs("div",{className:"header",children:[t.jsxs("div",{className:"SongNameDiv",children:[t.jsx("label",{htmlFor:"Scene",children:"Song Name: "}),t.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:s=>{c(N.fromBlank(s.target.value,e.characters,e.songId))}})]}),t.jsx("div",{children:t.jsx("img",{src:R,alt:"",className:"TrashIcon",onClick:()=>{x()}})})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"Characters",children:"Characters: "}),t.jsx("div",{className:"song-characters",id:"characters-"+f,children:e.characters.map((s,r)=>{if(s instanceof C)return t.jsx(P,{character:s,isCreate:p,actors:[],characters:v,isAssign:I,setCharacter:h=>{c(N.fromBlank(e.name,e.characters.map((i,w)=>w===r?h:i),e.songId))},removeCharacter:()=>{c(N.fromBlank(e.name,e.characters.filter((h,i)=>i!==r),e.songId))}},r);if(s instanceof M)return t.jsx(U,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:s,isAssign:I,actors:[],isCustom:!1,isCreate:p,setEnsembleSection:h=>{c(N.fromBlank(e.name,e.characters.map((i,w)=>w===r?h:i),e.songId))},removeEnsembleSection:()=>{k(!1),c(N.fromBlank(e.name,e.characters.filter((h,i)=>i!==r),e.songId))}},r);if(s instanceof F)return t.jsx($,{showGroup:s,hasEnsemble:B,actors:[],characters:v,isCreate:p,isAssign:I,showGroups:g,setShowGroup:h=>{c(N.fromBlank(e.name,e.characters.map((i,w)=>w===r?h:i),e.songId))},removeShowGroup:()=>{c(N.fromBlank(e.name,e.characters.filter((h,i)=>i!==r),e.songId))}},r);if(s instanceof D)return t.jsx(W,{canDelete:!0,onDelete:()=>{j(!1),c(N.fromBlank(e.name,e.characters.filter((h,i)=>i!==r),e.songId))}},r)})}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(d?"disabled":""),disabled:d,onClick:()=>{const s=Math.floor(Math.random()*1e5);c(N.fromBlank(e.name,[...e.characters,C.fromBlank("",null,s)],e.songId)),setTimeout(()=>{const r=document.getElementById("characters-"+f);r.scrollTop=r.scrollHeight,document.getElementById("song-tile-"+e.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(d?"disabled":""),disabled:d,onClick:()=>{const s=Math.floor(Math.random()*1e5);c(N.fromBlank(e.name,[...e.characters,F.fromBlank("",[],s)],e.songId)),setTimeout(()=>{const r=document.getElementById("characters-"+f);r.scrollTop=r.scrollHeight,document.getElementById("song-tile-"+e.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(d?"disabled":""),disabled:d,onClick:()=>{j(!0),c(N.fromBlank(e.name,[...e.characters,new D],e.songId)),setTimeout(()=>{const s=document.getElementById("characters"+f);s.scrollTop=s.scrollHeight,document.getElementById("song-tile-"+e.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Full Cast"}),t.jsx("br",{}),B&&t.jsx("button",{className:"ActionBtn "+(b||d?"disabled":""),disabled:b||d,onClick:()=>{b||(k(!0),setTimeout(()=>{const s=document.getElementById("characters-"+f);s.scrollTop=s.scrollHeight,document.getElementById("song-tile-"+e.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),c(N.fromBlank(e.name,[...e.characters,M.fromBlank(!0,!1,!1,!1,[])],e.songId)))},children:"Add Ensemble"})]})]})}function fe({dance:e,setDance:c,isCreate:p,removeDance:x,isAssign:I,characters:v,showGroups:g,hasEnsemble:B}){const[b,k]=u.useState(!1),[d,j]=u.useState(!1),[f,E]=u.useState(0);return u.useEffect(()=>{E(Math.floor(Math.random()*1e5))},[]),t.jsxs("div",{className:"DanceTile",id:"dance-tile-"+e.danceId,children:[t.jsxs("div",{className:"header",children:[t.jsxs("div",{className:"DanceNameDiv",children:[t.jsx("label",{htmlFor:"Scene",children:"Song Name: "}),t.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:s=>{c(A.fromBlank(s.target.value,e.characters,e.danceId))}})]}),t.jsx("div",{children:t.jsx("img",{src:R,alt:"",className:"TrashIcon",onClick:()=>{x()}})})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"Characters",children:"Characters: "}),t.jsx("div",{className:"characters",id:"characters-"+f,children:e.characters.map((s,r)=>{if(s instanceof C)return t.jsx(P,{character:s,actors:[],isCreate:p,characters:v,isAssign:I,setCharacter:h=>{c(A.fromBlank(e.name,e.characters.map((i,w)=>w===r?h:i),e.danceId))},removeCharacter:()=>{c(A.fromBlank(e.name,e.characters.filter((h,i)=>i!==r),e.danceId))}},r);if(s instanceof M)return t.jsx(U,{isGroupChatCreate:!1,onAddEnsemble:()=>{},isAssign:!1,ensembleSection:s,isCustom:!1,isCreate:p,actors:[],setEnsembleSection:h=>{c(A.fromBlank(e.name,e.characters.map((i,w)=>w===r?h:i),e.danceId))},removeEnsembleSection:()=>{k(!1),c(A.fromBlank(e.name,e.characters.filter((h,i)=>i!==r),e.danceId))}},r);if(s instanceof F)return t.jsx($,{showGroup:s,hasEnsemble:B,characters:v,actors:[],isCreate:p,isAssign:I,showGroups:g,setShowGroup:h=>{c(A.fromBlank(e.name,e.characters.map((i,w)=>w===r?h:i),e.danceId))},removeShowGroup:()=>{c(A.fromBlank(e.name,e.characters.filter((h,i)=>i!==r),e.danceId))}},r);if(s instanceof D)return t.jsx(W,{canDelete:!0,onDelete:()=>{c(A.fromBlank(e.name,e.characters.filter((h,i)=>i!==r),e.danceId)),j(!1)}},r)})}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(d?"disabled":""),disabled:d,onClick:()=>{const s=Math.floor(Math.random()*1e5);c(A.fromBlank(e.name,[...e.characters,C.fromBlank("",null,s)],e.danceId)),setTimeout(()=>{const r=document.getElementById("characters-"+f);r.scrollTop=r.scrollHeight,document.getElementById("dance-tile-"+e.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(d?"disabled":""),disabled:d,onClick:()=>{const s=Math.floor(Math.random()*1e5);c(A.fromBlank(e.name,[...e.characters,F.fromBlank("",[],s)],e.danceId)),setTimeout(()=>{const r=document.getElementById("characters-"+f);r.scrollTop=r.scrollHeight,document.getElementById("dance-tile-"+e.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(d?"disabled":""),disabled:d,onClick:()=>{j(!0),c(A.fromBlank(e.name,[...e.characters,new D],e.danceId)),setTimeout(()=>{const s=document.getElementById("characters-"+f);s.scrollTop=s.scrollHeight,document.getElementById("dance-tile-"+e.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Full Cast"}),t.jsx("br",{}),B&&t.jsx("button",{className:"ActionBtn "+(b||d?"disabled":""),disabled:b||d,onClick:()=>{b||(k(!0),setTimeout(()=>{const s=document.getElementById("characters-"+f);s.scrollTop=s.scrollHeight,document.getElementById("dance-tile-"+e.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),c(A.fromBlank(e.name,[...e.characters,M.fromBlank(!0,!1,!1,!1,[])],e.danceId)))},children:"Add Ensemble"})]})]})}re(document.getElementById("root")).render(t.jsx(u.StrictMode,{children:t.jsx(Ie,{})}));function Ie(){const[e,c]=u.useState(""),[p,x]=u.useState([]),[I,v]=u.useState([]),[g,B]=u.useState([]),[b,k]=u.useState([]),[d,j]=u.useState([]),[f,E]=u.useState(""),[s,r]=u.useState(!1),[h,i]=u.useState(!1),[w,K]=u.useState(!1),[L,Q]=u.useState(!1),[z,X]=u.useState(""),[q,Y]=u.useState(""),[J,Z]=u.useState(null),[H,_]=u.useState(null),[ee,te]=u.useState(!1);function se(){let a=!0;for(let n=0;n<I.length;n++)I[n].actor==null&&(console.log("Actor is null"),a=!1);for(let n=0;n<g.length;n++){const m=g[n];for(let l=0;l<m.characters.length;l++){const o=m.characters[l];o instanceof C&&o.actor==null&&(a=!1)}}return a}function ae(){let a=!0;return g.forEach(n=>{n.characters.forEach(m=>{m instanceof C&&m.name==""&&(a=!1)})}),p.forEach(n=>{n.scenes.forEach(m=>{m.characters.forEach(l=>{l instanceof C?l.name==""&&(a=!1):l instanceof F&&l.name==""&&(a=!1)})})}),b.forEach(n=>{n.characters.forEach(m=>{m instanceof C?m.name==""&&(a=!1):m instanceof F&&m.name==""&&(a=!1)})}),d.forEach(n=>{n.characters.forEach(m=>{m instanceof C?m.name==""&&(a=!1):m instanceof F&&m.name==""&&(a=!1)})}),a}return u.useEffect(()=>{ne(()=>{});const a=new URLSearchParams(window.location.search),n=a.get("activityId");if(n&&c(n),a.get("isEditing")){K(!0);const l=O.fromMap(JSON.parse(localStorage.getItem("show")));_(l);for(const o of l.layout){o.hasCreatedSchedule=!0;for(const S of o.scenes)S.hasCreatedSchedule=!0}for(const o of l.songs)o.hasCreatedSchedule=!0;for(const o of l.dances)o.hasCreatedSchedule=!0;for(const o of l.showGroups)o.hasCreatedSchedule=!0;for(const o of l.characters)o.hasCreatedSchedule=!0;Y(l.templateId),E(l.name),r(l.hasEnsemble),v(l.characters),console.log(l.characters),B(l.showGroups),x(l.layout),k(l.songs),j(l.dances),X(l.id),Z(l.ensemble),Q(l.isCreatingSchedule),l.isCreatingSchedule&&!ee&&te(!0)}},[]),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"title",children:t.jsx("h1",{children:"Create Show Template"})}),t.jsxs("div",{className:"center",children:[t.jsxs("div",{className:"form-question",children:[t.jsx("label",{htmlFor:"name",children:"Show Name: "}),L?t.jsx("label",{className:"showNameLabel",children:f}):t.jsx("input",{type:"text",id:"name",value:f,onChange:a=>E(a.target.value)})]}),!L&&t.jsxs("div",{className:"form-question",children:[t.jsx("label",{htmlFor:"ensemble",children:"Has Ensemble: "}),t.jsxs("label",{className:"custom-checkbox",children:[t.jsx("input",{type:"checkbox",id:"ensemble",checked:s,onChange:a=>r(a.target.checked)}),t.jsx("span",{className:"checkmark"})]})]}),t.jsx("h2",{children:"Create Characters"}),t.jsx("div",{className:"characters",id:"create-characters",children:I.map((a,n)=>t.jsx(P,{actors:[],character:a,characters:[],hasCreatedSchedule:a.hasCreatedSchedule,isAssign:!1,setCharacter:m=>{v(l=>{const o=[...l];return o[n]=m,o})},removeCharacter:()=>{const m=a.characterId;B(l=>{const o=[...l];for(let S=0;S<o.length;S++){const T=o[S];T.characters=T.characters.filter(G=>G instanceof C?G.characterId!==m:!0)}return o}),x(l=>{const o=[...l];for(let S=0;S<o.length;S++){const T=o[S];T.scenes=T.scenes.filter(G=>G instanceof C?G.characterId!==m:!0)}return o}),k(l=>{const o=[...l];for(let S=0;S<o.length;S++){const T=o[S];T.characters=T.characters.filter(G=>G instanceof C?G.characterId!==m:!0)}return o}),j(l=>{const o=[...l];for(let S=0;S<o.length;S++){const T=o[S];T.characters=T.characters.filter(G=>G instanceof C?G.characterId!==m:!0)}return o}),v(I.filter((l,o)=>o!==n))},isCreate:!0},n))}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Date.now();v([...I,C.fromBlank("",null,a)]),setTimeout(()=>{const n=document.getElementById("create-characters");n.scrollTop=n.scrollHeight,document.getElementById("character-tile-"+a).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),t.jsx("h2",{children:"Create Show Groups"}),t.jsx("div",{className:"showGroups",id:"create-showGroups",children:g.map((a,n)=>t.jsx($,{showGroup:a,showGroups:[],actors:[],hasCreatedSchedule:a.hasCreatedSchedule,hasEnsemble:s,characters:I,isAssign:!1,setShowGroup:m=>{B(l=>{const o=[...l];return o[n]=m,o})},removeShowGroup:()=>{B(g.filter((m,l)=>l!==n))},isCreate:!0},n))}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Date.now();B([...g,F.fromBlank("",[],a)]),setTimeout(()=>{const n=document.getElementById("create-showGroups");n.scrollTop=n.scrollHeight,document.getElementById("show-group-tile-"+a).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),t.jsx("h2",{children:"Create Layout"}),t.jsx("div",{className:"layout",id:"create-layout",children:p.map((a,n)=>t.jsx(he,{hasEnsemble:s,act:a,characters:I,showGroups:g,isAssign:!1,setAct:m=>{x(l=>{const o=[...l];return o[n]=m,o})},isCreate:!1,removeAct:()=>{x(p.filter((m,l)=>l!==n))}},n))}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Date.now();x([...p,V.fromBlank("Act "+(p.length+1),[],a)]),setTimeout(()=>{const n=document.getElementById("create-layout");n.scrollTop=n.scrollHeight,document.getElementById("act-tile-"+a).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Act"}),t.jsx("h2",{children:"Create Songs"}),t.jsx("div",{className:"songs",id:"create-songs",children:b.map((a,n)=>t.jsx(ue,{song:a,hasEnsemble:s,characters:I,showGroups:g,isAssign:!1,setSong:m=>{k(l=>{const o=[...l];return o[n]=m,o})},removeSong:()=>{k(b.filter((m,l)=>l!==n))},isCreate:!1},n))}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Date.now();k([...b,N.fromBlank("Song "+(b.length+1),[],a)]),setTimeout(()=>{const n=document.getElementById("create-songs");n.scrollTop=n.scrollHeight,document.getElementById("song-tile-"+a).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Song"}),t.jsx("h2",{children:"Create Dances"}),t.jsx("div",{className:"dances",id:"create-dances",children:d.map((a,n)=>t.jsx(fe,{dance:a,hasEnsemble:s,characters:I,showGroups:g,isAssign:!1,setDance:m=>{j(l=>{const o=[...l];return o[n]=m,o})},removeDance:()=>{j(d.filter((m,l)=>l!==n))},isCreate:!1},n))}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Date.now();j([...d,A.fromBlank("Dance "+(d.length+1),[],a)]),setTimeout(()=>{const n=document.getElementById("create-dances");n.scrollTop=n.scrollHeight,document.getElementById("dance-tile-"+a).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Dance"}),h?t.jsx("div",{className:"loader"}):t.jsx("button",{className:"ActionBtn",onClick:async()=>{if(i(!0),!ae()){alert("Please select all characters and show groups before creating the show template"),i(!1);return}const a=O.fromBlank(f,z,e,q,p,I,s?le.fromBlank((J==null?void 0:J.actors)??[],Date.now()):null,g,b,d,!1,s,null,[],"open",L,Date.now());a.templateId=q,console.log(q),console.log(a.toMap());let n=z;if(w)O.fromMap(a.toMap()),a.formStatus=H.formStatus,a.isCreatingSchedule=H.isCreatingSchedule,a.conflictForm=H.conflictForm,a.canCreateSchedule=se(),a.resources=H.resources,a.templateId=H.templateId,a.canCreateSchedule||alert("Since there are characters that haven't been assigned to actors, you will not be able to edit/create the schedule until you assign actors to all characters"),await ie(a),L&&await me(a),localStorage.removeItem("show"),localStorage.setItem("show",JSON.stringify(a==null?void 0:a.toMap()));else{const m=await oe(a);a.templateId=m,n=await ce(a)}window.location.href=`/Activity/Shows/Show/?activityId=${e}&showId=${n}`,i(!1)},children:w?"Save Show Template":"Create Show Template"}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const n=new URLSearchParams(window.location.search).get("showId");if(w){window.location.href=`/Activity/Shows/Show/?activityId=${e}&showId=${n}`;return}window.location.href=`/Activity/Shows/Add/?activityId=${e}`},children:"Back"})]})]})}
