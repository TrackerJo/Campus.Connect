import{r as a,j as e,v as D,w as S,L as O,G as P,x as M,c as Q,y as N,i as W}from"./index-Dxkwjn9p.js";import{H as Y,I as F,J as H,K as J,L as X,M as $,N as z,O as Z,P as _,h as ee}from"./db-Lpff6m6P.js";function te({addRehearsalLocation:d,close:x,dialogRef:s}){const[l,n]=a.useState(""),[h,r]=a.useState("#000000");return e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Add Rehearsal Location"}),e.jsxs("div",{className:"location-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:l,onChange:u=>{n(u.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:h,onChange:u=>{r(u.target.value)}}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{d(D.fromBlank(l,S(h)))},children:"Add Rehearsal Location"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{x()},children:"Close"})]})]})}const k="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAgCAYAAADqgqNBAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAH6ADAAQAAAABAAAAIAAAAABT9vqhAAABMUlEQVRIDe2WO07DQBBAbSsFJE1OQEmgTUGJRDgAxyC5SAo6OAiKUkcK5Ax0IKUDpBSpSOnNG/CKkWVHsr3rRIpXevb6s/N2xlM4CI5hGGNO4BE+YAxRLXkjOoUZ6PHkXY4tgrRYNhF7Tz0Mw5gMn8GkMl2mrt1dklkbrmxE5iPJFmSsoW+fOT0TWMRz2MDABmd+DyvwLsbxO3443qgNdO3c6RmJzfhP+3+UDVw7lelgO8SyhW+41O87mx+q+GtfGYv4wll5dSACd+AFskYj1sWqNqe+Tal1k3lvrldtU/O9invVuihnddJceRl/8rwR59Su4O2jLLX8Vy8ga/hrLvkyGIdZVu75FSfytwx5LeLbHPF5wX4t/jriiZLLj94DnBWPVGIFoneYwh20SoQovWQLokOD66GvfLEAAAAASUVORK5CYII=";async function G(d){const x=`https://maps.googleapis.com/maps/api/geocode/json?address=${d}&key=AIzaSyA2saT3TcMaenLp4Im3VhI7zT79mXlN9PI`;try{const s=await fetch(x,{method:"POST"});if(s.ok){const l=await s.json(),n={lat:l.results[0].geometry.location.lat,lon:l.results[0].geometry.location.lng};return console.log(n),n}else return console.error(`Request failed with status: ${s.status}`),{lat:0,lon:0}}catch(s){return console.error(`Request failed: ${s}`),{lat:0,lon:0}}}function se({addLocation:d,close:x,dialogRef:s,savedLocations:l}){const[n,h]=a.useState(""),[r,u]=a.useState(""),[m,j]=a.useState(void 0),[g,f]=a.useState(!1);return e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Add Location"}),e.jsxs("div",{className:"location-info",children:[l.length>0?e.jsxs(e.Fragment,{children:[" ",e.jsx("h3",{children:"Select from saved locations"}),e.jsxs("select",{name:"",id:"saved-locations",onChange:o=>{j(l.find(v=>v.name==o.target.value))},children:[e.jsx("option",{value:"",selected:!0,children:"Select a location"}),l.map((o,v)=>e.jsxs("option",{value:o.name,children:[o.name," (",o.address,")"]},v))]}),e.jsx("h3",{children:"Or add a new location"})]}):e.jsx("h3",{children:"Add a new location"}),e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:n,onChange:o=>{h(o.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Address: "}),e.jsx("input",{type:"text",value:r,onChange:o=>{u(o.target.value)}}),e.jsx("br",{}),g?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(f(!0),(n==""||r=="")&&m==null){alert("Please fill out all fields"),f(!1);return}if(m){d(m);return}const o=await G(r);console.log(o),d(O.fromBlank(n,r,new P(o.lat,o.lon),!1)),f(!1)},children:"Add Location"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{x()},children:"Close"})]})]})}function ae({addEventType:d,close:x,dialogRef:s,eventTypes:l}){const[n,h]=a.useState(""),[r,u]=a.useState("#000000");return e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Add Event Type"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:n,onChange:m=>{h(m.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:r,onChange:m=>{u(m.target.value)}}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{if(n==""){alert("Please fill out all fields");return}if(l.find(m=>m.name==n)){alert("Event type with that name already exists");return}d(M.fromBlank(n,S(r)))},children:"Add Event Type"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{x()},children:"Close"})]})]})}function ne({editLocation:d,close:x,dialogRef:s,location:l}){const[n,h]=a.useState(""),[r,u]=a.useState(""),[m,j]=a.useState(!1);return a.useEffect(()=>{l&&(h(l.name),u(l.address))},[l]),e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Edit Location"}),e.jsxs("div",{className:"location-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:n,onChange:g=>{h(g.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Address: "}),e.jsx("input",{type:"text",value:r,onChange:g=>{u(g.target.value)}}),e.jsx("br",{}),m?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(j(!0),n==""||r==""){alert("Please fill out all fields"),j(!1);return}let g=l.location;if(r!=l.address){const f=await G(r);g=new P(f.lat,f.lon)}await d(O.fromBlank(n,r,g,l.isSchool)),j(!1)},children:"Edit Location"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{x()},children:"Close"})]})]})}function oe({editEventType:d,close:x,dialogRef:s,eventTypes:l,eventType:n}){const[h,r]=a.useState(""),[u,m]=a.useState("#000000"),[j,g]=a.useState(!1);function f(o,v,y,E){return`#${(1<<24|o<<16|v<<8|y).toString(16).slice(1).toUpperCase()}`}return a.useEffect(()=>{n&&(r(n.name),m(f(n.color.red,n.color.green,n.color.blue,n.color.alpha)))},[n]),e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Edit Event Type"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:h,onChange:o=>{r(o.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:u,onChange:o=>{console.log(o.target.value),m(o.target.value)}}),e.jsx("br",{}),j?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(h==""){alert("Please fill out all fields");return}if(l.find(o=>o.name==h&&o.name!=n.name)){alert("An event type with that name already exists");return}g(!0),await d(M.fromBlank(h,S(u))),g(!1)},children:"Edit Event Type"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{x()},children:"Close"})]})]})}function le({editRehearsalLocation:d,close:x,dialogRef:s,rehearsalLocations:l,rehearsalLocation:n}){const[h,r]=a.useState(""),[u,m]=a.useState("#000000"),[j,g]=a.useState(!1);function f(o,v,y,E){return`#${(1<<24|o<<16|v<<8|y).toString(16).slice(1).toUpperCase()}`}return a.useEffect(()=>{n&&(r(n.name),m(f(n.color.red,n.color.green,n.color.blue,n.color.alpha)))},[n]),e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Edit Rehearsal Location"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Location: "}),e.jsx("input",{type:"text",value:h,onChange:o=>{r(o.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:u,onChange:o=>{console.log(o.target.value),m(o.target.value)}}),e.jsx("br",{}),j?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(h==""){alert("Please fill out all fields");return}if(l.find(o=>o.name==h&&o.name!=n.name)){alert("A rehearsal location with that name already exists");return}g(!0),await d(D.fromBlank(h,S(u))),g(!1)},children:"Edit Rehearsal Location"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{x()},children:"Close"})]})]})}function ie({editActivityName:d,close:x,dialogRef:s,activityName:l}){const[n,h]=a.useState(""),[r,u]=a.useState(!1);return a.useEffect(()=>{l&&h(l)},[l]),e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Edit Activity Name"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:n,onChange:m=>{h(m.target.value)}}),e.jsx("br",{}),r?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(n==""){alert("Please fill out all fields");return}u(!0),await d(n),u(!1)},children:"Edit Activity Name"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{x()},children:"Close"})]})]})}Q(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(ce,{})}));function ce(){const[d,x]=a.useState(""),[s,l]=a.useState(null),[n,h]=a.useState("student"),r=a.useRef(null),u=a.useRef(null),m=a.useRef(null),[j,g]=a.useState([]),[f,o]=a.useState([]),[v,y]=a.useState([]),[E,I]=a.useState(!0),[R,U]=a.useState(void 0),[T,V]=a.useState(void 0),[B,q]=a.useState(void 0),L=a.useRef(null),C=a.useRef(null),b=a.useRef(null),w=a.useRef(null);return a.useEffect(()=>{async function t(){I(!0),W(()=>{});const i=new URLSearchParams(window.location.search).get("activityId");if(i){x(i);const K=await _();y(K)}const A=await ee(i);A&&(l(A),A instanceof N&&g(A.rehearsalLocations),o(A.eventTypes));const p=localStorage.getItem("accountType");p&&h(p),I(!1)}t()},[]),e.jsxs(e.Fragment,{children:[E?e.jsx("div",{className:"center",children:e.jsx("div",{className:"loader"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"title",children:[e.jsxs("h1",{children:["Activity: ",s==null?void 0:s.name]}),e.jsxs("h3",{children:["Join Code: ",s==null?void 0:s.joinCode]}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=w.current)==null||t.showModal()},children:"Edit Activity Name"}),e.jsx("h2",{children:"Saved Locations"}),e.jsx("div",{className:"saved-locations",children:s==null?void 0:s.locations.map((t,c)=>(console.log(t),e.jsxs("div",{className:"saved-location",children:[e.jsxs("label",{htmlFor:"",className:"saved-location-name",children:[t.name," (",t.address,")"]}),e.jsx("img",{src:k,alt:"edit",className:"saved-location-edit",onClick:()=>{var i;U(t),(i=L.current)==null||i.showModal()}})]},c)))}),e.jsx("button",{className:"ActionBtn",onClick:t=>{var c;(c=u.current)==null||c.showModal()},children:"Add Location"}),s instanceof N&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Rehearsal Locations"}),e.jsx("div",{className:"rehearsal-locations",children:j.map((t,c)=>(console.log(t.color),e.jsxs("div",{className:"rehearsal-location",children:[e.jsx("label",{htmlFor:"",className:"rehearsal-location-name",children:t.name}),e.jsxs("div",{className:"rehearsal-location-right",children:[e.jsx("div",{className:"rehearsal-location-color",style:{backgroundColor:t.color.toRBGAString()}}),e.jsx("img",{src:k,alt:"",onClick:i=>{var A;q(t),(A=b.current)==null||A.showModal()}})]})]})))}),e.jsx("button",{className:"ActionBtn",onClick:t=>{var c;(c=r.current)==null||c.showModal()},children:"Add Rehearsal Location"})," "]}),e.jsx("h2",{children:"Event Types"}),e.jsx("div",{className:"event-types",children:f.map((t,c)=>e.jsxs("div",{className:"event-type",children:[e.jsx("label",{htmlFor:"",className:"event-type-name",children:t.name}),e.jsxs("div",{className:"event-type-right",children:[e.jsx("div",{className:"event-type-color",style:{backgroundColor:t.color.toRBGAString()}}),e.jsx("img",{src:k,alt:"",onClick:()=>{var i;V(t),(i=C.current)==null||i.showModal()}})]})]}))}),e.jsx("button",{className:"ActionBtn",onClick:t=>{var c;(c=m.current)==null||c.showModal()},children:"Add Event Type"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/?activityId="+d},children:"Back"})]}),e.jsx(te,{dialogRef:r,addRehearsalLocation:async t=>{var c;if(s instanceof N){const i=[...s.rehearsalLocations];i.push(t),s.rehearsalLocations=i,console.log(i),g(i),await Y(d,i),(c=r.current)==null||c.close()}},close:()=>{var t;(t=r.current)==null||t.close()}}),e.jsx(se,{dialogRef:u,close:()=>{var t;(t=u.current)==null||t.close()},addLocation:async function(t){var c,i;if(v.find(A=>A.name==t.name)){await F(d,t),(c=u.current)==null||c.close(),s.locations.push(t),l(s);return}await F(d,t),await H(t),y(A=>[...A,t]),s.locations.push(t),l(s),(i=u.current)==null||i.close()},savedLocations:v.filter(t=>!s.locations.find(c=>t.name==c.name))}),e.jsx(ae,{dialogRef:m,close:()=>{var t;(t=m.current)==null||t.close()},addEventType:async t=>{var i;const c=[...s.eventTypes];c.push(t),o(c),await J(d,t),(i=m.current)==null||i.close()},eventTypes:s.eventTypes})]}),e.jsx(ne,{dialogRef:L,close:()=>{var t;(t=L.current)==null||t.close()},location:R,editLocation:async t=>{var A;const i=[...s.locations].findIndex(p=>p.name==R.name);s.locations.splice(i,1),s.locations.push(t),console.log(s),await X(d,t,R),l(s),window.location.reload(),(A=L.current)==null||A.close()}}),e.jsx(oe,{eventTypes:(s==null?void 0:s.eventTypes)??[],dialogRef:C,close:()=>{var t;(t=C.current)==null||t.close()},eventType:T,editEventType:async t=>{var A;const i=[...s.eventTypes].findIndex(p=>p.name==T.name);s.eventTypes.splice(i,1),s.eventTypes.push(t),console.log(s),await $(d,t,T,s instanceof N),l(s),window.location.reload(),(A=C.current)==null||A.close()}}),s instanceof N&&e.jsx(le,{rehearsalLocations:s.rehearsalLocations,dialogRef:b,close:()=>{var t;(t=b.current)==null||t.close()},rehearsalLocation:B,editRehearsalLocation:async t=>{var A;const i=[...s.rehearsalLocations].findIndex(p=>p.name==B.name);s.rehearsalLocations.splice(i,1),s.rehearsalLocations.push(t),console.log(s),await z(d,t,B),l(s),window.location.reload(),(A=b.current)==null||A.close()}}),e.jsx(ie,{dialogRef:w,close:()=>{var t;(t=w.current)==null||t.close()},activityName:s==null?void 0:s.name,editActivityName:async t=>{var c;await Z(d,t),l(i=>i?(i.name=t,i):null),window.location.reload(),(c=w.current)==null||c.close()}})]})}
