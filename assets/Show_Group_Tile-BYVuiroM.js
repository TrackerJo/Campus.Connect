import{r as j,j as a}from"./index-C75OlIaX.js";import{C as x,f as B,b as o,E}from"./constants-BV3XiQhG.js";import{T as N}from"./trash-BnpXJPEK.js";import{A as p,E as T}from"./Ensemble_Section_Tile-CixO0KOI.js";function S({character:e,setCharacter:r,isCreate:m,removeCharacter:u,isAssign:s,characters:f,actors:v}){const i=j.useRef(null);return a.jsxs("div",{className:"CharacterTile",id:"character-tile-"+e.characterId,children:[a.jsxs("div",{className:"header",children:[a.jsxs("div",{className:"CharacterNameDiv",children:[a.jsxs("label",{htmlFor:"Character",children:["Character:  ",s?e.name:""]}),m?a.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:t=>{r(x.fromBlank(t.target.value,e.actor,e.characterId,e.lastUpdated))}}):s?a.jsxs(a.Fragment,{children:[a.jsx("br",{}),a.jsx("div",{className:"CharacterActorDiv",children:e.actor!=null?a.jsxs(a.Fragment,{children:[a.jsxs("label",{htmlFor:"Actor",children:["Actor: ",e.actor.name]}),a.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=i.current)==null||t.showModal()},children:"Edit Actor"})]}):a.jsx(a.Fragment,{children:a.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=i.current)==null||t.showModal()},children:"Assign Actor"})})})]}):a.jsxs("select",{name:"characters",id:"characters",value:e.name,onChange:t=>{t.target.value!="null"&&r(f.find(c=>c.name==t.target.value))},children:[a.jsx("option",{value:"null",children:"Select a character"}),f.map((t,c)=>a.jsx("option",{value:t.name,children:t.name},c))]})]}),a.jsx("div",{children:!s&&a.jsx("img",{src:N,alt:"",className:"TrashIcon",onClick:()=>{u()}})})]}),a.jsx(p,{actor:e.actor??new B,actors:v,keepPastResult:!1,addedActors:[],setActor:t=>{var c;(c=i.current)==null||c.close(),r(x.fromBlank(e.name,t,e.characterId,e.lastUpdated))},dialogRef:i,close:()=>{var t;(t=i.current)==null||t.close()}})]})}function y({showGroup:e,setShowGroup:r,isCreate:m,removeShowGroup:u,isAssign:s,showGroups:f,hasEnsemble:v,characters:i,actors:t}){const[c,g]=j.useState(!1),[C,I]=j.useState(0);return j.useEffect(()=>{I(Math.floor(Math.random()*1e5))},[]),a.jsxs("div",{className:"ShowGroupTile"+(m||s?"Create":""),id:"show-group-tile-"+e.showGroupId,children:[a.jsxs("div",{className:"header",children:[a.jsxs("div",{className:"ShowGroupNameDiv",children:[a.jsx("label",{htmlFor:"ShowGroup",children:"Show Group: "}),m?a.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:l=>{r(o.fromBlank(l.target.value,e.characters,e.showGroupId,e.lastUpdated))}}):s?a.jsx(a.Fragment,{children:a.jsx("label",{htmlFor:"",children:e.name})}):a.jsxs("select",{name:"show groups",id:"showGroups",value:e.name,onChange:l=>{l.target.value!="null"&&r(f.find(n=>n.name==l.target.value))},children:[a.jsx("option",{value:"null",children:"Select a show group"}),f.map((l,n)=>a.jsx("option",{value:l.name,children:l.name},n))]})]}),a.jsx("div",{children:!s&&a.jsx("img",{src:N,alt:"",className:"TrashIcon",onClick:()=>{u()}})})]}),(m||s)&&a.jsx("br",{}),(m||s)&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"Characters",children:"Characters: "}),a.jsx("div",{className:"characters",id:"characters-"+C,children:e.characters.map((l,n)=>{if(l instanceof x&&!s)return a.jsx(S,{character:l,actors:[],isCreate:!1,characters:i,isAssign:s,setCharacter:h=>{r(o.fromBlank(e.name,e.characters.map((d,b)=>b===n?h:d),e.showGroupId,e.lastUpdated))},removeCharacter:()=>{r(o.fromBlank(e.name,e.characters.filter((h,d)=>d!==n),e.showGroupId,e.lastUpdated))}},n);if(l instanceof E)return a.jsx(T,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:l,isAssign:s,actors:t,isCustom:!1,isCreate:!0,setEnsembleSection:h=>{console.log("NEW ENSEMBLE SECTION"),console.log(h.toMap());const d=o.fromBlank(e.name,e.characters.map((b,k)=>k===n?h:b),e.showGroupId,e.lastUpdated);console.log("NEW SHOW GROUP"),console.log(d.toMap()),r(d)},removeEnsembleSection:()=>{g(!1),r(o.fromBlank(e.name,e.characters.filter((h,d)=>d!==n),e.showGroupId,e.lastUpdated))}},n)})}),m&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"ActionBtn",onClick:()=>{const l=Math.floor(Math.random()*1e5);r(o.fromBlank(e.name,[...e.characters,x.fromBlank("Character 1",null,l,0)],e.showGroupId,e.lastUpdated)),setTimeout(()=>{const n=document.getElementById("characters-"+C);n.scrollTop=n.scrollHeight},100)},children:"Add Character"}),a.jsx("br",{}),v&&a.jsx("button",{className:"ActionBtn "+(c?"disabled":""),disabled:c,onClick:()=>{c||(g(!0),setTimeout(()=>{const l=document.getElementById("characters-"+C);l.scrollTop=l.scrollHeight},100),r(o.fromBlank(e.name,[...e.characters,E.fromBlank(!0,!1,!1,!1,[],0)],e.showGroupId,e.lastUpdated)))},children:"Add Ensemble"})]})]})]})}export{S as C,y as S};
