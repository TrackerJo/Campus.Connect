import{j as e,p as M,n as L,r as l,q as v,c as oe,g as Q,s as re,t as ie,k as ce,i as de,u as V}from"./index-BfAiCOmw.js";import{T as ue}from"./trash-BnpXJPEK.js";import{A as me,B as he,C as xe,D as ge,h as je,v as fe,p as be}from"./db-CCKL9Mgi.js";import{A as pe}from"./Add_User_Dialog-D65FFduV.js";function Ce({conflict:s,canDelete:r,onDelete:j,setConflict:m}){return e.jsx("div",{className:"ConflictDateTile",id:"conflict-date-tile-"+s.date.date.toISOString(),children:e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"ConflictDateNameDiv",children:[e.jsx("label",{htmlFor:"Character",children:"Date: "}),e.jsx("input",{type:"date",value:s.date.date.toISOString().slice(0,10),onChange:a=>{const u=new Date(a.target.value);u.setHours(0,0,0,0),m(M.fromBlank(L.fromBlank(u,s.date.from,s.date.to),s.moreInfo))}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Actor",children:"From: "}),e.jsx("input",{type:"time",value:s.date.from.toTimeString().slice(0,5),onChange:a=>{console.log(a.target.value);const u=new Date,h=a.target.value.split(":");u.setHours(parseInt(h[0]),parseInt(h[1]),0,0),m(M.fromBlank(L.fromBlank(s.date.date,u,s.date.to),s.moreInfo))}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Actor",children:"To: "}),e.jsx("input",{type:"time",value:s.date.to.toTimeString().slice(0,5),onChange:a=>{console.log(a.target.value);const u=new Date,h=a.target.value.split(":");u.setHours(parseInt(h[0]),parseInt(h[1]),0,0),console.log({date:u}),m(M.fromBlank(L.fromBlank(s.date.date,s.date.from,u),s.moreInfo))}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Character",children:"More Info: "}),e.jsx("input",{type:"text",value:s.moreInfo,onChange:a=>{m(M.fromBlank(L.fromBlank(s.date.date,s.date.from,s.date.to),a.target.value))}})]}),r&&e.jsx("div",{children:e.jsx("img",{src:ue,alt:"",className:"TrashIcon",onClick:()=>{j()}})})]})})}function De({minTime:s,maxTime:r,setConflict:j,dialogRef:m,close:a,date:u}){const[h,C]=l.useState(v.fromBlank(u,s,r,!0,""));return l.useEffect(()=>{C(v.fromBlank(u,s,r,!0,""))},[s,r,u]),e.jsxs("dialog",{ref:m,className:"AddConflictDialog",children:[e.jsx("h2",{children:"Add Conflict"}),e.jsxs("div",{className:"conflict-times",children:[e.jsx("label",{htmlFor:"",children:"From: "}),e.jsx("input",{type:"time",value:h.from.toTimeString().slice(0,5),onChange:w=>{const D=new Date,F=w.target.value.split(":");D.setHours(parseInt(F[0]),parseInt(F[1]),0,0),C(v.fromBlank(u,D,h.to,!0,h.note))}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"To: "}),e.jsx("input",{type:"time",value:h.to.toTimeString().slice(0,5),onChange:w=>{const D=new Date,F=w.target.value.split(":");D.setHours(parseInt(F[0]),parseInt(F[1]),0,0),C(v.fromBlank(u,h.from,D,!0,h.note))}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Note (Optional): "}),e.jsx("input",{type:"text",value:h.note,onChange:w=>{C(v.fromBlank(u,h.from,h.to,!0,w.target.value))}}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{C(v.fromBlank(u,s,r,!0,"")),j(h)},children:"Add Conflict"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{a()},children:"Close"})]})]})}function ve({conflict:s,conflictResponseDate:r,setConflict:j}){const m=l.useRef(null);return e.jsxs("div",{className:"ConflictDateFormTile",id:"conflict-date-form-tile-"+s.date.date.toISOString(),children:[e.jsx("div",{className:"header",children:e.jsxs("div",{className:"ConflictDateFormNameDiv",children:[e.jsxs("label",{htmlFor:"Character",children:["Date: ",s.date.date.toDateString()]}),e.jsx("br",{}),e.jsxs("label",{htmlFor:"Actor",children:["From: ",s.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," "]}),e.jsx("br",{}),e.jsxs("label",{htmlFor:"Actor",children:["To: ",s.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsx("br",{}),s.moreInfo!=""&&e.jsxs("label",{htmlFor:"Character",children:["More Info: ",s.moreInfo]})]})}),e.jsxs("div",{className:"can-attend-div",children:[e.jsx("label",{htmlFor:"can-attend-cbox",children:"Can attend rehersal: "}),e.jsxs("div",{className:"custom-checkbox",onClick:()=>{j(v.fromBlank(s.date.date,null,null,!(r!=null&&r.canAttend),""))},children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:r==null?void 0:r.canAttend,onChange:a=>j(v.fromBlank(s.date.date,null,null,a.target.checked,""))}),e.jsx("span",{className:"checkmark"})]})]}),(r==null?void 0:r.from)&&e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Conflict:"}),e.jsx("br",{}),e.jsxs("label",{htmlFor:"",children:["From: ",r.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsx("br",{}),e.jsxs("label",{htmlFor:"",children:["To: ",r.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),r.note!=""&&e.jsx("br",{}),r.note!=""&&e.jsxs("label",{htmlFor:"",children:["Note: ",r.note]})]})}),(r==null?void 0:r.canAttend)&&e.jsx("button",{className:"ActionBtn",onClick:()=>{var a;if(r!=null&&r.from){j(v.fromBlank(s.date.date,null,null,!0,""));return}(a=m.current)==null||a.showModal()},children:r!=null&&r.from?"Remove Conflict":"Add Conflict"}),e.jsx(De,{minTime:s.date.from,maxTime:s.date.to,setConflict:a=>{var u;j(v.fromBlank(s.date.date,a.from,a.to,!0,a.note)),(u=m.current)==null||u.close()},date:s.date.date,dialogRef:m,close:()=>{var a;(a=m.current)==null||a.close()}})]})}function Se({dialogRef:s,close:r,addConflicts:j}){const[m,a]=l.useState("daily"),[u,h]=l.useState(new Date),[C,w]=l.useState(new Date),[D,F]=l.useState(new Date),[b,f]=l.useState(new Date),[A,B]=l.useState(""),[i,x]=l.useState([]),[T,U]=l.useState(!1);return e.jsxs("dialog",{ref:s,className:"AddRecurringConflictDialog",children:[e.jsx("h2",{children:"Add Recurring Conflict"}),e.jsx("label",{htmlFor:"",children:"Note: Only use this if you can still attend part of the rehersal!"}),e.jsxs("div",{className:"conflict-times",children:[e.jsx("label",{htmlFor:"",children:"Recurring Type: "}),e.jsxs("select",{name:"recurring-type",id:"recurring-type",value:m,onChange:o=>{a(o.target.value)},children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"biweekly",children:"Every other week"})]}),m=="daily"&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Exclude weekends: "}),e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:T,onChange:o=>U(o.target.checked)}),e.jsx("span",{className:"checkmark"})]})]}),(m=="weekly"||m=="biweekly")&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Days of the week: "}),e.jsxs("div",{className:"repeat-days",children:[e.jsx("div",{className:"day-of-week noselect "+(i.includes(0)?"day-chosen":""),onClick:()=>{if(i.includes(0)){x(i.filter(o=>o!=0));return}x([...i,0])},children:e.jsx("label",{htmlFor:"",children:"Sun"})}),e.jsx("div",{className:"day-of-week noselect "+(i.includes(1)?"day-chosen":""),onClick:()=>{if(i.includes(1)){x(i.filter(o=>o!=1));return}x([...i,1])},children:e.jsx("label",{htmlFor:"",children:"Mon"})}),e.jsx("div",{className:"day-of-week noselect "+(i.includes(2)?"day-chosen":""),onClick:()=>{if(i.includes(2)){x(i.filter(o=>o!=2));return}x([...i,2])},children:e.jsx("label",{htmlFor:"",children:"Tue"})}),e.jsx("div",{className:"day-of-week noselect "+(i.includes(3)?"day-chosen":""),onClick:()=>{if(i.includes(3)){x(i.filter(o=>o!=3));return}x([...i,3])},children:e.jsx("label",{htmlFor:"",children:"Wed"})}),e.jsx("div",{className:"day-of-week noselect "+(i.includes(4)?"day-chosen":""),onClick:()=>{if(i.includes(4)){x(i.filter(o=>o!=4));return}x([...i,4])},children:e.jsx("label",{htmlFor:"",children:"Thu"})}),e.jsx("div",{className:"day-of-week noselect "+(i.includes(5)?"day-chosen":""),onClick:()=>{if(i.includes(5)){x(i.filter(o=>o!=5));return}x([...i,5])},children:e.jsx("label",{htmlFor:"",children:"Fri"})}),e.jsx("div",{className:"day-of-week noselect "+(i.includes(6)?"day-chosen":""),onClick:()=>{if(i.includes(6)){x(i.filter(o=>o!=6));return}x([...i,6])},children:e.jsx("label",{htmlFor:"",children:"Sat"})})]})]}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Start Date: "}),e.jsx("input",{type:"date",value:u.toISOString().slice(0,10),onChange:o=>{console.log(o.target.value);const c=new Date(o.target.value);c.setHours(0,0,0,0),c.setDate(c.getDate()+1),h(c)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"End Date: "}),e.jsx("input",{type:"date",value:C.toISOString().slice(0,10),onChange:o=>{console.log(o.target.value);const c=new Date(o.target.value);c.setHours(0,0,0,0),c.setDate(c.getDate()+1),w(c)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Start Time: "}),e.jsx("input",{type:"time",value:D.toTimeString().slice(0,5),onChange:o=>{const c=new Date,S=o.target.value.split(":");c.setHours(parseInt(S[0]),parseInt(S[1]),0,0),F(c)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"End Time: "}),e.jsx("input",{type:"time",value:b.toTimeString().slice(0,5),onChange:o=>{const c=new Date,S=o.target.value.split(":");c.setHours(parseInt(S[0]),parseInt(S[1]),0,0),f(c)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Note (Optional): "}),e.jsx("input",{type:"text",value:A,onChange:o=>{B(o.target.value)}}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const o=[],c=new Date(u);c.setHours(0,0,0,0),console.log("Start Date"),console.log(c),console.log("End Date"),console.log(C),C.setHours(0,0,0,0),console.log("End Date Changed"),console.log(C);let S=0;for(;c<=C;)if(console.log(c),m=="daily"?o.push(v.fromBlank(new Date(c),D,b,!0,A)):m=="weekly"?i.includes(c.getDay())&&o.push(v.fromBlank(new Date(c),D,b,!0,A)):m=="biweekly"&&(S%2==0&&i.includes(c.getDay())&&o.push(v.fromBlank(new Date(c),D,b,!0,A)),S++),c.setDate(c.getDate()+1),T)for(;c.getDay()==0||c.getDay()==6;)c.setDate(c.getDate()+1);console.log(o),j(o)},children:"Add Conflicts"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{r()},children:"Close"})]})]})}function ye({conflictResponseDate:s}){return e.jsx("div",{className:"SimpleConflictResponseDisplayTile",id:"simple-conflict-response-display-tile-"+s.date.toISOString(),children:e.jsx("div",{className:"header",children:e.jsxs("div",{className:"CharacterNameDiv",children:[e.jsxs("label",{htmlFor:"Actor",children:["Date: ",s.date.toDateString()]}),e.jsx("br",{}),e.jsx("br",{}),s.canAttend?e.jsxs("label",{htmlFor:"Actor",children:[s.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",s.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):e.jsx("label",{htmlFor:"Actor",children:"Can't Attend"}),s.note!=""&&e.jsx("br",{}),s.note!=""&&e.jsx("br",{}),s.note!=""&&e.jsxs("label",{htmlFor:"Actor",children:["Note: ",s.note]})]})})})}function ke({dialogRef:s,close:r,addDay:j}){const[m,a]=l.useState(),[u,h]=l.useState(),[C,w]=l.useState(),[D,F]=l.useState("");return e.jsx("dialog",{ref:s,children:e.jsxs("div",{className:"AddAdditionalDayDialog",children:[e.jsx("h2",{children:"Add Additional Day"}),e.jsx("label",{children:"Date"}),e.jsx("input",{type:"date",onChange:b=>{const f=new Date(b.target.value);f.setDate(f.getDate()+1),f.setHours(0,0,0,0),a(f)}}),e.jsx("br",{}),e.jsx("label",{children:"Start Time"}),e.jsx("input",{type:"time",onChange:b=>{console.log(b.target.value);const f=new Date,A=b.target.value.split(":");f.setHours(parseInt(A[0]),parseInt(A[1]),0,0),h(f),console.log({date:f})}}),e.jsx("br",{}),e.jsx("label",{children:"End Time"}),e.jsx("input",{type:"time",onChange:b=>{console.log(b.target.value);const f=new Date,A=b.target.value.split(":");f.setHours(parseInt(A[0]),parseInt(A[1]),0,0),w(f),console.log({date:f})}}),e.jsx("h3",{children:"More Info"}),e.jsx("input",{type:"text",className:"MoreInfoInput",value:D,onChange:b=>{F(b.target.value)}}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{j(M.fromBlank(L.fromBlank(m,u,C),D))},children:"Add Day"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{r()},children:"Close"})]})})}oe(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(we,{})}));function we(){var K;const[s,r]=l.useState(""),[j,m]=l.useState(""),[a,u]=l.useState(),[h,C]=l.useState(null),[w,D]=l.useState(null),[F,b]=l.useState(null),[f,A]=l.useState(null),[B,i]=l.useState([]),[x,T]=l.useState([]),[U,o]=l.useState("setDates"),[c,S]=l.useState(!1),[q,X]=l.useState("student"),[E,J]=l.useState([]),[R,Y]=l.useState(!0),[z,Z]=l.useState(null),[P,G]=l.useState(!1),[_,ee]=l.useState(),[te,ne]=l.useState([]);l.useState([]);const O=l.useRef(null),W=l.useRef(null),$=l.useRef(null);return l.useEffect(()=>{async function n(){de(()=>{});const t=new URLSearchParams(window.location.search),d=t.get("activityId");let g=null;d&&(r(d),g=await je(d));const p=t.get("showId");p&&m(p);let y;const N=localStorage.getItem(`show-${p}`);if(N){y=Q.fromMap(JSON.parse(N)),u(y);let k=[];for(const I of y.characters)I.actor&&k.push(I.actor);y.ensemble&&(k=[...k,...y.ensemble.actors]),k=k.filter((I,se,ae)=>se===ae.findIndex(le=>le.userId===I.userId)),ne(k),console.log(y),fe(d,p).then(I=>{J(I),console.log(I)})}else y=await be(d,p);const H=localStorage.getItem("accountType");if(H){if(X(H),console.log(H),H=="teacher"&&g){if(g.teachers.findIndex(k=>k.userId==V())==-1){window.location.href=`/Activities/?activityJoinCode=${g.joinCode}&redirect=${window.location.pathname+window.location.search.replace(/&/g,"~")}`;return}}else if(H=="student"&&g&&g.students.findIndex(k=>k.userId==V())==-1){window.location.href=`/Activities/?activityJoinCode=${g.joinCode}&redirect=${window.location.pathname+window.location.search.replace(/&/g,"~")}`;return}if(H=="student"&&y&&y.conflictForm){const k=[];y.conflictForm.dates.map(I=>{k.push(v.fromBlank(I.date.date,null,null,!1,""))}),T(k)}}}n()},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"title",children:e.jsx("h1",{children:"Conflict Form"})}),e.jsxs("div",{className:"center",children:[!(a!=null&&a.conflictForm)&&q=="teacher"?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Create Conflict Form"}),e.jsx("br",{}),U=="setDates"?e.jsxs(e.Fragment,{children:[" ",e.jsx("label",{children:"Start Date"}),e.jsx("input",{type:"date",onChange:n=>{console.log(new Date(n.target.value));const t=new Date(n.target.value);t.setDate(t.getDate()+1),t.setHours(0,0,0,0),C(t)}}),e.jsx("br",{}),e.jsx("label",{children:"End Date"}),e.jsx("input",{type:"date",onChange:n=>{const t=new Date(n.target.value);t.setDate(t.getDate()+1),t.setHours(0,0,0,0),D(t)}}),e.jsx("br",{}),e.jsx("label",{children:"Default Rehersal Start Time"}),e.jsx("input",{type:"time",onChange:n=>{console.log(n.target.value);const t=new Date,d=n.target.value.split(":");t.setHours(parseInt(d[0]),parseInt(d[1]),0,0),b(t),console.log({date:t})}}),e.jsx("br",{}),e.jsx("label",{children:"Default Rehersal End Time"}),e.jsx("input",{type:"time",onChange:n=>{console.log(n.target.value);const t=new Date,d=n.target.value.split(":");t.setHours(parseInt(d[0]),parseInt(d[1]),0,0),A(t),console.log({date:t})}}),e.jsx("br",{}),e.jsx("label",{children:"Exclude Weekends"}),e.jsx("input",{type:"checkbox",checked:R,onChange:n=>{Y(n.target.checked)}}),e.jsx("br",{}),e.jsx("label",{children:"Form Deadline"}),e.jsx("input",{type:"date",onChange:n=>{const t=new Date(n.target.value);t.setDate(t.getDate()+1),t.setHours(0,0,0,0),Z(t)}}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{if(h&&w&&F&&f){const n=[],t=new Date(h);for(console.log("Start Date"),console.log(t);t<=w;)if(console.log(t),n.push(M.fromBlank(L.fromBlank(new Date(t),F,f),"")),t.setDate(t.getDate()+1),R)for(;t.getDay()==0||t.getDay()==6;)t.setDate(t.getDate()+1);i(n),o("editDates"),console.log(n)}},children:"Next"})," "]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"ActionBtn",onClick:()=>{var n;(n=$.current)==null||n.showModal()},children:"Add Additional Day"}),e.jsx("div",{className:"conflicts",children:B.map((n,t)=>e.jsx(Ce,{conflict:n,canDelete:!0,onDelete:()=>{const d=[...B];d.splice(t,1),i(d)},setConflict:d=>{const g=[...B];g[t]=d,i(g)}},n.date.date.toISOString()))}),e.jsx("br",{}),c?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(S(!0),z==null){alert("Please set a form deadline"),S(!1);return}const n=Q.fromMap(a.toMap());n.conflictForm=re.fromBlank(B,z,Date.now()),u(n),console.log(n),await me(s,j,n.conflictForm),S(!1)},children:"Save Conflict Form"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{o("setDates"),i([])},children:"Back"})]})]}):q=="teacher"&&!P?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Conflict Form Responses"}),e.jsx("div",{className:"conflicts",children:E.map(n=>e.jsxs("div",{className:"conflict-response",children:[n.actor.name,e.jsx("br",{}),e.jsxs("div",{className:"conflict-response-dates",children:[n.dates.map(t=>t.canAttend?e.jsxs("div",{className:"conflict-response-date",children:[t.date.toDateString(),e.jsx("br",{}),t.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",t.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),t.note!=""&&e.jsx("br",{}),t.note!=""&&e.jsxs("label",{htmlFor:"Actor",children:["Note: ",t.note]})]}):e.jsxs("div",{className:"conflict-response-date",children:[t.date.toDateString(),e.jsx("br",{}),"Can't Attend"]})),e.jsx("button",{className:"ActionBtn",onClick:async()=>{const t=[...E];t.splice(E.indexOf(n),1),J(t),await he(s,j,n)},children:"Delete"})]})]}))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var n;(n=O.current)==null||n.showModal()},children:"Add Conflict Response"}),e.jsx("button",{className:"ActionBtn",onClick:async()=>{const n=window.location.href;await navigator.clipboard.writeText(n),alert("Link copied to clipboard")},children:"Share Conflict Form"})]}):E.length==0&&(a==null?void 0:a.formStatus)=="open"||P?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Conflict Form"}),e.jsx("p",{children:"Select can attend even if you can't make the full rehersal, just add a conflict"}),e.jsxs("div",{className:"quick-actions",children:[e.jsx("button",{className:"ActionBtn",onClick:()=>{var t;const n=[];(t=a==null?void 0:a.conflictForm)==null||t.dates.map(d=>{n.push(v.fromBlank(d.date.date,null,null,!0,""))}),T(n)},children:"I can attend all the rehersals"}),e.jsx("button",{className:"ActionBtn",onClick:n=>{var t;(t=W.current)==null||t.showModal()},children:"Add recurring conflict"})]}),e.jsx("div",{className:"conflicts",children:(K=a==null?void 0:a.conflictForm)==null?void 0:K.dates.map((n,t)=>(console.log(n),e.jsx(ve,{conflict:n,conflictResponseDate:x[t],setConflict:d=>{const g=[...x];console.log(g),g[t]=d,T(g)}})))}),e.jsx("br",{}),c?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{S(!0);const n=x.filter(p=>p.canAttend&&p.from||!p.canAttend);let t;P?t=_:t=await xe();const d=ie.fromBlank(n,"",t,s,j,Date.now());console.log(d),await ge(s,j,d);const g=[...E];g.push(d),J(g),S(!1),G(!1)},children:"Submit Conflict Form"})]}):(a==null?void 0:a.formStatus)=="open"?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Conflict Form Response"}),e.jsx("div",{className:"conflicts",children:E[0].dates.map(n=>e.jsx(ye,{conflictResponseDate:n}))})]}):e.jsx(e.Fragment,{children:e.jsx("h2",{children:"Conflict Form Closed"})}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href=`/Activity/Shows/Show/?activityId=${s}&showId=${j}`},children:"Close"})]}),e.jsx(Se,{dialogRef:W,addConflicts:n=>{const t=[...x];n.map(d=>{var y;if(console.log("FInding conflict"),console.log(d),x.findIndex(N=>(console.log("Checking date"),console.log(N.date.toDateString()),N.date.toDateString()==d.date.toDateString()))==-1)return;const g=x.findIndex(N=>N.date.toDateString()==d.date.toDateString());console.log("Index"),console.log(g),console.log("Current Conflicts"),console.log((y=a==null?void 0:a.conflictForm)==null?void 0:y.dates),console.log(x);const p=a.conflictForm.dates[g];p.date.from&&d.from<p.date.from&&(d.from=p.date.from),p.date.to&&d.to>p.date.to&&(d.to=p.date.to),t[t.findIndex(N=>N.date.toDateString()==d.date.toDateString())]=d}),T(t),W.current.close()},close:()=>{W.current.close()}}),e.jsx(pe,{dialogRef:O,close:()=>{O.current.close()},members:te,addedMembers:[],addUser:n=>{n instanceof ce&&ee(n),O.current.close(),G(!0)}}),e.jsx(ke,{dialogRef:$,close:()=>{$.current.close()},addDay:n=>{const t=[...B];t.push(n),i(t),$.current.close()}})]})}
