import{j as r,r as u,c as W,i as E}from"./index-BrfWEQze.js";import{E as v,C as B,b as y,F as w,s as G,k as R,t as K,f as U,M as T}from"./constants-B9kCK6KS.js";import{f as V,e as P,C as Z,D as L,E as H,F as Y,G as _}from"./db-CMBfYTOW.js";import{A as O}from"./Add_User_Dialog-XlzbgwXF.js";import{a as J,A as X,S as q,D as $}from"./Show_Group_Display_Tile--7-jC4iG.js";import{E as ee}from"./Ensemble_Section_Tile-CaL6mCfk.js";import"./trash-BnpXJPEK.js";function se({message:d,isSender:p}){return r.jsx("div",{className:"message",children:r.jsx("div",{className:"message__outer",children:r.jsxs("div",{className:"message__inner",children:[p?r.jsx(r.Fragment,{}):r.jsx("div",{className:"message__spacer"}),r.jsxs("div",{className:"message__bubble "+(p?"isSender":"notSender"),children:[r.jsx("h1",{className:"message-sender",children:d.senderName}),r.jsxs("div",{className:"message-body",children:[r.jsx("p",{className:"message-text",children:d.message}),r.jsx("p",{className:"message-time-sent",children:d.timeSent.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),p?r.jsx("div",{className:"message__spacer"}):r.jsx(r.Fragment,{})]})})})}function re({sendMessage:d}){const p=u.useRef(null);return r.jsxs("div",{className:"message-send-bar",onKeyDown:h=>{h.key==="Enter"&&p.current.value.trim()!==""&&(d(p.current.value.trim()),p.current.value="")},children:[r.jsx("input",{type:"text",placeholder:"Type a message...",className:"message-input",ref:p}),r.jsx("button",{onClick:()=>{d(p.current.value.trim()),p.current.value=""},className:"message-send-btn",children:"Send"})]})}function Q({dialogRef:d,close:p,addMembers:h,activityId:j,setName:g}){const[b,f]=u.useState([]),[c,M]=u.useState(null),[S,N]=u.useState(null);return u.useEffect(()=>{j&&V(j).then(i=>{i=i.filter(l=>l.canCreateSchedule),f(i)})},[j]),r.jsx("dialog",{ref:d,className:"AddFromPlayDialog",children:r.jsxs("div",{className:"AddFromPlayDiv",children:[r.jsx("h2",{children:"Select Play"}),r.jsxs("select",{className:"SelectPlay",onChange:i=>{M(b.find(l=>l.id==i.target.value)||null),N(v.fromBlank(!0,!1,!1,!1,[],333))},children:[r.jsx("option",{value:"",children:"Select a Play"}),b.map((i,l)=>r.jsx("option",{value:i.id,children:i.name},l))]}),c&&r.jsxs(r.Fragment,{children:[r.jsx("br",{}),r.jsx("button",{className:"ActionBtn",onClick:()=>{const i=[],l=[];for(const n of c.ensemble.actors)l.includes(n.userId)||(i.push(n),l.push(n.userId));for(const n of c.characters)l.includes(n.actor.userId)||(i.push(n.actor),l.push(n.actor.userId));h(i)},children:"Add Full Cast"}),r.jsx("h2",{className:"title",children:"Ensemble"}),r.jsx("div",{className:"ensemble",children:r.jsx(ee,{ensembleSection:S,isAssign:!1,actors:[],isCustom:!1,isCreate:!0,isGroupChatCreate:!0,setEnsembleSection:i=>{N(i)},onAddEnsemble:()=>{const i=[],l=[];if(S.includeAll)for(const n of c.ensemble.actors)l.includes(n.userId)||(i.push(n),l.push(n.userId));else if(S.includeMale)for(const n of c.ensemble.actors)n.gender=="male"&&(l.includes(n.userId)||(i.push(n),l.push(n.userId)));else if(S.includeFemale)for(const n of c.ensemble.actors)n.gender=="female"&&(l.includes(n.userId)||(i.push(n),l.push(n.userId)));h(i)},removeEnsembleSection:()=>{}})}),r.jsx("h2",{className:"title",children:"Show Groups"}),r.jsx("div",{className:"show-groups",children:c==null?void 0:c.showGroups.map((i,l)=>r.jsx(J,{showGroup:i,canDelete:!1,onDelete:()=>{},canClick:!0,showCharacters:!1,onClick:()=>{g(i.name);const n=[],t=[];for(const a of i.characters)if(a instanceof B)t.includes(a.actor.userId)||(n.push(a.actor),t.push(a.actor.userId));else if(a instanceof y){for(const e of a.characters)if(e instanceof B)t.includes(e.actor.userId)||(n.push(e.actor),t.push(e.actor.userId));else if(e instanceof v){if(e.includeAll)for(const s of c.ensemble.actors)t.includes(s.userId)||(n.push(s),t.push(s.userId));else if(e.includeMale)for(const s of c.ensemble.actors)s.gender=="male"&&(t.includes(s.userId)||(n.push(s),t.push(s.userId)));else if(e.includeFemale)for(const s of c.ensemble.actors)s.gender=="female"&&(t.includes(s.userId)||(n.push(s),t.push(s.userId)));else if(e.includeCustom)for(const s of e.customActors)t.includes(s.userId)||(n.push(s),t.push(s.userId))}}else if(a instanceof v){if(a.includeAll)for(const e of c.ensemble.actors)t.includes(e.userId)||(n.push(e),t.push(e.userId));else if(a.includeMale)for(const e of c.ensemble.actors)e.gender=="male"&&(t.includes(e.userId)||(n.push(e),t.push(e.userId)));else if(a.includeFemale)for(const e of c.ensemble.actors)e.gender=="female"&&(t.includes(e.userId)||(n.push(e),t.push(e.userId)));else if(a.includeCustom)for(const e of a.customActors)t.includes(e.userId)||(n.push(e),t.push(e.userId))}h(n)}},l))}),r.jsx("h2",{className:"title",children:"Show Layout"}),r.jsx("div",{className:"layout",children:c==null?void 0:c.layout.map((i,l)=>r.jsx(X,{act:i,onClick:n=>{g(n.name+" - "+i.name);const t=[],a=[];console.log(n);for(const e of n.characters)if(e instanceof B)a.includes(e.actor.userId)||(t.push(e.actor),a.push(e.actor.userId));else if(e instanceof y){for(const s of e.characters)if(s instanceof B)a.includes(s.actor.userId)||(t.push(s.actor),a.push(s.actor.userId));else if(s instanceof v){if(s.includeAll)for(const o of c.ensemble.actors)a.includes(o.userId)||(t.push(o),a.push(o.userId));else if(s.includeMale)for(const o of c.ensemble.actors)o.gender=="male"&&(a.includes(o.userId)||(t.push(o),a.push(o.userId)));else if(s.includeFemale)for(const o of c.ensemble.actors)o.gender=="female"&&(a.includes(o.userId)||(t.push(o),a.push(o.userId)));else if(s.includeCustom)for(const o of s.customActors)a.includes(o.userId)||(t.push(o),a.push(o.userId))}}else if(e instanceof v){if(e.includeAll)for(const s of c.ensemble.actors)a.includes(s.userId)||(t.push(s),a.push(s.userId));else if(e.includeMale)for(const s of c.ensemble.actors)s.gender=="male"&&(a.includes(s.userId)||(t.push(s),a.push(s.userId)));else if(e.includeFemale)for(const s of c.ensemble.actors)s.gender=="female"&&(a.includes(s.userId)||(t.push(s),a.push(s.userId)));else if(e.includeCustom)for(const s of e.customActors)a.includes(s.userId)||(t.push(s),a.push(s.userId))}else if(e instanceof w){for(const s of c.ensemble.actors)a.includes(s.userId)||(t.push(s),a.push(s.userId));for(const s of c.characters)a.includes(s.actor.userId)||(t.push(s.actor),a.push(s.actor.userId))}h(t)}},l))}),r.jsx("h2",{className:"title",children:"Songs"}),r.jsx("div",{className:"songs",children:c==null?void 0:c.songs.map((i,l)=>r.jsx(q,{song:i,onClick:()=>{g(i.name);const n=[],t=[];for(const a of i.characters)if(a instanceof B)t.includes(a.actor.userId)||(n.push(a.actor),t.push(a.actor.userId));else if(a instanceof y){for(const e of a.characters)if(e instanceof B)t.includes(e.actor.userId)||(n.push(e.actor),t.push(e.actor.userId));else if(e instanceof v){if(e.includeAll)for(const s of c.ensemble.actors)t.includes(s.userId)||(n.push(s),t.push(s.userId));else if(e.includeMale)for(const s of c.ensemble.actors)s.gender=="male"&&(t.includes(s.userId)||(n.push(s),t.push(s.userId)));else if(e.includeFemale)for(const s of c.ensemble.actors)s.gender=="female"&&(t.includes(s.userId)||(n.push(s),t.push(s.userId)));else if(e.includeCustom)for(const s of e.customActors)t.includes(s.userId)||(n.push(s),t.push(s.userId))}}else if(a instanceof v){if(a.includeAll)for(const e of c.ensemble.actors)t.includes(e.userId)||(n.push(e),t.push(e.userId));else if(a.includeMale)for(const e of c.ensemble.actors)e.gender=="male"&&(t.includes(e.userId)||(n.push(e),t.push(e.userId)));else if(a.includeFemale)for(const e of c.ensemble.actors)e.gender=="female"&&(t.includes(e.userId)||(n.push(e),t.push(e.userId)));else if(a.includeCustom)for(const e of a.customActors)t.includes(e.userId)||(n.push(e),t.push(e.userId))}else if(a instanceof w){for(const e of c.ensemble.actors)t.includes(e.userId)||(n.push(e),t.push(e.userId));for(const e of c.characters)t.includes(e.actor.userId)||(n.push(e.actor),t.push(e.actor.userId))}h(n)}},l))}),r.jsx("h2",{className:"title",children:"Dances"}),r.jsx("div",{className:"dances",children:c==null?void 0:c.dances.map((i,l)=>r.jsx($,{dance:i,onClick:()=>{g(i.name);const n=[],t=[];for(const a of i.characters)if(a instanceof B)t.includes(a.actor.userId)||(n.push(a.actor),t.push(a.actor.userId));else if(a instanceof y){for(const e of a.characters)if(e instanceof B)t.includes(e.actor.userId)||(n.push(e.actor),t.push(e.actor.userId));else if(e instanceof v){if(e.includeAll)for(const s of c.ensemble.actors)t.includes(s.userId)||(n.push(s),t.push(s.userId));else if(e.includeMale)for(const s of c.ensemble.actors)s.gender=="male"&&(t.includes(s.userId)||(n.push(s),t.push(s.userId)));else if(e.includeFemale)for(const s of c.ensemble.actors)s.gender=="female"&&(t.includes(s.userId)||(n.push(s),t.push(s.userId)));else if(e.includeCustom)for(const s of e.customActors)t.includes(s.userId)||(n.push(s),t.push(s.userId))}}else if(a instanceof v){if(a.includeAll)for(const e of c.ensemble.actors)t.includes(e.userId)||(n.push(e),t.push(e.userId));else if(a.includeMale)for(const e of c.ensemble.actors)e.gender=="male"&&(t.includes(e.userId)||(n.push(e),t.push(e.userId)));else if(a.includeFemale)for(const e of c.ensemble.actors)e.gender=="female"&&(t.includes(e.userId)||(n.push(e),t.push(e.userId)));else if(a.includeCustom)for(const e of a.customActors)t.includes(e.userId)||(n.push(e),t.push(e.userId))}else if(a instanceof w){for(const e of c.ensemble.actors)t.includes(e.userId)||(n.push(e),t.push(e.userId));for(const e of c.characters)t.includes(e.actor.userId)||(n.push(e.actor),t.push(e.actor.userId))}h(n)}},l))})]}),r.jsx("button",{className:"ActionBtn",onClick:()=>{p()},children:"Close"}),r.jsx("br",{})]})})}function z({dialogRef:d,close:p,addMembers:h,activityGroups:j}){const[g,b]=u.useState(null);return r.jsx("dialog",{ref:d,className:"AddFromGroupDialog",children:r.jsxs("div",{className:"AddFromGroupDiv",children:[r.jsx("h2",{children:"Select Group"}),r.jsxs("select",{className:"SelectPlay",onChange:f=>{b(j.find(c=>c.groupName==f.target.value)||null)},children:[r.jsx("option",{value:"",children:"Select a Group"}),j.map((f,c)=>r.jsx("option",{value:f.groupName,children:f.groupName},c))]}),r.jsx("br",{}),r.jsx("button",{className:"ActionBtn",onClick:()=>{g&&h(g.groupMembers),p()},children:"Add Group"}),r.jsx("button",{className:"ActionBtn",onClick:()=>{p()},children:"Close"}),r.jsx("br",{})]})})}function te({close:d,dialogRef:p,activityId:h,refresh:j}){const g=u.useRef(null),b=u.useRef(null),f=u.useRef(null),c=u.useRef(null),[M,S]=u.useState(null),[N,i]=u.useState([]),[l,n]=u.useState([]),[t,a]=u.useState([]);return u.useEffect(()=>{h&&P(h).then(e=>{if(S(e),e!=null)if(e instanceof G){const s=e.students.map(o=>R.fromBlank(o.name,o.userId,o.FCMToken));i([...e.parents,...s]),a(e.groups)}else i([...e.parents,...e.students]),a(e.groups)})},[h]),r.jsxs(r.Fragment,{children:[r.jsx("dialog",{className:"create-group-chat-dialog",ref:p,children:r.jsxs("div",{className:"create-group-chat-dialog-inner",children:[r.jsx("h1",{className:"create-group-chat-dialog-title",children:"Create Group Chat"}),r.jsx("input",{type:"text",placeholder:"Group Chat Name",className:"create-group-chat-dialog-input",ref:g}),l.length>0&&r.jsxs(r.Fragment,{children:[" ",r.jsx("h2",{className:"create-group-chat-dialog-members-title",children:"Members: "}),r.jsx("div",{className:"create-group-chat-dialog-members",children:l.map((e,s)=>r.jsxs("div",{className:"create-group-chat-dialog-member",children:[r.jsx("label",{htmlFor:"",children:e.memberName}),r.jsx("button",{className:"ActionBtn",onClick:()=>{n(l.filter(o=>o!=e))},children:"Remove"})]},s))})," "]}),r.jsx("button",{className:"ActionBtn",onClick:()=>{b.current.showModal()},children:"Add Member"}),t.length>0&&r.jsx("button",{className:"ActionBtn",onClick:()=>{c.current.showModal()},children:"Add from Group"}),M instanceof G?r.jsx("button",{className:"ActionBtn",onClick:()=>{f.current.showModal()},children:"Add from Play"}):null,r.jsx("button",{className:"ActionBtn",onClick:async()=>{if(g.current.value==""){alert("Please enter a name for the group chat");return}if(l.length==0){alert("Please add at least one member to the group chat");return}const e=K.fromBlank(g.current.value,"",l,"custom",h,Date.now());await Z(e),j(),d()},children:"Create"}),r.jsx("button",{onClick:d,className:"ActionBtn",children:"Close"})]})}),r.jsx(O,{members:N,dialogRef:b,addedMembers:l,close:()=>{b.current.close()},addUser:e=>{e instanceof U&&(e=R.fromBlank(e.name,e.userId,e.FCMToken));const s=[...l,e],o=[],m=s.filter(I=>o.includes(I.memberUid)?!1:(o.push(I.memberUid),!0));n(m)}}),r.jsx(z,{dialogRef:c,close:()=>{c.current.close()},addMembers:e=>{const s=[...l,...e],o=[],m=s.filter(I=>o.includes(I.memberUid)?!1:(o.push(I.memberUid),!0));n(m),c.current.close()},activityGroups:t}),r.jsx(Q,{dialogRef:f,close:()=>{f.current.close()},addMembers:e=>{const s=e.map(x=>R.fromBlank(x.name,x.userId,x.FCMToken)),o=[...l,...s],m=[],I=o.filter(x=>m.includes(x.memberUid)?!1:(m.push(x.memberUid),!0));n(I),f.current.close()},setName:e=>{},activityId:h})]})}function ne({groupChat:d,onClick:p}){return r.jsxs("div",{className:"group-chat-display-tile",onClick:p,children:[r.jsx("h1",{children:d.name}),r.jsx("div",{className:"divider"}),r.jsxs("div",{className:"recent-message-div",children:[r.jsx("h3",{children:d.lastMessage!=null?d.lastMessage.senderName+": "+d.lastMessage.message:"No messages"}),r.jsx("h4",{children:d.lastMessage!=null?new Date(d.lastMessage.timeSent).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]})]})}function ae({close:d,dialogRef:p,activityId:h,userData:j,refresh:g}){const b=u.useRef(null),f=u.useRef(null),c=u.useRef(null),M=u.useRef(null),[S,N]=u.useState(null),[i,l]=u.useState([]),[n,t]=u.useState([]),[a,e]=u.useState([]);return u.useEffect(()=>{h&&P(h).then(s=>{if(N(s),s!=null)if(s instanceof G){const o=s.students.map(m=>R.fromBlank(m.name,m.userId,m.FCMToken));l([...s.parents,...o]),e(s.groups)}else l([...s.parents,...s.students]),e(s.groups)})},[h]),r.jsxs(r.Fragment,{children:[r.jsx("dialog",{className:"broadcast-message-dialog",ref:p,children:r.jsxs("div",{className:"broadcast-message-dialog-inner",children:[r.jsx("h1",{className:"broadcast-message-dialog-title",children:"Broadcast message"}),r.jsx("input",{type:"text",placeholder:"Message",className:"broadcast-message-dialog-input",ref:b}),n.length>0&&r.jsxs(r.Fragment,{children:[" ",r.jsx("h2",{className:"broadcast-message-dialog-members-title",children:"Recipient: "}),r.jsx("div",{className:"broadcast-message-dialog-members",children:n.map((s,o)=>r.jsxs("div",{className:"broadcast-message-dialog-member",children:[r.jsx("label",{htmlFor:"",children:s.memberName}),r.jsx("button",{className:"ActionBtn",onClick:()=>{t(n.filter(m=>m!=s))},children:"Remove"})]},o))})," "]}),r.jsx("button",{className:"ActionBtn",onClick:()=>{f.current.showModal()},children:"Add Recipient"}),a.length>0&&r.jsx("button",{className:"ActionBtn",onClick:()=>{M.current.showModal()},children:"Add from Group"}),S instanceof G?r.jsx("button",{className:"ActionBtn",onClick:()=>{c.current.showModal()},children:"Add from Play"}):null,r.jsx("button",{className:"ActionBtn",onClick:async()=>{if(b.current.value==""){alert("Please enter a message to broadcast");return}if(n.length==0){alert("Please add at least one recipient");return}const s=T.fromBlank(b.current.value,j.uid,j.fullname,j.FCMToken,"",h,"",new Date,[j.uid]);for(let o=0;o<n.length;o++){const m=n[o];s.gcId=m.memberUid,await L(h,m.memberUid,s,m)}g(),d()},children:"Send"}),r.jsx("button",{onClick:d,className:"ActionBtn",children:"Close"})]})}),r.jsx(O,{members:i,dialogRef:f,addedMembers:n,close:()=>{f.current.close()},addUser:s=>{s instanceof U&&(s=R.fromBlank(s.name,s.userId,s.FCMToken));const o=[...n,s],m=[],I=o.filter(x=>m.includes(x.memberUid)?!1:(m.push(x.memberUid),!0));t(I)}}),r.jsx(z,{dialogRef:M,close:()=>{M.current.close()},addMembers:s=>{const o=[...n,...s],m=[],I=o.filter(x=>m.includes(x.memberUid)?!1:(m.push(x.memberUid),!0));t(I),M.current.close()},activityGroups:a}),r.jsx(Q,{dialogRef:c,close:()=>{c.current.close()},addMembers:s=>{const o=s.map(k=>R.fromBlank(k.name,k.userId,k.FCMToken)),m=[...n,...o],I=[],x=m.filter(k=>I.includes(k.memberUid)?!1:(I.push(k.memberUid),!0));t(x),c.current.close()},setName:s=>{},activityId:h})]})}const ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAiCAYAAAC9duLEAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAE6ADAAQAAAABAAAAIgAAAAC8LsGQAAACaUlEQVRIDaWV24oTQRCGd6I3inhWFnURA+sBURQUfBfXI3rhM3jvlQ8g7srO7voa3nnvhQiKx3hcj6uiIKLG7wvToUwmmUks+KmuTtWX6unumWziP6zdbm+k/Araj+aycVmANlO7gPYWjN+NcWCAtlK3FEBiVkbuDNB2ChfRHgmFfcdfHAkGaJIiQbsLiO4bupBl2Z3aMEA7KHJpu1CyrwzOA7rrxKo0O8wDmuL3m2hnyPvM+Cyge2musjNALsmlucRknxgIepAm9ENhgJrkCNpmcmEf8IIeponkB8IATZOUI49BsncMTgN6miaiL4UB2kdSjjyYyZYZCGqliV7fBwN0kKR5tCEkv2Z8CtDLMNc3bMQZQIeIcxRBL4hPVoHImejCAB0lztF6lMwlzQCys0rrwAAdI/MGWhcqnjC2I59VLcsAHSdzFq0JFW77GUAfw1zlUNgtsuIVuU/sOVqprO5JcJmre+Z+EP/qmasVCruMfobsI4zn6ThuRPh58LDBcm7z8yVkR8k8IgsAfS3Xtu6hpfAEVddQ3Agvss/Pi11pXZiZAN3Z62itcWGP8O6sF3yo/QMzE6CHdw7FM+fF9l560QdaH8xMgIdxHuK4CS1iO3yDL7VSmJkAyy68F90OX5XRBsIKoB/XHG0yLsx7aofP00TyQ2Em0eE0LkfxJfmW2A6f4btWCTMTYBO3iOLr+z2xHT7Gd6wWzEyAZR8WXwQCO98Dr1Mto6BF4gyK77YtxEv80QEhtTszWaPQj7FLnjIu7Av+3MgwiwFO4gS69GTLY8GsBuhmCGwaY3/GhlkN0ONyFfnMZv8Ctza9toJqQLkAAAAASUVORK5CYII=";W(document.getElementById("root")).render(r.jsx(u.StrictMode,{children:r.jsx(oe,{})}));function oe(){const[d,p]=u.useState(""),[h,j]=u.useState([]),[g,b]=u.useState("student"),[f,c]=u.useState(null),[M,S]=u.useState([]);u.useState([]);const[N,i]=u.useState(null),[l,n]=u.useState(!1),[t,a]=u.useState(!1),e=u.useRef(null),s=u.useRef(null),o=u.useRef(null);function m(A){S(A),setTimeout(()=>{e.current.scrollTop=e.current.scrollHeight},100)}u.useEffect(()=>{f&&H(f.activityId,f.id,m)},[f]),u.useEffect(()=>{E(()=>{});const A=()=>{window.innerWidth<800?n(!0):n(!1)};return window.addEventListener("resize",A),A(),()=>window.removeEventListener("resize",A)},[]);function I(A){const C={weekday:"long",year:"numeric",month:"long",day:"numeric"};return A.toLocaleDateString("en-US",C)}function x(A){let C=[],F=new Date(0);return A.forEach(D=>{D.timeSent.toDateString()!=F.toDateString()&&(C.push({time:I(D.timeSent)}),F=D.timeSent),C.push(D)}),C}u.useEffect(()=>{a(!0),E(()=>{});const C=new URLSearchParams(window.location.search).get("activityId");C&&p(C),Y(C,j).then(()=>{_().then(D=>{i(D),a(!1)})});const F=localStorage.getItem("accountType");F&&b(F)},[]);async function k(A){if(!N||!f)return;const C=T.fromBlank(A,N.uid,N.fullname,N.FCMToken,f.id,d,"",new Date,[N.uid]);await L(d,f.id,C)}return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"title",children:r.jsx("h1",{children:"Messages"})}),r.jsxs("div",{className:"center",children:[r.jsxs("div",{className:"window",children:[(!l||l&&!f)&&r.jsxs("div",{className:"left",children:[r.jsx("div",{className:"groupChats",children:t?r.jsx("div",{className:"loader"}):h.map(A=>r.jsx(ne,{groupChat:A,onClick:()=>{c(A)}}))}),r.jsxs("div",{className:"GCOptions "+g,children:[r.jsx("button",{className:"ActionBtn",onClick:()=>{s.current.showModal()},children:"Create Group Chat"}),g=="teacher"&&r.jsx("button",{className:"ActionBtn",onClick:()=>{o.current.showModal()},children:"Broadcast Message"})]})]}),(!l||l&&f)&&r.jsx("div",{className:"right",children:f?r.jsxs("div",{className:"selectedGroupChat",children:[r.jsxs("div",{className:"back-div",children:[l&&r.jsx("img",{src:ce,alt:"",onClick:()=>c(null)}),r.jsx("h2",{children:f.name})]}),r.jsx("div",{className:"messages",ref:e,children:x(M).map(A=>A.hasOwnProperty("time")?r.jsx("div",{className:"timeSeparator",children:A.time}):r.jsx(se,{message:A,isSender:A.senderUid==localStorage.getItem("userId")}))}),r.jsx(re,{sendMessage:k})]}):r.jsx("div",{className:"noSelectedGroupChat",children:r.jsx("h1",{children:"No Group Chat Selected"})})})]}),r.jsx("br",{}),r.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/?activityId="+d},children:"Back"})]}),r.jsx(te,{dialogRef:s,refresh:()=>{},close:()=>{s.current.close()},activityId:d}),r.jsx(ae,{dialogRef:o,refresh:()=>{},close:()=>{o.current.close()},activityId:d,userData:N})]})}
