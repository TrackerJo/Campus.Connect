import{r as n,j as e,c as x}from"./index-BvKDzgix.js";import{j as h,u as g,a as y,b as f}from"./db-BHX2A2ia.js";function A({dialogRef:l,close:r}){const[c,d]=n.useState(""),[i,s]=n.useState(!1),[a,o]=n.useState(!1),[u,v]=n.useState(""),[m,j]=n.useState("male");return e.jsx("dialog",{ref:l,className:"JoinActivityDialog",children:e.jsxs("div",{className:"dialogContents",children:[!a||!i?e.jsxs(e.Fragment,{children:[" ",e.jsx("h2",{children:"Join Activity"}),e.jsx("label",{htmlFor:"",children:"Activity Code"}),e.jsx("input",{type:"text",value:c,onChange:t=>{d(t.target.value)}}),e.jsx("button",{className:"ActionBtn",onClick:async()=>{console.log("Joining activity"),localStorage.setItem("needsPhoneNumber","false"),localStorage.setItem("needsGender","false");const t=await h(c);if(s(localStorage.getItem("needsPhoneNumber")=="true"),o(localStorage.getItem("needsGender")=="true"),!(localStorage.getItem("needsPhoneNumber")=="true"||localStorage.getItem("needsGender")=="true")){if(!t){alert("Invalid activity code");return}window.location.href=`/Campus.Connect/Activity/?activityId=${t.id}`}},children:"Join"})," "]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Activity requires some more information"}),i?e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"",children:"Phone Number"}),e.jsx("input",{type:"text",value:u,onChange:t=>{v(t.target.value)}}),e.jsx("br",{})]}):e.jsx(e.Fragment,{}),a?e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"",children:"Gender"}),e.jsxs("select",{name:"",id:"",value:m,onChange:t=>{j(t.target.value)},children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"})]})]}):e.jsx(e.Fragment,{}),e.jsx("button",{className:"ActionBtn",onClick:async()=>{console.log("Joining activity"),i&&(await g(u),localStorage.setItem("needsPhoneNumber","false")),a&&(await y(m),localStorage.setItem("needsGender","false"));const t=await h(c);if(!t){alert("Invalid activity code");return}window.location.href=`/Campus.Connect/Activity/?activityId=${t.id}`},children:"Join"})]}),e.jsx("button",{className:"ActionBtn",onClick:()=>{r()},children:"Close"})]})})}x(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(p,{})}));function p(){const[l,r]=n.useState([]),[c,d]=n.useState("student"),i=n.useRef(null);return n.useEffect(()=>{async function s(){const o=await f();r(o),console.log(o)}s();const a=localStorage.getItem("accountType");a&&d(a)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"title",children:e.jsx("h1",{children:"Activities"})}),e.jsxs("div",{className:"center",children:[e.jsx("div",{className:"activities",children:l.map(s=>e.jsx("div",{className:"activity",onClick:()=>{window.location.href=`/Campus.Connect/Activity/?activityId=${s.id}`},children:e.jsx("h1",{children:s.name})},s.id))}),e.jsx("br",{}),c=="teacher"&&e.jsx("button",{className:"ActionBtn",onClick:()=>{},children:"Create Activity"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{i.current.showModal()},children:"Join Activity"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Campus.Connect/"},children:"Back"})]}),e.jsx(A,{dialogRef:i,close:()=>{i.current.close()}})]})}
