import{j as t,c as I,r as s,i as x}from"./index-C75OlIaX.js";import{D as n}from"./Dashboard_Tile-CmIu-G_S.js";import{m as j,s as p}from"./db-eXCPZu_2.js";import"./constants-BV3XiQhG.js";function C({close:o,confirmed:l,dialogRef:i}){return t.jsx("dialog",{ref:i,children:t.jsxs("div",{className:"ConfirmCreateScheduleDialog",children:[t.jsx("h2",{children:"Confirm Creating Schedule"}),t.jsx("label",{htmlFor:"",children:"Once you start to create the schedule, you will not be able to edit the show template. Do you wish to continue?"}),t.jsx("button",{className:"ActionBtn",onClick:()=>{l()},children:"Yes"}),t.jsx("button",{className:"ActionBtn",onClick:()=>{o()},children:"No"})]})})}I(document.getElementById("root")).render(t.jsx(s.StrictMode,{children:t.jsx(v,{})}));function v(){const[o,l]=s.useState(""),[i,f]=s.useState(""),[e,g]=s.useState(),[a,w]=s.useState("student"),[y,m]=s.useState(!0),r=s.useRef(null);return s.useEffect(()=>{m(!0),x(()=>{});const c=new URLSearchParams(window.location.search),d=c.get("activityId");d&&l(d);const h=c.get("showId");h&&f(h),j(d,h).then(u=>{g(u),console.log(u),m(!1)});const S=localStorage.getItem("accountType");S&&w(S)},[]),t.jsxs(t.Fragment,{children:[y?t.jsxs("div",{className:"center",children:[" ",t.jsx("div",{className:"loader"})]}):t.jsxs(t.Fragment,{children:[" ",t.jsx("div",{className:"title",children:t.jsx("h1",{children:e==null?void 0:e.name})}),t.jsxs("div",{className:"center",children:[t.jsxs("div",{className:"tiles",children:[a=="teacher"&&!(e!=null&&e.isCreatingSchedule)?t.jsxs(t.Fragment,{children:[" ",t.jsx(n,{title:"Edit Show Template",description:"Edit the show template",onClick:()=>{localStorage.setItem("show",JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/CreateTemplate/?activityId=${o}&isEditing=true&showId=${i}`}})," "]}):t.jsx(t.Fragment,{}),a=="teacher"?t.jsxs(t.Fragment,{children:[" ",t.jsx(n,{title:"Assign Roles",description:"Assign roles to characters",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/Show/Assign/?activityId=${o}&showId=${i}`}})]}):t.jsx(t.Fragment,{}),a=="teacher"&&(e==null?void 0:e.canCreateSchedule)&&t.jsx(n,{title:"Create/Edit Schedule",description:"Create/Edit the rehersal schedule",onClick:()=>{var c;e!=null&&e.isCreatingSchedule?(localStorage.setItem("show-"+i,JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/Show/CreateSchedule/?activityId=${o}&showId=${i}`):(c=r.current)==null||c.showModal()}}),a=="teacher"?t.jsxs(t.Fragment,{children:[t.jsx(n,{title:"Conflict Form",description:"Create/View the conflict form",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/Show/ConflictForm/?activityId=${o}&showId=${i}`}})," "]}):t.jsxs(t.Fragment,{children:[(e==null?void 0:e.conflictForm)&&t.jsx(n,{title:"Conflict Form",description:"Complete/View the conflict form",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/Show/ConflictForm/?activityId=${o}&showId=${i}`}}),t.jsx(n,{title:"Schedule",description:"View Schedule",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/Show/Schedule/?activityId=${o}&showId=${i}`}})]}),t.jsx(n,{title:"Resources",description:"View all resources",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/Show/Resources/?activityId=${o}&showId=${i}`}})]}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href=`/Activity/Shows/?activityId=${o}`},children:"Back"})]})]}),t.jsx(C,{dialogRef:r,close:()=>{var c;(c=r.current)==null||c.close()},confirmed:async()=>{var c;(c=r.current)==null||c.close(),await p(o,i),localStorage.setItem("show-"+i,JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/Show/CreateSchedule/?activityId=${o}&showId=${i}`}})]})}
