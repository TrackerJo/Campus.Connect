import{r as a,j as e,c as _,i as ee}from"./index-DnJ92IFj.js";import{J as te,K,L as se,M as ae,N as ne,O as oe,P as le,Q as re,R as ie,S as ce,T as de,i as ue}from"./db-D-sVwfx4.js";import{q as V,r as w,s as W,G as he,L as me,t as Y,u as E}from"./constants-CQrCYvr3.js";import{A as xe}from"./Add_Location_Dialog-Dmum754P.js";import{g as Ae}from"./distance-CvoZ9uwc.js";import{A as q}from"./Add_User_Dialog-BVcJROsg.js";function ge({addRehearsalLocation:u,close:j,dialogRef:s}){const[n,r]=a.useState(""),[m,i]=a.useState("#000000");return e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Add Rehearsal Location"}),e.jsxs("div",{className:"location-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:n,onChange:c=>{r(c.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:m,onChange:c=>{i(c.target.value)}}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{u(V.fromBlank(n,w(m)))},children:"Add Rehearsal Location"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{j()},children:"Close"})]})]})}const I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAgCAYAAADqgqNBAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAH6ADAAQAAAABAAAAIAAAAABT9vqhAAABMUlEQVRIDe2WO07DQBBAbSsFJE1OQEmgTUGJRDgAxyC5SAo6OAiKUkcK5Ax0IKUDpBSpSOnNG/CKkWVHsr3rRIpXevb6s/N2xlM4CI5hGGNO4BE+YAxRLXkjOoUZ6PHkXY4tgrRYNhF7Tz0Mw5gMn8GkMl2mrt1dklkbrmxE5iPJFmSsoW+fOT0TWMRz2MDABmd+DyvwLsbxO3443qgNdO3c6RmJzfhP+3+UDVw7lelgO8SyhW+41O87mx+q+GtfGYv4wll5dSACd+AFskYj1sWqNqe+Tal1k3lvrldtU/O9invVuihnddJceRl/8rwR59Su4O2jLLX8Vy8ga/hrLvkyGIdZVu75FSfytwx5LeLbHPF5wX4t/jriiZLLj94DnBWPVGIFoneYwh20SoQovWQLokOD66GvfLEAAAAASUVORK5CYII=";function fe({addEventType:u,close:j,dialogRef:s,eventTypes:n}){const[r,m]=a.useState(""),[i,c]=a.useState("#000000");return e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Add Event Type"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:r,onChange:x=>{m(x.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:i,onChange:x=>{c(x.target.value)}}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{if(r==""){alert("Please fill out all fields");return}if(n.find(x=>x.name==r)){alert("Event type with that name already exists");return}u(W.fromBlank(r,w(i)))},children:"Add Event Type"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{j()},children:"Close"})]})]})}function je({editLocation:u,close:j,dialogRef:s,location:n}){const[r,m]=a.useState(""),[i,c]=a.useState(""),[x,v]=a.useState(!1);return a.useEffect(()=>{n&&(m(n.name),c(n.address))},[n]),e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Edit Location"}),e.jsxs("div",{className:"location-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:r,onChange:A=>{m(A.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Address: "}),e.jsx("input",{type:"text",value:i,onChange:A=>{c(A.target.value)}}),e.jsx("br",{}),x?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(v(!0),r==""||i==""){alert("Please fill out all fields"),v(!1);return}let A=n.location;if(i!=n.address){const p=await Ae(i);A=new he(p.lat,p.lon)}await u(me.fromBlank(r,i,A,n.isSchool)),v(!1)},children:"Edit Location"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{j()},children:"Close"})]})]})}function pe({editEventType:u,close:j,dialogRef:s,eventTypes:n,eventType:r}){const[m,i]=a.useState(""),[c,x]=a.useState("#000000"),[v,A]=a.useState(!1);function p(d,b,N,f){return`#${(1<<24|d<<16|b<<8|N).toString(16).slice(1).toUpperCase()}`}return a.useEffect(()=>{r&&(i(r.name),x(p(r.color.red,r.color.green,r.color.blue,r.color.alpha)))},[r]),e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Edit Event Type"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:m,onChange:d=>{i(d.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:c,onChange:d=>{console.log(d.target.value),x(d.target.value)}}),e.jsx("br",{}),v?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(m==""){alert("Please fill out all fields");return}if(n.find(d=>d.name==m&&d.name!=r.name)){alert("An event type with that name already exists");return}A(!0),await u(W.fromBlank(m,w(c))),A(!1)},children:"Edit Event Type"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{j()},children:"Close"})]})]})}function ve({editRehearsalLocation:u,close:j,dialogRef:s,rehearsalLocations:n,rehearsalLocation:r}){const[m,i]=a.useState(""),[c,x]=a.useState("#000000"),[v,A]=a.useState(!1);function p(d,b,N,f){return`#${(1<<24|d<<16|b<<8|N).toString(16).slice(1).toUpperCase()}`}return a.useEffect(()=>{r&&(i(r.name),x(p(r.color.red,r.color.green,r.color.blue,r.color.alpha)))},[r]),e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Edit Rehearsal Location"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Location: "}),e.jsx("input",{type:"text",value:m,onChange:d=>{i(d.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:c,onChange:d=>{console.log(d.target.value),x(d.target.value)}}),e.jsx("br",{}),v?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(m==""){alert("Please fill out all fields");return}if(n.find(d=>d.name==m&&d.name!=r.name)){alert("A rehearsal location with that name already exists");return}A(!0),await u(V.fromBlank(m,w(c))),A(!1)},children:"Edit Rehearsal Location"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{j()},children:"Close"})]})]})}function Ne({editActivityName:u,close:j,dialogRef:s,activityName:n}){const[r,m]=a.useState(""),[i,c]=a.useState(!1);return a.useEffect(()=>{n&&m(n)},[n]),e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Edit Activity Name"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:r,onChange:x=>{m(x.target.value)}}),e.jsx("br",{}),i?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(r==""){alert("Please fill out all fields");return}c(!0),await u(r),c(!1)},children:"Edit Activity Name"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{j()},children:"Close"})]})]})}function ye({editGroup:u,close:j,dialogRef:s,group:n,groups:r,activityStudents:m,activityParents:i}){const[c,x]=a.useState(""),[v,A]=a.useState("#000000"),[p,d]=a.useState([]),[b,N]=a.useState(!1),f=a.useRef(null);function L(g,C,y,B){return`#${(1<<24|g<<16|C<<8|y).toString(16).slice(1).toUpperCase()}`}return a.useEffect(()=>{n&&(x(n.groupName),A(L(n.groupColor.red,n.groupColor.green,n.groupColor.blue,n.groupColor.alpha)),d(n.groupMembers))},[n]),e.jsxs(e.Fragment,{children:[e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Edit Group"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:c,onChange:g=>{x(g.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:v,onChange:g=>{console.log(g.target.value),A(g.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Members: "}),e.jsx("div",{className:"MembersList",children:p.map((g,C)=>e.jsxs("div",{className:"GroupMember",children:[e.jsx("label",{htmlFor:"",children:g.name}),e.jsx("button",{className:"ActionBtn",onClick:()=>{d(p.filter(y=>y!=g))},children:"Remove"})]},C))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{f.current.showModal()},children:"Add Member"}),e.jsx("br",{}),b?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(c==""){alert("Please fill out all fields");return}if(r.find(g=>g.groupName==c&&g.groupName!=n.groupName)){alert("A group with that name already exists");return}N(!0),await u(Y.fromBlank(c,p,w(v))),N(!1)},children:"Save Group"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{j()},children:"Close"})]})]}),e.jsx(q,{students:m,parents:i,teachers:[],dialogRef:f,addedMembers:p,close:()=>{f.current.close()},addUser:g=>{const C=[...p,g],y=[],B=C.filter(S=>y.includes(S.name)?!1:(y.push(S.name),!0));d(B)}})]})}function be({createGroup:u,close:j,dialogRef:s,groups:n,activityStudents:r,activityParents:m}){const[i,c]=a.useState(""),[x,v]=a.useState("#000000"),[A,p]=a.useState([]),[d,b]=a.useState(!1),N=a.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Create Group"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:i,onChange:f=>{c(f.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:x,onChange:f=>{console.log(f.target.value),v(f.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Members: "}),e.jsx("div",{className:"MembersList",children:A.map((f,L)=>e.jsxs("div",{className:"GroupMember",children:[e.jsx("label",{htmlFor:"",children:f.name}),e.jsx("button",{className:"ActionBtn",onClick:()=>{p(A.filter(g=>g!=f))},children:"Remove"})]},L))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{N.current.showModal()},children:"Add Member"}),e.jsx("br",{}),d?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(i==""){alert("Please fill out all fields");return}if(n.find(f=>f.groupName==i)){alert("A group with that name already exists");return}b(!0),await u(Y.fromBlank(i,A,w(x))),b(!1)},children:"Create Group"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{j()},children:"Close"})]})]}),e.jsx(q,{students:r,parents:m,teachers:[],dialogRef:N,addedMembers:A,close:()=>{N.current.close()},addUser:f=>{const L=[...A,f],g=[],C=L.filter(y=>g.includes(y.name)?!1:(g.push(y.name),!0));p(C)}})]})}_(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(Ce,{})}));function Ce(){const[u,j]=a.useState(""),[s,n]=a.useState(null),[r,m]=a.useState("student"),i=a.useRef(null),c=a.useRef(null),x=a.useRef(null),[v,A]=a.useState([]),[p,d]=a.useState([]),[b,N]=a.useState([]),[f,L]=a.useState([]),[g,C]=a.useState(!0),[y,B]=a.useState(void 0),[S,H]=a.useState(void 0),[P,J]=a.useState(void 0),[U,X]=a.useState(void 0),k=a.useRef(null),T=a.useRef(null),M=a.useRef(null),G=a.useRef(null),F=a.useRef(null),D=a.useRef(null),[O,z]=a.useState([]),[Q,Z]=a.useState([]);return a.useEffect(()=>{async function t(){C(!0),ee(()=>{});const o=new URLSearchParams(window.location.search).get("activityId");if(o){j(o);const $=await de();L($)}const h=await ue(o);h&&(n(h),h instanceof E&&A(h.rehearsalLocations),d(h.eventTypes),N(h.groups),z(h.students),Z(h.parents));const R=localStorage.getItem("accountType");R&&m(R),C(!1)}t()},[]),e.jsxs(e.Fragment,{children:[g?e.jsx("div",{className:"center",children:e.jsx("div",{className:"loader"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"title",children:[e.jsxs("h1",{children:["Activity: ",s==null?void 0:s.name]}),e.jsxs("h3",{children:["Join Code: ",s==null?void 0:s.joinCode]}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=G.current)==null||t.showModal()},children:"Edit Activity Name"}),e.jsx("h2",{children:"Saved Locations"}),e.jsx("div",{className:"saved-locations",children:s==null?void 0:s.locations.map((t,l)=>(console.log(t),e.jsxs("div",{className:"saved-location",children:[e.jsxs("label",{htmlFor:"",className:"saved-location-name",children:[t.name," (",t.address,")"]}),e.jsx("img",{src:I,alt:"edit",className:"saved-location-edit",onClick:()=>{var o;B(t),(o=k.current)==null||o.showModal()}})]},l)))}),e.jsx("button",{className:"ActionBtn",onClick:t=>{var l;(l=c.current)==null||l.showModal()},children:"Add Location"}),s instanceof E&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Rehearsal Locations"}),e.jsx("div",{className:"rehearsal-locations",children:v.map((t,l)=>(console.log(t.color),e.jsxs("div",{className:"rehearsal-location",children:[e.jsx("label",{htmlFor:"",className:"rehearsal-location-name",children:t.name}),e.jsxs("div",{className:"rehearsal-location-right",children:[e.jsx("div",{className:"rehearsal-location-color",style:{backgroundColor:t.color.toRBGAString()}}),e.jsx("img",{src:I,alt:"",onClick:o=>{var h;J(t),(h=M.current)==null||h.showModal()}})]})]})))}),e.jsx("button",{className:"ActionBtn",onClick:t=>{var l;(l=i.current)==null||l.showModal()},children:"Add Rehearsal Location"})," "]}),e.jsx("h2",{children:"Event Types"}),e.jsx("div",{className:"event-types",children:p.map((t,l)=>e.jsxs("div",{className:"event-type",children:[e.jsx("label",{htmlFor:"",className:"event-type-name",children:t.name}),e.jsxs("div",{className:"event-type-right",children:[e.jsx("div",{className:"event-type-color",style:{backgroundColor:t.color.toRBGAString()}}),e.jsx("img",{src:I,alt:"",onClick:()=>{var o;H(t),(o=T.current)==null||o.showModal()}})]})]}))}),e.jsx("button",{className:"ActionBtn",onClick:t=>{var l;(l=x.current)==null||l.showModal()},children:"Add Event Type"}),e.jsx("br",{}),e.jsx("h2",{children:"Groups"}),e.jsx("div",{className:"event-types",children:b.map((t,l)=>e.jsxs("div",{className:"event-type",children:[e.jsx("label",{htmlFor:"",className:"event-type-name",children:t.groupName}),e.jsxs("div",{className:"event-type-right",children:[e.jsx("div",{className:"event-type-color",style:{backgroundColor:t.groupColor.toRBGAString()}}),e.jsx("img",{src:I,alt:"",onClick:()=>{var o;X(t),(o=F.current)==null||o.showModal()}})]})]}))}),e.jsx("button",{className:"ActionBtn",onClick:t=>{var l;(l=D.current)==null||l.showModal()},children:"Create Group"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/?activityId="+u},children:"Back"})]}),e.jsx(ge,{dialogRef:i,addRehearsalLocation:async t=>{var l;if(s instanceof E){const o=[...s.rehearsalLocations];o.push(t),s.rehearsalLocations=o,console.log(o),A(o),await te(u,o),(l=i.current)==null||l.close()}},close:()=>{var t;(t=i.current)==null||t.close()}}),e.jsx(xe,{dialogRef:c,close:()=>{var t;(t=c.current)==null||t.close()},addLocation:async function(t){var l,o;if(f.find(h=>h.name==t.name)){await K(u,t),(l=c.current)==null||l.close(),s.locations.push(t),n(s);return}await K(u,t),await se(t),L(h=>[...h,t]),s.locations.push(t),n(s),(o=c.current)==null||o.close()},savedLocations:f.filter(t=>!s.locations.find(l=>t.name==l.name))}),e.jsx(fe,{dialogRef:x,close:()=>{var t;(t=x.current)==null||t.close()},addEventType:async t=>{var o;const l=[...s.eventTypes];l.push(t),d(l),await ae(u,t),(o=x.current)==null||o.close()},eventTypes:s.eventTypes})]}),e.jsx(je,{dialogRef:k,close:()=>{var t;(t=k.current)==null||t.close()},location:y,editLocation:async t=>{var h;const o=[...s.locations].findIndex(R=>R.name==y.name);s.locations.splice(o,1),s.locations.push(t),console.log(s),await ne(u,t,y),n(s),window.location.reload(),(h=k.current)==null||h.close()}}),e.jsx(pe,{eventTypes:(s==null?void 0:s.eventTypes)??[],dialogRef:T,close:()=>{var t;(t=T.current)==null||t.close()},eventType:S,editEventType:async t=>{var h;const o=[...s.eventTypes].findIndex(R=>R.name==S.name);s.eventTypes.splice(o,1),s.eventTypes.push(t),console.log(s),await oe(u,t,S,s instanceof E),n(s),window.location.reload(),(h=T.current)==null||h.close()}}),s instanceof E&&e.jsx(ve,{rehearsalLocations:s.rehearsalLocations,dialogRef:M,close:()=>{var t;(t=M.current)==null||t.close()},rehearsalLocation:P,editRehearsalLocation:async t=>{var h;const o=[...s.rehearsalLocations].findIndex(R=>R.name==P.name);s.rehearsalLocations.splice(o,1),s.rehearsalLocations.push(t),console.log(s),await le(u,t,P),n(s),window.location.reload(),(h=M.current)==null||h.close()}}),e.jsx(Ne,{dialogRef:G,close:()=>{var t;(t=G.current)==null||t.close()},activityName:s==null?void 0:s.name,editActivityName:async t=>{var l;await re(u,t),n(o=>o?(o.name=t,o):null),window.location.reload(),(l=G.current)==null||l.close()}}),e.jsx(ye,{dialogRef:F,activityParents:Q,activityStudents:O,groups:b,close:()=>{var t;(t=F.current)==null||t.close()},group:U,editGroup:async t=>{var h;const o=[...s.groups].findIndex(R=>R.groupName==U.groupName);s.groups.splice(o,1),s.groups.push(t),console.log(s),await ie(u,t,U),n(s),window.location.reload(),(h=F.current)==null||h.close()}}),e.jsx(be,{dialogRef:D,close:()=>{var t;(t=D.current)==null||t.close()},groups:b,activityParents:Q,activityStudents:O,createGroup:async t=>{var o;const l=[...s.groups];l.push(t),N(l),await ce(u,t),(o=D.current)==null||o.close()}})]})}
