import{j as n,c as Ne,r as u,i as Le}from"./index-U3pxML4x.js";import{j as Me,c as b,e as _,d as C,F as J,k as ye,l as Re}from"./constants-CrK5oAWg.js";import{i as Be,w as He,q as $e,x as Ge,y as Ye,z as Oe,A as Pe}from"./db-QQbn-pwJ.js";import{A as _e,S as Ue,D as ze,C as Je,E as Ve,a as qe}from"./Show_Group_Display_Tile-DkGRkKqe.js";import{B as me,C as We}from"./Calendar-BG4YQB9j.js";import{C as Ke,S as Qe}from"./Show_Group_Tile-CHoPKXi2.js";import{E as Xe}from"./Ensemble_Section_Tile-DXys-Uwj.js";import{F as Ze}from"./Full_Cast_Tile-CJX3OvfU.js";import"./trash-BnpXJPEK.js";import"./arrow_forward-CHD_SwLW.js";function he({conflictResponseDate:v,actor:K}){return n.jsx("div",{className:"ConflictDisplayTile ",id:"conflict-display-tile-"+K.userId,children:n.jsx("div",{className:"header",children:n.jsxs("div",{className:"CharacterNameDiv",children:[n.jsxs("label",{htmlFor:"Actor",children:["Actor: ",K.name]}),n.jsx("br",{}),n.jsxs("label",{htmlFor:"Actor",children:["Date: ",v.date.toDateString()]}),n.jsx("br",{}),v.canAttend?n.jsxs("label",{htmlFor:"Actor",children:[v.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",v.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):n.jsx("label",{htmlFor:"Actor",children:"Can't Attend"})]})})})}Ne(document.getElementById("root")).render(n.jsx(u.StrictMode,{children:n.jsx(et,{})}));function et(){const[v,K]=u.useState(""),[l,Se]=u.useState(),[V,be]=u.useState(""),[i,je]=u.useState(),[U,g]=u.useState("date"),[M,D]=u.useState(null),[y,T]=u.useState(null),[R,w]=u.useState(null),[B,F]=u.useState("custom"),[q,j]=u.useState(""),[W,N]=u.useState(""),[xe,E]=u.useState(""),[Ce,A]=u.useState(""),[L,H]=u.useState(void 0),[ge,ae]=u.useState(!1),[z,Q]=u.useState([]),[X,Z]=u.useState([]),[p,m]=u.useState([]),[ce,$]=u.useState(!1),[h,ve]=u.useState([]),[re,f]=u.useState([]),[ie,De]=u.useState(!1),[I,k]=u.useState(null),[ee,te]=u.useState(!1),[Te,we]=u.useState(null),[G,Y]=u.useState(),[O,P]=u.useState(void 0),[se,pe]=u.useState(!1),[le,de]=u.useState(!1),[ue,Ee]=u.useState([]),[x,Ae]=u.useState(void 0),[Ie,ne]=u.useState(!1);u.useEffect(()=>{Le(()=>{});const a=new URLSearchParams(window.location.search),c=a.get("activityId");c&&(K(c),Be(c).then(t=>{t instanceof Me||(Se(t),Y(t==null?void 0:t.rehearsalLocations[0]),P(t==null?void 0:t.eventTypes[0]),H(t==null?void 0:t.defaultLocation))}));const e=a.get("showId");e&&(be(e),He(c,e).then(t=>{const s=[];for(const r of t)for(const d of r.dates)s.find(S=>S.conflictResponseDate.date.getTime()==d.date.getTime()&&S.actor.userId==r.actor.userId)||s.push({conflictResponseDate:d,actor:r.actor});s.sort((r,d)=>r.conflictResponseDate.date.getTime()-d.conflictResponseDate.date.getTime()),ve(s),f([...s])})),$e(c,e).then(t=>{je(t),t!=null&&t.hasEnsemble&&Ee(t.ensemble.actors)}),Ge(c,e).then(t=>{Q(t);const s=[];for(const r of t){console.log(r);const d=r.date.from;console.log(r.date.date),d.setDate(r.date.date.getDate()),d.setMonth(r.date.date.getMonth()),d.setFullYear(r.date.date.getFullYear());const S=r.date.to;S.setDate(r.date.date.getDate()),S.setMonth(r.date.date.getMonth()),S.setFullYear(r.date.date.getFullYear()),console.log(d),console.log(S),console.log(r.rehearsalLocation.color),s.push({title:r.name,start:d.toISOString(),end:S.toISOString(),isAllDay:!1,interactive:!0,color:r.rehearsalLocation.color.setAlpha(.8).toHex(),description:r.info,id:r.id,location:r.rehearsalLocation.name})}Z(s)});const o=()=>{window.innerWidth<800?pe(!0):pe(!1)};return window.addEventListener("resize",o),o(),()=>window.removeEventListener("resize",o)},[]);const ke=a=>{const c=a.target.value,[e,o]=c.split(":").map(Number),t=new Date(M);t.setHours(e,o,0,0),T(t),E(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},Fe=a=>{const c=a.target.value,[e,o]=c.split(":").map(Number),t=new Date(M);t.setHours(e,o,0,0),w(t),A(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};Date.prototype.addHours=function(a){return this.setTime(this.getTime()+a*60*60*1e3),this};function oe(){return z}return n.jsxs("div",{className:"center",children:[n.jsx("h1",{className:"title",children:"Create Schedule"}),U=="date"?n.jsxs("div",{className:"page-title",children:[n.jsx("img",{src:me,alt:"back arrow",onClick:()=>{window.location.href="/Activity/Shows/Show/?activityId="+v+"&showId="+V}}),n.jsx("h2",{className:"mode",children:"Select a Date"})," "]}):n.jsx(n.Fragment,{}),n.jsxs("div",{className:"container",children:[U=="date"?n.jsx(n.Fragment,{children:n.jsxs("div",{className:"box left",children:[n.jsxs("h2",{children:["Conflicts",I!=null?" on "+I.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:le,onChange:a=>{if(de(a.target.checked),a.target.checked){const c=[];for(const e of h)ue.find(o=>o.userId==e.actor.userId)||(I!=null?e.conflictResponseDate.date.getTime()==I.getTime()&&c.push(e):c.push(e));f(c)}else if(I!=null){const c=[];for(const e of h)e.conflictResponseDate.date.getTime()==I.getTime()&&c.push(e);f(c)}else f([...h])}}),n.jsx("span",{className:"checkmark",children:" "})]})," "]}),n.jsx("div",{className:"conflicts",children:re.map((a,c)=>n.jsx(he,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},c))})]})}):n.jsx(n.Fragment,{}),n.jsx("div",{className:U!="date"?"datePicker hidden":"datePicker",children:n.jsx(We,{canViewConflicts:!0,canPaste:x!=null,canCopy:!0,copyEvent:a=>{const c=oe().find(e=>e.id==a.id);Ae(c)},pasteEvent:a=>{const c=new Date(a);c.setHours(0,0,0,0),D(c),T(new Date(x.date.from)),E(x.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const e=new Date(x.date.to);w(e),console.log(e),A(e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),j(x.name),N(x.info),H(x.location),Y(x.rehearsalLocation),m(x.characters),P(x.activityEventType),F(x.theaterEventType),g("info"),ne(!0)},isCreating:!0,canOpenContextMenu:!0,events:X,editEvent:a=>{const c=oe().find(e=>e.id==a.id);c&&(console.log(c),g("info"),j(c.name),N(c.info),D(c.date.date),T(c.date.from),E(c.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),w(c.date.to),A(c.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),H(c.location),Y(c.rehearsalLocation),m(c.characters),P(c.activityEventType),te(!0),F(c.theaterEventType),we(c))},viewEvent:a=>{const c=oe().find(e=>e.id==a.id);c&&(localStorage.setItem("event",JSON.stringify(c.toMap())),localStorage.setItem("back","/Activity/Shows/Show/CreateSchedule/?activityId="+v+"&showId="+V),window.location.href="/Calendar/Event/")},viewConflicts:a=>{const c=new Date(a);c.setHours(0,0,0,0),k(c);const e=[];for(const o of h)o.conflictResponseDate.date.getTime()==c.getTime()&&e.push(o);f(e)},deleteEvent:async a=>{console.log(a);const c=z.find(t=>t.id==a.id),e=z.filter(t=>t.id!=a.id);Q(e);const o=X.filter(t=>t.id!=a.id);Z(o),await Ye(c)},dateClick:a=>{console.log(a.date),D(a.date);const c=new Date(a.date);c.setHours(0,0,0,0),k(c);const e=[];for(const t of h)t.conflictResponseDate.date.getTime()==c.getTime()&&e.push(t);f(e),T(new Date(a.date)),E(a.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(a.date);w(o.addHours(1)),console.log(o),A(a.date.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),g("type")},eventClick:a=>{if(se){const t=oe().find(s=>s.id==a.event.id);t&&(localStorage.setItem("event",JSON.stringify(t.toMap())),localStorage.setItem("back","/Activity/Shows/Show/CreateSchedule/?activityId="+v+"&showId="+V),window.location.href="/Calendar/Event/");return}D(a.event.start);const c=new Date(a.event.start);c.setHours(0,0,0,0),k(c);const e=[];for(const t of h)t.conflictResponseDate.date.getTime()==c.getTime()&&e.push(t);f(e),T(new Date(a.event.start)),E(a.event.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(a.event.end);w(o),A(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),g("type")}})}),U=="date"?n.jsx(n.Fragment,{}):n.jsx(n.Fragment,{})]}),U=="date"?n.jsxs(n.Fragment,{children:[se&&n.jsx("button",{className:"ActionBtn",onClick:()=>{const a=new Date;console.log(a),D(a);const c=new Date(a);c.setHours(0,0,0,0),k(c);const e=[];for(const t of h)t.conflictResponseDate.date.getTime()==c.getTime()&&e.push(t);f(e),T(new Date(a)),E(a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(a);w(o.addHours(1)),console.log(o),A(a.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),g("type")},children:"Create Event"}),n.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(z)),window.open("/Activity/Shows/Show/Schedule/Print/","_blank")},children:"Print"}),n.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/Shows/Show/?activityId="+v+"&showId="+V},children:"Back"})]}):U=="type"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"page-title",children:[n.jsx("img",{src:me,alt:"back arrow",onClick:()=>{g("date"),k(null),f([...h])}}),n.jsx("h2",{className:"mode",children:"Select a Rehersal Type"})]}),!se&&n.jsxs("div",{className:"conflicts-div",children:[n.jsxs("h2",{children:["Conflicts",I!=null?" on "+I.toDateString():""]}),n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),(i==null?void 0:i.hasEnsemble)&&n.jsx(n.Fragment,{children:n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:le,onChange:a=>{if(de(a.target.checked),a.target.checked){const c=[],e=new Date(M);e.setHours(0,0,0,0);for(const o of h)ue.find(t=>t.userId==o.actor.userId)||o.conflictResponseDate.date.getTime()==e.getTime()&&c.push(o);f(c)}}}),n.jsx("span",{className:"checkmark",children:" "})]})}),n.jsx("div",{className:"conflicts",children:re.map((a,c)=>n.jsx(he,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},c))})]}),n.jsx("button",{onClick:()=>{g("info"),F("custom"),m([])},className:"ActionBtn",children:"Custom"}),n.jsx("h2",{className:"mode",children:"Show Layout"}),n.jsx("div",{className:"layout",children:i==null?void 0:i.layout.map((a,c)=>n.jsx(_e,{act:a,onClick:e=>{F("scene"),j(e.name+" - "+a.name),g("info"),m(e.characters);const o=[];for(const s of e.characters)if(s instanceof b)o.includes(s.actor.userId)&&o.push(s.actor.userId);else if(s instanceof _){for(const r of s.characters)if(r instanceof b)o.includes(r.actor.userId)&&o.push(r.actor.userId);else if(r instanceof C){if(r.includeAll)for(const d of i.ensemble.actors)o.includes(d.userId)&&o.push(d.userId);else if(r.includeMale)for(const d of i.ensemble.actors)d.gender=="male"&&o.includes(d.userId)&&o.push(d.userId);else if(r.includeFemale)for(const d of i.ensemble.actors)d.gender=="female"&&o.includes(d.userId)&&o.push(d.userId);else if(r.includeCustom)for(const d of r.customActors)o.includes(d.userId)&&o.push(d.userId)}}else if(s instanceof C){if(s.includeAll)for(const r of i.ensemble.actors)o.includes(r.userId)&&o.push(r.userId);else if(s.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&o.includes(r.userId)&&o.push(r.userId);else if(s.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&o.includes(r.userId)&&o.push(r.userId);else if(s.includeCustom)for(const r of s.customActors)o.includes(r.userId)&&o.push(r.userId)}else if(s instanceof J){for(const r of i.ensemble.actors)o.includes(r.userId)&&o.push(r.userId);for(const r of i.characters)o.includes(r.actor.userId)||o.push(r.actor.userId)}const t=[];for(const s of h)o.includes(s.actor.userId)&&s.conflictResponseDate.date.getTime()==I.getTime()&&t.push(s);f(t)}},c))}),n.jsx("h2",{className:"mode",children:"Songs"}),n.jsx("div",{className:"songs",children:i==null?void 0:i.songs.map((a,c)=>n.jsx(Ue,{song:a,onClick:()=>{F("song"),j(a.name),m(a.characters),g("info");const e=[];for(const t of a.characters)if(t instanceof b)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof _){for(const s of t.characters)if(s instanceof b)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof C){if(s.includeAll)for(const r of i.ensemble.actors)e.includes(r.userId)&&e.push(r.userId);else if(s.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&e.includes(r.userId)&&e.push(r.userId);else if(s.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&e.includes(r.userId)&&e.push(r.userId);else if(s.includeCustom)for(const r of s.customActors)e.includes(r.userId)&&e.push(r.userId)}}else if(t instanceof C){if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(t instanceof J){for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);for(const s of i.characters)e.includes(s.actor.userId)||e.push(s.actor.userId)}const o=[];for(const t of h)e.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==I.getTime()&&o.push(t);f(o)}},c))}),n.jsx("h2",{className:"mode",children:"Dances"}),n.jsx("div",{className:"dances",children:i==null?void 0:i.dances.map((a,c)=>n.jsx(ze,{dance:a,onClick:()=>{F("dance"),j(a.name),g("info"),m(a.characters);const e=[];for(const t of a.characters)if(t instanceof b)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof _){for(const s of t.characters)if(s instanceof b)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof C){if(s.includeAll)for(const r of i.ensemble.actors)e.includes(r.userId)&&e.push(r.userId);else if(s.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&e.includes(r.userId)&&e.push(r.userId);else if(s.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&e.includes(r.userId)&&e.push(r.userId);else if(s.includeCustom)for(const r of s.customActors)e.includes(r.userId)&&e.push(r.userId)}}else if(t instanceof C){if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(t instanceof J){for(const s of i.ensemble.actors)e.push(s.userId);for(const s of i.characters)e.includes(s.actor.userId)||e.push(s.actor.userId)}const o=[];for(const t of h)e.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==I.getTime()&&o.push(t);f(o)}},c))}),n.jsx("button",{onClick:()=>{g("date"),k(null),f([...h])},className:"ActionBtn",children:"Back"})]}):n.jsxs(n.Fragment,{children:[!se&&n.jsxs("div",{className:"conflicts-div",children:[n.jsxs("h2",{children:["Conflicts",I!=null?" on "+I.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:le,onChange:a=>{if(de(a.target.checked),a.target.checked){const c=[],e=[];for(const o of p)if(o instanceof b)e.includes(o.actor.userId)&&e.push(o.actor.userId);else if(o instanceof _){for(const t of o.characters)if(t instanceof b)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(o instanceof C){if(o.includeAll)for(const t of i.ensemble.actors)e.includes(t.userId)&&e.push(t.userId);else if(o.includeMale)for(const t of i.ensemble.actors)t.gender=="male"&&e.includes(t.userId)&&e.push(t.userId);else if(o.includeFemale)for(const t of i.ensemble.actors)t.gender=="female"&&e.includes(t.userId)&&e.push(t.userId);else if(o.includeCustom)for(const t of o.customActors)e.includes(t.userId)&&e.push(t.userId)}else{for(const t of i.ensemble.actors)e.push(t.userId);for(const t of i.characters)e.includes(t.actor.userId)||e.push(t.actor.userId)}for(const o of h)ue.find(t=>t.userId==o.actor.userId)||e.includes(o.actor.userId)&&o.conflictResponseDate.date.getTime()==I.getTime()&&c.push(o);f(c)}}}),n.jsx("span",{className:"checkmark",children:" "})]})," "]}),n.jsx("div",{className:"conflicts",children:re.map((a,c)=>n.jsx(he,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},c))})]}),n.jsxs("div",{className:"page-title",children:[n.jsx("img",{src:me,alt:"back arrow",onClick:()=>{if(ee){g("date"),D(null),T(null),w(null),F("custom"),j(""),N(""),E(""),A(""),Y(l==null?void 0:l.rehearsalLocations[0]),P(l==null?void 0:l.eventTypes[0]),H(l==null?void 0:l.defaultLocation),$(!1),k(null),f(h),te(!1);return}Ie?(ne(!1),g("date")):g("type"),N(""),j(""),$(!1);const a=[];for(const c of h)c.conflictResponseDate.date.getTime()==I.getTime()&&a.push(c);f(a)}}),n.jsx("h2",{className:"mode",children:"Enter Rehersal Information"})]}),n.jsx("label",{htmlFor:"Name",children:"Name: "}),n.jsx("input",{type:"text",value:q,onChange:a=>{j(a.target.value)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"Description",children:"Description: "}),n.jsx("textarea",{value:W,onChange:a=>{N(a.target.value)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"",children:"Date: "}),n.jsx("input",{type:"date",value:M==null?void 0:M.toISOString().split("T")[0],onChange:a=>{const c=new Date(a.target.value);if(c=="Invalid Date"){D(null);return}c.setHours(0,0,0,0),c.setDate(c.getDate()+1),D(c);const e=new Date(c);e.setHours(y.getHours(),y.getMinutes(),0,0),T(e),E(e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(c);o.setHours(R.getHours(),R.getMinutes(),0,0),w(o),A(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),k(c);const t=[];for(const s of h)s.conflictResponseDate.date.getTime()==c.getTime()&&t.push(s);f(t)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),n.jsx("input",{type:"time",value:xe,onChange:ke}),n.jsx("br",{}),n.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),n.jsx("input",{type:"time",value:Ce,onChange:Fe}),n.jsx("br",{}),n.jsx("label",{htmlFor:"location",children:"Location: "}),n.jsx("select",{name:"location",id:"location",onChange:a=>{H(l==null?void 0:l.locations.find(c=>c.name==a.target.value))},children:l==null?void 0:l.locations.map((a,c)=>n.jsx("option",{value:a.name,selected:(L==null?void 0:L.name)==a.name,children:a.name+" ("+a.address+")"},c))}),n.jsx("br",{}),n.jsx("label",{htmlFor:"location",children:"Rehersal Location: "}),n.jsx("select",{name:"location",id:"rehersal-location",onChange:a=>{Y(l==null?void 0:l.rehearsalLocations.find(c=>c.name==a.target.value))},children:l==null?void 0:l.rehearsalLocations.map((a,c)=>n.jsx("option",{value:a.name,selected:(G==null?void 0:G.name)==a.name,children:a.name},c))}),n.jsx("br",{}),n.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),n.jsx("select",{name:"eventType",id:"event-type",onChange:a=>{P(l==null?void 0:l.eventTypes.find(c=>c.name==a.target.value))},children:l==null?void 0:l.eventTypes.map((a,c)=>n.jsx("option",{value:a.name,selected:(O==null?void 0:O.name)==a.name,children:a.name},c))}),n.jsx("br",{}),B=="custom"?n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"fullCast",children:"Full Cast: "}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:ie,onChange:a=>De(a.target.checked)}),n.jsx("span",{className:"checkmark"})]})]}):n.jsx(n.Fragment,{}),B=="custom"&&n.jsx("br",{}),ie?n.jsx(n.Fragment,{}):n.jsxs(n.Fragment,{children:[" ",n.jsx("h2",{children:"Characters"}),n.jsx("div",{className:"characters",children:p.map((a,c)=>{if(a instanceof b)return B=="custom"?n.jsx(Ke,{character:a,isCreate:!1,actors:[],characters:i.characters,isAssign:!1,setCharacter:e=>{m(p.map((o,t)=>t===c?e:o))},removeCharacter:()=>{m(p.filter((e,o)=>o!==c))}},c):n.jsx(Je,{character:a,canDelete:!0,onDelete:()=>{m(p.filter((e,o)=>o!==c))},isMini:!1},c);if(a instanceof C)return B=="custom"?n.jsx(Xe,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:a,isCustom:!0,setEnsembleSection:e=>{m(p.map((o,t)=>t===c?e:o))},removeEnsembleSection:()=>{m(p.filter((e,o)=>o!==c)),$(!1)},isCreate:!1,isAssign:!1,actors:l.students},c):n.jsx(Ve,{ensembleSection:a,canDelete:!0,onDelete:()=>{m(p.filter((e,o)=>o!==c))},isMini:!1},c);if(a instanceof _)return B=="custom"?n.jsx(Qe,{showGroup:a,characters:i.characters,setShowGroup:e=>{m(p.map((o,t)=>t===c?e:o))},removeShowGroup:()=>{m(p.filter((e,o)=>o!==c))},isCreate:!1,isAssign:!1,actors:l.students,hasEnsemble:i.hasEnsemble,showGroups:i.showGroups},c):n.jsx(qe,{showGroup:a,showCharacters:!0,canClick:!1,onClick:()=>{},canDelete:!0,onDelete:()=>{m(p.filter((e,o)=>o!==c))}},c);if(a instanceof J)return n.jsx(Ze,{canDelete:!0,onDelete:()=>{m(p.filter((e,o)=>o!==c))}},c)})}),B=="custom"?n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);m([...p,b.fromBlank("Character 1",null,a)])},children:"Add Character"}),n.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);m([...p,_.fromBlank("Show Group 1",[],a)])},children:"Add Show Group"}),(i==null?void 0:i.hasEnsemble)&&n.jsx("button",{className:"ActionBtn "+(ce?"disabled":""),disabled:ce,onClick:()=>{ce||($(!0),m([...p,C.fromBlank(!0,!1,!1,!1,[])]))},children:"Add Ensemble"})," "]}):n.jsx(n.Fragment,{})," "]}),n.jsx("br",{}),ge?n.jsx("div",{className:"loader"}):n.jsx("button",{onClick:async()=>{if(ae(!0),console.log(`Name: ${q}, Description: ${W}, Start Time: ${y}, End Time: ${R}, Selected Location: ${L}, Rehearsal Location: ${G}, Event Type: ${O}`),q==""||W==""||y==null||R==null||L==null||G==null||O==null){alert("Please fill out all fields"),console.log(`Name: ${q}, Description: ${W}, Start Time: ${y}, End Time: ${R}, Selected Location: ${L}, Rehearsal Location: ${G}, Event Type: ${O}`),ae(!1);return}console.log("Submit");const a=L??l.locations[0];console.log(y),console.log(R);const c=ye.fromBlank(M,y,R);console.log(c.toMap());const e=[];if(ie){p.push(new J);for(const t of i.ensemble.actors)e.push(t);for(const t of i.characters)e.find(s=>s.userId==t.actor.userId)==null&&e.push(t.actor)}else for(const t of p){if(t instanceof J){for(const s of i.ensemble.actors)e.push(s);for(const s of i.characters)e.find(r=>r.userId==s.actor.userId)==null&&e.push(s.actor);break}if(t instanceof b){if(e.find(s=>s.userId==t.actor.userId)!=null)continue;e.push(t.actor)}if(t instanceof C){if(t.includeAll)for(const s of i.ensemble.actors)e.find(r=>r.userId==s.userId)==null&&e.push(s);else if(t.includeMale){for(const s of i.ensemble.actors)if(s.gender=="male"){if(e.find(r=>r.userId==s.userId)!=null)continue;e.push(s)}}else if(t.includeFemale){for(const s of i.ensemble.actors)if(s.gender=="female"){if(e.find(r=>r.userId==s.userId)!=null)continue;e.push(s)}}else if(t.includeCustom)for(const s of t.customActors)e.find(r=>r.userId==s.userId)==null&&e.push(s)}if(t instanceof _)for(const s of t.characters){if(s instanceof b){if(e.find(r=>r.userId==s.actor.userId)!=null)continue;e.push(s.actor)}if(s instanceof C){if(s.includeAll)for(const r of i.ensemble.actors)e.find(d=>d.userId==r.userId)==null&&e.push(r);else if(s.includeMale){for(const r of i.ensemble.actors)if(r.gender=="male"){if(e.find(d=>d.userId==r.userId)!=null)continue;e.push(r)}}else if(s.includeFemale){for(const r of i.ensemble.actors)if(r.gender=="female"){if(e.find(d=>d.userId==r.userId)!=null)continue;e.push(r)}}else if(s.includeCustom)for(const r of s.customActors)e.find(d=>d.userId==r.userId)==null&&e.push(r)}}}const o=Re.fromBlank(q,W,a,c,"activity-theater-event",Date.now(),v,l.name,V,i.name,p,e,B,O,G);if(console.log(o),ee){o.id=Te.id,await Oe(o),te(!1);const t=o.date.from,s=o.date.to;t.setDate(o.date.date.getDate()),t.setMonth(o.date.date.getMonth()),t.setFullYear(o.date.date.getFullYear()),s.setDate(o.date.date.getDate()),s.setMonth(o.date.date.getMonth()),s.setFullYear(o.date.date.getFullYear());const r={title:o.name,start:t.toISOString(),end:s.toISOString(),isAllDay:!1,interactive:!0,description:o.info,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),location:o.rehearsalLocation.name,id:o.id},d=X.filter(fe=>fe.id!=o.id);d.push(r),Z(d);const S=z.filter(fe=>fe.id!=o.id);S.push(o),console.log(S),Q([...S])}else{await Pe(o);const t=o.date.from,s=o.date.to;t.setDate(o.date.date.getDate()),t.setMonth(o.date.date.getMonth()),t.setFullYear(o.date.date.getFullYear()),s.setDate(o.date.date.getDate()),s.setMonth(o.date.date.getMonth()),s.setFullYear(o.date.date.getFullYear());const r={title:o.name,start:t.toISOString(),end:s.toISOString(),isAllDay:!1,interactive:!0,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),id:o.id,location:o.rehearsalLocation.name,description:o.info};Z([...X,r]),Q([...z,o])}ae(!1),g("date"),D(null),T(null),w(null),F("custom"),j(""),N(""),E(""),A(""),Y(l==null?void 0:l.rehearsalLocations[0]),P(l==null?void 0:l.eventTypes[0]),H(l==null?void 0:l.defaultLocation),m([]),$(!1),k(null),f(h),ne(!1)},className:"ActionBtn",children:ee?"Save":"Submit"}),!ge&&n.jsx("button",{onClick:()=>{if(ee){g("date"),D(null),T(null),w(null),F("custom"),j(""),N(""),E(""),A(""),Y(l==null?void 0:l.rehearsalLocations[0]),P(l==null?void 0:l.eventTypes[0]),H(l==null?void 0:l.defaultLocation),$(!1),k(null),f(h),te(!1);return}Ie?(ne(!1),g("date")):g("type"),N(""),j(""),$(!1);const a=[];for(const c of h)c.conflictResponseDate.date.getTime()==I.getTime()&&a.push(c);f(a)},className:"ActionBtn",children:"Back"})]})]})}
