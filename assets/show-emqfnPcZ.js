import{j as e,c as I,r as n,i as x}from"./index-CD-2aNdv.js";import{D as s}from"./Dashboard_Tile-CNvFDKrJ.js";import{n as j,s as p}from"./db-0HtC02SG.js";import"./constants-DdpxrMsB.js";function v({close:o,confirmed:l,dialogRef:i}){return e.jsx("dialog",{ref:i,children:e.jsxs("div",{className:"ConfirmCreateScheduleDialog",children:[e.jsx("h2",{children:"Confirm Creating Schedule"}),e.jsx("label",{htmlFor:"",children:"Once you start to create the schedule, you will not be able to edit the show template. Do you wish to continue?"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{l()},children:"Yes"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{o()},children:"No"})]})})}I(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(C,{})}));function C(){const[o,l]=n.useState(""),[i,u]=n.useState(""),[t,g]=n.useState(),[r,w]=n.useState("student"),[y,S]=n.useState(!0),a=n.useRef(null);return n.useEffect(()=>{S(!0),x(()=>{});const c=new URLSearchParams(window.location.search),d=c.get("activityId");d&&l(d);const h=c.get("showId");h&&u(h),j(d,h).then(f=>{g(f),console.log(f),S(!1)});const m=localStorage.getItem("accountType");m&&w(m)},[]),e.jsxs(e.Fragment,{children:[y?e.jsxs("div",{className:"center",children:[" ",e.jsx("div",{className:"loader"})]}):e.jsxs(e.Fragment,{children:[" ",e.jsx("div",{className:"title",children:e.jsx("h1",{children:t==null?void 0:t.name})}),e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:"tiles",children:[r=="teacher"&&!(t!=null&&t.isCreatingSchedule)?e.jsxs(e.Fragment,{children:[" ",e.jsx(s,{title:"Edit Show Template",description:"Edit the show template",onClick:()=>{localStorage.setItem("show",JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/CreateTemplate/?activityId=${o}&isEditing=true&showId=${i}`}})," "]}):e.jsx(e.Fragment,{}),r=="teacher"?e.jsxs(e.Fragment,{children:[" ",e.jsx(s,{title:"Assign Roles",description:"Assign roles to characters",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/Show/Assign/?activityId=${o}&showId=${i}`}})]}):e.jsx(e.Fragment,{}),r=="teacher"&&(t==null?void 0:t.canCreateSchedule)&&e.jsx(s,{title:"Create/Edit Schedule",description:"Create/Edit the rehersal schedule",onClick:()=>{var c;t!=null&&t.isCreatingSchedule?(localStorage.setItem("show-"+i,JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/Show/CreateSchedule/?activityId=${o}&showId=${i}`):(c=a.current)==null||c.showModal()}}),r=="teacher"?e.jsxs(e.Fragment,{children:[e.jsx(s,{title:"Conflict Form",description:"Create/View the conflict form",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/Show/ConflictForm/?activityId=${o}&showId=${i}`}})," "]}):e.jsxs(e.Fragment,{children:[(t==null?void 0:t.conflictForm)&&e.jsx(s,{title:"Conflict Form",description:"Complete/View the conflict form",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/Show/ConflictForm/?activityId=${o}&showId=${i}`}}),e.jsx(s,{title:"Schedule",description:"View Schedule",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/Show/Schedule/?activityId=${o}&showId=${i}`}})]}),r=="student"&&e.jsx(s,{title:"Actor Profile",description:"View your actor profile",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/Show/Actor/?activityId=${o}&showId=${i}`}}),e.jsx(s,{title:"Resources",description:"View all resources",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/Show/Resources/?activityId=${o}&showId=${i}`}})]}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href=`/Activity/Shows/?activityId=${o}`},children:"Back"})]})]}),e.jsx(v,{dialogRef:a,close:()=>{var c;(c=a.current)==null||c.close()},confirmed:async()=>{var c;(c=a.current)==null||c.close(),await p(o,i),localStorage.setItem("show-"+i,JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/Show/CreateSchedule/?activityId=${o}&showId=${i}`}})]})}
