import{j as t,c as I,r as n,i as x}from"./index-CxI3RmU5.js";import{D as s}from"./Dashboard_Tile-CYQMs7tz.js";import{p as j,s as p}from"./db-B9hTVkYM.js";function v({close:o,confirmed:l,dialogRef:i}){return t.jsx("dialog",{ref:i,children:t.jsxs("div",{className:"ConfirmCreateScheduleDialog",children:[t.jsx("h2",{children:"Confirm Creating Schedule"}),t.jsx("label",{htmlFor:"",children:"Once you start to create the schedule, you will not be able to edit the show template. Do you wish to continue?"}),t.jsx("button",{className:"ActionBtn",onClick:()=>{l()},children:"Yes"}),t.jsx("button",{className:"ActionBtn",onClick:()=>{o()},children:"No"})]})})}I(document.getElementById("root")).render(t.jsx(n.StrictMode,{children:t.jsx(C,{})}));function C(){const[o,l]=n.useState(""),[i,u]=n.useState(""),[e,w]=n.useState(),[a,g]=n.useState("student"),[y,S]=n.useState(!0),r=n.useRef(null);return n.useEffect(()=>{S(!0),x(()=>{});const c=new URLSearchParams(window.location.search),d=c.get("activityId");d&&l(d);const h=c.get("showId");h&&u(h),j(d,h).then(f=>{w(f),console.log(f),S(!1)});const m=localStorage.getItem("accountType");m&&g(m)},[]),t.jsxs(t.Fragment,{children:[y?t.jsxs("div",{className:"center",children:[" ",t.jsx("div",{className:"loader"})]}):t.jsxs(t.Fragment,{children:[" ",t.jsx("div",{className:"title",children:t.jsx("h1",{children:e==null?void 0:e.name})}),t.jsxs("div",{className:"center",children:[t.jsxs("div",{className:"tiles",children:[a=="teacher"?t.jsxs(t.Fragment,{children:[" ",t.jsx(s,{title:"Edit Show Template",description:"Edit the show template",onClick:()=>{localStorage.setItem("show",JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/CreateTemplate/?activityId=${o}&isEditing=true&showId=${i}`}})," "]}):t.jsx(t.Fragment,{}),a=="teacher"?t.jsxs(t.Fragment,{children:[" ",t.jsx(s,{title:"Assign Roles",description:"Assign roles to characters",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/Show/Assign/?activityId=${o}&showId=${i}`}})]}):t.jsx(t.Fragment,{}),a=="teacher"&&(e==null?void 0:e.canCreateSchedule)&&t.jsx(s,{title:"Create/Edit Schedule",description:"Create/Edit the rehersal schedule",onClick:()=>{var c;e!=null&&e.isCreatingSchedule?(localStorage.setItem("show-"+i,JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/Show/CreateSchedule/?activityId=${o}&showId=${i}`):(c=r.current)==null||c.showModal()}}),a=="teacher"?t.jsxs(t.Fragment,{children:[t.jsx(s,{title:"Conflict Form",description:"Create/View the conflict form",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/Show/ConflictForm/?activityId=${o}&showId=${i}`}})," "]}):t.jsxs(t.Fragment,{children:[(e==null?void 0:e.conflictForm)&&t.jsx(s,{title:"Conflict Form",description:"Complete/View the conflict form",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/Show/ConflictForm/?activityId=${o}&showId=${i}`}}),t.jsx(s,{title:"Schedule",description:"View Schedule",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/Show/Schedule/?activityId=${o}&showId=${i}`}})]}),a=="student"&&t.jsx(s,{title:"Actor Profile",description:"View your actor profile",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/Show/Actor/?activityId=${o}&showId=${i}`}}),t.jsx(s,{title:"Resources",description:"View all resources",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/Show/Resources/?activityId=${o}&showId=${i}`}})]}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href=`/Activity/Shows/?activityId=${o}`},children:"Back"})]})]}),t.jsx(v,{dialogRef:r,close:()=>{var c;(c=r.current)==null||c.close()},confirmed:async()=>{var c;(c=r.current)==null||c.close(),await p(o,i),localStorage.setItem("show-"+i,JSON.stringify(e==null?void 0:e.toMap())),window.location.href=`/Activity/Shows/Show/CreateSchedule/?activityId=${o}&showId=${i}`}})]})}
