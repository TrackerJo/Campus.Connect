import{r as f,j as e}from"./index-CD-2aNdv.js";import{C as j,f as B,b as u,E as p}from"./constants-CNIUMWpX.js";import{T as E}from"./trash-BnpXJPEK.js";import{A as S,E as T}from"./Ensemble_Section_Tile-DT51qC4V.js";function A({character:a,setCharacter:c,isCreate:i,removeCharacter:x,isAssign:s,characters:m,actors:v,hasCreatedSchedule:I}){const h=f.useRef(null);return e.jsxs("div",{className:"CharacterTile",id:"character-tile-"+a.characterId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"CharacterNameDiv",children:[e.jsxs("label",{htmlFor:"Character",children:["Character:  ",s?a.name:""]}),i?e.jsx("input",{type:"text",name:"",id:"",value:a.name,onChange:r=>{c(j.fromBlank(r.target.value,a.actor,a.characterId))}}):s?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("div",{className:"CharacterActorDiv",children:a.actor!=null?e.jsxs(e.Fragment,{children:[e.jsxs("label",{htmlFor:"Actor",children:["Actor: ",a.actor.name]}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var r;(r=h.current)==null||r.showModal()},children:"Edit Actor"})]}):e.jsx(e.Fragment,{children:e.jsx("button",{className:"ActionBtn",onClick:()=>{var r;(r=h.current)==null||r.showModal()},children:"Assign Actor"})})})]}):I?e.jsxs("select",{name:"characters",id:"characters",value:a.characterId,onChange:r=>{r.target.value!="null"&&c(m.find(t=>t.characterId==parseInt(r.target.value)))},children:[e.jsx("option",{value:"null",children:"Select a character"}),m.filter(r=>r.actor!=null).map((r,t)=>e.jsx("option",{value:r.characterId,children:r.name},t))]}):e.jsxs("select",{name:"characters",id:"characters",value:a.name,onChange:r=>{r.target.value!="null"&&c(m.find(t=>t.name==r.target.value))},children:[e.jsx("option",{value:"null",children:"Select a character"}),m.map((r,t)=>e.jsx("option",{value:r.name,children:r.name},t))]})]}),e.jsx("div",{children:!s&&e.jsx("img",{src:E,alt:"",className:"TrashIcon",onClick:()=>{x()}})})]}),e.jsx(S,{actor:a.actor??new B,actors:v,keepPastResult:!1,addedActors:[],setActor:r=>{var t;(t=h.current)==null||t.close(),c(j.fromBlank(a.name,r,a.characterId))},dialogRef:h,close:()=>{var r;(r=h.current)==null||r.close()}})]})}function D({showGroup:a,setShowGroup:c,isCreate:i,removeShowGroup:x,isAssign:s,showGroups:m,hasEnsemble:v,characters:I,actors:h,hasCreatedSchedule:r}){const[t,b]=f.useState(!1),[g,N]=f.useState(0);return f.useEffect(()=>{N(Math.floor(Math.random()*1e5))},[]),e.jsxs("div",{className:"ShowGroupTile"+(i||s?"Create":""),id:"show-group-tile-"+a.showGroupId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"ShowGroupNameDiv",children:[e.jsx("label",{htmlFor:"ShowGroup",children:"Show Group: "}),i?e.jsx("input",{type:"text",name:"",id:"",value:a.name,onChange:l=>{c(u.fromBlank(l.target.value,a.characters,a.showGroupId))}}):s?e.jsx(e.Fragment,{children:e.jsx("label",{htmlFor:"",children:a.name})}):e.jsxs("select",{name:"show groups",id:"showGroups",value:a.showGroupId,onChange:l=>{l.target.value!="null"&&c(m.find(n=>n.showGroupId==parseInt(l.target.value)))},children:[e.jsx("option",{value:"null",children:"Select a show group"}),m.map((l,n)=>e.jsx("option",{value:l.showGroupId,children:l.name},n))]})]}),e.jsx("div",{children:!s&&e.jsx("img",{src:E,alt:"",className:"TrashIcon",onClick:()=>{x()}})})]}),(i||s)&&e.jsx("br",{}),(i||s)&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Characters",children:"Characters: "}),e.jsx("div",{className:"characters",id:"characters-"+g,children:a.characters.map((l,n)=>{if(l instanceof j&&!s)return e.jsx(A,{character:l,actors:[],isCreate:!1,characters:I,isAssign:s,hasCreatedSchedule:r,setCharacter:o=>{c(u.fromBlank(a.name,a.characters.map((d,C)=>C===n?o:d),a.showGroupId))},removeCharacter:()=>{c(u.fromBlank(a.name,a.characters.filter((o,d)=>d!==n),a.showGroupId))}},n);if(l instanceof p)return e.jsx(T,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:l,isAssign:s,actors:h,isCustom:!1,isCreate:!0,setEnsembleSection:o=>{console.log("NEW ENSEMBLE SECTION"),console.log(o.toMap());const d=u.fromBlank(a.name,a.characters.map((C,k)=>k===n?o:C),a.showGroupId);console.log("NEW SHOW GROUP"),console.log(d.toMap()),c(d)},removeEnsembleSection:()=>{b(!1),c(u.fromBlank(a.name,a.characters.filter((o,d)=>d!==n),a.showGroupId))}},n)})}),i&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"ActionBtn",onClick:()=>{const l=Math.floor(Math.random()*1e5),n=u.fromBlank(a.name,[...a.characters,j.fromBlank("",null,l)],a.showGroupId);n.hasCreatedSchedule=r??!1,c(n),setTimeout(()=>{const o=document.getElementById("characters-"+g);o.scrollTop=o.scrollHeight},100)},children:"Add Character"}),e.jsx("br",{}),v&&e.jsx("button",{className:"ActionBtn "+(t?"disabled":""),disabled:t,onClick:()=>{if(t)return;b(!0),setTimeout(()=>{const n=document.getElementById("characters-"+g);n.scrollTop=n.scrollHeight},100);const l=u.fromBlank(a.name,[...a.characters,p.fromBlank(!0,!1,!1,!1,[])],a.showGroupId);l.hasCreatedSchedule=r??!1,c(l)},children:"Add Ensemble"})]})]})]})}export{A as C,D as S};
