import{c as w,j as n,r as s}from"./index-CKNi8vpN.js";import{L as x,T as S,M as y}from"./db-DROJG-1T.js";import{C as j}from"./Calendar-D5JwJkeS.js";w(document.getElementById("root")).render(n.jsx(s.StrictMode,{children:n.jsx(I,{})}));function I(){const[M,p]=s.useState("student"),[F,v]=s.useState([]),[C,D]=s.useState([]);return s.useState(null),s.useEffect(()=>{async function E(){const i=await x(),g=[];console.log(i),v(i);const r=[];for(const t of i){let l=null;if(t instanceof S){const a=g.find(e=>e.activityId===t.activityId&&e.showId===t.showId);if(a)l=a;else{const e=await y(t.activityId,t.showId);e&&(g.push(e),l=e)}}console.log(t);const o=t.date.from;console.log(t.date.date),o.setDate(t.date.date.getDate()),o.setMonth(t.date.date.getMonth()),o.setFullYear(t.date.date.getFullYear());const c=t.date.to;c.setDate(t.date.date.getDate()),c.setMonth(t.date.date.getMonth()),c.setFullYear(t.date.date.getFullYear()),console.log(o),console.log(c);let d=!1,f=!1,h=null,m=null;if(console.log(l),l)for(const a of l.dates){const e=new Date(a.date);e.getDate()===o.getDate()&&e.getMonth()===o.getMonth()&&e.getFullYear()===o.getFullYear()&&(d=!0,a.canAttend&&(f=!0,h=new Date(a.from),m=new Date(a.to)))}r.push({title:t.name+(f?` (Excused from ${h.toLocaleTimeString()} to ${m.toLocaleTimeString()}`:""),start:o.toISOString(),end:c.toISOString(),isAllDay:!1,interactive:!0,color:d&&!f?"black":d?"grey":"blue",id:t.id})}D(r),console.log(i),console.log(r)}E();const u=localStorage.getItem("accountType");u&&p(u)},[]),n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"title",children:n.jsx("h1",{children:"Calendar"})}),n.jsxs("div",{className:"center",children:[n.jsx(j,{events:C,canOpenContextMenu:!1,dateClick:()=>{},deleteEvent:()=>{},viewConflicts:()=>{},editEvent:()=>{},eventClick:()=>{}}),n.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Campus.Connect/"},children:"Back"})]})]})}
