import{r as j,j as e}from"./index-DUWJYJoQ.js";import{C as x,f as E,b as o,E as k}from"./constants-DQ2WKrIa.js";import{T as I}from"./trash-BnpXJPEK.js";import{A as N,E as p}from"./Ensemble_Section_Tile-DEL93qXk.js";function A({character:a,setCharacter:r,isCreate:d,removeCharacter:u,isAssign:s,characters:h,actors:v}){const m=j.useRef(null);return e.jsxs("div",{className:"CharacterTile",id:"character-tile-"+a.characterId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"CharacterNameDiv",children:[e.jsxs("label",{htmlFor:"Character",children:["Character:  ",s?a.name:""]}),d?e.jsx("input",{type:"text",name:"",id:"",value:a.name,onChange:t=>{r(x.fromBlank(t.target.value,a.actor,a.characterId,a.lastUpdated))}}):s?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("div",{className:"CharacterActorDiv",children:a.actor!=null?e.jsxs(e.Fragment,{children:[e.jsxs("label",{htmlFor:"Actor",children:["Actor: ",a.actor.name]}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=m.current)==null||t.showModal()},children:"Edit Actor"})]}):e.jsx(e.Fragment,{children:e.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=m.current)==null||t.showModal()},children:"Assign Actor"})})})]}):e.jsxs("select",{name:"characters",id:"characters",onChange:t=>{t.target.value!="null"&&r(h.find(c=>c.name==t.target.value))},children:[e.jsx("option",{value:"null",children:"Select a character"}),h.map((t,c)=>e.jsx("option",{value:t.name,children:t.name},c))]})]}),e.jsx("div",{children:e.jsx("img",{src:I,alt:"",className:"TrashIcon",onClick:()=>{u()}})})]}),e.jsx(N,{actor:a.actor??new E,actors:v,keepPastResult:!1,addedActors:[],setActor:t=>{var c;(c=m.current)==null||c.close(),r(x.fromBlank(a.name,t,a.characterId,a.lastUpdated))},dialogRef:m,close:()=>{var t;(t=m.current)==null||t.close()}})]})}function M({showGroup:a,setShowGroup:r,isCreate:d,removeShowGroup:u,isAssign:s,showGroups:h,hasEnsemble:v,characters:m,actors:t}){const[c,g]=j.useState(!1),[C,B]=j.useState(0);return j.useEffect(()=>{B(Math.floor(Math.random()*1e5))},[]),e.jsxs("div",{className:"ShowGroupTile"+(d||s?"Create":""),id:"show-group-tile-"+a.showGroupId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"ShowGroupNameDiv",children:[e.jsx("label",{htmlFor:"ShowGroup",children:"Show Group: "}),d?e.jsx("input",{type:"text",name:"",id:"",value:a.name,onChange:l=>{r(o.fromBlank(l.target.value,a.characters,a.showGroupId,a.lastUpdated))}}):s?e.jsx(e.Fragment,{children:e.jsx("label",{htmlFor:"",children:a.name})}):e.jsxs("select",{name:"show groups",id:"showGroups",onChange:l=>{l.target.value!="null"&&r(h.find(n=>n.name==l.target.value))},children:[e.jsx("option",{value:"null",children:"Select a show group"}),h.map((l,n)=>e.jsx("option",{value:l.name,children:l.name},n))]})]}),e.jsx("div",{children:e.jsx("img",{src:I,alt:"",className:"TrashIcon",onClick:()=>{u()}})})]}),(d||s)&&e.jsx("br",{}),(d||s)&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Characters",children:"Characters: "}),e.jsx("div",{className:"characters",id:"characters-"+C,children:a.characters.map((l,n)=>{if(l instanceof x&&!s)return e.jsx(A,{character:l,actors:[],isCreate:!1,characters:m,isAssign:s,setCharacter:f=>{r(o.fromBlank(a.name,a.characters.map((i,b)=>b===n?f:i),a.showGroupId,a.lastUpdated))},removeCharacter:()=>{r(o.fromBlank(a.name,a.characters.filter((f,i)=>i!==n),a.showGroupId,a.lastUpdated))}},n);if(l instanceof k)return e.jsx(p,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:l,isAssign:s,actors:t,isCustom:!1,isCreate:!0,setEnsembleSection:f=>{r(o.fromBlank(a.name,a.characters.map((i,b)=>b===n?f:i),a.showGroupId,a.lastUpdated))},removeEnsembleSection:()=>{g(!1),r(o.fromBlank(a.name,a.characters.filter((f,i)=>i!==n),a.showGroupId,a.lastUpdated))}},n)})}),d&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"ActionBtn",onClick:()=>{const l=Math.floor(Math.random()*1e5);r(o.fromBlank(a.name,[...a.characters,x.fromBlank("Character 1",null,l,0)],a.showGroupId,a.lastUpdated)),setTimeout(()=>{const n=document.getElementById("characters-"+C);n.scrollTop=n.scrollHeight},100)},children:"Add Character"}),e.jsx("br",{}),v&&e.jsx("button",{className:"ActionBtn "+(c?"disabled":""),disabled:c,onClick:()=>{c||(g(!0),setTimeout(()=>{const l=document.getElementById("characters-"+C);l.scrollTop=l.scrollHeight},100),r(o.fromBlank(a.name,[...a.characters,k.fromBlank(!0,!1,!1,!1,[],0)],a.showGroupId,a.lastUpdated)))},children:"Add Ensemble"})]})]})]})}export{A as C,M as S};
