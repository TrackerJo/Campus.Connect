import{j as n,c as Ee,r as u,i as we,m as Ae,C as g,e as B,E as x,F as G,n as ke,o as Fe}from"./index-BfAiCOmw.js";import{h as Ne,v as Le,p as ye,w as Re,x as Me,y as Be,z as He}from"./db-BjIT0Swl.js";import{A as $e,S as Ge,D as Oe,C as _e,E as Pe,a as Ue}from"./Show_Group_Display_Tile-BTujux2_.js";import{C as ze}from"./Calendar-BQb5CZFT.js";import{C as Ye,S as Je}from"./Show_Group_Tile-DvZbnkdq.js";import{E as Ve}from"./Ensemble_Section_Tile-CbfE9BbK.js";import{F as We}from"./Full_Cast_Tile-CKD5vjT0.js";import"./trash-BnpXJPEK.js";function ie({conflictResponseDate:j,actor:V}){return n.jsx("div",{className:"ConflictDisplayTile ",id:"conflict-display-tile-"+V.userId,children:n.jsx("div",{className:"header",children:n.jsxs("div",{className:"CharacterNameDiv",children:[n.jsxs("label",{htmlFor:"Actor",children:["Actor: ",V.name]}),n.jsx("br",{}),n.jsxs("label",{htmlFor:"Actor",children:["Date: ",j.date.toDateString()]}),n.jsx("br",{}),j.canAttend?n.jsxs("label",{htmlFor:"Actor",children:[j.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",j.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):n.jsx("label",{htmlFor:"Actor",children:"Can't Attend"})]})})})}Ee(document.getElementById("root")).render(n.jsx(u.StrictMode,{children:n.jsx(qe,{})}));function qe(){const[j,V]=u.useState(""),[l,me]=u.useState(),[Q,he]=u.useState(""),[i,pe]=u.useState(),[le,I]=u.useState("date"),[T,H]=u.useState(null),[D,E]=u.useState(null),[w,A]=u.useState(null),[k,F]=u.useState("custom"),[O,C]=u.useState(""),[_,P]=u.useState(""),[ge,N]=u.useState(""),[Ie,L]=u.useState(""),[v,U]=u.useState(void 0),[be,X]=u.useState(!1),[$,W]=u.useState([]),[q,K]=u.useState([]),[m,f]=u.useState([]),[Z,z]=u.useState(!1),[p,xe]=u.useState([]),[ee,h]=u.useState([]),[te,Se]=u.useState(!1),[b,y]=u.useState(null),[se,ne]=u.useState(!1),[je,Ce]=u.useState(null),[R,Y]=u.useState(),[M,J]=u.useState(void 0),[de,ue]=u.useState(!1),[oe,ce]=u.useState(!1),[ae,ve]=u.useState([]);u.useEffect(()=>{we(()=>{});const c=new URLSearchParams(window.location.search),a=c.get("activityId");a&&(V(a),Ne(a).then(t=>{t instanceof Ae||(me(t),Y(t==null?void 0:t.rehearsalLocations[0]),J(t==null?void 0:t.eventTypes[0]),U(t==null?void 0:t.defaultLocation))}));const e=c.get("showId");e&&(he(e),Le(a,e).then(t=>{const s=[];for(const r of t)for(const d of r.dates)s.push({conflictResponseDate:d,actor:r.actor});s.sort((r,d)=>r.conflictResponseDate.date.getTime()-d.conflictResponseDate.date.getTime()),xe(s),h([...s])})),ye(a,e).then(t=>{pe(t),t!=null&&t.hasEnsemble&&ve(t.ensemble.actors)}),Re(a,e).then(t=>{W(t);const s=[];for(const r of t){console.log(r);const d=r.date.from;console.log(r.date.date),d.setDate(r.date.date.getDate()),d.setMonth(r.date.date.getMonth()),d.setFullYear(r.date.date.getFullYear());const S=r.date.to;S.setDate(r.date.date.getDate()),S.setMonth(r.date.date.getMonth()),S.setFullYear(r.date.date.getFullYear()),console.log(d),console.log(S),console.log(r.rehearsalLocation.color),s.push({title:r.name,start:d.toISOString(),end:S.toISOString(),isAllDay:!1,interactive:!0,color:r.rehearsalLocation.color.setAlpha(.8).toHex(),description:r.info,id:r.id,location:r.rehearsalLocation.name})}K(s)});const o=()=>{window.innerWidth<800?ue(!0):ue(!1)};return window.addEventListener("resize",o),o(),()=>window.removeEventListener("resize",o)},[]);const Te=c=>{const a=c.target.value,[e,o]=a.split(":").map(Number),t=new Date(T);t.setHours(e,o,0,0),E(t),N(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},De=c=>{const a=c.target.value,[e,o]=a.split(":").map(Number),t=new Date(T);t.setHours(e,o,0,0),A(t),L(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};Date.prototype.addHours=function(c){return this.setTime(this.getTime()+c*60*60*1e3),this};function fe(){return $}return n.jsxs("div",{className:"center",children:[n.jsx("h1",{className:"title",children:"Create Schedule"}),le=="date"?n.jsxs(n.Fragment,{children:[" ",n.jsx("h2",{className:"mode",children:"Select a Date"}),n.jsxs("div",{className:"container",children:[n.jsxs("div",{className:"box left",children:[n.jsxs("h2",{children:["Conflicts",b!=null?" on "+b.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:oe,onChange:c=>{if(ce(c.target.checked),c.target.checked){const a=[];for(const e of p)ae.find(o=>o.userId==e.actor.userId)||a.push(e);h(a)}}}),n.jsx("span",{className:"checkmark",children:" "})]})," "]}),n.jsx("div",{className:"conflicts",children:ee.map((c,a)=>n.jsx(ie,{conflictResponseDate:c.conflictResponseDate,actor:c.actor},a))})]}),n.jsx(ze,{canViewConflicts:!0,canPaste:!1,canCopy:!1,copyEvent:()=>{},pasteEvent:()=>{},isCreating:!0,canOpenContextMenu:!0,events:q,editEvent:c=>{const a=fe().find(e=>e.id==c.id);a&&(console.log(a),I("info"),C(a.name),P(a.info),H(a.date.date),E(a.date.from),N(a.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),A(a.date.to),L(a.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),U(a.location),Y(a.rehearsalLocation),f(a.characters),J(a.activityEventType),ne(!0),F(a.theaterEventType),Ce(a))},viewEvent:c=>{const a=fe().find(e=>e.id==c.id);a&&(localStorage.setItem("event",JSON.stringify(a.toMap())),localStorage.setItem("back","/Activity/Shows/Show/CreateSchedule/?activityId="+j+"&showId="+Q),window.location.href="/Calendar/Event/")},viewConflicts:c=>{const a=new Date(c);a.setHours(0,0,0,0),y(a);const e=[];for(const o of p)o.conflictResponseDate.date.getTime()==a.getTime()&&e.push(o);h(e)},deleteEvent:async c=>{console.log(c);const a=$.find(t=>t.id==c.id),e=$.filter(t=>t.id!=c.id);W(e);const o=q.filter(t=>t.id!=c.id);K(o),await Me(a)},dateClick:c=>{console.log(c.date),H(c.date);const a=new Date(c.date);a.setHours(0,0,0,0),y(a);const e=[];for(const t of p)t.conflictResponseDate.date.getTime()==a.getTime()&&e.push(t);h(e),E(new Date(c.date)),N(c.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(c.date);A(o.addHours(1)),console.log(o),L(c.date.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),I("type")},eventClick:c=>{H(c.event.start);const a=new Date(c.event.start);a.setHours(0,0,0,0),y(a);const e=[];for(const t of p)t.conflictResponseDate.date.getTime()==a.getTime()&&e.push(t);h(e),E(new Date(c.event.start)),N(c.event.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(c.event.end);A(o),L(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),I("type")}}),n.jsxs("div",{className:"box right",children:[n.jsx("h2",{children:"How To Schedule Events"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Click a time slot to start creating an event"}),n.jsx("li",{children:"Right click a time slot to view conflicts for that day"}),n.jsx("li",{children:"Right click a current event to view/edit the event or delete the event"})]})]})]}),n.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify($)),window.open("/Activity/Shows/Show/Schedule/Print/","_blank")},children:"Print"}),n.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/Shows/Show/?activityId="+j+"&showId="+Q},children:"Back"})]}):le=="type"?n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"mode",children:"Select a Rehersal Type"}),!de&&n.jsxs("div",{className:"conflicts-div",children:[n.jsxs("h2",{children:["Conflicts",b!=null?" on "+b.toDateString():""]}),n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),(i==null?void 0:i.hasEnsemble)&&n.jsx(n.Fragment,{children:n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:oe,onChange:c=>{if(ce(c.target.checked),c.target.checked){const a=[],e=new Date(T);e.setHours(0,0,0,0);for(const o of p)ae.find(t=>t.userId==o.actor.userId)||o.conflictResponseDate.date.getTime()==e.getTime()&&a.push(o);h(a)}}}),n.jsx("span",{className:"checkmark",children:" "})]})}),n.jsx("div",{className:"conflicts",children:ee.map((c,a)=>n.jsx(ie,{conflictResponseDate:c.conflictResponseDate,actor:c.actor},a))})]}),n.jsx("button",{onClick:()=>{I("info"),F("custom"),f([])},className:"ActionBtn",children:"Custom"}),n.jsx("h2",{className:"mode",children:"Show Layout"}),n.jsx("div",{className:"layout",children:i==null?void 0:i.layout.map((c,a)=>n.jsx($e,{act:c,onClick:e=>{F("scene"),C(e.name+" - "+c.name),I("info"),f(e.characters);const o=[];for(const s of e.characters)if(s instanceof g)o.includes(s.actor.userId)&&o.push(s.actor.userId);else if(s instanceof B){for(const r of s.characters)if(r instanceof g)o.includes(r.actor.userId)&&o.push(r.actor.userId);else if(r instanceof x){if(r.includeAll)for(const d of i.ensemble.actors)o.includes(d.userId)&&o.push(d.userId);else if(r.includeMale)for(const d of i.ensemble.actors)d.gender=="male"&&o.includes(d.userId)&&o.push(d.userId);else if(r.includeFemale)for(const d of i.ensemble.actors)d.gender=="female"&&o.includes(d.userId)&&o.push(d.userId);else if(r.includeCustom)for(const d of r.customActors)o.includes(d.userId)&&o.push(d.userId)}}else if(s instanceof x){if(s.includeAll)for(const r of i.ensemble.actors)o.includes(r.userId)&&o.push(r.userId);else if(s.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&o.includes(r.userId)&&o.push(r.userId);else if(s.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&o.includes(r.userId)&&o.push(r.userId);else if(s.includeCustom)for(const r of s.customActors)o.includes(r.userId)&&o.push(r.userId)}else if(s instanceof G){for(const r of i.ensemble.actors)o.includes(r.userId)&&o.push(r.userId);for(const r of i.characters)o.includes(r.actor.userId)||o.push(r.actor.userId)}const t=[];for(const s of p)o.includes(s.actor.userId)&&s.conflictResponseDate.date.getTime()==b.getTime()&&t.push(s);h(t)}},a))}),n.jsx("h2",{className:"mode",children:"Songs"}),n.jsx("div",{className:"songs",children:i==null?void 0:i.songs.map((c,a)=>n.jsx(Ge,{song:c,onClick:()=>{F("song"),C(c.name),f(c.characters),I("info");const e=[];for(const t of c.characters)if(t instanceof g)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof B){for(const s of t.characters)if(s instanceof g)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof x){if(s.includeAll)for(const r of i.ensemble.actors)e.includes(r.userId)&&e.push(r.userId);else if(s.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&e.includes(r.userId)&&e.push(r.userId);else if(s.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&e.includes(r.userId)&&e.push(r.userId);else if(s.includeCustom)for(const r of s.customActors)e.includes(r.userId)&&e.push(r.userId)}}else if(t instanceof x){if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(t instanceof G){for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);for(const s of i.characters)e.includes(s.actor.userId)||e.push(s.actor.userId)}const o=[];for(const t of p)e.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==b.getTime()&&o.push(t);h(o)}},a))}),n.jsx("h2",{className:"mode",children:"Dances"}),n.jsx("div",{className:"dances",children:i==null?void 0:i.dances.map((c,a)=>n.jsx(Oe,{dance:c,onClick:()=>{F("dance"),C(c.name),I("info"),f(c.characters);const e=[];for(const t of c.characters)if(t instanceof g)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof B){for(const s of t.characters)if(s instanceof g)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof x){if(s.includeAll)for(const r of i.ensemble.actors)e.includes(r.userId)&&e.push(r.userId);else if(s.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&e.includes(r.userId)&&e.push(r.userId);else if(s.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&e.includes(r.userId)&&e.push(r.userId);else if(s.includeCustom)for(const r of s.customActors)e.includes(r.userId)&&e.push(r.userId)}}else if(t instanceof x){if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(t instanceof G){for(const s of i.ensemble.actors)e.push(s.userId);for(const s of i.characters)e.includes(s.actor.userId)||e.push(s.actor.userId)}const o=[];for(const t of p)e.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==b.getTime()&&o.push(t);h(o)}},a))}),n.jsx("button",{onClick:()=>{I("date"),y(null),h([...p])},className:"ActionBtn",children:"Back"})]}):n.jsxs(n.Fragment,{children:[!de&&n.jsxs("div",{className:"conflicts-div",children:[n.jsxs("h2",{children:["Conflicts",b!=null?" on "+b.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:oe,onChange:c=>{if(ce(c.target.checked),c.target.checked){const a=[],e=[];for(const o of m)if(o instanceof g)e.includes(o.actor.userId)&&e.push(o.actor.userId);else if(o instanceof B){for(const t of o.characters)if(t instanceof g)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(o instanceof x){if(o.includeAll)for(const t of i.ensemble.actors)e.includes(t.userId)&&e.push(t.userId);else if(o.includeMale)for(const t of i.ensemble.actors)t.gender=="male"&&e.includes(t.userId)&&e.push(t.userId);else if(o.includeFemale)for(const t of i.ensemble.actors)t.gender=="female"&&e.includes(t.userId)&&e.push(t.userId);else if(o.includeCustom)for(const t of o.customActors)e.includes(t.userId)&&e.push(t.userId)}else{for(const t of i.ensemble.actors)e.push(t.userId);for(const t of i.characters)e.includes(t.actor.userId)||e.push(t.actor.userId)}for(const o of p)ae.find(t=>t.userId==o.actor.userId)||e.includes(o.actor.userId)&&o.conflictResponseDate.date.getTime()==b.getTime()&&a.push(o);h(a)}}}),n.jsx("span",{className:"checkmark",children:" "})]})," "]}),n.jsx("div",{className:"conflicts",children:ee.map((c,a)=>n.jsx(ie,{conflictResponseDate:c.conflictResponseDate,actor:c.actor},a))})]}),n.jsx("h2",{className:"mode",children:"Enter Rehersal Information"}),n.jsx("label",{htmlFor:"Name",children:"Name: "}),n.jsx("input",{type:"text",value:O,onChange:c=>{C(c.target.value)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"Description",children:"Description: "}),n.jsx("textarea",{value:_,onChange:c=>{P(c.target.value)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"",children:"Date: "}),n.jsx("input",{type:"date",value:T==null?void 0:T.toISOString().split("T")[0],onChange:c=>{const a=new Date(c.target.value);a.setHours(0,0,0,0),a.setDate(a.getDate()+1),H(a);const e=new Date(a);e.setHours(D.getHours(),D.getMinutes(),0,0),E(e),N(e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(a);o.setHours(w.getHours(),w.getMinutes(),0,0),A(o),L(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),y(a);const t=[];for(const s of p)s.conflictResponseDate.date.getTime()==a.getTime()&&t.push(s);h(t)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),n.jsx("input",{type:"time",value:ge,onChange:Te}),n.jsx("br",{}),n.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),n.jsx("input",{type:"time",value:Ie,onChange:De}),n.jsx("br",{}),n.jsx("label",{htmlFor:"location",children:"Location: "}),n.jsx("select",{name:"location",id:"location",onChange:c=>{U(l==null?void 0:l.locations.find(a=>a.name==c.target.value))},children:l==null?void 0:l.locations.map((c,a)=>n.jsx("option",{value:c.name,selected:(v==null?void 0:v.name)==c.name,children:c.name+" ("+c.address+")"},a))}),n.jsx("br",{}),n.jsx("label",{htmlFor:"location",children:"Rehersal Location: "}),n.jsx("select",{name:"location",id:"rehersal-location",onChange:c=>{Y(l==null?void 0:l.rehearsalLocations.find(a=>a.name==c.target.value))},children:l==null?void 0:l.rehearsalLocations.map((c,a)=>n.jsx("option",{value:c.name,selected:(R==null?void 0:R.name)==c.name,children:c.name},a))}),n.jsx("br",{}),n.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),n.jsx("select",{name:"eventType",id:"event-type",onChange:c=>{J(l==null?void 0:l.eventTypes.find(a=>a.name==c.target.value))},children:l==null?void 0:l.eventTypes.map((c,a)=>n.jsx("option",{value:c.name,selected:(M==null?void 0:M.name)==c.name,children:c.name},a))}),n.jsx("br",{}),k=="custom"?n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"fullCast",children:"Full Cast: "}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:te,onChange:c=>Se(c.target.checked)}),n.jsx("span",{className:"checkmark"})]})]}):n.jsx(n.Fragment,{}),k=="custom"&&n.jsx("br",{}),te?n.jsx(n.Fragment,{}):n.jsxs(n.Fragment,{children:[" ",n.jsx("h2",{children:"Characters"}),n.jsx("div",{className:"characters",children:m.map((c,a)=>{if(c instanceof g)return k=="custom"?n.jsx(Ye,{character:c,isCreate:!1,actors:[],characters:i.characters,isAssign:!1,setCharacter:e=>{f(m.map((o,t)=>t===a?e:o))},removeCharacter:()=>{f(m.filter((e,o)=>o!==a))}},a):n.jsx(_e,{character:c,canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==a))},isMini:!1},a);if(c instanceof x)return k=="custom"?n.jsx(Ve,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:c,isCustom:!0,setEnsembleSection:e=>{f(m.map((o,t)=>t===a?e:o))},removeEnsembleSection:()=>{f(m.filter((e,o)=>o!==a)),z(!1)},isCreate:!1,isAssign:!1,actors:l.students},a):n.jsx(Pe,{ensembleSection:c,canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==a))},isMini:!1},a);if(c instanceof B)return k=="custom"?n.jsx(Je,{showGroup:c,characters:i.characters,setShowGroup:e=>{f(m.map((o,t)=>t===a?e:o))},removeShowGroup:()=>{f(m.filter((e,o)=>o!==a))},isCreate:!1,isAssign:!1,actors:l.students,hasEnsemble:i.hasEnsemble,showGroups:i.showGroups},a):n.jsx(Ue,{showGroup:c,showCharacters:!0,canClick:!1,onClick:()=>{},canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==a))}},a);if(c instanceof G)return n.jsx(We,{canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==a))}},a)})}),k=="custom"?n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"ActionBtn",onClick:()=>{const c=Math.floor(Math.random()*1e5);f([...m,g.fromBlank("Character 1",null,c)])},children:"Add Character"}),n.jsx("button",{className:"ActionBtn",onClick:()=>{const c=Math.floor(Math.random()*1e5);f([...m,B.fromBlank("Show Group 1",[],c)])},children:"Add Show Group"}),(i==null?void 0:i.hasEnsemble)&&n.jsx("button",{className:"ActionBtn "+(Z?"disabled":""),disabled:Z,onClick:()=>{Z||(z(!0),f([...m,x.fromBlank(!0,!1,!1,!1,[])]))},children:"Add Ensemble"})," "]}):n.jsx(n.Fragment,{})," "]}),n.jsx("br",{}),be?n.jsx("div",{className:"loader"}):n.jsx("button",{onClick:async()=>{if(X(!0),console.log(`Name: ${O}, Description: ${_}, Start Time: ${D}, End Time: ${w}, Selected Location: ${v}, Rehearsal Location: ${R}, Event Type: ${M}`),O==""||_==""||D==null||w==null||v==null||R==null||M==null){alert("Please fill out all fields"),console.log(`Name: ${O}, Description: ${_}, Start Time: ${D}, End Time: ${w}, Selected Location: ${v}, Rehearsal Location: ${R}, Event Type: ${M}`),X(!1);return}console.log("Submit");const c=v??l.locations[0];console.log(D),console.log(w);const a=ke.fromBlank(T,D,w);console.log(a.toMap());const e=[];if(te){m.push(new G);for(const t of i.ensemble.actors)e.push(t);for(const t of i.characters)e.find(s=>s.userId==t.actor.userId)==null&&e.push(t.actor)}else for(const t of m){if(t instanceof G){for(const s of i.ensemble.actors)e.push(s);for(const s of i.characters)e.find(r=>r.userId==s.actor.userId)==null&&e.push(s.actor);break}if(t instanceof g){if(e.find(s=>s.userId==t.actor.userId)!=null)continue;e.push(t.actor)}if(t instanceof x){if(t.includeAll)for(const s of i.ensemble.actors)e.find(r=>r.userId==s.userId)==null&&e.push(s);else if(t.includeMale){for(const s of i.ensemble.actors)if(s.gender=="male"){if(e.find(r=>r.userId==s.userId)!=null)continue;e.push(s)}}else if(t.includeFemale){for(const s of i.ensemble.actors)if(s.gender=="female"){if(e.find(r=>r.userId==s.userId)!=null)continue;e.push(s)}}else if(t.includeCustom)for(const s of t.customActors)e.find(r=>r.userId==s.userId)==null&&e.push(s)}if(t instanceof B)for(const s of t.characters){if(s instanceof g){if(e.find(r=>r.userId==s.actor.userId)!=null)continue;e.push(s.actor)}if(s instanceof x){if(s.includeAll)for(const r of i.ensemble.actors)e.find(d=>d.userId==r.userId)==null&&e.push(r);else if(s.includeMale){for(const r of i.ensemble.actors)if(r.gender=="male"){if(e.find(d=>d.userId==r.userId)!=null)continue;e.push(r)}}else if(s.includeFemale){for(const r of i.ensemble.actors)if(r.gender=="female"){if(e.find(d=>d.userId==r.userId)!=null)continue;e.push(r)}}else if(s.includeCustom)for(const r of s.customActors)e.find(d=>d.userId==r.userId)==null&&e.push(r)}}}const o=Fe.fromBlank(O,_,c,a,"activity-theater-event",Date.now(),j,l.name,Q,i.name,m,e,k,M,R);if(console.log(o),se){o.id=je.id,await Be(o),ne(!1);const t=o.date.from,s=o.date.to,r={title:o.name,start:t.toISOString(),end:s.toISOString(),isAllDay:!1,interactive:!0,description:o.info,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),location:o.rehearsalLocation.name,id:o.id},d=q.filter(re=>re.id!=o.id);d.push(r),K(d);const S=$.filter(re=>re.id!=o.id);S.push(o),console.log(S),W([...S])}else{await He(o);const t=o.date.from,s=o.date.to,r={title:o.name,start:t.toISOString(),end:s.toISOString(),isAllDay:!1,interactive:!0,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),id:o.id,location:o.rehearsalLocation.name,description:o.info};K([...q,r]),W([...$,o])}X(!1),I("date"),H(null),E(null),A(null),F("custom"),C(""),P(""),N(""),L(""),Y(l==null?void 0:l.rehearsalLocations[0]),J(l==null?void 0:l.eventTypes[0]),U(l==null?void 0:l.defaultLocation),f([]),z(!1),y(null),h(p)},className:"ActionBtn",children:se?"Save":"Submit"}),n.jsx("button",{onClick:()=>{if(se){I("date"),H(null),E(null),A(null),F("custom"),C(""),P(""),N(""),L(""),Y(l==null?void 0:l.rehearsalLocations[0]),J(l==null?void 0:l.eventTypes[0]),U(l==null?void 0:l.defaultLocation),z(!1),y(null),h(p),ne(!1);return}I("type"),P(""),C(""),z(!1);const c=[];for(const a of p)a.conflictResponseDate.date.getTime()==b.getTime()&&c.push(a);h(c)},className:"ActionBtn",children:"Back"})]})]})}
