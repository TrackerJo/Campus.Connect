import{r as m,j as t,c as O,i as z}from"./index-DsZHpGFm.js";import{a as S,C as y,E as T,b as A,F as U,A as G,c as g,D as E,d as P,e as K}from"./constants-D66I3kr4.js";import{C as M,S as F}from"./Show_Group_Tile-C5yP7YJ2.js";import{E as V}from"./Ensemble_Section_Tile-CSgT6UFz.js";import{T as H}from"./trash-BnpXJPEK.js";import{F as D}from"./Full_Cast_Tile-CDk8hqy5.js";import{k as Q,i as W,l as X,m as Y}from"./db-DUjF3t9k.js";function Z({scene:e,setScene:l,isCreate:j,removeScene:N,isAssign:f,characters:w,showGroups:k,hasEnsemble:B}){const[p,v]=m.useState(!1),[n,b]=m.useState(!1),[h,C]=m.useState(0);return m.useEffect(()=>{C(Math.floor(Math.random()*1e5))},[]),t.jsxs("div",{className:"SceneTile",id:"scene-tile-"+e.sceneId,children:[t.jsxs("div",{className:"header",children:[t.jsxs("div",{className:"SceneNameDiv",children:[t.jsx("label",{htmlFor:"Scene",children:"Scene Name: "}),t.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:s=>{l(S.fromBlank(s.target.value,e.characters,e.sceneId,e.lastUpdated))}})]}),t.jsx("div",{children:t.jsx("img",{src:H,alt:"",className:"TrashIcon",onClick:()=>{N()}})})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"Characters",children:"Characters: "}),t.jsx("div",{className:"scene-characters",id:"characters-"+h,children:e.characters.map((s,a)=>{if(s instanceof y)return t.jsx(M,{character:s,isCreate:j,actors:[],characters:w,isAssign:f,setCharacter:d=>{l(S.fromBlank(e.name,e.characters.map((r,I)=>I===a?d:r),e.sceneId,e.lastUpdated))},removeCharacter:()=>{l(S.fromBlank(e.name,e.characters.filter((d,r)=>r!==a),e.sceneId,e.lastUpdated))}},a);if(s instanceof T)return t.jsx(V,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:s,isCustom:!1,isCreate:j,isAssign:f,actors:[],setEnsembleSection:d=>{l(S.fromBlank(e.name,e.characters.map((r,I)=>I===a?d:r),e.sceneId,e.lastUpdated))},removeEnsembleSection:()=>{v(!1),l(S.fromBlank(e.name,e.characters.filter((d,r)=>r!==a),e.sceneId,e.lastUpdated))}},a);if(s instanceof A)return t.jsx(F,{showGroup:s,isCreate:j,isAssign:f,characters:w,actors:[],hasEnsemble:B,showGroups:k,setShowGroup:d=>{l(S.fromBlank(e.name,e.characters.map((r,I)=>I===a?d:r),e.sceneId,e.lastUpdated))},removeShowGroup:()=>{l(S.fromBlank(e.name,e.characters.filter((d,r)=>r!==a),e.sceneId,e.lastUpdated))}},a);if(s instanceof U)return t.jsx(D,{canDelete:!0,onDelete:()=>{b(!1),l(S.fromBlank(e.name,e.characters.filter((d,r)=>r!==a),e.sceneId,e.lastUpdated))}},a)})}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(n?"disabled":""),disabled:n,onClick:()=>{const s=Math.floor(Math.random()*1e5);l(S.fromBlank(e.name,[...e.characters,y.fromBlank("Character 1",null,s,0)],e.sceneId,e.lastUpdated)),setTimeout(()=>{const a=document.getElementById("characters-"+h);a.scrollTop=a.scrollHeight,document.getElementById("scene-tile-"+e.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(n?"disabled":""),disabled:n,onClick:()=>{const s=Math.floor(Math.random()*1e5);l(S.fromBlank(e.name,[...e.characters,A.fromBlank("Show Group 1",[],s,0)],e.sceneId,e.lastUpdated)),setTimeout(()=>{const a=document.getElementById("characters-"+h);a.scrollTop=a.scrollHeight,document.getElementById("scene-tile-"+e.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),t.jsx("br",{}),B&&t.jsx("button",{className:"ActionBtn "+(p||n?"disabled":""),disabled:p||n,onClick:()=>{p||(v(!0),setTimeout(()=>{const s=document.getElementById("characters-"+h);s.scrollTop=s.scrollHeight,document.getElementById("scene-tile-"+e.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),l(S.fromBlank(e.name,[...e.characters,T.fromBlank(!0,!1,!1,!1,[],0)],e.sceneId,e.lastUpdated)))},children:"Add Ensemble"}),B&&t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(n?"disabled":""),disabled:n,onClick:()=>{n||(b(!0),setTimeout(()=>{const s=document.getElementById("characters-"+h);s.scrollTop=s.scrollHeight,document.getElementById("scene-tile-"+e.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),l(S.fromBlank(e.name,[...e.characters,new U],e.sceneId,e.lastUpdated)))},children:"Add Full Cast"})]})]})}function _({act:e,setAct:l,isCreate:j,removeAct:N,isAssign:f,characters:w,showGroups:k,hasEnsemble:B}){const[p,v]=m.useState(0);return m.useEffect(()=>{v(Math.floor(Math.random()*1e5))},[]),t.jsxs("div",{className:"ActTile",id:"act-tile-"+e.actId,children:[t.jsxs("div",{className:"header",children:[t.jsxs("div",{className:"ActNameDiv",children:[t.jsx("label",{htmlFor:"Act",children:"Act Name: "}),t.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:n=>{l(G.fromBlank(n.target.value,e.scenes,e.actId,e.lastUpdated))}})]}),t.jsx("div",{children:t.jsx("img",{src:H,alt:"",className:"TrashIcon",onClick:()=>{N()}})})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"Scene",children:"Scenes: "}),t.jsx("div",{id:"scenes-"+p,className:"scenes",children:e.scenes.map((n,b)=>t.jsx(Z,{hasEnsemble:B,scene:n,isCreate:j,characters:w,showGroups:k,isAssign:f,setScene:h=>{l(G.fromBlank(e.name,e.scenes.map((C,s)=>s===b?h:C),e.actId,e.lastUpdated))},removeScene:()=>{l(G.fromBlank(e.name,e.scenes.filter((h,C)=>C!==b),e.actId,e.lastUpdated))}},b))}),e.scenes.length==0&&t.jsx("br",{}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const n=Math.floor(Math.random()*1e5);l(G.fromBlank(e.name,[...e.scenes,S.fromBlank("Scene "+(e.scenes.length+1),[],n,0)],e.actId,e.lastUpdated)),setTimeout(()=>{const b=document.getElementById("scenes-"+p);b.scrollTop=b.scrollHeight,document.getElementById("scene-tile-"+n).scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),document.getElementById("act-tile-"+e.actId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Scene"})]})]})}function ee({song:e,setSong:l,isCreate:j,removeSong:N,isAssign:f,characters:w,showGroups:k,hasEnsemble:B}){const[p,v]=m.useState(!1),[n,b]=m.useState(!1),[h,C]=m.useState(0);return m.useEffect(()=>{C(Math.floor(Math.random()*1e5))},[]),t.jsxs("div",{className:"SongTile",id:"song-tile-"+e.songId,children:[t.jsxs("div",{className:"header",children:[t.jsxs("div",{className:"SongNameDiv",children:[t.jsx("label",{htmlFor:"Scene",children:"Song Name: "}),t.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:s=>{l(g.fromBlank(s.target.value,e.characters,e.songId,e.lastUpdated))}})]}),t.jsx("div",{children:t.jsx("img",{src:H,alt:"",className:"TrashIcon",onClick:()=>{N()}})})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"Characters",children:"Characters: "}),t.jsx("div",{className:"song-characters",id:"characters-"+h,children:e.characters.map((s,a)=>{if(s instanceof y)return t.jsx(M,{character:s,isCreate:j,actors:[],characters:w,isAssign:f,setCharacter:d=>{l(g.fromBlank(e.name,e.characters.map((r,I)=>I===a?d:r),e.songId,e.lastUpdated))},removeCharacter:()=>{l(g.fromBlank(e.name,e.characters.filter((d,r)=>r!==a),e.songId,e.lastUpdated))}},a);if(s instanceof T)return t.jsx(V,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:s,isAssign:f,actors:[],isCustom:!1,isCreate:j,setEnsembleSection:d=>{l(g.fromBlank(e.name,e.characters.map((r,I)=>I===a?d:r),e.songId,e.lastUpdated))},removeEnsembleSection:()=>{v(!1),l(g.fromBlank(e.name,e.characters.filter((d,r)=>r!==a),e.songId,e.lastUpdated))}},a);if(s instanceof A)return t.jsx(F,{showGroup:s,hasEnsemble:B,actors:[],characters:w,isCreate:j,isAssign:f,showGroups:k,setShowGroup:d=>{l(g.fromBlank(e.name,e.characters.map((r,I)=>I===a?d:r),e.songId,e.lastUpdated))},removeShowGroup:()=>{l(g.fromBlank(e.name,e.characters.filter((d,r)=>r!==a),e.songId,e.lastUpdated))}},a);if(s instanceof U)return t.jsx(D,{canDelete:!0,onDelete:()=>{b(!1),l(g.fromBlank(e.name,e.characters.filter((d,r)=>r!==a),e.songId,e.lastUpdated))}},a)})}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(n?"disabled":""),disabled:n,onClick:()=>{const s=Math.floor(Math.random()*1e5);l(g.fromBlank(e.name,[...e.characters,y.fromBlank("Character 1",null,s,0)],e.songId,e.lastUpdated)),setTimeout(()=>{const a=document.getElementById("characters-"+h);a.scrollTop=a.scrollHeight,document.getElementById("song-tile-"+e.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(n?"disabled":""),disabled:n,onClick:()=>{const s=Math.floor(Math.random()*1e5);l(g.fromBlank(e.name,[...e.characters,A.fromBlank("Show Group 1",[],s,0)],e.songId,e.lastUpdated)),setTimeout(()=>{const a=document.getElementById("characters-"+h);a.scrollTop=a.scrollHeight,document.getElementById("song-tile-"+e.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(n?"disabled":""),disabled:n,onClick:()=>{b(!0),l(g.fromBlank(e.name,[...e.characters,new U],e.songId,e.lastUpdated)),setTimeout(()=>{const s=document.getElementById("characters"+h);s.scrollTop=s.scrollHeight,document.getElementById("song-tile-"+e.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Full Cast"}),t.jsx("br",{}),B&&t.jsx("button",{className:"ActionBtn "+(p||n?"disabled":""),disabled:p||n,onClick:()=>{p||(v(!0),setTimeout(()=>{const s=document.getElementById("characters-"+h);s.scrollTop=s.scrollHeight,document.getElementById("song-tile-"+e.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),l(g.fromBlank(e.name,[...e.characters,T.fromBlank(!0,!1,!1,!1,[],0)],e.songId,e.lastUpdated)))},children:"Add Ensemble"})]})]})}function te({dance:e,setDance:l,isCreate:j,removeDance:N,isAssign:f,characters:w,showGroups:k,hasEnsemble:B}){const[p,v]=m.useState(!1),[n,b]=m.useState(!1),[h,C]=m.useState(0);return m.useEffect(()=>{C(Math.floor(Math.random()*1e5))},[]),t.jsxs("div",{className:"DanceTile",id:"dance-tile-"+e.danceId,children:[t.jsxs("div",{className:"header",children:[t.jsxs("div",{className:"DanceNameDiv",children:[t.jsx("label",{htmlFor:"Scene",children:"Song Name: "}),t.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:s=>{l(E.fromBlank(s.target.value,e.characters,e.danceId,e.lastUpdated))}})]}),t.jsx("div",{children:t.jsx("img",{src:H,alt:"",className:"TrashIcon",onClick:()=>{N()}})})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"Characters",children:"Characters: "}),t.jsx("div",{className:"characters",id:"characters-"+h,children:e.characters.map((s,a)=>{if(s instanceof y)return t.jsx(M,{character:s,actors:[],isCreate:j,characters:w,isAssign:f,setCharacter:d=>{l(E.fromBlank(e.name,e.characters.map((r,I)=>I===a?d:r),e.danceId,e.lastUpdated))},removeCharacter:()=>{l(E.fromBlank(e.name,e.characters.filter((d,r)=>r!==a),e.danceId,e.lastUpdated))}},a);if(s instanceof T)return t.jsx(V,{isGroupChatCreate:!1,onAddEnsemble:()=>{},isAssign:!1,ensembleSection:s,isCustom:!1,isCreate:j,actors:[],setEnsembleSection:d=>{l(E.fromBlank(e.name,e.characters.map((r,I)=>I===a?d:r),e.danceId,e.lastUpdated))},removeEnsembleSection:()=>{v(!1),l(E.fromBlank(e.name,e.characters.filter((d,r)=>r!==a),e.danceId,e.lastUpdated))}},a);if(s instanceof A)return t.jsx(F,{showGroup:s,hasEnsemble:B,characters:w,actors:[],isCreate:j,isAssign:f,showGroups:k,setShowGroup:d=>{l(E.fromBlank(e.name,e.characters.map((r,I)=>I===a?d:r),e.danceId,e.lastUpdated))},removeShowGroup:()=>{l(E.fromBlank(e.name,e.characters.filter((d,r)=>r!==a),e.danceId,e.lastUpdated))}},a);if(s instanceof U)return t.jsx(D,{canDelete:!0,onDelete:()=>{l(E.fromBlank(e.name,e.characters.filter((d,r)=>r!==a),e.danceId,e.lastUpdated)),b(!1)}},a)})}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(n?"disabled":""),disabled:n,onClick:()=>{const s=Math.floor(Math.random()*1e5);l(E.fromBlank(e.name,[...e.characters,y.fromBlank("Character 1",null,s,0)],e.danceId,e.lastUpdated)),setTimeout(()=>{const a=document.getElementById("characters-"+h);a.scrollTop=a.scrollHeight,document.getElementById("dance-tile-"+e.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(n?"disabled":""),disabled:n,onClick:()=>{const s=Math.floor(Math.random()*1e5);l(E.fromBlank(e.name,[...e.characters,A.fromBlank("Show Group 1",[],s,0)],e.danceId,e.lastUpdated)),setTimeout(()=>{const a=document.getElementById("characters-"+h);a.scrollTop=a.scrollHeight,document.getElementById("dance-tile-"+e.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(n?"disabled":""),disabled:n,onClick:()=>{b(!0),l(E.fromBlank(e.name,[...e.characters,new U],e.danceId,e.lastUpdated)),setTimeout(()=>{const s=document.getElementById("characters-"+h);s.scrollTop=s.scrollHeight,document.getElementById("dance-tile-"+e.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Full Cast"}),t.jsx("br",{}),B&&t.jsx("button",{className:"ActionBtn "+(p||n?"disabled":""),disabled:p||n,onClick:()=>{p||(v(!0),setTimeout(()=>{const s=document.getElementById("characters-"+h);s.scrollTop=s.scrollHeight,document.getElementById("dance-tile-"+e.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),l(E.fromBlank(e.name,[...e.characters,T.fromBlank(!0,!1,!1,!1,[],0)],e.danceId,e.lastUpdated)))},children:"Add Ensemble"})]})]})}O(document.getElementById("root")).render(t.jsx(m.StrictMode,{children:t.jsx(se,{})}));function se(){const[e,l]=m.useState(""),[j,N]=m.useState([]),[f,w]=m.useState([]),[k,B]=m.useState([]),[p,v]=m.useState([]),[n,b]=m.useState([]),[h,C]=m.useState(""),[s,a]=m.useState(!1),[d,r]=m.useState(!1),[I,$]=m.useState(!1),[L,R]=m.useState(""),[q,J]=m.useState("");return m.useEffect(()=>{z(()=>{});const c=new URLSearchParams(window.location.search),o=c.get("activityId");if(o&&l(o),c.get("isEditing")){$(!0);const i=P.fromMap(JSON.parse(localStorage.getItem("show")));J(i.templateId),C(i.name),a(i.hasEnsemble),w(i.characters),B(i.showGroups),N(i.layout),v(i.songs),b(i.dances),R(i.id)}},[]),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"title",children:t.jsx("h1",{children:"Create Show Template"})}),t.jsxs("div",{className:"center",children:[t.jsxs("div",{className:"form-question",children:[t.jsx("label",{htmlFor:"name",children:"Show Name: "}),t.jsx("input",{type:"text",id:"name",value:h,onChange:c=>C(c.target.value)})]}),t.jsxs("div",{className:"form-question",children:[t.jsx("label",{htmlFor:"ensemble",children:"Has Ensemble: "}),t.jsxs("label",{className:"custom-checkbox",children:[t.jsx("input",{type:"checkbox",id:"ensemble",checked:s,onChange:c=>a(c.target.checked)}),t.jsx("span",{className:"checkmark"})]})]}),t.jsx("h2",{children:"Create Characters"}),t.jsx("div",{className:"characters",id:"create-characters",children:f.map((c,o)=>t.jsx(M,{actors:[],character:c,characters:[],isAssign:!1,setCharacter:u=>{w(i=>{const x=[...i];return x[o]=u,x})},removeCharacter:()=>{w(f.filter((u,i)=>i!==o))},isCreate:!0},o))}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const c=Date.now();w([...f,y.fromBlank("",null,c,0)]),setTimeout(()=>{const o=document.getElementById("create-characters");o.scrollTop=o.scrollHeight,document.getElementById("character-tile-"+c).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),t.jsx("h2",{children:"Create Show Groups"}),t.jsx("div",{className:"showGroups",id:"create-showGroups",children:k.map((c,o)=>t.jsx(F,{showGroup:c,showGroups:[],actors:[],hasEnsemble:s,characters:f,isAssign:!1,setShowGroup:u=>{B(i=>{const x=[...i];return x[o]=u,x})},removeShowGroup:()=>{B(k.filter((u,i)=>i!==o))},isCreate:!0},o))}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const c=Math.floor(Math.random()*1e5);B([...k,A.fromBlank("",[],c,0)]),setTimeout(()=>{const o=document.getElementById("create-showGroups");o.scrollTop=o.scrollHeight,document.getElementById("show-group-tile-"+c).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),t.jsx("h2",{children:"Create Layout"}),t.jsx("div",{className:"layout",id:"create-layout",children:j.map((c,o)=>t.jsx(_,{hasEnsemble:s,act:c,characters:f,showGroups:k,isAssign:!1,setAct:u=>{N(i=>{const x=[...i];return x[o]=u,x})},isCreate:!1,removeAct:()=>{N(j.filter((u,i)=>i!==o))}},o))}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const c=Date.now();N([...j,G.fromBlank("Act "+(j.length+1),[],c,0)]),setTimeout(()=>{const o=document.getElementById("create-layout");o.scrollTop=o.scrollHeight,document.getElementById("act-tile-"+c).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Act"}),t.jsx("h2",{children:"Create Songs"}),t.jsx("div",{className:"songs",id:"create-songs",children:p.map((c,o)=>t.jsx(ee,{song:c,hasEnsemble:s,characters:f,showGroups:k,isAssign:!1,setSong:u=>{v(i=>{const x=[...i];return x[o]=u,x})},removeSong:()=>{v(p.filter((u,i)=>i!==o))},isCreate:!1},o))}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const c=Date.now();v([...p,g.fromBlank("Song "+(p.length+1),[],c,0)]),setTimeout(()=>{const o=document.getElementById("create-songs");o.scrollTop=o.scrollHeight,document.getElementById("song-tile-"+c).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Song"}),t.jsx("h2",{children:"Create Dances"}),t.jsx("div",{className:"dances",id:"create-dances",children:n.map((c,o)=>t.jsx(te,{dance:c,hasEnsemble:s,characters:f,showGroups:k,isAssign:!1,setDance:u=>{b(i=>{const x=[...i];return x[o]=u,x})},removeDance:()=>{b(n.filter((u,i)=>i!==o))},isCreate:!1},o))}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const c=Date.now();b([...n,E.fromBlank("Dance "+(n.length+1),[],c,0)]),setTimeout(()=>{const o=document.getElementById("create-dances");o.scrollTop=o.scrollHeight,document.getElementById("dance-tile-"+c).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Dance"}),d?t.jsx("div",{className:"loader"}):t.jsx("button",{className:"ActionBtn",onClick:async()=>{r(!0);const c=P.fromBlank(h,L,e,q,j,f,s?K.fromBlank([],Date.now()):null,k,p,n,!1,s,null,[],"open",Date.now());console.log(c.toMap());let o=L;if(I)await X(c),await Y(c),localStorage.removeItem("show");else{const u=await Q(c);c.templateId=u,o=await W(c)}window.location.href=`/Activity/Shows/Show/?activityId=${e}&showId=${o}`,r(!1)},children:I?"Save Show Template":"Create Show Template"}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const o=new URLSearchParams(window.location.search).get("showId");if(I){window.location.href=`/Activity/Shows/Show/?activityId=${e}&showId=${o}`;return}window.location.href=`/Activity/Shows/Add/?activityId=${e}`},children:"Back"})]})]})}
