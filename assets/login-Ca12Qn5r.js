import{c as N,j as e,r as a,a as T,b as I}from"./index-BvKDzgix.js";import{T as k,c as E,g as A}from"./db-CcV56dnt.js";N(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(B,{})}));function B(){const[s,r]=a.useState(""),[l,i]=a.useState(""),[j,c]=a.useState(!1),[h,C]=a.useState([]),[S,d]=a.useState(""),[u,n]=a.useState("accountType"),[g,p]=a.useState("student"),[m,f]=a.useState(""),[w,y]=a.useState("");return a.useEffect(()=>{async function t(){const o=await A();C(o),d(o[0].schoolId)}t()},[]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"center",children:e.jsx("div",{className:"Login",children:u=="accountType"?e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Account Type"}),e.jsx("button",{className:"actionBtn",onClick:()=>{p("student"),n("login")},children:"Student"}),e.jsx("button",{className:"actionBtn",onClick:()=>{p("teacher"),n("login")},children:"Teacher"})]}):u=="login"?e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Login"}),e.jsx("input",{type:"text",placeholder:"Email",onChange:t=>{r(t.target.value)}}),e.jsx("input",{type:"password",placeholder:"Password",onChange:t=>{i(t.target.value)}}),e.jsx("select",{onChange:t=>{d(t.target.value)},children:h.map(t=>e.jsx("option",{value:t.schoolId,children:t.schoolName}))}),j?e.jsx("div",{className:"center",children:e.jsx("div",{className:"loader"})}):e.jsx("button",{className:"actionBtn",onClick:async()=>{if(c(!0),!await T(s,l,S)){c(!1),alert("Wrong email or password");return}localStorage.setItem("accountType",g),c(!1),window.location.href="/Campus.Connect/"},children:"Login"}),e.jsx("button",{className:"actionBtn",onClick:()=>{n("createAccount")},children:"Create an Account"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Create Account"}),e.jsx("input",{type:"text",placeholder:"Full Name",onChange:t=>{f(t.target.value)}}),e.jsx("input",{type:"text",placeholder:"Email",onChange:t=>{r(t.target.value)}}),e.jsx("input",{type:"password",placeholder:"Password",onChange:t=>{i(t.target.value)}}),e.jsx("input",{type:"text",placeholder:"School Code",onChange:t=>{y(t.target.value)}}),g=="teacher"?e.jsx("button",{className:"actionBtn",onClick:async()=>{const t=h.find(v=>v.schoolTeacherCode==w);if(!t){alert("Invalid School Code");return}const o=k.fromBlank("",t.schoolId,"","teacher",m.toLowerCase(),m,s),x=await I(s,l);if(!x){alert("Error creating account");return}o.uid=x,await E("teacher",o),localStorage.setItem("accountType","teacher"),window.location.href="/Campus.Connect/"},children:"Create Account"}):e.jsx(e.Fragment,{children:" "})]})})})})}
