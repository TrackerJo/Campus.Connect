import{r as a,j as e,c as ee,i as te}from"./index-U3pxML4x.js";import{J as se,K,L as ae,M as ne,N as oe,O as le,P as re,Q as ie,R as ce,S as de,T as ue,i as he}from"./db-BIpCAzhs.js";import{q as W,r as L,s as Y,t as q,u as E,j as V}from"./constants-CZ2ZrUdU.js";import{A as me}from"./Add_Location_Dialog-DsUKiquo.js";import{E as xe}from"./Edit_Location_Dialog-DTrDG3Vx.js";import{A as H}from"./Add_User_Dialog-Dad0pas1.js";function Ae({addRehearsalLocation:u,close:p,dialogRef:s}){const[l,r]=a.useState(""),[x,h]=a.useState("#000000");return e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Add Rehearsal Location"}),e.jsxs("div",{className:"location-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:l,onChange:c=>{r(c.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:x,onChange:c=>{h(c.target.value)}}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{u(W.fromBlank(l,L(x)))},children:"Add Rehearsal Location"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{p()},children:"Close"})]})]})}const I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAgCAYAAADqgqNBAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAH6ADAAQAAAABAAAAIAAAAABT9vqhAAABMUlEQVRIDe2WO07DQBBAbSsFJE1OQEmgTUGJRDgAxyC5SAo6OAiKUkcK5Ax0IKUDpBSpSOnNG/CKkWVHsr3rRIpXevb6s/N2xlM4CI5hGGNO4BE+YAxRLXkjOoUZ6PHkXY4tgrRYNhF7Tz0Mw5gMn8GkMl2mrt1dklkbrmxE5iPJFmSsoW+fOT0TWMRz2MDABmd+DyvwLsbxO3443qgNdO3c6RmJzfhP+3+UDVw7lelgO8SyhW+41O87mx+q+GtfGYv4wll5dSACd+AFskYj1sWqNqe+Tal1k3lvrldtU/O9invVuihnddJceRl/8rwR59Su4O2jLLX8Vy8ga/hrLvkyGIdZVu75FSfytwx5LeLbHPF5wX4t/jriiZLLj94DnBWPVGIFoneYwh20SoQovWQLokOD66GvfLEAAAAASUVORK5CYII=";function ge({addEventType:u,close:p,dialogRef:s,eventTypes:l}){const[r,x]=a.useState(""),[h,c]=a.useState("#000000");return e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Add Event Type"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:r,onChange:m=>{x(m.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:h,onChange:m=>{c(m.target.value)}}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{if(r==""){alert("Please fill out all fields");return}if(l.find(m=>m.name==r)){alert("Event type with that name already exists");return}u(Y.fromBlank(r,L(h)))},children:"Add Event Type"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{p()},children:"Close"})]})]})}function fe({editEventType:u,close:p,dialogRef:s,eventTypes:l,eventType:r}){const[x,h]=a.useState(""),[c,m]=a.useState("#000000"),[b,f]=a.useState(!1);function j(i,N,v,g){return`#${(1<<24|i<<16|N<<8|v).toString(16).slice(1).toUpperCase()}`}return a.useEffect(()=>{r&&(h(r.name),m(j(r.color.red,r.color.green,r.color.blue,r.color.alpha)))},[r]),e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Edit Event Type"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:x,onChange:i=>{h(i.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:c,onChange:i=>{console.log(i.target.value),m(i.target.value)}}),e.jsx("br",{}),b?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(x==""){alert("Please fill out all fields");return}if(l.find(i=>i.name==x&&i.name!=r.name)){alert("An event type with that name already exists");return}f(!0),await u(Y.fromBlank(x,L(c))),f(!1)},children:"Edit Event Type"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{p()},children:"Close"})]})]})}function pe({editRehearsalLocation:u,close:p,dialogRef:s,rehearsalLocations:l,rehearsalLocation:r}){const[x,h]=a.useState(""),[c,m]=a.useState("#000000"),[b,f]=a.useState(!1);function j(i,N,v,g){return`#${(1<<24|i<<16|N<<8|v).toString(16).slice(1).toUpperCase()}`}return a.useEffect(()=>{r&&(h(r.name),m(j(r.color.red,r.color.green,r.color.blue,r.color.alpha)))},[r]),e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Edit Rehearsal Location"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Location: "}),e.jsx("input",{type:"text",value:x,onChange:i=>{h(i.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:c,onChange:i=>{console.log(i.target.value),m(i.target.value)}}),e.jsx("br",{}),b?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(x==""){alert("Please fill out all fields");return}if(l.find(i=>i.name==x&&i.name!=r.name)){alert("A rehearsal location with that name already exists");return}f(!0),await u(W.fromBlank(x,L(c))),f(!1)},children:"Edit Rehearsal Location"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{p()},children:"Close"})]})]})}function je({editActivityName:u,close:p,dialogRef:s,activityName:l}){const[r,x]=a.useState(""),[h,c]=a.useState(!1);return a.useEffect(()=>{l&&x(l)},[l]),e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Edit Activity Name"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:r,onChange:m=>{x(m.target.value)}}),e.jsx("br",{}),h?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(r==""){alert("Please fill out all fields");return}c(!0),await u(r),c(!1)},children:"Save"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{p()},children:"Close"})]})]})}function ve({editGroup:u,close:p,dialogRef:s,group:l,groups:r,activityStudents:x,activityParents:h}){const[c,m]=a.useState(""),[b,f]=a.useState("#000000"),[j,i]=a.useState([]),[N,v]=a.useState(!1),g=a.useRef(null);function S(A,C,y,B){return`#${(1<<24|A<<16|C<<8|y).toString(16).slice(1).toUpperCase()}`}return a.useEffect(()=>{l&&(m(l.groupName),f(S(l.groupColor.red,l.groupColor.green,l.groupColor.blue,l.groupColor.alpha)),i(l.groupMembers))},[l]),e.jsxs(e.Fragment,{children:[e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Edit Group"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:c,onChange:A=>{m(A.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:b,onChange:A=>{console.log(A.target.value),f(A.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Members: "}),e.jsx("div",{className:"MembersList",children:j.map((A,C)=>e.jsxs("div",{className:"GroupMember",children:[e.jsx("label",{htmlFor:"",children:A.name}),e.jsx("button",{className:"ActionBtn",onClick:()=>{i(j.filter(y=>y!=A))},children:"Remove"})]},C))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{g.current.showModal()},children:"Add Member"}),e.jsx("br",{}),N?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(c==""){alert("Please fill out all fields");return}if(r.find(A=>A.groupName==c&&A.groupName!=l.groupName)){alert("A group with that name already exists");return}v(!0),await u(q.fromBlank(c,j,L(b))),v(!1)},children:"Save Group"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{p()},children:"Close"})]})]}),e.jsx(H,{students:x,parents:h,teachers:[],dialogRef:g,addedMembers:j,close:()=>{g.current.close()},addUser:A=>{const C=[...j,A],y=[],B=C.filter(w=>y.includes(w.name)?!1:(y.push(w.name),!0));i(B)}})]})}function ye({createGroup:u,close:p,dialogRef:s,groups:l,activityStudents:r,activityParents:x}){const[h,c]=a.useState(""),[m,b]=a.useState("#000000"),[f,j]=a.useState([]),[i,N]=a.useState(!1),v=a.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Create Group"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:h,onChange:g=>{c(g.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:m,onChange:g=>{console.log(g.target.value),b(g.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Members: "}),e.jsx("div",{className:"MembersList",children:f.map((g,S)=>e.jsxs("div",{className:"GroupMember",children:[e.jsx("label",{htmlFor:"",children:g.name}),e.jsx("button",{className:"ActionBtn",onClick:()=>{j(f.filter(A=>A!=g))},children:"Remove"})]},S))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{v.current.showModal()},children:"Add Member"}),e.jsx("br",{}),i?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(h==""){alert("Please fill out all fields");return}if(l.find(g=>g.groupName==h)){alert("A group with that name already exists");return}N(!0),await u(q.fromBlank(h,f,L(m))),N(!1)},children:"Create Group"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{p()},children:"Close"})]})]}),e.jsx(H,{students:r,parents:x,teachers:[],dialogRef:v,addedMembers:f,close:()=>{v.current.close()},addUser:g=>{const S=[...f,g],A=[],C=S.filter(y=>A.includes(y.name)?!1:(A.push(y.name),!0));j(C)}})]})}ee(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(Ne,{})}));function Ne(){const[u,p]=a.useState(""),[s,l]=a.useState(null),[r,x]=a.useState("student"),h=a.useRef(null),c=a.useRef(null),m=a.useRef(null),[b,f]=a.useState([]),[j,i]=a.useState([]),[N,v]=a.useState([]),[g,S]=a.useState([]),[A,C]=a.useState(!0),[y,B]=a.useState(void 0),[w,J]=a.useState(void 0),[U,X]=a.useState(void 0),[O,z]=a.useState(void 0),k=a.useRef(null),M=a.useRef(null),T=a.useRef(null),G=a.useRef(null),D=a.useRef(null),F=a.useRef(null),[P,Z]=a.useState([]),[Q,$]=a.useState([]);return a.useEffect(()=>{async function t(){C(!0),te(()=>{});const n=new URLSearchParams(window.location.search).get("activityId");if(n){p(n);const _=await ue();S(_)}const d=await he(n);d&&(l(d),d instanceof E&&f(d.rehearsalLocations),i(d.eventTypes),v(d.groups),Z(d.students),$(d.parents));const R=localStorage.getItem("accountType");R&&x(R),C(!1)}t()},[]),e.jsxs(e.Fragment,{children:[A?e.jsx("div",{className:"center",children:e.jsx("div",{className:"loader"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"title",children:[e.jsxs("h1",{children:["Activity: ",s==null?void 0:s.name]}),e.jsxs("h3",{children:["Join Code: ",s==null?void 0:s.joinCode]}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=G.current)==null||t.showModal()},children:"Edit Activity Name"}),e.jsx("h2",{children:"Saved Locations"}),e.jsx("div",{className:"saved-locations",children:s==null?void 0:s.locations.map((t,o)=>(console.log(t),e.jsxs("div",{className:"saved-location",children:[e.jsxs("label",{htmlFor:"",className:"saved-location-name",children:[t.name," (",t.address,")"]}),e.jsx("img",{src:I,alt:"edit",className:"saved-location-edit",onClick:()=>{var n;B(t),(n=k.current)==null||n.showModal()}})]},o)))}),e.jsx("button",{className:"ActionBtn",onClick:t=>{var o;(o=c.current)==null||o.showModal()},children:"Add Location"}),s instanceof E&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Rehearsal Locations"}),e.jsx("div",{className:"rehearsal-locations",children:b.map((t,o)=>(console.log(t.color),e.jsxs("div",{className:"rehearsal-location",children:[e.jsx("label",{htmlFor:"",className:"rehearsal-location-name",children:t.name}),e.jsxs("div",{className:"rehearsal-location-right",children:[e.jsx("div",{className:"rehearsal-location-color",style:{backgroundColor:t.color.toRBGAString()}}),e.jsx("img",{src:I,alt:"",onClick:n=>{var d;X(t),(d=T.current)==null||d.showModal()}})]})]})))}),e.jsx("button",{className:"ActionBtn",onClick:t=>{var o;(o=h.current)==null||o.showModal()},children:"Add Rehearsal Location"})," "]}),e.jsx("h2",{children:"Event Types"}),e.jsx("div",{className:"event-types",children:j.map((t,o)=>e.jsxs("div",{className:"event-type",children:[e.jsx("label",{htmlFor:"",className:"event-type-name",children:t.name}),e.jsxs("div",{className:"event-type-right",children:[e.jsx("div",{className:"event-type-color",style:{backgroundColor:t.color.toRBGAString()}}),e.jsx("img",{src:I,alt:"",onClick:()=>{var n;J(t),(n=M.current)==null||n.showModal()}})]})]}))}),e.jsx("button",{className:"ActionBtn",onClick:t=>{var o;(o=m.current)==null||o.showModal()},children:"Add Event Type"}),e.jsx("br",{}),e.jsx("h2",{children:"Groups"}),e.jsx("div",{className:"event-types",children:N.map((t,o)=>e.jsxs("div",{className:"event-type",children:[e.jsx("label",{htmlFor:"",className:"event-type-name",children:t.groupName}),e.jsxs("div",{className:"event-type-right",children:[e.jsx("div",{className:"event-type-color",style:{backgroundColor:t.groupColor.toRBGAString()}}),e.jsx("img",{src:I,alt:"",onClick:()=>{var n;z(t),(n=D.current)==null||n.showModal()}})]})]}))}),e.jsx("button",{className:"ActionBtn",onClick:t=>{var o;(o=F.current)==null||o.showModal()},children:"Create Group"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/?activityId="+u},children:"Back"})]}),e.jsx(Ae,{dialogRef:h,addRehearsalLocation:async t=>{var o;if(s instanceof E){const n=[...s.rehearsalLocations];n.push(t),s.rehearsalLocations=n,console.log(n),f(n),await se(u,n),(o=h.current)==null||o.close()}},close:()=>{var t;(t=h.current)==null||t.close()}}),e.jsx(me,{existingLocations:(s==null?void 0:s.locations)??[],dialogRef:c,close:()=>{var t;(t=c.current)==null||t.close()},addLocation:async function(t){var o,n;if(g.find(d=>d.name==t.name)){await K(u,t),(o=c.current)==null||o.close(),s.locations.push(t),l(s);return}await K(u,t),await ae(t),S(d=>[...d,t]),s.locations.push(t),l(s),(n=c.current)==null||n.close()},savedLocations:g.filter(t=>!s.locations.find(o=>t.name==o.name))}),e.jsx(ge,{dialogRef:m,close:()=>{var t;(t=m.current)==null||t.close()},addEventType:async t=>{var n;const o=[...s.eventTypes];o.push(t),i(o),await ne(u,t),(n=m.current)==null||n.close()},eventTypes:s.eventTypes})]}),e.jsx(xe,{dialogRef:k,close:()=>{var t;(t=k.current)==null||t.close()},location:y,editLocation:async t=>{var d;const n=[...s.locations].findIndex(R=>R.name==y.name);s.locations.splice(n,1),s.locations.push(t),console.log(s),await oe(u,t,y),l(s),window.location.reload(),(d=k.current)==null||d.close()}}),e.jsx(fe,{eventTypes:(s==null?void 0:s.eventTypes)??[],dialogRef:M,close:()=>{var t;(t=M.current)==null||t.close()},eventType:w,editEventType:async t=>{var d;const n=[...s.eventTypes].findIndex(R=>R.name==w.name);s.eventTypes.splice(n,1),s.eventTypes.push(t),console.log(s),await le(u,t,w,s instanceof E),l(V.fromMap(s.toMap())),window.location.reload(),(d=M.current)==null||d.close()}}),s instanceof E&&e.jsx(pe,{rehearsalLocations:s.rehearsalLocations,dialogRef:T,close:()=>{var t;(t=T.current)==null||t.close()},rehearsalLocation:U,editRehearsalLocation:async t=>{var d;const n=[...s.rehearsalLocations].findIndex(R=>R.name==U.name);s.rehearsalLocations.splice(n,1),s.rehearsalLocations.push(t),console.log(s),await re(u,t,U),l(s),window.location.reload(),(d=T.current)==null||d.close()}}),e.jsx(je,{dialogRef:G,close:()=>{var t;(t=G.current)==null||t.close()},activityName:s==null?void 0:s.name,editActivityName:async t=>{var o;await ie(u,t),l(n=>n?(n.name=t,n):null),window.location.reload(),(o=G.current)==null||o.close()}}),e.jsx(ve,{dialogRef:D,activityParents:Q,activityStudents:P,groups:N,close:()=>{var t;(t=D.current)==null||t.close()},group:O,editGroup:async t=>{var d;const n=[...s.groups].findIndex(R=>R.groupName==O.groupName);s.groups.splice(n,1),s.groups.push(t),console.log(s),await ce(u,t,O),l(V.fromMap(s.toMap())),window.location.reload(),(d=D.current)==null||d.close()}}),e.jsx(ye,{dialogRef:F,close:()=>{var t;(t=F.current)==null||t.close()},groups:N,activityParents:Q,activityStudents:P,createGroup:async t=>{var n;const o=[...s.groups];o.push(t),v(o),await de(u,t),(n=F.current)==null||n.close()}})]})}
