import{j as s,r as i,c as q,i as O}from"./index-BrfWEQze.js";import{E as k,C as R,b as E,F as T,q as P,r as $,M as z,s as Q}from"./constants-BaAdZBoe.js";import{f as ee,e as U,G as se,H as W,I as te,J as re,K as ne,L as ae}from"./db-D_7SZOlL.js";import{A as K}from"./Add_User_Dialog-YfENA7QI.js";import{a as ce,A as oe,S as le,D as ie}from"./Show_Group_Display_Tile-U8pxSg6a.js";import{E as ue}from"./Ensemble_Section_Tile-DsdJNtKT.js";import"./trash-BnpXJPEK.js";function de({message:d,isSender:p}){return s.jsx("div",{className:"message",children:s.jsx("div",{className:"message__outer",children:s.jsxs("div",{className:"message__inner",children:[p?s.jsx(s.Fragment,{}):s.jsx("div",{className:"message__spacer"}),s.jsxs("div",{className:"message__bubble "+(p?"isSender":"notSender"),children:[s.jsx("h1",{className:"message-sender",children:d.senderName}),s.jsxs("div",{className:"message-body",children:[s.jsx("p",{className:"message-text",children:d.message}),s.jsx("p",{className:"message-time-sent",children:d.timeSent.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),p?s.jsx("div",{className:"message__spacer"}):s.jsx(s.Fragment,{})]})})})}function fe({sendMessage:d}){const p=i.useRef(null);return s.jsxs("div",{className:"message-send-bar",onKeyDown:f=>{f.key==="Enter"&&p.current.value.trim()!==""&&(d(p.current.value.trim()),p.current.value="")},children:[s.jsx("input",{type:"text",placeholder:"Type a message...",className:"message-input",ref:p}),s.jsx("button",{onClick:()=>{d(p.current.value.trim()),p.current.value=""},className:"message-send-btn",children:"Send"})]})}function V({dialogRef:d,close:p,addMembers:f,activityId:j,setName:x}){const[M,m]=i.useState([]),[c,S]=i.useState(null),[N,I]=i.useState(null);return i.useEffect(()=>{j&&ee(j).then(u=>{u=u.filter(l=>l.canCreateSchedule),m(u)})},[j]),s.jsx("dialog",{ref:d,className:"AddFromPlayDialog",children:s.jsxs("div",{className:"AddFromPlayDiv",children:[s.jsx("h2",{children:"Select Play"}),s.jsxs("select",{className:"SelectPlay",onChange:u=>{S(M.find(l=>l.id==u.target.value)||null),I(k.fromBlank(!0,!1,!1,!1,[],333))},children:[s.jsx("option",{value:"",children:"Select a Play"}),M.map((u,l)=>s.jsx("option",{value:u.id,children:u.name},l))]}),c&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),s.jsx("button",{className:"ActionBtn",onClick:()=>{const u=[],l=[];for(const n of c.ensemble.actors)l.includes(n.userId)||(u.push(n),l.push(n.userId));for(const n of c.characters)l.includes(n.actor.userId)||(u.push(n.actor),l.push(n.actor.userId));f(u)},children:"Add Full Cast"}),s.jsx("h2",{className:"title",children:"Ensemble"}),s.jsx("div",{className:"ensemble",children:s.jsx(ue,{ensembleSection:N,isAssign:!1,actors:[],isCustom:!1,isCreate:!0,isGroupChatCreate:!0,setEnsembleSection:u=>{I(u)},onAddEnsemble:()=>{const u=[],l=[];if(N.includeAll)for(const n of c.ensemble.actors)l.includes(n.userId)||(u.push(n),l.push(n.userId));else if(N.includeMale)for(const n of c.ensemble.actors)n.gender=="male"&&(l.includes(n.userId)||(u.push(n),l.push(n.userId)));else if(N.includeFemale)for(const n of c.ensemble.actors)n.gender=="female"&&(l.includes(n.userId)||(u.push(n),l.push(n.userId)));f(u)},removeEnsembleSection:()=>{}})}),s.jsx("h2",{className:"title",children:"Show Groups"}),s.jsx("div",{className:"show-groups",children:c==null?void 0:c.showGroups.map((u,l)=>s.jsx(ce,{showGroup:u,canDelete:!1,onDelete:()=>{},canClick:!0,showCharacters:!1,onClick:()=>{x(u.name);const n=[],r=[];for(const a of u.characters)if(a instanceof R)r.includes(a.actor.userId)||(n.push(a.actor),r.push(a.actor.userId));else if(a instanceof E){for(const e of a.characters)if(e instanceof R)r.includes(e.actor.userId)||(n.push(e.actor),r.push(e.actor.userId));else if(e instanceof k){if(e.includeAll)for(const t of c.ensemble.actors)r.includes(t.userId)||(n.push(t),r.push(t.userId));else if(e.includeMale)for(const t of c.ensemble.actors)t.gender=="male"&&(r.includes(t.userId)||(n.push(t),r.push(t.userId)));else if(e.includeFemale)for(const t of c.ensemble.actors)t.gender=="female"&&(r.includes(t.userId)||(n.push(t),r.push(t.userId)));else if(e.includeCustom)for(const t of e.customActors)r.includes(t.userId)||(n.push(t),r.push(t.userId))}}else if(a instanceof k){if(a.includeAll)for(const e of c.ensemble.actors)r.includes(e.userId)||(n.push(e),r.push(e.userId));else if(a.includeMale)for(const e of c.ensemble.actors)e.gender=="male"&&(r.includes(e.userId)||(n.push(e),r.push(e.userId)));else if(a.includeFemale)for(const e of c.ensemble.actors)e.gender=="female"&&(r.includes(e.userId)||(n.push(e),r.push(e.userId)));else if(a.includeCustom)for(const e of a.customActors)r.includes(e.userId)||(n.push(e),r.push(e.userId))}f(n)}},l))}),s.jsx("h2",{className:"title",children:"Show Layout"}),s.jsx("div",{className:"layout",children:c==null?void 0:c.layout.map((u,l)=>s.jsx(oe,{act:u,onClick:n=>{x(n.name+" - "+u.name);const r=[],a=[];console.log(n);for(const e of n.characters)if(e instanceof R)a.includes(e.actor.userId)||(r.push(e.actor),a.push(e.actor.userId));else if(e instanceof E){for(const t of e.characters)if(t instanceof R)a.includes(t.actor.userId)||(r.push(t.actor),a.push(t.actor.userId));else if(t instanceof k){if(t.includeAll)for(const o of c.ensemble.actors)a.includes(o.userId)||(r.push(o),a.push(o.userId));else if(t.includeMale)for(const o of c.ensemble.actors)o.gender=="male"&&(a.includes(o.userId)||(r.push(o),a.push(o.userId)));else if(t.includeFemale)for(const o of c.ensemble.actors)o.gender=="female"&&(a.includes(o.userId)||(r.push(o),a.push(o.userId)));else if(t.includeCustom)for(const o of t.customActors)a.includes(o.userId)||(r.push(o),a.push(o.userId))}}else if(e instanceof k){if(e.includeAll)for(const t of c.ensemble.actors)a.includes(t.userId)||(r.push(t),a.push(t.userId));else if(e.includeMale)for(const t of c.ensemble.actors)t.gender=="male"&&(a.includes(t.userId)||(r.push(t),a.push(t.userId)));else if(e.includeFemale)for(const t of c.ensemble.actors)t.gender=="female"&&(a.includes(t.userId)||(r.push(t),a.push(t.userId)));else if(e.includeCustom)for(const t of e.customActors)a.includes(t.userId)||(r.push(t),a.push(t.userId))}else if(e instanceof T){for(const t of c.ensemble.actors)a.includes(t.userId)||(r.push(t),a.push(t.userId));for(const t of c.characters)a.includes(t.actor.userId)||(r.push(t.actor),a.push(t.actor.userId))}f(r)}},l))}),s.jsx("h2",{className:"title",children:"Songs"}),s.jsx("div",{className:"songs",children:c==null?void 0:c.songs.map((u,l)=>s.jsx(le,{song:u,onClick:()=>{x(u.name);const n=[],r=[];for(const a of u.characters)if(a instanceof R)r.includes(a.actor.userId)||(n.push(a.actor),r.push(a.actor.userId));else if(a instanceof E){for(const e of a.characters)if(e instanceof R)r.includes(e.actor.userId)||(n.push(e.actor),r.push(e.actor.userId));else if(e instanceof k){if(e.includeAll)for(const t of c.ensemble.actors)r.includes(t.userId)||(n.push(t),r.push(t.userId));else if(e.includeMale)for(const t of c.ensemble.actors)t.gender=="male"&&(r.includes(t.userId)||(n.push(t),r.push(t.userId)));else if(e.includeFemale)for(const t of c.ensemble.actors)t.gender=="female"&&(r.includes(t.userId)||(n.push(t),r.push(t.userId)));else if(e.includeCustom)for(const t of e.customActors)r.includes(t.userId)||(n.push(t),r.push(t.userId))}}else if(a instanceof k){if(a.includeAll)for(const e of c.ensemble.actors)r.includes(e.userId)||(n.push(e),r.push(e.userId));else if(a.includeMale)for(const e of c.ensemble.actors)e.gender=="male"&&(r.includes(e.userId)||(n.push(e),r.push(e.userId)));else if(a.includeFemale)for(const e of c.ensemble.actors)e.gender=="female"&&(r.includes(e.userId)||(n.push(e),r.push(e.userId)));else if(a.includeCustom)for(const e of a.customActors)r.includes(e.userId)||(n.push(e),r.push(e.userId))}else if(a instanceof T){for(const e of c.ensemble.actors)r.includes(e.userId)||(n.push(e),r.push(e.userId));for(const e of c.characters)r.includes(e.actor.userId)||(n.push(e.actor),r.push(e.actor.userId))}f(n)}},l))}),s.jsx("h2",{className:"title",children:"Dances"}),s.jsx("div",{className:"dances",children:c==null?void 0:c.dances.map((u,l)=>s.jsx(ie,{dance:u,onClick:()=>{x(u.name);const n=[],r=[];for(const a of u.characters)if(a instanceof R)r.includes(a.actor.userId)||(n.push(a.actor),r.push(a.actor.userId));else if(a instanceof E){for(const e of a.characters)if(e instanceof R)r.includes(e.actor.userId)||(n.push(e.actor),r.push(e.actor.userId));else if(e instanceof k){if(e.includeAll)for(const t of c.ensemble.actors)r.includes(t.userId)||(n.push(t),r.push(t.userId));else if(e.includeMale)for(const t of c.ensemble.actors)t.gender=="male"&&(r.includes(t.userId)||(n.push(t),r.push(t.userId)));else if(e.includeFemale)for(const t of c.ensemble.actors)t.gender=="female"&&(r.includes(t.userId)||(n.push(t),r.push(t.userId)));else if(e.includeCustom)for(const t of e.customActors)r.includes(t.userId)||(n.push(t),r.push(t.userId))}}else if(a instanceof k){if(a.includeAll)for(const e of c.ensemble.actors)r.includes(e.userId)||(n.push(e),r.push(e.userId));else if(a.includeMale)for(const e of c.ensemble.actors)e.gender=="male"&&(r.includes(e.userId)||(n.push(e),r.push(e.userId)));else if(a.includeFemale)for(const e of c.ensemble.actors)e.gender=="female"&&(r.includes(e.userId)||(n.push(e),r.push(e.userId)));else if(a.includeCustom)for(const e of a.customActors)r.includes(e.userId)||(n.push(e),r.push(e.userId))}else if(a instanceof T){for(const e of c.ensemble.actors)r.includes(e.userId)||(n.push(e),r.push(e.userId));for(const e of c.characters)r.includes(e.actor.userId)||(n.push(e.actor),r.push(e.actor.userId))}f(n)}},l))})]}),s.jsx("button",{className:"ActionBtn",onClick:()=>{p()},children:"Close"}),s.jsx("br",{})]})})}function H({dialogRef:d,close:p,addMembers:f,activityGroups:j}){const[x,M]=i.useState(null);return s.jsx("dialog",{ref:d,className:"AddFromGroupDialog",children:s.jsxs("div",{className:"AddFromGroupDiv",children:[s.jsx("h2",{children:"Select Group"}),s.jsxs("select",{className:"SelectPlay",onChange:m=>{M(j.find(c=>c.groupName==m.target.value)||null)},children:[s.jsx("option",{value:"",children:"Select a Group"}),j.map((m,c)=>s.jsx("option",{value:m.groupName,children:m.groupName},c))]}),s.jsx("br",{}),s.jsx("button",{className:"ActionBtn",onClick:()=>{x&&f(x.groupMembers),p()},children:"Add Group"}),s.jsx("button",{className:"ActionBtn",onClick:()=>{p()},children:"Close"}),s.jsx("br",{})]})})}function me({close:d,dialogRef:p,activityId:f,refresh:j}){const x=i.useRef(null),M=i.useRef(null),m=i.useRef(null),c=i.useRef(null),[S,N]=i.useState(null),[I,u]=i.useState([]),[l,n]=i.useState([]),[r,a]=i.useState([]);return i.useEffect(()=>{f&&U(f).then(e=>{N(e),e!=null&&(e instanceof P?(u([...e.parents,...e.students]),a(e.groups)):(u([...e.parents,...e.students]),a(e.groups)))})},[f]),s.jsxs(s.Fragment,{children:[s.jsx("dialog",{className:"create-group-chat-dialog",ref:p,children:s.jsxs("div",{className:"create-group-chat-dialog-inner",children:[s.jsx("h1",{className:"create-group-chat-dialog-title",children:"Create Group Chat"}),s.jsx("input",{type:"text",placeholder:"Group Chat Name",className:"create-group-chat-dialog-input",ref:x}),l.length>0&&s.jsxs(s.Fragment,{children:[" ",s.jsx("h2",{className:"create-group-chat-dialog-members-title",children:"Members: "}),s.jsx("div",{className:"create-group-chat-dialog-members",children:l.map((e,t)=>s.jsxs("div",{className:"create-group-chat-dialog-member",children:[s.jsx("label",{htmlFor:"",children:e.name}),s.jsx("button",{className:"ActionBtn",onClick:()=>{n(l.filter(o=>o!=e))},children:"Remove"})]},t))})," "]}),s.jsx("button",{className:"ActionBtn",onClick:()=>{M.current.showModal()},children:"Add Member"}),r.length>0&&s.jsx("button",{className:"ActionBtn",onClick:()=>{c.current.showModal()},children:"Add from Group"}),S instanceof P?s.jsx("button",{className:"ActionBtn",onClick:()=>{m.current.showModal()},children:"Add from Play"}):null,s.jsx("button",{className:"ActionBtn",onClick:async()=>{if(x.current.value==""){alert("Please enter a name for the group chat");return}if(l.length==0){alert("Please add at least one member to the group chat");return}const e=$.fromBlank(x.current.value,"",l,"custom",f,Date.now());await se(e),j(),d()},children:"Create"}),s.jsx("button",{onClick:d,className:"ActionBtn",children:"Close"})]})}),s.jsx(K,{members:I,dialogRef:M,addedMembers:l,close:()=>{M.current.close()},addUser:e=>{const t=[...l,e],o=[],A=t.filter(h=>o.includes(h.name)?!1:(o.push(h.name),!0));n(A)}}),s.jsx(H,{dialogRef:c,close:()=>{c.current.close()},addMembers:e=>{const t=[...l,...e],o=[],A=t.filter(h=>o.includes(h.name)?!1:(o.push(h.name),!0));n(A),c.current.close()},activityGroups:r}),s.jsx(V,{dialogRef:m,close:()=>{m.current.close()},addMembers:e=>{const t=[...l,...e],o=[],A=t.filter(h=>o.includes(h.name)?!1:(o.push(h.name),!0));n(A),m.current.close()},setName:e=>{},activityId:f})]})}function he({groupChat:d,onClick:p}){return s.jsxs("div",{className:"group-chat-display-tile",onClick:p,children:[s.jsx("h1",{children:d.name}),s.jsx("div",{className:"divider"}),s.jsxs("div",{className:"recent-message-div",children:[s.jsx("h3",{children:d.lastMessage!=null?d.lastMessage.senderName+": "+d.lastMessage.message:"No messages"}),s.jsx("h4",{children:d.lastMessage!=null?new Date(d.lastMessage.timeSent).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]})]})}function pe({close:d,dialogRef:p,activityId:f,userData:j,refresh:x,activityName:M}){const m=i.useRef(null),c=i.useRef(null),S=i.useRef(null),N=i.useRef(null),[I,u]=i.useState(null),[l,n]=i.useState([]),[r,a]=i.useState([]),[e,t]=i.useState([]);return i.useEffect(()=>{f&&U(f).then(o=>{u(o),o!=null&&(o instanceof P?(n([...o.parents,...o.students]),t(o.groups)):(n([...o.parents,...o.students]),t(o.groups)))})},[f]),s.jsxs(s.Fragment,{children:[s.jsx("dialog",{className:"broadcast-message-dialog",ref:p,children:s.jsxs("div",{className:"broadcast-message-dialog-inner",children:[s.jsx("h1",{className:"broadcast-message-dialog-title",children:"Broadcast message"}),s.jsx("input",{type:"text",placeholder:"Message",className:"broadcast-message-dialog-input",ref:m}),r.length>0&&s.jsxs(s.Fragment,{children:[" ",s.jsx("h2",{className:"broadcast-message-dialog-members-title",children:"Recipient: "}),s.jsx("div",{className:"broadcast-message-dialog-members",children:r.map((o,A)=>s.jsxs("div",{className:"broadcast-message-dialog-member",children:[s.jsx("label",{htmlFor:"",children:o.name}),s.jsx("button",{className:"ActionBtn",onClick:()=>{a(r.filter(h=>h!=o))},children:"Remove"})]},A))})," "]}),s.jsx("button",{className:"ActionBtn",onClick:()=>{c.current.showModal()},children:"Add Recipient"}),e.length>0&&s.jsx("button",{className:"ActionBtn",onClick:()=>{N.current.showModal()},children:"Add from Group"}),I instanceof P?s.jsx("button",{className:"ActionBtn",onClick:()=>{S.current.showModal()},children:"Add from Play"}):null,s.jsx("button",{className:"ActionBtn",onClick:async()=>{if(m.current.value==""){alert("Please enter a message to broadcast");return}if(r.length==0){alert("Please add at least one recipient");return}const o=z.fromBlank(m.current.value,j.uid,j.fullname,j.FCMToken,"",f,"",new Date,[j.uid]);for(let A=0;A<r.length;A++){const h=r[A];o.gcId=h.userId,console.log("Sending message to "+h.userId),console.log(o.toMap()),await W(f,h.userId,o,M,h)}x(),d()},children:"Send"}),s.jsx("button",{onClick:d,className:"ActionBtn",children:"Close"})]})}),s.jsx(K,{members:l,dialogRef:c,addedMembers:r,close:()=>{c.current.close()},addUser:o=>{const A=[...r,o],h=[],y=A.filter(v=>h.includes(v.userId)?!1:(h.push(v.userId),!0));a(y)}}),s.jsx(H,{dialogRef:N,close:()=>{N.current.close()},addMembers:o=>{const A=[...r,...o],h=[],y=A.filter(v=>h.includes(v.userId)?!1:(h.push(v.userId),!0));a(y),N.current.close()},activityGroups:e}),s.jsx(V,{dialogRef:S,close:()=>{S.current.close()},addMembers:o=>{const A=[...r,...o],h=[],y=A.filter(v=>h.includes(v.userId)?!1:(h.push(v.userId),!0));a(y),S.current.close()},setName:o=>{},activityId:f})]})}const ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAiCAYAAAC9duLEAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAE6ADAAQAAAABAAAAIgAAAAC8LsGQAAACaUlEQVRIDaWV24oTQRCGd6I3inhWFnURA+sBURQUfBfXI3rhM3jvlQ8g7srO7voa3nnvhQiKx3hcj6uiIKLG7wvToUwmmUks+KmuTtWX6unumWziP6zdbm+k/Araj+aycVmANlO7gPYWjN+NcWCAtlK3FEBiVkbuDNB2ChfRHgmFfcdfHAkGaJIiQbsLiO4bupBl2Z3aMEA7KHJpu1CyrwzOA7rrxKo0O8wDmuL3m2hnyPvM+Cyge2musjNALsmlucRknxgIepAm9ENhgJrkCNpmcmEf8IIeponkB8IATZOUI49BsncMTgN6miaiL4UB2kdSjjyYyZYZCGqliV7fBwN0kKR5tCEkv2Z8CtDLMNc3bMQZQIeIcxRBL4hPVoHImejCAB0lztF6lMwlzQCys0rrwAAdI/MGWhcqnjC2I59VLcsAHSdzFq0JFW77GUAfw1zlUNgtsuIVuU/sOVqprO5JcJmre+Z+EP/qmasVCruMfobsI4zn6ThuRPh58LDBcm7z8yVkR8k8IgsAfS3Xtu6hpfAEVddQ3Agvss/Pi11pXZiZAN3Z62itcWGP8O6sF3yo/QMzE6CHdw7FM+fF9l560QdaH8xMgIdxHuK4CS1iO3yDL7VSmJkAyy68F90OX5XRBsIKoB/XHG0yLsx7aofP00TyQ2Em0eE0LkfxJfmW2A6f4btWCTMTYBO3iOLr+z2xHT7Gd6wWzEyAZR8WXwQCO98Dr1Mto6BF4gyK77YtxEv80QEhtTszWaPQj7FLnjIu7Av+3MgwiwFO4gS69GTLY8GsBuhmCGwaY3/GhlkN0ONyFfnMZv8Ctza9toJqQLkAAAAASUVORK5CYII=";q(document.getElementById("root")).render(s.jsx(i.StrictMode,{children:s.jsx(Ae,{})}));function Ae(){const[d,p]=i.useState(""),[f,j]=i.useState([]),[x,M]=i.useState("student"),[m,c]=i.useState(null),[S,N]=i.useState([]);i.useState([]);const[I,u]=i.useState(null),[l,n]=i.useState(!1),[r,a]=i.useState(!1),e=i.useRef(null),t=i.useRef(null),o=i.useRef(null),[A,h]=i.useState(""),[y,v]=i.useState(!1);function Z(g){N(g),setTimeout(()=>{e.current.scrollTop=e.current.scrollHeight},100)}i.useEffect(()=>{m&&te(m.activityId,m.id,Z)},[m]),i.useEffect(()=>{O(()=>{});const g=()=>{window.innerWidth<800?n(!0):n(!1)};return window.addEventListener("resize",g),g(),()=>window.removeEventListener("resize",g)},[]);function J(g){const b={weekday:"long",year:"numeric",month:"long",day:"numeric"};return g.toLocaleDateString("en-US",b)}function Y(g){const b=[];let w=new Date(0);return g.forEach(C=>{C.timeSent.toDateString()!=w.toDateString()&&(b.push({time:J(C.timeSent)}),w=C.timeSent),b.push(C)}),b}i.useEffect(()=>{a(!0),O(()=>{});const b=new URLSearchParams(window.location.search).get("activityId");b&&(p(b),U(b).then(C=>{C&&h(C.name)})),re(b,j).then(()=>{ne().then(C=>{u(C)})});const w=localStorage.getItem("accountType");w&&M(w)},[]),i.useEffect(()=>{async function g(){if(y||!f||f.length==0)return;a(!1);const b=new URLSearchParams(window.location.search),w=b.get("groupChatId");if(console.log(w),w){const B=f.find(D=>D.id==w);B&&c(B)}const C=b.get("studentId");if(console.log(C),C){const B=f.find(D=>D.id==C);if(B)c(B);else{const D=Q.fromBlank(I.fullname,I.email,I.phoneNumber,I.FCMToken,I.uid),L=localStorage.getItem("viewingUser");if(L){const G=JSON.parse(L),X=Q.fromBlank(G.fullname,G.email,G.phoneNumber,G.FCMToken,G.uid);ae(D,X,d).then(F=>{console.log(F==null?void 0:F.toMap()),c(F),localStorage.removeItem("viewingUser")})}}}v(!0)}g()},[f]);async function _(g){if(!I||!m)return;const b=z.fromBlank(g,I.uid,I.fullname,I.FCMToken,m.id,d,"",new Date,[I.uid]);await W(d,m.id,b,A)}return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"title",children:s.jsx("h1",{children:"Messages"})}),s.jsxs("div",{className:"center",children:[s.jsxs("div",{className:"window",children:[(!l||l&&!m)&&s.jsxs("div",{className:"left",children:[s.jsx("div",{className:"groupChats",children:r?s.jsx("div",{className:"loader"}):f.map(g=>s.jsx(he,{groupChat:g,onClick:()=>{c(g)}}))}),s.jsxs("div",{className:"GCOptions "+x,children:[s.jsx("button",{className:"ActionBtn",onClick:()=>{t.current.showModal()},children:"Create Group Chat"}),x=="teacher"&&s.jsx("button",{className:"ActionBtn",onClick:()=>{o.current.showModal()},children:"Broadcast Message"})]})]}),(!l||l&&m)&&s.jsx("div",{className:"right",children:m?s.jsxs("div",{className:"selectedGroupChat",children:[s.jsxs("div",{className:"back-div",children:[l&&s.jsx("img",{src:ge,alt:"",onClick:()=>c(null)}),s.jsx("h2",{children:m.name})]}),s.jsx("div",{className:"messages",ref:e,children:Y(S).map(g=>Object.prototype.hasOwnProperty.call(g,"time")?s.jsx("div",{className:"timeSeparator",children:g.time}):s.jsx(de,{message:g,isSender:g.senderUid==localStorage.getItem("userId")}))}),s.jsx(fe,{sendMessage:_})]}):s.jsx("div",{className:"noSelectedGroupChat",children:s.jsx("h1",{children:"No Group Chat Selected"})})})]}),s.jsx("br",{}),s.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/?activityId="+d},children:"Back"})]}),s.jsx(me,{dialogRef:t,refresh:()=>{},close:()=>{t.current.close()},activityId:d}),s.jsx(pe,{activityName:A,dialogRef:o,refresh:()=>{},close:()=>{o.current.close()},activityId:d,userData:I})]})}
