import{j as n,c as Ee,r as d,i as Ae}from"./index-DWR5KKwA.js";import{g as we,h as B,i as R,C as I,b as D,E as S,F as U,j as Fe,k as p,l as Ne}from"./constants-CXJ8D7Nk.js";import{e as ye,o as Le,m as Me,p as Be,q as Re,r as Ue,t as Ge}from"./db-CZpO0_9_.js";import{A as He,S as Oe,D as _e,C as Pe,E as Ye,a as ze}from"./Show_Group_Display_Tile-CnZ6LNHT.js";import{C as Je}from"./Calendar-oHxCaH24.js";import{C as qe,S as Ve}from"./Show_Group_Tile-Bv3ur1Fj.js";import{E as We}from"./Ensemble_Section_Tile-CEUEr9tW.js";import{F as Ke}from"./Full_Cast_Tile-BCr8st2L.js";import"./trash-BnpXJPEK.js";function se({conflictResponseDate:x,actor:G}){return n.jsx("div",{className:"ConflictDisplayTile ",id:"conflict-display-tile-"+G.userId,children:n.jsx("div",{className:"header",children:n.jsxs("div",{className:"CharacterNameDiv",children:[n.jsxs("label",{htmlFor:"Actor",children:["Actor: ",G.name]}),n.jsx("br",{}),n.jsxs("label",{htmlFor:"Actor",children:["Date: ",x.date.toDateString()]}),n.jsx("br",{}),x.canAttend?n.jsxs("label",{htmlFor:"Actor",children:[x.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",x.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):n.jsx("label",{htmlFor:"Actor",children:"Can't Attend"})]})})})}Ee(document.getElementById("root")).render(n.jsx(d.StrictMode,{children:n.jsx(Qe,{})}));function Qe(){const[x,G]=d.useState(""),[f,me]=d.useState(),[J,he]=d.useState(""),[i,pe]=d.useState(),[ne,b]=d.useState("date"),[H,L]=d.useState(null),[oe,E]=d.useState(null),[ce,A]=d.useState(null),[v,k]=d.useState("custom"),[ae,T]=d.useState(""),[re,M]=d.useState(""),[ge,w]=d.useState(""),[Ie,F]=d.useState(""),[ie,O]=d.useState(void 0),[be,le]=d.useState(!1),[N,_]=d.useState([]),[P,Y]=d.useState([]),[m,u]=d.useState([]),[q,z]=d.useState(!1),[g,Ce]=d.useState([]),[V,h]=d.useState([]),[W,Se]=d.useState(!1),[C,y]=d.useState(null),[K,Q]=d.useState(!1),[je,xe]=d.useState(null),[ve,X]=d.useState(),[de,ue]=d.useState(!1),[Z,$]=d.useState(!1),[ee,ke]=d.useState([]);d.useEffect(()=>{Ae(()=>{});const a=new URLSearchParams(window.location.search),r=a.get("activityId");r&&(G(r),ye(r).then(s=>{s instanceof we||(me(s),X(s==null?void 0:s.rehearsalLocations[0]))}));const e=a.get("showId");e&&(he(e),Le(r,e).then(s=>{const t=[];for(const o of s)for(const l of o.dates)t.push({conflictResponseDate:l,actor:o.actor});t.sort((o,l)=>o.conflictResponseDate.date.getTime()-l.conflictResponseDate.date.getTime()),Ce(t),h([...t])})),Me(r,e).then(s=>{pe(s),s!=null&&s.hasEnsemble&&ke(s.ensemble.actors)}),Be(r,e).then(s=>{_(s);const t=[];for(const o of s){console.log(o);const l=o.date.from;console.log(o.date.date),l.setDate(o.date.date.getDate()),l.setMonth(o.date.date.getMonth()),l.setFullYear(o.date.date.getFullYear());const j=o.date.to;j.setDate(o.date.date.getDate()),j.setMonth(o.date.date.getMonth()),j.setFullYear(o.date.date.getFullYear()),console.log(l),console.log(j),console.log(o.rehearsalLocation.color),console.log(B(R(o.rehearsalLocation.color),0)),console.log(B(R(o.rehearsalLocation.color),1)),t.push({title:o.name,start:l.toISOString(),end:j.toISOString(),isAllDay:!1,interactive:!0,color:B(R(o.rehearsalLocation.color),.8),description:"Location: "+o.rehearsalLocation.name+`
`+o.info,id:o.id})}Y(t)});const c=()=>{window.innerWidth<800?ue(!0):ue(!1)};return window.addEventListener("resize",c),c(),()=>window.removeEventListener("resize",c)},[]);const Te=a=>{const r=a.target.value,[e,c]=r.split(":").map(Number),s=new Date(H);s.setHours(e,c,0,0),E(s),w(s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},De=a=>{const r=a.target.value,[e,c]=r.split(":").map(Number),s=new Date(H);s.setHours(e,c,0,0),A(s),F(s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};Date.prototype.addHours=function(a){return this.setTime(this.getTime()+a*60*60*1e3),this};function fe(){return N}return n.jsxs("div",{className:"center",children:[n.jsx("h1",{className:"title",children:"Create Schedule"}),ne=="date"?n.jsxs(n.Fragment,{children:[" ",n.jsx("h2",{className:"title",children:"Select a Date"}),n.jsxs("div",{className:"date-div",children:[n.jsxs("div",{children:[n.jsxs("h2",{children:["Conflicts",C!=null?" on "+C.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:Z,onChange:a=>{if($(a.target.checked),a.target.checked){const r=[];for(const e of g)ee.find(c=>c.userId==e.actor.userId)||r.push(e);h(r)}}}),n.jsx("span",{className:"checkmark",children:" "})]})," "]}),n.jsx("div",{className:"conflicts",children:V.map((a,r)=>n.jsx(se,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},r))})]}),n.jsx(Je,{canOpenContextMenu:!0,events:P,editEvent:a=>{const r=fe().find(e=>e.id==a.id);r&&(console.log(r),b("info"),T(r.name),M(r.info),L(r.date.date),E(r.date.from),w(r.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),A(r.date.to),F(r.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),O(r.location),X(r.rehearsalLocation),u(r.characters),Q(!0),k(r.theaterEventType),xe(r))},viewEvent:a=>{const r=fe().find(e=>e.id==a.id);r&&(localStorage.setItem("event",JSON.stringify(r)),localStorage.setItem("back","/Activity/Shows/Show/CreateSchedule/?activityId="+x+"&showId="+J),window.location.href="/Calendar/Event/")},viewConflicts:a=>{const r=new Date(a);r.setHours(0,0,0,0),y(r);const e=[];for(const c of g)c.conflictResponseDate.date.getTime()==r.getTime()&&e.push(c);h(e)},deleteEvent:async a=>{console.log(a);const r=N.find(s=>s.id==a.id),e=N.filter(s=>s.id!=a.id);_(e);const c=P.filter(s=>s.id!=a.id);Y(c),await Re(r)},dateClick:a=>{console.log(a.date),L(a.date);const r=new Date(a.date);r.setHours(0,0,0,0),y(r);const e=[];for(const s of g)s.conflictResponseDate.date.getTime()==r.getTime()&&e.push(s);h(e),E(new Date(a.date)),w(a.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const c=new Date(a.date);A(c.addHours(1)),console.log(c),F(a.date.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),b("type")},eventClick:a=>{L(a.event.start);const r=new Date(a.event.start);r.setHours(0,0,0,0),y(r);const e=[];for(const s of g)s.conflictResponseDate.date.getTime()==r.getTime()&&e.push(s);h(e),E(new Date(a.event.start)),w(a.event.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const c=new Date(a.event.end);A(c),F(c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),b("type")}})]}),n.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(N)),window.open("/Activity/Shows/Show/Schedule/Print/","_blank")},children:"Print"}),n.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/Shows/Show/?activityId="+x+"&showId="+J},children:"Back"})]}):ne=="type"?n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"title",children:"Select a Rehersal Type"}),!de&&n.jsxs("div",{className:"conflicts-div",children:[n.jsxs("h2",{children:["Conflicts",C!=null?" on "+C.toDateString():""]}),n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),(i==null?void 0:i.hasEnsemble)&&n.jsx(n.Fragment,{children:n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:Z,onChange:a=>{if($(a.target.checked),a.target.checked){const r=[],e=new Date(H);e.setHours(0,0,0,0);for(const c of g)ee.find(s=>s.userId==c.actor.userId)||c.conflictResponseDate.date.getTime()==e.getTime()&&r.push(c);h(r)}}}),n.jsx("span",{className:"checkmark",children:" "})]})}),n.jsx("div",{className:"conflicts",children:V.map((a,r)=>n.jsx(se,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},r))})]}),n.jsx("button",{onClick:()=>{b("info"),k("custom"),u([])},className:"ActionBtn",children:"Custom"}),n.jsx("h2",{className:"title",children:"Show Layout"}),n.jsx("div",{className:"layout",children:i==null?void 0:i.layout.map((a,r)=>n.jsx(He,{act:a,onClick:e=>{k("scene"),T(e.name+" - "+a.name),b("info"),u(e.characters);const c=[];for(const t of e.characters)if(t instanceof I)c.includes(t.actor.userId)&&c.push(t.actor.userId);else if(t instanceof D){for(const o of t.characters)if(o instanceof I)c.includes(o.actor.userId)&&c.push(o.actor.userId);else if(o instanceof S){if(o.includeAll)for(const l of i.ensemble.actors)c.includes(l.userId)&&c.push(l.userId);else if(o.includeMale)for(const l of i.ensemble.actors)l.gender=="male"&&c.includes(l.userId)&&c.push(l.userId);else if(o.includeFemale)for(const l of i.ensemble.actors)l.gender=="female"&&c.includes(l.userId)&&c.push(l.userId);else if(o.includeCustom)for(const l of o.customActors)c.includes(l.userId)&&c.push(l.userId)}}else if(t instanceof S){if(t.includeAll)for(const o of i.ensemble.actors)c.includes(o.userId)&&c.push(o.userId);else if(t.includeMale)for(const o of i.ensemble.actors)o.gender=="male"&&c.includes(o.userId)&&c.push(o.userId);else if(t.includeFemale)for(const o of i.ensemble.actors)o.gender=="female"&&c.includes(o.userId)&&c.push(o.userId);else if(t.includeCustom)for(const o of t.customActors)c.includes(o.userId)&&c.push(o.userId)}else if(t instanceof U){for(const o of i.ensemble.actors)c.includes(o.userId)&&c.push(o.userId);for(const o of i.characters)c.includes(o.actor.userId)||c.push(o.actor.userId)}const s=[];for(const t of g)c.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==C.getTime()&&s.push(t);h(s)}},r))}),n.jsx("h2",{className:"title",children:"Songs"}),n.jsx("div",{className:"songs",children:i==null?void 0:i.songs.map((a,r)=>n.jsx(Oe,{song:a,onClick:()=>{k("song"),T(a.name),u(a.characters),b("info");const e=[];for(const s of a.characters)if(s instanceof I)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof D){for(const t of s.characters)if(t instanceof I)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof S){if(t.includeAll)for(const o of i.ensemble.actors)e.includes(o.userId)&&e.push(o.userId);else if(t.includeMale)for(const o of i.ensemble.actors)o.gender=="male"&&e.includes(o.userId)&&e.push(o.userId);else if(t.includeFemale)for(const o of i.ensemble.actors)o.gender=="female"&&e.includes(o.userId)&&e.push(o.userId);else if(t.includeCustom)for(const o of t.customActors)e.includes(o.userId)&&e.push(o.userId)}}else if(s instanceof S){if(s.includeAll)for(const t of i.ensemble.actors)e.includes(t.userId)&&e.push(t.userId);else if(s.includeMale)for(const t of i.ensemble.actors)t.gender=="male"&&e.includes(t.userId)&&e.push(t.userId);else if(s.includeFemale)for(const t of i.ensemble.actors)t.gender=="female"&&e.includes(t.userId)&&e.push(t.userId);else if(s.includeCustom)for(const t of s.customActors)e.includes(t.userId)&&e.push(t.userId)}else if(s instanceof U){for(const t of i.ensemble.actors)e.includes(t.userId)&&e.push(t.userId);for(const t of i.characters)e.includes(t.actor.userId)||e.push(t.actor.userId)}const c=[];for(const s of g)e.includes(s.actor.userId)&&s.conflictResponseDate.date.getTime()==C.getTime()&&c.push(s);h(c)}},r))}),n.jsx("h2",{className:"title",children:"Dances"}),n.jsx("div",{className:"dances",children:i==null?void 0:i.dances.map((a,r)=>n.jsx(_e,{dance:a,onClick:()=>{k("dance"),T(a.name),b("info"),u(a.characters);const e=[];for(const s of a.characters)if(s instanceof I)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof D){for(const t of s.characters)if(t instanceof I)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof S){if(t.includeAll)for(const o of i.ensemble.actors)e.includes(o.userId)&&e.push(o.userId);else if(t.includeMale)for(const o of i.ensemble.actors)o.gender=="male"&&e.includes(o.userId)&&e.push(o.userId);else if(t.includeFemale)for(const o of i.ensemble.actors)o.gender=="female"&&e.includes(o.userId)&&e.push(o.userId);else if(t.includeCustom)for(const o of t.customActors)e.includes(o.userId)&&e.push(o.userId)}}else if(s instanceof S){if(s.includeAll)for(const t of i.ensemble.actors)e.includes(t.userId)&&e.push(t.userId);else if(s.includeMale)for(const t of i.ensemble.actors)t.gender=="male"&&e.includes(t.userId)&&e.push(t.userId);else if(s.includeFemale)for(const t of i.ensemble.actors)t.gender=="female"&&e.includes(t.userId)&&e.push(t.userId);else if(s.includeCustom)for(const t of s.customActors)e.includes(t.userId)&&e.push(t.userId)}else if(s instanceof U){for(const t of i.ensemble.actors)e.push(t.userId);for(const t of i.characters)e.includes(t.actor.userId)||e.push(t.actor.userId)}const c=[];for(const s of g)e.includes(s.actor.userId)&&s.conflictResponseDate.date.getTime()==C.getTime()&&c.push(s);h(c)}},r))}),n.jsx("button",{onClick:()=>{b("date"),y(null),h([...g])},className:"ActionBtn",children:"Back"})]}):n.jsxs(n.Fragment,{children:[!de&&n.jsxs("div",{className:"conflicts-div",children:[n.jsxs("h2",{children:["Conflicts",C!=null?" on "+C.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:Z,onChange:a=>{if($(a.target.checked),a.target.checked){const r=[],e=[];for(const c of m)if(c instanceof I)e.includes(c.actor.userId)&&e.push(c.actor.userId);else if(c instanceof D){for(const s of c.characters)if(s instanceof I)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s.includeAll)for(const t of i.ensemble.actors)e.includes(t.userId)&&e.push(t.userId);else if(s.includeMale)for(const t of i.ensemble.actors)t.gender=="male"&&e.includes(t.userId)&&e.push(t.userId);else if(s.includeFemale)for(const t of i.ensemble.actors)t.gender=="female"&&e.includes(t.userId)&&e.push(t.userId);else if(s.includeCustom)for(const t of s.customActors)e.includes(t.userId)&&e.push(t.userId)}else if(c instanceof S){if(c.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(c.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(c.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(c.includeCustom)for(const s of c.customActors)e.includes(s.userId)&&e.push(s.userId)}else{for(const s of i.ensemble.actors)e.push(s.userId);for(const s of i.characters)e.includes(s.actor.userId)||e.push(s.actor.userId)}for(const c of g)ee.find(s=>s.userId==c.actor.userId)||e.includes(c.actor.userId)&&c.conflictResponseDate.date.getTime()==C.getTime()&&r.push(c);h(r)}}}),n.jsx("span",{className:"checkmark",children:" "})]})," "]}),n.jsx("div",{className:"conflicts",children:V.map((a,r)=>n.jsx(se,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},r))})]}),n.jsx("h2",{className:"title",children:"Enter Rehersal Information"}),n.jsx("label",{htmlFor:"Name",children:"Name: "}),n.jsx("input",{type:"text",value:ae,onChange:a=>{T(a.target.value)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"Description",children:"Description: "}),n.jsx("textarea",{value:re,onChange:a=>{M(a.target.value)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),n.jsx("input",{type:"time",value:ge,onChange:Te}),n.jsx("br",{}),n.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),n.jsx("input",{type:"time",value:Ie,onChange:De}),n.jsx("br",{}),n.jsx("label",{htmlFor:"location",children:"Location: "}),n.jsx("select",{name:"location",id:"location",onChange:a=>{O(f==null?void 0:f.locations.find(r=>r.name==a.target.value))},children:f==null?void 0:f.locations.map((a,r)=>n.jsx("option",{value:a.name,children:a.name+" ("+a.address+")"},r))}),n.jsx("br",{}),n.jsx("label",{htmlFor:"location",children:"Rehersal Location: "}),n.jsx("select",{name:"location",id:"rehersal-location",onChange:a=>{X(f==null?void 0:f.rehearsalLocations.find(r=>r.name==a.target.value))},children:f==null?void 0:f.rehearsalLocations.map((a,r)=>n.jsx("option",{value:a.name,children:a.name},r))}),n.jsx("br",{}),v=="custom"?n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"fullCast",children:"Full Cast: "}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:W,onChange:a=>Se(a.target.checked)}),n.jsx("span",{className:"checkmark"})]})]}):n.jsx(n.Fragment,{}),v=="custom"&&n.jsx("br",{}),W?n.jsx(n.Fragment,{}):n.jsxs(n.Fragment,{children:[" ",n.jsx("h2",{children:"Characters"}),n.jsx("div",{className:"characters",children:m.map((a,r)=>{if(a instanceof I)return v=="custom"?n.jsx(qe,{character:a,isCreate:!1,actors:[],characters:i.characters,isAssign:!1,setCharacter:e=>{u(m.map((c,s)=>s===r?e:c))},removeCharacter:()=>{u(m.filter((e,c)=>c!==r))}},r):n.jsx(Pe,{character:a,canDelete:!0,onDelete:()=>{u(m.filter((e,c)=>c!==r))},isMini:!1},r);if(a instanceof S)return v=="custom"?n.jsx(We,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:a,isCustom:!0,setEnsembleSection:e=>{u(m.map((c,s)=>s===r?e:c))},removeEnsembleSection:()=>{u(m.filter((e,c)=>c!==r))},isCreate:!1,isAssign:!1,actors:f.students},r):n.jsx(Ye,{ensembleSection:a,canDelete:!0,onDelete:()=>{u(m.filter((e,c)=>c!==r))},isMini:!1},r);if(a instanceof D)return v=="custom"?n.jsx(Ve,{showGroup:a,characters:i.characters,setShowGroup:e=>{u(m.map((c,s)=>s===r?e:c))},removeShowGroup:()=>{u(m.filter((e,c)=>c!==r))},isCreate:!1,isAssign:!1,actors:f.students,hasEnsemble:i.hasEnsemble,showGroups:i.showGroups},r):n.jsx(ze,{showGroup:a,showCharacters:!0,canClick:!1,onClick:()=>{},canDelete:!0,onDelete:()=>{u(m.filter((e,c)=>c!==r))}},r);if(a instanceof U)return n.jsx(Ke,{canDelete:!0,onDelete:()=>{u(m.filter((e,c)=>c!==r))}},r)})}),v=="custom"?n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);u([...m,I.fromBlank("Character 1",null,a,0)])},children:"Add Character"}),n.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);u([...m,D.fromBlank("Show Group 1",[],a,0)])},children:"Add Show Group"}),(i==null?void 0:i.hasEnsemble)&&n.jsx("button",{className:"ActionBtn "+(q?"disabled":""),disabled:q,onClick:()=>{q||(z(!0),u([...m,S.fromBlank(!0,!1,!1,!1,[],0)]))},children:"Add Ensemble"})," "]}):n.jsx(n.Fragment,{})," "]}),n.jsx("br",{}),be?n.jsx("div",{className:"loader"}):n.jsx("button",{onClick:async()=>{le(!0),console.log("Submit");const a=ie??f.locations[0];console.log(oe),console.log(ce);const r=Fe.fromBlank(H,oe,ce);console.log(r);const e=[];if(W){for(const s of i.ensemble.actors)e.push(p.fromBlank(s.name,s.userId,s.FCMToken));for(const s of i.characters)e.find(t=>t.memberUid==s.actor.userId)==null&&e.push(p.fromBlank(s.actor.name,s.actor.userId,s.actor.FCMToken))}else for(const s of m){if(s instanceof U){for(const t of i.ensemble.actors)e.push(p.fromBlank(t.name,t.userId,t.FCMToken));for(const t of i.characters)e.find(o=>o.memberUid==t.actor.userId)==null&&e.push(p.fromBlank(t.actor.name,t.actor.userId,t.actor.FCMToken));break}if(s instanceof I){if(e.find(t=>t.memberUid==s.actor.userId)!=null)continue;e.push(p.fromBlank(s.actor.name,s.actor.userId,s.actor.FCMToken))}if(s instanceof S){if(s.includeAll)for(const t of i.ensemble.actors)e.find(o=>o.memberUid==t.userId)==null&&e.push(p.fromBlank(t.name,t.userId,t.FCMToken));else if(s.includeMale){for(const t of i.ensemble.actors)if(t.gender=="male"){if(e.find(o=>o.memberUid==t.userId)!=null)continue;e.push(p.fromBlank(t.name,t.userId,t.FCMToken))}}else if(s.includeFemale){for(const t of i.ensemble.actors)if(t.gender=="female"){if(e.find(o=>o.memberUid==t.userId)!=null)continue;e.push(p.fromBlank(t.name,t.userId,t.FCMToken))}}else if(s.includeCustom)for(const t of s.customActors)e.find(o=>o.memberUid==t.userId)==null&&e.push(p.fromBlank(t.name,t.userId,t.FCMToken))}if(s instanceof D)for(const t of s.characters){if(t instanceof I){if(e.find(o=>o.memberUid==t.actor.userId)!=null)continue;e.push(p.fromBlank(t.actor.name,t.actor.userId,t.actor.FCMToken))}if(t instanceof S){if(t.includeAll)for(const o of i.ensemble.actors)e.find(l=>l.memberUid==o.userId)==null&&e.push(p.fromBlank(o.name,o.userId,o.FCMToken));else if(t.includeMale){for(const o of i.ensemble.actors)if(o.gender=="male"){if(e.find(l=>l.memberUid==o.userId)!=null)continue;e.push(p.fromBlank(o.name,o.userId,o.FCMToken))}}else if(t.includeFemale){for(const o of i.ensemble.actors)if(o.gender=="female"){if(e.find(l=>l.memberUid==o.userId)!=null)continue;e.push(p.fromBlank(o.name,o.userId,o.FCMToken))}}else if(t.includeCustom)for(const o of t.customActors)e.find(l=>l.memberUid==o.userId)==null&&e.push(p.fromBlank(o.name,o.userId,o.FCMToken))}}}const c=Ne.fromBlank(ae,re,a,r,"activity-theater-event",Date.now(),x,f.name,J,i.name,m,e,v,f.eventTypes[0],ve);if(console.log(c),K){c.id=je.id,await Ue(c),Q(!1);const s=c.date.from,t=c.date.to,o={title:c.name,start:s.toISOString(),end:t.toISOString(),isAllDay:!1,interactive:!0,description:"Location: "+c.rehearsalLocation.name+`
`+c.info,color:B(R(c.rehearsalLocation.color),.8),id:c.id},l=P.filter(te=>te.id!=c.id);l.push(o),Y(l);const j=N.filter(te=>te.id!=c.id);j.push(c),console.log(j),_([...j])}else{await Ge(c);const s=c.date.from,t=c.date.to,o={title:c.name,start:s.toISOString(),end:t.toISOString(),isAllDay:!1,interactive:!0,color:B(R(c.rehearsalLocation.color),.8),id:c.id,description:"Location: "+c.rehearsalLocation.name+`
`+c.info};Y([...P,o]),_([...N,c])}le(!1),b("date"),L(null),E(null),A(null),k("custom"),T(""),M(""),w(""),F(""),O(void 0),z(!1),y(null),h(g)},className:"ActionBtn",children:K?"Save":"Submit"}),n.jsx("button",{onClick:()=>{if(K){b("date"),L(null),E(null),A(null),k("custom"),T(""),M(""),w(""),F(""),O(void 0),z(!1),y(null),h(g),Q(!1);return}b("type"),M(""),z(!1);const a=[];for(const r of g)r.conflictResponseDate.date.getTime()==C.getTime()&&a.push(r);h(a)},className:"ActionBtn",children:"Back"})]})]})}
