import{r as n,j as e,v as b,w as T,L as B,G as k,x as E,c as I,y as p,i as F}from"./index-TIL8WiPk.js";import{G as O,H as S,I as D,J as G,K as M,h as P}from"./db-DunmcTym.js";function U({addRehearsalLocation:r,close:u,dialogRef:s}){const[l,i]=n.useState(""),[x,d]=n.useState("#000000");return e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Add Rehearsal Location"}),e.jsxs("div",{className:"location-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:l,onChange:h=>{i(h.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:x,onChange:h=>{d(h.target.value)}}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{r(b.fromBlank(l,T(x)))},children:"Add Rehearsal Location"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{u()},children:"Close"})]})]})}const R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAgCAYAAADqgqNBAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAH6ADAAQAAAABAAAAIAAAAABT9vqhAAABMUlEQVRIDe2WO07DQBBAbSsFJE1OQEmgTUGJRDgAxyC5SAo6OAiKUkcK5Ax0IKUDpBSpSOnNG/CKkWVHsr3rRIpXevb6s/N2xlM4CI5hGGNO4BE+YAxRLXkjOoUZ6PHkXY4tgrRYNhF7Tz0Mw5gMn8GkMl2mrt1dklkbrmxE5iPJFmSsoW+fOT0TWMRz2MDABmd+DyvwLsbxO3443qgNdO3c6RmJzfhP+3+UDVw7lelgO8SyhW+41O87mx+q+GtfGYv4wll5dSACd+AFskYj1sWqNqe+Tal1k3lvrldtU/O9invVuihnddJceRl/8rwR59Su4O2jLLX8Vy8ga/hrLvkyGIdZVu75FSfytwx5LeLbHPF5wX4t/jriiZLLj94DnBWPVGIFoneYwh20SoQovWQLokOD66GvfLEAAAAASUVORK5CYII=";async function V(r){const u=`https://maps.googleapis.com/maps/api/geocode/json?address=${r}&key=AIzaSyA2saT3TcMaenLp4Im3VhI7zT79mXlN9PI`;try{const s=await fetch(u,{method:"POST"});if(s.ok){const l=await s.json(),i={lat:l.results[0].geometry.location.lat,lon:l.results[0].geometry.location.lng};return console.log(i),i}else return console.error(`Request failed with status: ${s.status}`),{lat:0,lon:0}}catch(s){return console.error(`Request failed: ${s}`),{lat:0,lon:0}}}function q({addLocation:r,close:u,dialogRef:s,savedLocations:l}){const[i,x]=n.useState(""),[d,h]=n.useState(""),[A,f]=n.useState(void 0),[g,v]=n.useState(!1);return e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Add Location"}),e.jsxs("div",{className:"location-info",children:[l.length>0?e.jsxs(e.Fragment,{children:[" ",e.jsx("h3",{children:"Select from saved locations"}),e.jsxs("select",{name:"",id:"saved-locations",onChange:o=>{f(l.find(j=>j.name==o.target.value))},children:[e.jsx("option",{value:"",selected:!0,children:"Select a location"}),l.map((o,j)=>e.jsxs("option",{value:o.name,children:[o.name," (",o.address,")"]},j))]}),e.jsx("h3",{children:"Or add a new location"})]}):e.jsx("h3",{children:"Add a new location"}),e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:i,onChange:o=>{x(o.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Address: "}),e.jsx("input",{type:"text",value:d,onChange:o=>{h(o.target.value)}}),e.jsx("br",{}),g?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(v(!0),(i==""||d=="")&&A==null){alert("Please fill out all fields"),v(!1);return}if(A){r(A);return}const o=await V(d);console.log(o),r(B.fromBlank(i,d,new k(o.lat,o.lon),!1)),v(!1)},children:"Add Location"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{u()},children:"Close"})]})]})}function K({addEventType:r,close:u,dialogRef:s,eventTypes:l}){const[i,x]=n.useState(""),[d,h]=n.useState("#000000");return e.jsxs("dialog",{ref:s,children:[e.jsx("h2",{children:"Add Event Type"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:i,onChange:A=>{x(A.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Color: "}),e.jsx("input",{type:"color",value:d,onChange:A=>{h(A.target.value)}}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{if(i==""){alert("Please fill out all fields");return}if(l.find(A=>A.name==i)){alert("Event type with that name already exists");return}r(E.fromBlank(i,T(d)))},children:"Add Event Type"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{u()},children:"Close"})]})]})}I(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(Q,{})}));function Q(){const[r,u]=n.useState(""),[s,l]=n.useState(null),[i,x]=n.useState("student"),d=n.useRef(null),h=n.useRef(null),A=n.useRef(null),[f,g]=n.useState([]),[v,o]=n.useState([]),[j,y]=n.useState([]),[C,L]=n.useState(!0);return n.useEffect(()=>{async function t(){L(!0),F(()=>{});const c=new URLSearchParams(window.location.search).get("activityId");if(c){u(c);const w=await M();y(w)}const m=await P(c);m&&(l(m),m instanceof p&&g(m.rehearsalLocations),o(m.eventTypes));const N=localStorage.getItem("accountType");N&&x(N),L(!1)}t()},[]),e.jsx(e.Fragment,{children:C?e.jsx("div",{className:"center",children:e.jsx("div",{className:"loader"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"title",children:[e.jsxs("h1",{children:["Activity: ",s==null?void 0:s.name]}),e.jsxs("h3",{children:["Join Code: ",s==null?void 0:s.joinCode]}),e.jsx("h2",{children:"Saved Locations"}),e.jsx("div",{className:"saved-locations",children:s==null?void 0:s.locations.map((t,a)=>(console.log(t),e.jsx("div",{className:"saved-location",children:e.jsxs("label",{htmlFor:"",className:"saved-location-name",children:[t.name," (",t.address,")"]})})))}),e.jsx("button",{className:"ActionBtn",onClick:t=>{var a;(a=h.current)==null||a.showModal()},children:"Add Location"}),s instanceof p&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Rehearsal Locations"}),e.jsx("div",{className:"rehearsal-locations",children:f.map((t,a)=>(console.log(t.color),e.jsxs("div",{className:"rehearsal-location",children:[e.jsx("label",{htmlFor:"",className:"rehearsal-location-name",children:t.name}),e.jsxs("div",{className:"rehearsal-location-right",children:[e.jsx("div",{className:"rehearsal-location-color",style:{backgroundColor:t.color.toRBGAString()}}),e.jsx("img",{src:R,alt:""})]})]})))}),e.jsx("button",{className:"ActionBtn",onClick:t=>{var a;(a=d.current)==null||a.showModal()},children:"Add Rehearsal Location"})," "]}),e.jsx("h2",{children:"Event Types"}),e.jsx("div",{className:"event-types",children:v.map((t,a)=>e.jsxs("div",{className:"event-type",children:[e.jsx("label",{htmlFor:"",className:"event-type-name",children:t.name}),e.jsxs("div",{className:"event-type-right",children:[e.jsx("div",{className:"event-type-color",style:{backgroundColor:t.color.toRBGAString()}}),e.jsx("img",{src:R,alt:""})]})]}))}),e.jsx("button",{className:"ActionBtn",onClick:t=>{var a;(a=A.current)==null||a.showModal()},children:"Add Event Type"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/?activityId="+r},children:"Back"})]}),e.jsx(U,{dialogRef:d,addRehearsalLocation:async t=>{var a;if(s instanceof p){const c=[...s.rehearsalLocations];c.push(t),s.rehearsalLocations=c,console.log(c),g(c),await O(r,c),(a=d.current)==null||a.close()}},close:()=>{var t;(t=d.current)==null||t.close()}}),e.jsx(q,{dialogRef:h,close:()=>{var t;(t=h.current)==null||t.close()},addLocation:async function(t){var a,c;if(j.find(m=>m.name==t.name)){await S(r,t),(a=h.current)==null||a.close(),s.locations.push(t),l(s);return}await S(r,t),await D(t),y(m=>[...m,t]),s.locations.push(t),l(s),(c=h.current)==null||c.close()},savedLocations:j.filter(t=>!s.locations.find(a=>t.name==a.name))}),e.jsx(K,{dialogRef:A,close:()=>{var t;(t=A.current)==null||t.close()},addEventType:async t=>{var c;const a=[...s.eventTypes];a.push(t),o(a),await G(r,t),(c=A.current)==null||c.close()},eventTypes:s.eventTypes})]})})}
