import{r as j,j as e}from"./index-U3pxML4x.js";import{c as x,i as B,e as h,d as E}from"./constants-Yg3gz1gf.js";import{T as p}from"./trash-BnpXJPEK.js";import{A as T,E as S}from"./Ensemble_Section_Tile-z_MH0Ckt.js";function A({character:a,setCharacter:c,isCreate:d,removeCharacter:g,isAssign:t,characters:u,actors:v,hasCreatedSchedule:f}){const i=j.useRef(null);return console.log("CHARACTER TILE"),console.log(u),console.log(d),console.log(t),console.log(f),e.jsxs("div",{className:"CharacterTile",id:"character-tile-"+a.characterId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"CharacterNameDiv",children:[e.jsxs("label",{htmlFor:"Character",children:["Character:  ",t?a.name:""]}),d?e.jsx("input",{type:"text",name:"",id:"",value:a.name,onChange:l=>{c(x.fromBlank(l.target.value,a.actor,a.characterId))}}):t?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("div",{className:"CharacterActorDiv",children:a.actor!=null?e.jsxs(e.Fragment,{children:[e.jsxs("label",{htmlFor:"Actor",children:["Actor: ",a.actor.name]}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var l;(l=i.current)==null||l.showModal()},children:"Edit Actor"})]}):e.jsx(e.Fragment,{children:e.jsx("button",{className:"ActionBtn",onClick:()=>{var l;(l=i.current)==null||l.showModal()},children:"Assign Actor"})})})]}):e.jsxs("select",{name:"characters",id:"characters",value:a.characterId,onChange:l=>{l.target.value!="null"&&c(u.find(s=>s.characterId==parseInt(l.target.value)))},children:[e.jsx("option",{value:"null",children:"Select a character"}),u.map((l,s)=>(console.log(l),e.jsx("option",{value:l.characterId,children:l.name},s)))]})]}),e.jsx("div",{children:!t&&e.jsx("img",{src:p,alt:"",className:"TrashIcon",onClick:()=>{g()}})})]}),e.jsx(T,{actor:a.actor??new B,actors:v,keepPastResult:!1,addedActors:[],setActor:l=>{var s;(s=i.current)==null||s.close(),c(x.fromBlank(a.name,l,a.characterId))},dialogRef:i,close:()=>{var l;(l=i.current)==null||l.close()}})]})}function H({showGroup:a,setShowGroup:c,isCreate:d,removeShowGroup:g,isAssign:t,showGroups:u,hasEnsemble:v,characters:f,actors:i,hasCreatedSchedule:l}){const[s,b]=j.useState(!1),[I,N]=j.useState(0);return j.useEffect(()=>{N(Math.floor(Math.random()*1e5))},[]),console.log("SHOW GROUP TILE"),console.log(f),e.jsxs("div",{className:"ShowGroupTile"+(d||t?"Create":""),id:"show-group-tile-"+a.showGroupId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"ShowGroupNameDiv",children:[e.jsx("label",{htmlFor:"ShowGroup",children:"Show Group: "}),d?e.jsx("input",{type:"text",name:"",id:"",value:a.name,onChange:r=>{c(h.fromBlank(r.target.value,a.characters,a.showGroupId))}}):t?e.jsx(e.Fragment,{children:e.jsx("label",{htmlFor:"",children:a.name})}):e.jsxs("select",{name:"show groups",id:"showGroups",value:a.showGroupId,onChange:r=>{r.target.value!="null"&&c(u.find(n=>n.showGroupId==parseInt(r.target.value)))},children:[e.jsx("option",{value:"null",children:"Select a show group"}),u.map((r,n)=>e.jsx("option",{value:r.showGroupId,children:r.name},n))]})]}),e.jsx("div",{children:!t&&e.jsx("img",{src:p,alt:"",className:"TrashIcon",onClick:()=>{g()}})})]}),(d||t)&&e.jsx("br",{}),(d||t)&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Characters",children:"Characters: "}),e.jsx("div",{className:"characters",id:"characters-"+I,children:a.characters.map((r,n)=>{if(console.log(r),r instanceof x&&!t)return e.jsx(A,{character:r,actors:[],isCreate:!1,characters:f,isAssign:t,hasCreatedSchedule:l,setCharacter:o=>{c(h.fromBlank(a.name,a.characters.map((m,C)=>C===n?o:m),a.showGroupId))},removeCharacter:()=>{c(h.fromBlank(a.name,a.characters.filter((o,m)=>m!==n),a.showGroupId))}},n);if(r instanceof E)return e.jsx(S,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:r,isAssign:t,actors:i,isCustom:!1,isCreate:!0,setEnsembleSection:o=>{console.log("NEW ENSEMBLE SECTION"),console.log(o.toMap());const m=h.fromBlank(a.name,a.characters.map((C,k)=>k===n?o:C),a.showGroupId);console.log("NEW SHOW GROUP"),console.log(m.toMap()),c(m)},removeEnsembleSection:()=>{b(!1),c(h.fromBlank(a.name,a.characters.filter((o,m)=>m!==n),a.showGroupId))}},n)})}),d&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"ActionBtn",onClick:()=>{const r=Math.floor(Math.random()*1e5),n=h.fromBlank(a.name,[...a.characters,x.fromBlank("",null,r)],a.showGroupId);n.hasCreatedSchedule=l??!1,c(n),setTimeout(()=>{const o=document.getElementById("characters-"+I);o.scrollTop=o.scrollHeight},100)},children:"Add Character"}),e.jsx("br",{}),v&&e.jsx("button",{className:"ActionBtn "+(s?"disabled":""),disabled:s,onClick:()=>{if(s)return;b(!0),setTimeout(()=>{const n=document.getElementById("characters-"+I);n.scrollTop=n.scrollHeight},100);const r=h.fromBlank(a.name,[...a.characters,E.fromBlank(!0,!1,!1,!1,[])],a.showGroupId);r.hasCreatedSchedule=l??!1,c(r)},children:"Add Ensemble"})]})]})]})}export{A as C,H as S};
