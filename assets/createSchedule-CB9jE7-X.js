import{j as n,c as Ee,r as d,i as Ae}from"./index-BrX1-YwQ.js";import{g as we,C as g,b as E,E as S,F as H,h as ke,i as Fe}from"./constants-BNam4_mG.js";import{e as Ne,p as ye,m as Le,q as Re,r as Me,t as Be,v as Ge}from"./db-NP6WfWfT.js";import{A as He,S as Oe,D as _e,C as $e,E as Pe,a as Ue}from"./Show_Group_Display_Tile-D_MgBL7o.js";import{C as Ye}from"./Calendar-DR0cj4-X.js";import{C as ze,S as Je}from"./Show_Group_Tile-DV3vZFAf.js";import{E as qe}from"./Ensemble_Section_Tile-DY5QyTXH.js";import{F as Ve}from"./Full_Cast_Tile-BaHVR6tD.js";import"./trash-BnpXJPEK.js";function ie({conflictResponseDate:x,actor:O}){return n.jsx("div",{className:"ConflictDisplayTile ",id:"conflict-display-tile-"+O.userId,children:n.jsx("div",{className:"header",children:n.jsxs("div",{className:"CharacterNameDiv",children:[n.jsxs("label",{htmlFor:"Actor",children:["Actor: ",O.name]}),n.jsx("br",{}),n.jsxs("label",{htmlFor:"Actor",children:["Date: ",x.date.toDateString()]}),n.jsx("br",{}),x.canAttend?n.jsxs("label",{htmlFor:"Actor",children:[x.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",x.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):n.jsx("label",{htmlFor:"Actor",children:"Can't Attend"})]})})})}Ee(document.getElementById("root")).render(n.jsx(d.StrictMode,{children:n.jsx(We,{})}));function We(){const[x,O]=d.useState(""),[u,me]=d.useState(),[Q,he]=d.useState(""),[i,pe]=d.useState(),[le,I]=d.useState("date"),[_,M]=d.useState(null),[$,A]=d.useState(null),[P,w]=d.useState(null),[v,C]=d.useState("custom"),[U,D]=d.useState(""),[Y,B]=d.useState(""),[ge,k]=d.useState(""),[Ie,F]=d.useState(""),[T,G]=d.useState(void 0),[be,X]=d.useState(!1),[N,z]=d.useState([]),[J,q]=d.useState([]),[m,f]=d.useState([]),[Z,V]=d.useState(!1),[p,Se]=d.useState([]),[ee,h]=d.useState([]),[te,je]=d.useState(!1),[b,y]=d.useState(null),[se,ne]=d.useState(!1),[xe,ve]=d.useState(null),[L,W]=d.useState(),[R,K]=d.useState(void 0),[de,ue]=d.useState(!1),[oe,ce]=d.useState(!1),[re,Ce]=d.useState([]);d.useEffect(()=>{Ae(()=>{});const c=new URLSearchParams(window.location.search),a=c.get("activityId");a&&(O(a),Ne(a).then(t=>{t instanceof we||(me(t),W(t==null?void 0:t.rehearsalLocations[0]),K(t==null?void 0:t.eventTypes[0]),G(t==null?void 0:t.defaultLocation))}));const e=c.get("showId");e&&(he(e),ye(a,e).then(t=>{const s=[];for(const r of t)for(const l of r.dates)s.push({conflictResponseDate:l,actor:r.actor});s.sort((r,l)=>r.conflictResponseDate.date.getTime()-l.conflictResponseDate.date.getTime()),Se(s),h([...s])})),Le(a,e).then(t=>{pe(t),t!=null&&t.hasEnsemble&&Ce(t.ensemble.actors)}),Re(a,e).then(t=>{z(t);const s=[];for(const r of t){console.log(r);const l=r.date.from;console.log(r.date.date),l.setDate(r.date.date.getDate()),l.setMonth(r.date.date.getMonth()),l.setFullYear(r.date.date.getFullYear());const j=r.date.to;j.setDate(r.date.date.getDate()),j.setMonth(r.date.date.getMonth()),j.setFullYear(r.date.date.getFullYear()),console.log(l),console.log(j),console.log(r.rehearsalLocation.color),s.push({title:r.name,start:l.toISOString(),end:j.toISOString(),isAllDay:!1,interactive:!0,color:r.rehearsalLocation.color.setAlpha(.8).toHex(),description:"Location: "+r.rehearsalLocation.name+`
`+r.info,id:r.id})}q(s)});const o=()=>{window.innerWidth<800?ue(!0):ue(!1)};return window.addEventListener("resize",o),o(),()=>window.removeEventListener("resize",o)},[]);const De=c=>{const a=c.target.value,[e,o]=a.split(":").map(Number),t=new Date(_);t.setHours(e,o,0,0),A(t),k(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},Te=c=>{const a=c.target.value,[e,o]=a.split(":").map(Number),t=new Date(_);t.setHours(e,o,0,0),w(t),F(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};Date.prototype.addHours=function(c){return this.setTime(this.getTime()+c*60*60*1e3),this};function fe(){return N}return n.jsxs("div",{className:"center",children:[n.jsx("h1",{className:"title",children:"Create Schedule"}),le=="date"?n.jsxs(n.Fragment,{children:[" ",n.jsx("h2",{className:"title",children:"Select a Date"}),n.jsxs("div",{className:"date-div",children:[n.jsxs("div",{children:[n.jsxs("h2",{children:["Conflicts",b!=null?" on "+b.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:oe,onChange:c=>{if(ce(c.target.checked),c.target.checked){const a=[];for(const e of p)re.find(o=>o.userId==e.actor.userId)||a.push(e);h(a)}}}),n.jsx("span",{className:"checkmark",children:" "})]})," "]}),n.jsx("div",{className:"conflicts",children:ee.map((c,a)=>n.jsx(ie,{conflictResponseDate:c.conflictResponseDate,actor:c.actor},a))})]}),n.jsx(Ye,{canOpenContextMenu:!0,events:J,editEvent:c=>{const a=fe().find(e=>e.id==c.id);a&&(console.log(a),I("info"),D(a.name),B(a.info),M(a.date.date),A(a.date.from),k(a.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),w(a.date.to),F(a.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),G(a.location),W(a.rehearsalLocation),f(a.characters),K(a.activityEventType),ne(!0),C(a.theaterEventType),ve(a))},viewEvent:c=>{const a=fe().find(e=>e.id==c.id);a&&(localStorage.setItem("event",JSON.stringify(a)),localStorage.setItem("back","/Activity/Shows/Show/CreateSchedule/?activityId="+x+"&showId="+Q),window.location.href="/Calendar/Event/")},viewConflicts:c=>{const a=new Date(c);a.setHours(0,0,0,0),y(a);const e=[];for(const o of p)o.conflictResponseDate.date.getTime()==a.getTime()&&e.push(o);h(e)},deleteEvent:async c=>{console.log(c);const a=N.find(t=>t.id==c.id),e=N.filter(t=>t.id!=c.id);z(e);const o=J.filter(t=>t.id!=c.id);q(o),await Me(a)},dateClick:c=>{console.log(c.date),M(c.date);const a=new Date(c.date);a.setHours(0,0,0,0),y(a);const e=[];for(const t of p)t.conflictResponseDate.date.getTime()==a.getTime()&&e.push(t);h(e),A(new Date(c.date)),k(c.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(c.date);w(o.addHours(1)),console.log(o),F(c.date.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),I("type")},eventClick:c=>{M(c.event.start);const a=new Date(c.event.start);a.setHours(0,0,0,0),y(a);const e=[];for(const t of p)t.conflictResponseDate.date.getTime()==a.getTime()&&e.push(t);h(e),A(new Date(c.event.start)),k(c.event.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(c.event.end);w(o),F(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),I("type")}})]}),n.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(N)),window.open("/Activity/Shows/Show/Schedule/Print/","_blank")},children:"Print"}),n.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/Shows/Show/?activityId="+x+"&showId="+Q},children:"Back"})]}):le=="type"?n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"title",children:"Select a Rehersal Type"}),!de&&n.jsxs("div",{className:"conflicts-div",children:[n.jsxs("h2",{children:["Conflicts",b!=null?" on "+b.toDateString():""]}),n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),(i==null?void 0:i.hasEnsemble)&&n.jsx(n.Fragment,{children:n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:oe,onChange:c=>{if(ce(c.target.checked),c.target.checked){const a=[],e=new Date(_);e.setHours(0,0,0,0);for(const o of p)re.find(t=>t.userId==o.actor.userId)||o.conflictResponseDate.date.getTime()==e.getTime()&&a.push(o);h(a)}}}),n.jsx("span",{className:"checkmark",children:" "})]})}),n.jsx("div",{className:"conflicts",children:ee.map((c,a)=>n.jsx(ie,{conflictResponseDate:c.conflictResponseDate,actor:c.actor},a))})]}),n.jsx("button",{onClick:()=>{I("info"),C("custom"),f([])},className:"ActionBtn",children:"Custom"}),n.jsx("h2",{className:"title",children:"Show Layout"}),n.jsx("div",{className:"layout",children:i==null?void 0:i.layout.map((c,a)=>n.jsx(He,{act:c,onClick:e=>{C("scene"),D(e.name+" - "+c.name),I("info"),f(e.characters);const o=[];for(const s of e.characters)if(s instanceof g)o.includes(s.actor.userId)&&o.push(s.actor.userId);else if(s instanceof E){for(const r of s.characters)if(r instanceof g)o.includes(r.actor.userId)&&o.push(r.actor.userId);else if(r instanceof S){if(r.includeAll)for(const l of i.ensemble.actors)o.includes(l.userId)&&o.push(l.userId);else if(r.includeMale)for(const l of i.ensemble.actors)l.gender=="male"&&o.includes(l.userId)&&o.push(l.userId);else if(r.includeFemale)for(const l of i.ensemble.actors)l.gender=="female"&&o.includes(l.userId)&&o.push(l.userId);else if(r.includeCustom)for(const l of r.customActors)o.includes(l.userId)&&o.push(l.userId)}}else if(s instanceof S){if(s.includeAll)for(const r of i.ensemble.actors)o.includes(r.userId)&&o.push(r.userId);else if(s.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&o.includes(r.userId)&&o.push(r.userId);else if(s.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&o.includes(r.userId)&&o.push(r.userId);else if(s.includeCustom)for(const r of s.customActors)o.includes(r.userId)&&o.push(r.userId)}else if(s instanceof H){for(const r of i.ensemble.actors)o.includes(r.userId)&&o.push(r.userId);for(const r of i.characters)o.includes(r.actor.userId)||o.push(r.actor.userId)}const t=[];for(const s of p)o.includes(s.actor.userId)&&s.conflictResponseDate.date.getTime()==b.getTime()&&t.push(s);h(t)}},a))}),n.jsx("h2",{className:"title",children:"Songs"}),n.jsx("div",{className:"songs",children:i==null?void 0:i.songs.map((c,a)=>n.jsx(Oe,{song:c,onClick:()=>{C("song"),D(c.name),f(c.characters),I("info");const e=[];for(const t of c.characters)if(t instanceof g)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof E){for(const s of t.characters)if(s instanceof g)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof S){if(s.includeAll)for(const r of i.ensemble.actors)e.includes(r.userId)&&e.push(r.userId);else if(s.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&e.includes(r.userId)&&e.push(r.userId);else if(s.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&e.includes(r.userId)&&e.push(r.userId);else if(s.includeCustom)for(const r of s.customActors)e.includes(r.userId)&&e.push(r.userId)}}else if(t instanceof S){if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(t instanceof H){for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);for(const s of i.characters)e.includes(s.actor.userId)||e.push(s.actor.userId)}const o=[];for(const t of p)e.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==b.getTime()&&o.push(t);h(o)}},a))}),n.jsx("h2",{className:"title",children:"Dances"}),n.jsx("div",{className:"dances",children:i==null?void 0:i.dances.map((c,a)=>n.jsx(_e,{dance:c,onClick:()=>{C("dance"),D(c.name),I("info"),f(c.characters);const e=[];for(const t of c.characters)if(t instanceof g)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof E){for(const s of t.characters)if(s instanceof g)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof S){if(s.includeAll)for(const r of i.ensemble.actors)e.includes(r.userId)&&e.push(r.userId);else if(s.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&e.includes(r.userId)&&e.push(r.userId);else if(s.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&e.includes(r.userId)&&e.push(r.userId);else if(s.includeCustom)for(const r of s.customActors)e.includes(r.userId)&&e.push(r.userId)}}else if(t instanceof S){if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(t instanceof H){for(const s of i.ensemble.actors)e.push(s.userId);for(const s of i.characters)e.includes(s.actor.userId)||e.push(s.actor.userId)}const o=[];for(const t of p)e.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==b.getTime()&&o.push(t);h(o)}},a))}),n.jsx("button",{onClick:()=>{I("date"),y(null),h([...p])},className:"ActionBtn",children:"Back"})]}):n.jsxs(n.Fragment,{children:[!de&&n.jsxs("div",{className:"conflicts-div",children:[n.jsxs("h2",{children:["Conflicts",b!=null?" on "+b.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:oe,onChange:c=>{if(ce(c.target.checked),c.target.checked){const a=[],e=[];for(const o of m)if(o instanceof g)e.includes(o.actor.userId)&&e.push(o.actor.userId);else if(o instanceof E){for(const t of o.characters)if(t instanceof g)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(o instanceof S){if(o.includeAll)for(const t of i.ensemble.actors)e.includes(t.userId)&&e.push(t.userId);else if(o.includeMale)for(const t of i.ensemble.actors)t.gender=="male"&&e.includes(t.userId)&&e.push(t.userId);else if(o.includeFemale)for(const t of i.ensemble.actors)t.gender=="female"&&e.includes(t.userId)&&e.push(t.userId);else if(o.includeCustom)for(const t of o.customActors)e.includes(t.userId)&&e.push(t.userId)}else{for(const t of i.ensemble.actors)e.push(t.userId);for(const t of i.characters)e.includes(t.actor.userId)||e.push(t.actor.userId)}for(const o of p)re.find(t=>t.userId==o.actor.userId)||e.includes(o.actor.userId)&&o.conflictResponseDate.date.getTime()==b.getTime()&&a.push(o);h(a)}}}),n.jsx("span",{className:"checkmark",children:" "})]})," "]}),n.jsx("div",{className:"conflicts",children:ee.map((c,a)=>n.jsx(ie,{conflictResponseDate:c.conflictResponseDate,actor:c.actor},a))})]}),n.jsx("h2",{className:"title",children:"Enter Rehersal Information"}),n.jsx("label",{htmlFor:"Name",children:"Name: "}),n.jsx("input",{type:"text",value:U,onChange:c=>{D(c.target.value)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"Description",children:"Description: "}),n.jsx("textarea",{value:Y,onChange:c=>{B(c.target.value)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),n.jsx("input",{type:"time",value:ge,onChange:De}),n.jsx("br",{}),n.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),n.jsx("input",{type:"time",value:Ie,onChange:Te}),n.jsx("br",{}),n.jsx("label",{htmlFor:"location",children:"Location: "}),n.jsx("select",{name:"location",id:"location",onChange:c=>{G(u==null?void 0:u.locations.find(a=>a.name==c.target.value))},children:u==null?void 0:u.locations.map((c,a)=>n.jsx("option",{value:c.name,selected:(T==null?void 0:T.name)==c.name,children:c.name+" ("+c.address+")"},a))}),n.jsx("br",{}),n.jsx("label",{htmlFor:"location",children:"Rehersal Location: "}),n.jsx("select",{name:"location",id:"rehersal-location",onChange:c=>{W(u==null?void 0:u.rehearsalLocations.find(a=>a.name==c.target.value))},children:u==null?void 0:u.rehearsalLocations.map((c,a)=>n.jsx("option",{value:c.name,selected:(L==null?void 0:L.name)==c.name,children:c.name},a))}),n.jsx("br",{}),n.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),n.jsx("select",{name:"eventType",id:"event-type",onChange:c=>{K(u==null?void 0:u.eventTypes.find(a=>a.name==c.target.value))},children:u==null?void 0:u.eventTypes.map((c,a)=>n.jsx("option",{value:c.name,selected:(R==null?void 0:R.name)==c.name,children:c.name},a))}),n.jsx("br",{}),v=="custom"?n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"fullCast",children:"Full Cast: "}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:te,onChange:c=>je(c.target.checked)}),n.jsx("span",{className:"checkmark"})]})]}):n.jsx(n.Fragment,{}),v=="custom"&&n.jsx("br",{}),te?n.jsx(n.Fragment,{}):n.jsxs(n.Fragment,{children:[" ",n.jsx("h2",{children:"Characters"}),n.jsx("div",{className:"characters",children:m.map((c,a)=>{if(c instanceof g)return v=="custom"?n.jsx(ze,{character:c,isCreate:!1,actors:[],characters:i.characters,isAssign:!1,setCharacter:e=>{f(m.map((o,t)=>t===a?e:o))},removeCharacter:()=>{f(m.filter((e,o)=>o!==a))}},a):n.jsx($e,{character:c,canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==a))},isMini:!1},a);if(c instanceof S)return v=="custom"?n.jsx(qe,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:c,isCustom:!0,setEnsembleSection:e=>{f(m.map((o,t)=>t===a?e:o))},removeEnsembleSection:()=>{f(m.filter((e,o)=>o!==a))},isCreate:!1,isAssign:!1,actors:u.students},a):n.jsx(Pe,{ensembleSection:c,canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==a))},isMini:!1},a);if(c instanceof E)return v=="custom"?n.jsx(Je,{showGroup:c,characters:i.characters,setShowGroup:e=>{f(m.map((o,t)=>t===a?e:o))},removeShowGroup:()=>{f(m.filter((e,o)=>o!==a))},isCreate:!1,isAssign:!1,actors:u.students,hasEnsemble:i.hasEnsemble,showGroups:i.showGroups},a):n.jsx(Ue,{showGroup:c,showCharacters:!0,canClick:!1,onClick:()=>{},canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==a))}},a);if(c instanceof H)return n.jsx(Ve,{canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==a))}},a)})}),v=="custom"?n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"ActionBtn",onClick:()=>{const c=Math.floor(Math.random()*1e5);f([...m,g.fromBlank("Character 1",null,c,0)])},children:"Add Character"}),n.jsx("button",{className:"ActionBtn",onClick:()=>{const c=Math.floor(Math.random()*1e5);f([...m,E.fromBlank("Show Group 1",[],c,0)])},children:"Add Show Group"}),(i==null?void 0:i.hasEnsemble)&&n.jsx("button",{className:"ActionBtn "+(Z?"disabled":""),disabled:Z,onClick:()=>{Z||(V(!0),f([...m,S.fromBlank(!0,!1,!1,!1,[],0)]))},children:"Add Ensemble"})," "]}):n.jsx(n.Fragment,{})," "]}),n.jsx("br",{}),be?n.jsx("div",{className:"loader"}):n.jsx("button",{onClick:async()=>{if(X(!0),U==""||Y==""||$==null||P==null||T==null||L==null||R==null){alert("Please fill out all fields"),console.log(`Name: ${U}, Description: ${Y}, Start Time: ${$}, End Time: ${P}, Selected Location: ${T}, Rehearsal Location: ${L}, Event Type: ${R}`),X(!1);return}console.log("Submit");const c=T??u.locations[0];console.log($),console.log(P);const a=ke.fromBlank(_,$,P);console.log(a);const e=[];if(te){for(const t of i.ensemble.actors)e.push(t);for(const t of i.characters)e.find(s=>s.userId==t.actor.userId)==null&&e.push(t.actor)}else for(const t of m){if(t instanceof H){for(const s of i.ensemble.actors)e.push(s);for(const s of i.characters)e.find(r=>r.userId==s.actor.userId)==null&&e.push(s.actor);break}if(t instanceof g){if(e.find(s=>s.userId==t.actor.userId)!=null)continue;e.push(t.actor)}if(t instanceof S){if(t.includeAll)for(const s of i.ensemble.actors)e.find(r=>r.userId==s.userId)==null&&e.push(s);else if(t.includeMale){for(const s of i.ensemble.actors)if(s.gender=="male"){if(e.find(r=>r.userId==s.userId)!=null)continue;e.push(s)}}else if(t.includeFemale){for(const s of i.ensemble.actors)if(s.gender=="female"){if(e.find(r=>r.userId==s.userId)!=null)continue;e.push(s)}}else if(t.includeCustom)for(const s of t.customActors)e.find(r=>r.userId==s.userId)==null&&e.push(s)}if(t instanceof E)for(const s of t.characters){if(s instanceof g){if(e.find(r=>r.userId==s.actor.userId)!=null)continue;e.push(s.actor)}if(s instanceof S){if(s.includeAll)for(const r of i.ensemble.actors)e.find(l=>l.userId==r.userId)==null&&e.push(r);else if(s.includeMale){for(const r of i.ensemble.actors)if(r.gender=="male"){if(e.find(l=>l.userId==r.userId)!=null)continue;e.push(r)}}else if(s.includeFemale){for(const r of i.ensemble.actors)if(r.gender=="female"){if(e.find(l=>l.userId==r.userId)!=null)continue;e.push(r)}}else if(s.includeCustom)for(const r of s.customActors)e.find(l=>l.userId==r.userId)==null&&e.push(r)}}}const o=Fe.fromBlank(U,Y,c,a,"activity-theater-event",Date.now(),x,u.name,Q,i.name,m,e,v,R,L);if(console.log(o),se){o.id=xe.id,await Be(o),ne(!1);const t=o.date.from,s=o.date.to,r={title:o.name,start:t.toISOString(),end:s.toISOString(),isAllDay:!1,interactive:!0,description:"Location: "+o.rehearsalLocation.name+`
`+o.info,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),id:o.id},l=J.filter(ae=>ae.id!=o.id);l.push(r),q(l);const j=N.filter(ae=>ae.id!=o.id);j.push(o),console.log(j),z([...j])}else{await Ge(o);const t=o.date.from,s=o.date.to,r={title:o.name,start:t.toISOString(),end:s.toISOString(),isAllDay:!1,interactive:!0,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),id:o.id,description:"Location: "+o.rehearsalLocation.name+`
`+o.info};q([...J,r]),z([...N,o])}X(!1),I("date"),M(null),A(null),w(null),C("custom"),D(""),B(""),k(""),F(""),G(void 0),W(void 0),K(void 0),f([]),V(!1),y(null),h(p)},className:"ActionBtn",children:se?"Save":"Submit"}),n.jsx("button",{onClick:()=>{if(se){I("date"),M(null),A(null),w(null),C("custom"),D(""),B(""),k(""),F(""),G(void 0),V(!1),y(null),h(p),ne(!1);return}I("type"),B(""),V(!1);const c=[];for(const a of p)a.conflictResponseDate.date.getTime()==b.getTime()&&c.push(a);h(c)},className:"ActionBtn",children:"Back"})]})]})}
