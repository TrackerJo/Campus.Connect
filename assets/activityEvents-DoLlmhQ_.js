import{r as i,j as e,n as te,I as se,c as be,i as Ne}from"./index-CyZc0qSF.js";import{a0 as we,h as ye,a1 as Ce,a2 as ke,a3 as pe}from"./db-DeTaRERq.js";import{B as Fe,C as ve}from"./Calendar-C1Q3LTxS.js";import{T as Ae}from"./trash-BnpXJPEK.js";import"./arrow_forward-CHD_SwLW.js";function Ie({dialogRef:z,close:Q,addDate:v,eventDate:j}){const[f,H]=i.useState(new Date),[A,U]=i.useState(new Date),[J,Y]=i.useState(new Date),[D,w]=i.useState(""),[a,W]=i.useState(""),_=r=>{const d=r.target.value,[p,u]=d.split(":").map(Number),c=new Date(f);c.setHours(p,u,0,0),U(c),w(c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},g=r=>{const d=r.target.value,[p,u]=d.split(":").map(Number),c=new Date(f);c.setHours(p,u,0,0),Y(c),W(c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};return i.useEffect(()=>{j&&(H(j.date),U(j.from),Y(j.to),w(j.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),W(j.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})))},[j]),e.jsxs("dialog",{ref:z,className:"AddEventDateDialog",children:[e.jsx("h2",{children:"Add Event Date"}),e.jsx("label",{htmlFor:"",children:"Date: "}),e.jsx("input",{type:"date",value:f==null?void 0:f.toISOString().split("T")[0],onChange:r=>{const d=new Date(r.target.value);d.setHours(0,0,0,0),d.setDate(d.getDate()+1),H(d);const p=new Date(d);p.setHours(A.getHours(),A.getMinutes(),0,0),U(p),w(p.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const u=new Date(d);u.setHours(J.getHours(),J.getMinutes(),0,0),Y(u),W(u.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),e.jsx("input",{type:"time",value:D,onChange:_}),e.jsx("br",{}),e.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),e.jsx("input",{type:"time",value:a,onChange:g}),e.jsxs("div",{className:"actions",children:[e.jsx("button",{className:"ActionBtn",onClick:()=>{Q()},children:"Close"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{v(te.fromBlank(f,A,J))},children:"Add Date"})]})]})}function Le({close:z,dialogRef:Q,events:v,activity:j}){const[f,H]=i.useState("schedule"),[A,U]=i.useState(!1),[J,Y]=i.useState(!1);function D(g){const r=Object.keys(g[0]),d=g.map(p=>r.map(u=>p[u]).join(","));return[r.join(","),...d].join(`
`)}const w=()=>{const g=[];A&&(v=_(v));for(let c=0;c<v.length;c++){const m=v[c];g.push({Date:m.date.date.getMonth()+1+"/"+m.date.date.getDate()+"/"+m.date.date.getFullYear().toString().slice(2),Start:m.date.from.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0}),End:m.date.to.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0}),Name:m.name,Location:m.location.name==j.defaultLocation.name?"default":m.location.name,"Event Type":m.eventType.name,"Extra Info":m.info,"Invite Type":m.generalTarget,"Custom/Group Targets":m.groupTargets.map(S=>S.groupName).join(", "),"Added to Campus Connect":""})}g.sort((c,m)=>c.Date==m.Date?c.Start==m.Start?c.End>m.End?1:-1:c.Start>m.Start?1:-1:c.Date>m.Date?1:-1);const r=D(g),d=new Blob([r],{type:"text/csv"}),p=window.URL.createObjectURL(d),u=document.createElement("a");u.href=p,u.download=f+".csv",u.click(),window.URL.revokeObjectURL(p)};function a(g,r,d,p){const u=new Date(g,r,1);let c=0;for(;u.getMonth()===r;){if(u.getDay()===d&&(c++,c===p))return u;u.setDate(u.getDate()+1)}return a(g,r+1,d,1)}function W(g){const r=g.getDay(),d=g.getFullYear()+1,p=g.getMonth();let u=1;const c=new Date(g);for(c.setDate(1);c.getMonth()===p;){if(c.getDay()===r){if(c.getDate()===g.getDate())break;u++}c.setDate(c.getDate()+1)}return a(d,p,r,u)}function _(g){return g.map(r=>{const d=W(r.date.date),p=te.fromBlank(d,r.date.from,r.date.to);return se.fromBlank(r.name,r.info,r.location,p,r.type,r.lastUpdated,r.activityId,r.groupNames,r.targets,r.generalTarget,r.eventType,r.groupTargets,r.hasSchoolEvent,r.schoolEventId,r.conflicts,r.activityName)})}return e.jsxs("dialog",{ref:Q,children:[e.jsx("h2",{children:"Export Schedule"}),e.jsxs("div",{className:"event-type-info",children:[e.jsx("label",{htmlFor:"",children:"Name: "}),e.jsx("input",{type:"text",value:f,onChange:g=>{H(g.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Move Schedule Forward a Year? "}),e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:A,onChange:g=>{U(g.target.checked)}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("br",{}),J?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(f==""){alert("Please fill out all fields");return}Y(!0),w(),Y(!1)},children:"Export Schedule"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{z()},children:"Close"})]})]})}be(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(Me,{})}));function Me(){const[z,Q]=i.useState("student"),[v,j]=i.useState([]),[f,H]=i.useState([]),[A,U]=i.useState(null),[J,Y]=i.useState(!1),[D,w]=i.useState([]),[a,W]=i.useState(),[_,g]=i.useState("students"),[r,d]=i.useState("date"),[p,u]=i.useState(null),[c,m]=i.useState(null),[S,I]=i.useState(null),[P,y]=i.useState(""),[V,C]=i.useState(""),[oe,L]=i.useState(""),[ie,M]=i.useState(""),[x,T]=i.useState(void 0),[B,k]=i.useState([]),[b,G]=i.useState("students"),[le,Be]=i.useState(!1);i.useState(""),i.useState(""),i.useState(null),i.useState(null);const[re,$e]=i.useState(""),[K,X]=i.useState(!1),[fe,xe]=i.useState(null),[N,F]=i.useState(void 0),[$,je]=i.useState(void 0),[Z,ce]=i.useState([]),[Se,Te]=i.useState(void 0),ee=i.useRef(null),ne=i.useRef(null),[de,q]=i.useState(!1);i.useEffect(()=>{Ne(()=>{});async function t(){Y(!0);const s=new URLSearchParams(window.location.search).get("activityId");if(s){U(s);const h=await ye(s);W(h),console.log(h),T(h.defaultLocation)}const l=await Ce(s);console.log(l),j(l);const E=[];for(const h of l){console.log(h);const R=h.date.from;console.log(h.date.date),R.setDate(h.date.date.getDate()),R.setMonth(h.date.date.getMonth()),R.setFullYear(h.date.date.getFullYear());const O=h.date.to;O.setDate(h.date.date.getDate()),O.setMonth(h.date.date.getMonth()),O.setFullYear(h.date.date.getFullYear()),console.log(R),console.log(O),E.push({title:h.name,start:R.toISOString(),end:O.toISOString(),isAllDay:!1,interactive:!0,description:h.info,color:h.eventType.color.setAlpha(.8).toRBGAString(),id:h.id,location:h.location.name})}H(E),console.log(l),console.log(E),Y(!1)}t();const n=localStorage.getItem("accountType");n&&Q(n)},[]);function ue(){return v}const me=t=>{const n=t.target.value,[o,s]=n.split(":").map(Number),l=new Date(p);l.setHours(o,s,0,0),m(l),L(l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},he=t=>{const n=t.target.value,[o,s]=n.split(":").map(Number),l=new Date(p);l.setHours(o,s,0,0),I(l),M(l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};Date.prototype.addHours=function(t){return this.setTime(this.getTime()+t*60*60*1e3),this};function ge(){return e.jsxs("div",{className:"custom-invite-view",children:[e.jsx("button",{className:_=="students"?"selected":"",onClick:()=>{g("students")},children:"Students"}),e.jsx("button",{className:_=="parents"?"selected":"",onClick:()=>{g("parents")},children:"Parents"}),e.jsx("div",{className:"current-view",children:_=="students"?e.jsx("div",{className:"students",children:a==null?void 0:a.students.map((t,n)=>e.jsxs("div",{className:"student",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"student",checked:B.find(o=>o.userId==t.userId)!=null,onChange:o=>{o.target.checked?k([...B,t]):k(B.filter(s=>s!=t))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.userId,children:t.name})]},t.userId))}):e.jsx("div",{className:"parents",children:a==null?void 0:a.parents.map((t,n)=>e.jsxs("div",{className:"parent",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"parent",onChange:o=>{o.target.checked?k([...B,t]):k(B.filter(s=>s!=t))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.userId,children:t.name})]},t.userId))})})]})}function Ee(){return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mode",children:"Enter Event Information"}),e.jsx("label",{htmlFor:"Name",children:"Name: "}),e.jsx("input",{type:"text",value:P,onChange:t=>{y(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Description",children:"Description: "}),e.jsx("textarea",{value:V,onChange:t=>{C(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Date: "}),e.jsx("input",{type:"date",value:p==null?void 0:p.toISOString().split("T")[0],onChange:t=>{const n=new Date(t.target.value);n.setHours(0,0,0,0),n.setDate(n.getDate()+1),u(n);const o=new Date(n);o.setHours(c.getHours(),c.getMinutes(),0,0),m(o),L(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const s=new Date(n);s.setHours(S.getHours(),S.getMinutes(),0,0),I(s),M(s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),e.jsx("input",{type:"time",value:oe,onChange:me}),e.jsx("br",{}),e.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),e.jsx("input",{type:"time",value:ie,onChange:he}),e.jsx("br",{}),e.jsx("label",{htmlFor:"location",children:"Location: "}),e.jsx("select",{name:"location",id:"location",onChange:t=>{T(a==null?void 0:a.locations.find(n=>n.name==t.target.value))},children:a==null?void 0:a.locations.map((t,n)=>e.jsx("option",{value:t.name,selected:(x==null?void 0:x.name)==t.name,children:t.name+" ("+t.address+")"},n))}),e.jsx("br",{}),e.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),e.jsx("select",{name:"eventType",id:"event-type",onChange:t=>{F(a==null?void 0:a.eventTypes.find(n=>n.name==t.target.value))},children:a==null?void 0:a.eventTypes.map((t,n)=>e.jsx("option",{value:t.name,selected:(N==null?void 0:N.name)==t.name,children:t.name},n))}),e.jsx("br",{}),e.jsx("label",{htmlFor:"inviteType",children:"Invite Type: "}),e.jsxs("select",{name:"inviteType",id:"invite-type",onChange:t=>{G(t.target.value)},children:[e.jsx("option",{value:"students",selected:b=="students",children:"Students"}),e.jsx("option",{value:"parents",selected:b=="parents",children:"Parents"}),e.jsx("option",{value:"groups",selected:b=="groups",children:"Groups"}),e.jsx("option",{value:"custom",selected:b=="custom",children:"Custom"})]}),b=="groups"?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("label",{htmlFor:"groups",children:"Groups: "}),e.jsx("div",{className:"groups",children:a.groups.map((t,n)=>e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:D.find(o=>o.groupName==t.groupName)!=null,onChange:o=>{o.target.checked?(w([...D,t]),k([...B,...t.groupMembers])):(w(D.filter(s=>s.groupName!=t.groupName)),k(B.filter(s=>!t.groupMembers.includes(s))))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.groupName,children:t.groupName})]},t.groupName))})]}):e.jsx(e.Fragment,{}),b=="custom"?ge():e.jsx(e.Fragment,{}),e.jsx("br",{}),de?e.jsx("div",{className:"loader"}):e.jsx("button",{onClick:async()=>{if(q(!0),console.log(`Name: ${P}, Description: ${V}, Start Time: ${c}, End Time: ${S}, Selected Location: ${x},Event Type: ${N}`),P==""||c==null||S==null||x==null||N==null){alert("Please fill out all fields"),console.log(`Name: ${P}, Description: ${V}, Start Time: ${c}, End Time: ${S}, Selected Location: ${x},  Event Type: ${N}`),q(!1);return}console.log("Submit");const t=x??a.locations[0];console.log(c),console.log(S);const n=te.fromBlank(p,c,S);console.log(n.toMap());const o=N;o.color.setAlpha(255);const s=se.fromBlank(P,V,t,n,"activity-event",Date.now(),A,D.map(l=>l.groupName),B,b,o,D,le,re,[],a.name);if(K){s.id=fe.id,await ke(s),X(!1);const l=s.date.from,E=s.date.to,h={title:s.name,start:l.toISOString(),end:E.toISOString(),isAllDay:!1,interactive:!0,description:s.info,color:s.eventType.color.setAlpha(.8).toRBGAString(),id:s.id,location:s.location.name},R=f.filter(ae=>ae.id!=s.id);R.push(h),H(R);const O=v.filter(ae=>ae.id!=s.id);O.push(s),console.log(O),j([...O])}else{await pe(s);const l=s.date.from,E=s.date.to;l.setDate(s.date.date.getDate()),l.setMonth(s.date.date.getMonth()),l.setFullYear(s.date.date.getFullYear()),E.setDate(s.date.date.getDate()),E.setMonth(s.date.date.getMonth()),E.setFullYear(s.date.date.getFullYear());const h={title:s.name,start:l.toISOString(),end:E.toISOString(),isAllDay:!1,interactive:!0,description:s.info,color:s.eventType.color.setAlpha(.8).toRBGAString(),id:s.id,location:s.location.name};H([...f,h]),j([...v,s])}q(!1),d("date"),u(null),m(null),I(null),y(""),C(""),L(""),M(""),F(a==null?void 0:a.eventTypes[0]),T(a==null?void 0:a.defaultLocation),k([]),G("students")},className:"ActionBtn",children:K?"Save":"Submit"}),e.jsx("button",{onClick:()=>{if(K){d("date"),u(null),m(null),I(null),y(""),C(""),L(""),M(""),T(a.defaultLocation),F(a.eventTypes[0]),T(a==null?void 0:a.defaultLocation),X(!1);return}d("date"),C(""),y(""),G("students")},className:"ActionBtn",children:"Back"})]})}function De(){return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mode",children:"Enter Event Information"}),e.jsx("label",{htmlFor:"Name",children:"Name: "}),e.jsx("input",{type:"text",value:P,onChange:t=>{y(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Description",children:"Description: "}),e.jsx("textarea",{value:V,onChange:t=>{C(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),e.jsx("input",{type:"time",value:oe,onChange:me}),e.jsx("br",{}),e.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),e.jsx("input",{type:"time",value:ie,onChange:he}),e.jsx("br",{}),e.jsx("label",{htmlFor:"location",children:"Location: "}),e.jsx("select",{name:"location",id:"location",onChange:t=>{T(a==null?void 0:a.locations.find(n=>n.name==t.target.value))},children:a==null?void 0:a.locations.map((t,n)=>e.jsx("option",{value:t.name,selected:(x==null?void 0:x.name)==t.name,children:t.name+" ("+t.address+")"},n))}),e.jsx("br",{}),e.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),e.jsx("select",{name:"eventType",id:"event-type",onChange:t=>{F(a==null?void 0:a.eventTypes.find(n=>n.name==t.target.value))},children:a==null?void 0:a.eventTypes.map((t,n)=>e.jsx("option",{value:t.name,selected:(N==null?void 0:N.name)==t.name,children:t.name},n))}),e.jsx("br",{}),e.jsx("label",{htmlFor:"inviteType",children:"Invite Type: "}),e.jsxs("select",{name:"inviteType",id:"invite-type",onChange:t=>{G(t.target.value)},children:[e.jsx("option",{value:"students",selected:b=="students",children:"Students"}),e.jsx("option",{value:"parents",selected:b=="parents",children:"Parents"}),e.jsx("option",{value:"groups",selected:b=="groups",children:"Groups"}),e.jsx("option",{value:"custom",selected:b=="custom",children:"Custom"})]}),b=="groups"?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("label",{htmlFor:"groups",children:"Groups: "}),e.jsx("div",{className:"groups",children:a.groups.map((t,n)=>e.jsxs("div",{className:"group",children:[e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:D.find(o=>o.groupName==t.groupName)!=null,onChange:o=>{o.target.checked?(w([...D,t]),k([...B,...t.groupMembers])):(w(D.filter(s=>s.groupName!=t.groupName)),k(B.filter(s=>!t.groupMembers.includes(s))))}}),e.jsx("span",{className:"checkmark",children:" "})]}),e.jsx("label",{htmlFor:t.groupName,children:t.groupName})]},t.groupName))})]}):e.jsx(e.Fragment,{}),b=="custom"?ge():e.jsx(e.Fragment,{}),e.jsx("br",{}),e.jsx("h2",{children:"Event Dates"}),e.jsx("div",{className:"event-dates",children:Z.map((t,n)=>e.jsxs("div",{className:"event-date",children:[e.jsxs("div",{className:"event-date-title",children:[e.jsx("label",{htmlFor:"",className:"event-date-name",children:t.date.toDateString()}),e.jsx("label",{htmlFor:"",className:"event-date-time",children:t.from.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})+" - "+t.to.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})})]}),e.jsx("img",{src:Ae,className:"event-date-icon",onClick:()=>{ce(Z.filter(o=>o!=t))}})]},n))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var o;if(c==null||S==null){alert("Please fill out start time and end time");return}const t=new Date;t.setHours(0,0,0,0);const n=te.fromBlank(t,c,S);Te(n),(o=ee.current)==null||o.showModal()},children:"Add Date"}),e.jsx("br",{}),de?e.jsx("div",{className:"loader"}):e.jsx("button",{onClick:async()=>{if(q(!0),console.log(`Name: ${P}, Description: ${V}, Start Time: ${c}, End Time: ${S}, Selected Location: ${x},Event Type: ${N}`),P==""||c==null||S==null||x==null||N==null||Z.length==0){alert("Please fill out all fields"),console.log(`Name: ${P}, Description: ${V}, Start Time: ${c}, End Time: ${S}, Selected Location: ${x},  Event Type: ${N}`),q(!1);return}console.log("Submit");const t=x??a.locations[0];console.log(c),console.log(S);const n=[];for(const o of Z){const s=N;s.color.setAlpha(255);const l=se.fromBlank(P,V,t,o,"activity-event",Date.now(),A,D.map(O=>O.groupName),B,b,s,D,le,re,[],a.name);await pe(l);const E=l.date.from,h=l.date.to;E.setDate(l.date.date.getDate()),E.setMonth(l.date.date.getMonth()),E.setFullYear(l.date.date.getFullYear()),h.setDate(l.date.date.getDate()),h.setMonth(l.date.date.getMonth()),h.setFullYear(l.date.date.getFullYear());const R={title:l.name,start:E.toISOString(),end:h.toISOString(),isAllDay:!1,interactive:!0,description:l.info,color:l.eventType.color.setAlpha(.8).toRBGAString(),id:l.id,location:l.location.name};n.push(R),j([...v,l])}H([...f,...n]),q(!1),d("date"),u(null),m(null),I(null),y(""),C(""),L(""),M(""),F(a==null?void 0:a.eventTypes[0]),T(a==null?void 0:a.defaultLocation),k([]),G("students")},className:"ActionBtn",children:K?"Save":"Submit"}),e.jsx("button",{onClick:()=>{if(K){d("date"),u(null),m(null),I(null),y(""),C(""),L(""),M(""),T(a.defaultLocation),F(a.eventTypes[0]),T(a==null?void 0:a.defaultLocation),X(!1);return}d("date"),C(""),y(""),G("students")},className:"ActionBtn",children:"Back"})]})}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-title",children:[e.jsx("img",{src:Fe,alt:"back arrow",onClick:()=>{if(r!="date"){if(d("date"),K){d("date"),u(null),m(null),I(null),y(""),C(""),L(""),M(""),T(a.defaultLocation),F(a.eventTypes[0]),T(a==null?void 0:a.defaultLocation),X(!1);return}d("date"),C(""),y(""),G("students");return}window.location.href="/Activity/?activityId="+A}}),e.jsx("h1",{children:"Events"})]}),J?e.jsx("div",{className:"center",children:e.jsx("div",{className:"loader"})}):e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:r!="date"?"datePicker hidden":"datePicker",children:[" ",e.jsx(ve,{canPaste:$!=null,canCopy:!0,copyEvent:t=>{const n=v.find(o=>o.id==t.id);for(const o of v)console.log(o.id);je(n),console.log(n),console.log(t.id)},pasteEvent:t=>{console.log("PASTE EVENT"),console.log(t);const n=new Date(t);n.setHours(0,0,0,0),u(n),m(new Date($.date.from)),L($.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date($.date.to);I(o),console.log(o),M(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),T($.location),F($.eventType),y($.name),C($.info),k($.targets),G($.generalTarget),w($.groupTargets),d("info")},canViewConflicts:!1,isCreating:!0,canOpenContextMenu:!0,events:f,editEvent:t=>{const n=ue().find(o=>o.id==t.id);console.log(t.id),n&&(console.log(n),d("info"),y(n.name),C(n.info),u(n.date.date),m(n.date.from),L(n.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),I(n.date.to),M(n.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),T(n.location),k(n.targets),console.log("FROM EDIT"),console.log(n.targets),F(n.eventType),X(!0),G(n.generalTarget),xe(n),w(n.groupTargets))},viewEvent:t=>{const n=ue().find(o=>o.id==t.id);n&&(localStorage.setItem("event",JSON.stringify(n.toMap())),localStorage.setItem("back","/Activity/Events/?activityId="+A),window.location.href="/Calendar/Event/")},viewConflicts:t=>{},deleteEvent:async t=>{console.log(t);const n=v.find(l=>l.id==t.id),o=v.filter(l=>l.id!=t.id);j(o);const s=f.filter(l=>l.id!=t.id);H(s),await we(n)},dateClick:t=>{console.log(t.date),u(t.date),new Date(t.date).setHours(0,0,0,0),m(new Date(t.date)),L(t.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(t.date);I(o.addHours(1)),console.log(o),M(t.date.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),T(a.defaultLocation),F(a.eventTypes[0]),d("info")},eventClick:t=>{u(t.event.start),new Date(t.event.start).setHours(0,0,0,0),m(new Date(t.event.start)),L(t.event.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(t.event.end);I(o),M(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),T(a.defaultLocation),F(a.eventTypes[0]),d("info")}}),e.jsx("button",{className:"ActionBtn",onClick:()=>{d("multipleEvents"),F(a.eventTypes[0])},children:"Add Multiple Events"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(v.map(t=>t.toMap()))),window.open("/Activity/Events/Print/","_blank")},children:"Print"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=ne.current)==null||t.showModal()},children:"Export to CSV"})]}),z=="teacher"?r=="multipleEvents"?De():r=="date"?e.jsx(e.Fragment,{}):Ee():e.jsxs(e.Fragment,{children:[" ",e.jsx(ve,{canPaste:!1,canCopy:!1,copyEvent:()=>{},pasteEvent:()=>{},viewEvent:t=>{},canViewConflicts:!1,events:f,canOpenContextMenu:!1,dateClick:()=>{},deleteEvent:()=>{},viewConflicts:()=>{},editEvent:()=>{},eventIdClick:t=>{const n=v.find(o=>o.id===t);n&&(localStorage.setItem("event",JSON.stringify(n.toMap())),localStorage.removeItem("back"),window.location.href="/Calendar/Event/")}})," ",e.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(v.map(t=>t.toMap()))),window.open("/Activity/Events/Print/","_blank")},children:"Print"})]})]}),e.jsx(Ie,{dialogRef:ee,addDate:t=>{ce([...Z,t]),ee.current.close()},close:()=>{ee.current.close()},eventDate:Se}),a!=null&&e.jsx(Le,{dialogRef:ne,events:v,close:()=>{ne.current.close()},activity:a})]})}
