import{r as s,j as e,p as B,c as v,i as w}from"./index-C75OlIaX.js";import{R as I,f as R}from"./db-BGt_ZXPd.js";import{S as Q,L as k,G as E,f as K}from"./constants-BV3XiQhG.js";const T="data:image/png;base64,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",x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAxCAYAAACoJ+s+AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAMQAAAAAXFpNfAAAE2ElEQVRYCe2ZW6hVVRSGzz5W2gUTNDW6iR4xRfJeaUQQYigklPqkRzv6JAr64EOCipAXEHpI8ZTaqbDEEkV6sXzoQdIHXyxFRVNT8QYiHq+Y19P3rzPnZuy111l7rr23bh8c8K85xphjjvmvuda87LVzdRmkra3tFcLngbHg+QxNTxC7CfySy+XuZWhXlwsNhlx/18mLoW0S4vbimwvJawl1ia4sBLeRYXAsy3/Y92O+uNkFRyfjPIjeFEoyiCCjN4ik200nu9C/oJMzxpeo0nYtFXolrBzAEMkb1pmk1yc5E3xDjO8S+rwQcqaNV8865S3KbyFf8j0OJdjd90C5H3K3jJ1FnU+wHrFkGNgAyeciq4NLKMHOpv0Vo2dVr9OgCRx2DUdQrofks84uKkIJFjUs18HoawaL5FGXYxTlOkhqMhXJIycoBpDUU5gBjslG3gFfQ9I+qajiqejqLgToXdO70RPYYX8T28+414mbht0K/qKz85SZhXat5BHJH0E/MAY045tN3R30SKJlBucLWIvARGDXrCgo5dJG3e9gqRuVolBy22XmI+JO2SDqe2Brl+nj/Lso5xB3V3Y9ARrFFvAJyEKO8GgnGk+5mTwvyZFVIKJlqxGcdm0/oFxNvoiLyH0KhrpKFWKuhfSqjAR5Gd/AmL8v9kaSNroOY9V5s+CV8l7aXKTtdOyfwGvgQ7AQLFODCcDLOZRZNDjpHfGSRJPwrXD+fyn7AE02kfxBHdH+MroXu2Yupl4335Hsp0IEJY3EbhfBAZHZflmTRs7EeXU3ynogwiKpA4Un6ddLEfoYSN51iIyAyxQltacTv4AGtG0P4Ya0Ry8GmjAS3fD33H3XyOKIRbnH6VmLoRpBOzF0OskskNwKIeVaCnJAhwuR/Iw67R4z0RsodZ60/WEWyRt4PnfeHkpaFYHIz5BQ50tcQh3NWvDNpO4GOI4tpArxauelix5x1QQSWs+Wm4Q6BenUknogMPFxNVdVgsoOyY0Uq0xP2pl0arE7k6lOV6tOUN1BsoXiS9P1SPTUU4uJLVAfCkH1AEktP1+Z3t5GTzwQmJgi9aERVE+QbKbQXuxlNMpaHnfw5KyUoJaUVIHkagK+MUHvo883dqoafCcmy22jj2Y03sO2PlOdV/9E04zWCEqm064F8q3tZsfXcggeMeka0L8zdqiqg+lw8EepBpkfMXetxXZHqcQB9a8GxNSVM4LKuwDsBnpk2nNLvovESLQF6oAqeaa9SL+WRZBRvE9afWkQgoX3bg3B41yDoJvK/IiD2VQp8AnBSgfyyQiWMYLdTJvbj+MI+t1GPC+XtcyYO6yayhKk8+JkMMMk/buWBJsgNduQEcH42rillgTVd9pPgWY2hAO1JGgGL68+QDsENkBup7y1JKjf07+KBKLf1PoCcRFiN+XwUkuClyCj0UqVx3GZKSAcJxifRQXBVTBsfv+pJDWtCNqvT71Soyuv7G1S2H6Nu1AVwQvG5b9CGVd1VNa8BjLpwOrF9ut9RaUmyV7Q19VMIZFOuppdV52v0uJpEgwEc4D/cHQPfR8oKTkI9SNKhJToUYn+9fQfmVL7rCfwBBELQf7LemqLyiv1xFaGpsnPKkZS3+WmAn1H0WTRT8N8PXq5ot1Br8s/4Dewg0HRb5og+R+evzht0MRUwQAAAABJRU5ErkJggg==";function V({student:a,close:i,dialogRef:A,activityId:l}){const[g,u]=s.useState(!1);s.useEffect(()=>{async function r(){u(a.phone!==void 0)}r()},[a]);function c(r){if(!r)return"";const o=(""+r).replace(/\D/g,"");if(o.length!==10)return r;const t=o.match(/^(\d{3})(\d{3})(\d{4})$/);return t?`(${t[1]}) ${t[2]}-${t[3]}`:r}return e.jsx("dialog",{className:"StudentInfoDialog",ref:A,children:e.jsxs("div",{className:"StudentInfoDialogInner",children:[e.jsx("h1",{className:"StudentInfoDialogTitle",children:"Student Info"}),e.jsxs("label",{htmlFor:"",children:["Name: ",a.name]}),e.jsxs("div",{className:"student-contact",children:[e.jsxs("label",{htmlFor:"",children:["Email: ",a.email]}),e.jsx("img",{src:x,alt:"copy email",title:"Copy Email",className:"copy-icon",onClick:async()=>{await navigator.clipboard.writeText(a.email),alert("Email copied to clipboard")}})]}),g&&e.jsxs("div",{className:"student-contact",children:[e.jsxs("label",{htmlFor:"",children:["Phone: ",c(a.phone)]}),e.jsx("img",{src:x,alt:"copy phone number",title:"Copy Phone Number",className:"copy-icon",onClick:async()=>{await navigator.clipboard.writeText(c(a.phone)),alert("Phone number copied to clipboard")}})]}),e.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("viewingUser",JSON.stringify(a.toMap())),window.location.href=`/Activity/Messages/?activityId=${l}&studentId=${a.userId}`},children:"Send Message"}),e.jsx("button",{className:"ActionBtn",onClick:i,children:"Close"})]})})}function b({student:a,activityId:i}){const A=s.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"StudentDisplayTile",children:[e.jsx("label",{htmlFor:"",children:a.name}),e.jsx("img",{src:T,alt:"",className:"PersonIcon",onClick:()=>{var l;(l=A.current)==null||l.showModal()}})]}),e.jsx(V,{student:a,activityId:i,close:()=>{var l;(l=A.current)==null||l.close()},dialogRef:A})]})}function X({close:a,created:i,dialogRef:A,activityId:l}){const[g,u]=s.useState(""),[c,r]=s.useState(""),[o,t]=s.useState(""),[n,h]=s.useState(""),[f,p]=s.useState(""),[C,m]=s.useState(!1);return e.jsx("dialog",{ref:A,children:e.jsxs("div",{className:"CreateCustomUserDialog",children:[e.jsx("h2",{children:"Create Student Account"}),e.jsx("input",{type:"text",placeholder:"Full Name",onChange:d=>{u(d.target.value)}}),e.jsx("input",{type:"text",placeholder:"Email",onChange:d=>{r(d.target.value)}}),e.jsx("input",{type:"password",placeholder:"Password",onChange:d=>{t(d.target.value)}}),e.jsx("input",{type:"text",placeholder:"Phone Number",onChange:d=>{h(d.target.value)}}),e.jsxs("select",{onChange:d=>{p(d.target.value)},children:[e.jsx("option",{value:"",selected:!0,children:"Select your Sex"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"})]}),C?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(m(!0),g==""){alert("Please enter your full name"),m(!1);return}if(c==""){alert("Please enter your email"),m(!1);return}if(!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(c)){alert("Invalid email"),m(!1);return}if(n==""){alert("Please enter your phone number, if you don't have one, type none"),m(!1);return}h(n.replace(/-/g,"")),h(n.replace(/ /g,"")),h(n.replace(/\(/g,"")),h(n.replace(/\)/g,""));const N=/^\d{10}$/;if(n!="none"&&!N.test(n)){alert("Invalid phone number (Only include numbers or type none)"),m(!1);return}if(o==""){alert("Please enter a password"),m(!1);return}if(o.length<6){alert("Password must be at least 6 characters"),m(!1);return}if(f==""){alert("Please select your sex"),m(!1);return}const y=localStorage.getItem("schoolId"),j=await B(c,o),S=Q.fromBlank(j,y,"unknown",0,"","student",n,f,"unknown",g.toLowerCase().trim(),g.trim(),c.trim(),{},k.fromBlank("","",new E(0,0)));await I(S,l),i()},children:"Create Account"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{a()},children:"Close"})]})})}function L({students:a,activityId:i,isTeacher:A}){const[l,g]=s.useState(0),u=s.createRef(),[c,r]=s.useState(a);function o(t){if(t==""){r(a);return}r(a.filter(n=>n instanceof K?n.name.toLowerCase().includes(t.toLowerCase()):!1))}return s.useEffect(()=>{o("")},[a]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"StudentListTile",children:[e.jsx("div",{className:"header",children:e.jsx("div",{className:"StudentListNameDiv",children:e.jsx("label",{htmlFor:"StudentList",children:"Students "})})}),e.jsx("br",{}),e.jsxs("div",{className:"students-section",children:[e.jsx("input",{type:"text",placeholder:"Search",className:"search",onChange:t=>{o(t.target.value)}}),e.jsx("div",{className:"students",id:"students-"+l,children:c.map((t,n)=>e.jsx(b,{activityId:i,student:t},n))})]}),A&&e.jsx("button",{className:"ActionBtn",onClick:()=>{var t;(t=u.current)==null||t.showModal()},children:"Add Student"})]}),e.jsx(X,{close:()=>{var t;(t=u.current)==null||t.close()},created:()=>{var t;(t=u.current)==null||t.close(),window.location.reload()},dialogRef:u,activityId:i})]})}v(document.getElementById("root")).render(e.jsx(s.StrictMode,{children:e.jsx(F,{})}));function F(){const[a,i]=s.useState(""),[A,l]=s.useState(null),[g,u]=s.useState("student");s.useEffect(()=>{w(()=>{});const o=new URLSearchParams(window.location.search).get("activityId");o&&i(o),R(o).then(n=>{n&&l(n)});const t=localStorage.getItem("accountType");t&&u(t)},[]);function c(r){return r.sort((o,t)=>o.name.localeCompare(t.name))}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"title",children:e.jsx("h1",{children:"Members"})}),e.jsxs("div",{className:"center",children:[e.jsx(L,{activityId:a,students:A?c(A.students):[],isTeacher:g=="teacher"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/?activityId="+a},children:"Back"})]})]})}
