import{r as d,j as t,c as D}from"./index-CKNi8vpN.js";import{S,C as N,E as T,h as g,A as y,i as C,D as E,k as H,l as F,m as L,f as P}from"./db-DROJG-1T.js";import{C as A,E as M,S as G}from"./Show_Group_Tile-SoX8-Gd3.js";import{T as U}from"./trash-BnpXJPEK.js";function R({scene:e,setScene:l,isCreate:u,removeScene:x,isAssign:i,characters:B,showGroups:b,hasEnsemble:k}){const[h,v]=d.useState(!1),[m,I]=d.useState(0);return d.useEffect(()=>{I(Math.floor(Math.random()*1e5))},[]),t.jsxs("div",{className:"SceneTile",id:"scene-tile-"+e.sceneId,children:[t.jsxs("div",{className:"header",children:[t.jsxs("div",{className:"SceneNameDiv",children:[t.jsx("label",{htmlFor:"Scene",children:"Scene Name: "}),t.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:a=>{l(S.fromBlank(a.target.value,e.characters,e.sceneId,e.lastUpdated))}})]}),t.jsx("div",{children:t.jsx("img",{src:U,alt:"",className:"TrashIcon",onClick:()=>{x()}})})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"Characters",children:"Characters: "}),t.jsx("div",{className:"characters",id:"characters-"+m,children:e.characters.map((a,r)=>{if(a instanceof N)return t.jsx(A,{character:a,isCreate:u,actors:[],characters:B,isAssign:i,setCharacter:s=>{l(S.fromBlank(e.name,e.characters.map((n,f)=>f===r?s:n),e.sceneId,e.lastUpdated))},removeCharacter:()=>{l(S.fromBlank(e.name,e.characters.filter((s,n)=>n!==r),e.sceneId,e.lastUpdated))}},r);if(a instanceof T)return t.jsx(M,{ensembleSection:a,isCustom:!1,isCreate:u,isAssign:i,actors:[],setEnsembleSection:s=>{l(S.fromBlank(e.name,e.characters.map((n,f)=>f===r?s:n),e.sceneId,e.lastUpdated))},removeEnsembleSection:()=>{v(!1),l(S.fromBlank(e.name,e.characters.filter((s,n)=>n!==r),e.sceneId,e.lastUpdated))}},r);if(a instanceof g)return t.jsx(G,{showGroup:a,isCreate:u,isAssign:i,characters:B,actors:[],hasEnsemble:k,showGroups:b,setShowGroup:s=>{l(S.fromBlank(e.name,e.characters.map((n,f)=>f===r?s:n),e.sceneId,e.lastUpdated))},removeShowGroup:()=>{l(S.fromBlank(e.name,e.characters.filter((s,n)=>n!==r),e.sceneId,e.lastUpdated))}},r)})}),t.jsx("br",{}),t.jsx("button",{className:"AddCharacterBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);l(S.fromBlank(e.name,[...e.characters,N.fromBlank("Character 1",null,a,0)],e.sceneId,e.lastUpdated)),setTimeout(()=>{const r=document.getElementById("characters-"+m);r.scrollTop=r.scrollHeight,document.getElementById("scene-tile-"+e.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),t.jsx("br",{}),t.jsx("button",{className:"AddShowGroupBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);l(S.fromBlank(e.name,[...e.characters,g.fromBlank("Show Group 1",[],a,0)],e.sceneId,e.lastUpdated)),setTimeout(()=>{const r=document.getElementById("characters-"+m);r.scrollTop=r.scrollHeight,document.getElementById("scene-tile-"+e.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),t.jsx("br",{}),k&&t.jsx("button",{className:"AddEnsembleBtn "+(h?"disabled":""),disabled:h,onClick:()=>{h||(v(!0),setTimeout(()=>{const a=document.getElementById("characters-"+m);a.scrollTop=a.scrollHeight,document.getElementById("scene-tile-"+e.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),l(S.fromBlank(e.name,[...e.characters,T.fromBlank(!0,!1,!1,!1,[],0)],e.sceneId,e.lastUpdated)))},children:"Add Ensemble"})]})]})}function q({act:e,setAct:l,isCreate:u,removeAct:x,isAssign:i,characters:B,showGroups:b,hasEnsemble:k}){const[h,v]=d.useState(0);return d.useEffect(()=>{v(Math.floor(Math.random()*1e5))},[]),t.jsxs("div",{className:"ActTile",id:"act-tile-"+e.actId,children:[t.jsxs("div",{className:"header",children:[t.jsxs("div",{className:"ActNameDiv",children:[t.jsx("label",{htmlFor:"Act",children:"Act Name: "}),t.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:m=>{l(y.fromBlank(m.target.value,e.scenes,e.actId,e.lastUpdated))}})]}),t.jsx("div",{children:t.jsx("img",{src:U,alt:"",className:"TrashIcon",onClick:()=>{x()}})})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"Scene",children:"Scenes: "}),t.jsx("div",{id:"scenes-"+h,className:"scenes",children:e.scenes.map((m,I)=>t.jsx(R,{hasEnsemble:k,scene:m,isCreate:u,characters:B,showGroups:b,isAssign:i,setScene:a=>{l(y.fromBlank(e.name,e.scenes.map((r,s)=>s===I?a:r),e.actId,e.lastUpdated))},removeScene:()=>{l(y.fromBlank(e.name,e.scenes.filter((a,r)=>r!==I),e.actId,e.lastUpdated))}},I))}),e.scenes.length==0&&t.jsx("br",{}),t.jsx("button",{className:"AddSceneBtn",onClick:()=>{const m=Math.floor(Math.random()*1e5);l(y.fromBlank(e.name,[...e.scenes,S.fromBlank("Scene "+(e.scenes.length+1),[],m,0)],e.actId,e.lastUpdated)),setTimeout(()=>{const I=document.getElementById("scenes-"+h);I.scrollTop=I.scrollHeight,document.getElementById("scene-tile-"+m).scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),document.getElementById("act-tile-"+e.actId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Scene"})]})]})}function $({song:e,setSong:l,isCreate:u,removeSong:x,isAssign:i,characters:B,showGroups:b,hasEnsemble:k}){const[h,v]=d.useState(!1),[m,I]=d.useState(0);return d.useEffect(()=>{I(Math.floor(Math.random()*1e5))},[]),t.jsxs("div",{className:"SongTile",id:"song-tile-"+e.songId,children:[t.jsxs("div",{className:"header",children:[t.jsxs("div",{className:"SongNameDiv",children:[t.jsx("label",{htmlFor:"Scene",children:"Song Name: "}),t.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:a=>{l(C.fromBlank(a.target.value,e.characters,e.songId,e.lastUpdated))}})]}),t.jsx("div",{children:t.jsx("img",{src:U,alt:"",className:"TrashIcon",onClick:()=>{x()}})})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"Characters",children:"Characters: "}),t.jsx("div",{className:"characters",id:"characters-"+m,children:e.characters.map((a,r)=>{if(a instanceof N)return t.jsx(A,{character:a,isCreate:u,actors:[],characters:B,isAssign:i,setCharacter:s=>{l(C.fromBlank(e.name,e.characters.map((n,f)=>f===r?s:n),e.songId,e.lastUpdated))},removeCharacter:()=>{l(C.fromBlank(e.name,e.characters.filter((s,n)=>n!==r),e.songId,e.lastUpdated))}},r);if(a instanceof T)return t.jsx(M,{ensembleSection:a,isAssign:i,actors:[],isCreate:u,setEnsembleSection:s=>{l(C.fromBlank(e.name,e.characters.map((n,f)=>f===r?s:n),e.songId,e.lastUpdated))},removeEnsembleSection:()=>{v(!1),l(C.fromBlank(e.name,e.characters.filter((s,n)=>n!==r),e.songId,e.lastUpdated))}},r);if(a instanceof g)return t.jsx(G,{showGroup:a,hasEnsemble:k,actors:[],characters:B,isCreate:u,isAssign:i,showGroups:b,setShowGroup:s=>{l(C.fromBlank(e.name,e.characters.map((n,f)=>f===r?s:n),e.songId,e.lastUpdated))},removeShowGroup:()=>{l(C.fromBlank(e.name,e.characters.filter((s,n)=>n!==r),e.songId,e.lastUpdated))}},r)})}),t.jsx("br",{}),t.jsx("button",{className:"AddCharacterBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);l(C.fromBlank(e.name,[...e.characters,N.fromBlank("Character 1",null,a,0)],e.songId,e.lastUpdated)),setTimeout(()=>{const r=document.getElementById("characters-"+m);r.scrollTop=r.scrollHeight,document.getElementById("song-tile-"+e.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),t.jsx("br",{}),t.jsx("button",{className:"AddShowGroupBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);l(C.fromBlank(e.name,[...e.characters,g.fromBlank("Show Group 1",[],a,0)],e.songId,e.lastUpdated)),setTimeout(()=>{const r=document.getElementById("characters-"+m);r.scrollTop=r.scrollHeight,document.getElementById("song-tile-"+e.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),t.jsx("br",{}),k&&t.jsx("button",{className:"AddEnsembleBtn "+(h?"disabled":""),disabled:h,onClick:()=>{h||(v(!0),setTimeout(()=>{const a=document.getElementById("characters-"+m);a.scrollTop=a.scrollHeight,document.getElementById("song-tile-"+e.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),l(C.fromBlank(e.name,[...e.characters,T.fromBlank(!0,!1,!1,!1,[],0)],e.songId,e.lastUpdated)))},children:"Add Ensemble"})]})]})}function z({dance:e,setDance:l,isCreate:u,removeDance:x,isAssign:i,characters:B,showGroups:b,hasEnsemble:k}){const[h,v]=d.useState(!1),[m,I]=d.useState(0);return d.useEffect(()=>{I(Math.floor(Math.random()*1e5))},[]),t.jsxs("div",{className:"DanceTile",id:"dance-tile-"+e.danceId,children:[t.jsxs("div",{className:"header",children:[t.jsxs("div",{className:"DanceNameDiv",children:[t.jsx("label",{htmlFor:"Scene",children:"Song Name: "}),t.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:a=>{l(E.fromBlank(a.target.value,e.characters,e.danceId,e.lastUpdated))}})]}),t.jsx("div",{children:t.jsx("img",{src:U,alt:"",className:"TrashIcon",onClick:()=>{x()}})})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"Characters",children:"Characters: "}),t.jsx("div",{className:"characters",id:"characters-"+m,children:e.characters.map((a,r)=>{if(a instanceof N)return t.jsx(A,{character:a,actors:[],isCreate:u,characters:B,isAssign:i,setCharacter:s=>{l(E.fromBlank(e.name,e.characters.map((n,f)=>f===r?s:n),e.danceId,e.lastUpdated))},removeCharacter:()=>{l(E.fromBlank(e.name,e.characters.filter((s,n)=>n!==r),e.danceId,e.lastUpdated))}},r);if(a instanceof T)return t.jsx(M,{isAssign:!1,ensembleSection:a,isCreate:u,actors:[],setEnsembleSection:s=>{l(E.fromBlank(e.name,e.characters.map((n,f)=>f===r?s:n),e.danceId,e.lastUpdated))},removeEnsembleSection:()=>{v(!1),l(E.fromBlank(e.name,e.characters.filter((s,n)=>n!==r),e.danceId,e.lastUpdated))}},r);if(a instanceof g)return t.jsx(G,{showGroup:a,hasEnsemble:k,characters:B,actors:[],isCreate:u,isAssign:i,showGroups:b,setShowGroup:s=>{l(E.fromBlank(e.name,e.characters.map((n,f)=>f===r?s:n),e.danceId,e.lastUpdated))},removeShowGroup:()=>{l(E.fromBlank(e.name,e.characters.filter((s,n)=>n!==r),e.danceId,e.lastUpdated))}},r)})}),t.jsx("br",{}),t.jsx("button",{className:"AddCharacterBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);l(E.fromBlank(e.name,[...e.characters,N.fromBlank("Character 1",null,a,0)],e.danceId,e.lastUpdated)),setTimeout(()=>{const r=document.getElementById("characters-"+m);r.scrollTop=r.scrollHeight,document.getElementById("dance-tile-"+e.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),t.jsx("br",{}),t.jsx("button",{className:"AddShowGroupBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);l(E.fromBlank(e.name,[...e.characters,g.fromBlank("Show Group 1",[],a,0)],e.danceId,e.lastUpdated)),setTimeout(()=>{const r=document.getElementById("characters-"+m);r.scrollTop=r.scrollHeight,document.getElementById("dance-tile-"+e.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),t.jsx("br",{}),k&&t.jsx("button",{className:"AddEnsembleBtn "+(h?"disabled":""),disabled:h,onClick:()=>{h||(v(!0),setTimeout(()=>{const a=document.getElementById("characters-"+m);a.scrollTop=a.scrollHeight,document.getElementById("dance-tile-"+e.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),l(E.fromBlank(e.name,[...e.characters,T.fromBlank(!0,!1,!1,!1,[],0)],e.danceId,e.lastUpdated)))},children:"Add Ensemble"})]})]})}D(document.getElementById("root")).render(t.jsx(d.StrictMode,{children:t.jsx(J,{})}));function J(){const[e,l]=d.useState(""),[u,x]=d.useState([]),[i,B]=d.useState([]),[b,k]=d.useState([]),[h,v]=d.useState([]),[m,I]=d.useState([]),[a,r]=d.useState(""),[s,n]=d.useState(!1),[f,V]=d.useState(!1);return d.useEffect(()=>{const c=new URLSearchParams(window.location.search).get("activityId");c&&l(c)},[]),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"title",children:t.jsx("h1",{children:"Create Show Template"})}),t.jsxs("div",{className:"center",children:[t.jsxs("div",{className:"form-question",children:[t.jsx("label",{htmlFor:"name",children:"Show Name: "}),t.jsx("input",{type:"text",id:"name",value:a,onChange:o=>r(o.target.value)})]}),t.jsxs("div",{className:"form-question",children:[t.jsx("label",{htmlFor:"ensemble",children:"Has Ensemble: "}),t.jsx("input",{type:"checkbox",id:"ensemble",checked:s,onChange:o=>n(o.target.checked)})]}),t.jsx("h2",{children:"Create Characters"}),t.jsx("div",{className:"characters",id:"create-characters",children:i.map((o,c)=>t.jsx(A,{actors:[],character:o,characters:[],isAssign:!1,setCharacter:j=>{B(p=>{const w=[...p];return w[c]=j,w})},removeCharacter:()=>{B(i.filter((j,p)=>p!==c))},isCreate:!0},c))}),t.jsx("button",{className:"AddCharacterBtn",onClick:()=>{const o=Date.now();B([...i,N.fromBlank("",null,o,0)]),setTimeout(()=>{const c=document.getElementById("create-characters");c.scrollTop=c.scrollHeight,document.getElementById("character-tile-"+o).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),t.jsx("h2",{children:"Create Show Groups"}),t.jsx("div",{className:"showGroups",id:"create-showGroups",children:b.map((o,c)=>t.jsx(G,{showGroup:o,showGroups:[],actors:[],hasEnsemble:s,characters:i,isAssign:!1,setShowGroup:j=>{k(p=>{const w=[...p];return w[c]=j,w})},removeShowGroup:()=>{k(b.filter((j,p)=>p!==c))},isCreate:!0},c))}),t.jsx("button",{className:"AddShowGroupBtn",onClick:()=>{const o=Math.floor(Math.random()*1e5);k([...b,g.fromBlank("",[],o,0)]),setTimeout(()=>{const c=document.getElementById("create-showGroups");c.scrollTop=c.scrollHeight,document.getElementById("show-group-tile-"+o).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),t.jsx("h2",{children:"Create Layout"}),t.jsxs("div",{className:"layout",children:[u.map((o,c)=>t.jsx(q,{hasEnsemble:s,act:o,characters:i,showGroups:b,isAssign:!1,setAct:j=>{x(p=>{const w=[...p];return w[c]=j,w})},isCreate:!1,removeAct:()=>{x(u.filter((j,p)=>p!==c))}},c)),t.jsx("button",{className:"AddActBtn",onClick:()=>{const o=Date.now();x([...u,y.fromBlank("Act "+(u.length+1),[],o,0)]),setTimeout(()=>{document.getElementById("act-tile-"+o).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Act"})]}),t.jsx("h2",{children:"Create Songs"}),t.jsxs("div",{className:"songs",children:[h.map((o,c)=>t.jsx($,{song:o,hasEnsemble:s,characters:i,showGroups:b,isAssign:!1,setSong:j=>{v(p=>{const w=[...p];return w[c]=j,w})},removeSong:()=>{v(h.filter((j,p)=>p!==c))},isCreate:!1},c)),t.jsx("button",{className:"AddSongBtn",onClick:()=>{const o=Date.now();v([...h,C.fromBlank("Song "+(h.length+1),[],o,0)]),setTimeout(()=>{document.getElementById("song-tile-"+o).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Song"})]}),t.jsx("h2",{children:"Create Dances"}),t.jsxs("div",{className:"dances",children:[m.map((o,c)=>t.jsx(z,{dance:o,hasEnsemble:s,characters:i,showGroups:b,isAssign:!1,setDance:j=>{I(p=>{const w=[...p];return w[c]=j,w})},removeDance:()=>{I(m.filter((j,p)=>p!==c))},isCreate:!1},c)),t.jsx("button",{className:"AddDanceBtn",onClick:()=>{const o=Date.now();I([...m,E.fromBlank("Dance "+(m.length+1),[],o,0)]),setTimeout(()=>{document.getElementById("dance-tile-"+o).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Dance"})]}),f?t.jsx("div",{className:"loader"}):t.jsx("button",{className:"CreateShowTemplateBtn",onClick:async()=>{V(!0);const o=H.fromBlank(a,"",u,i,s?F.fromBlank([],Date.now()):null,b,h,m,!1,s,null,Date.now());console.log(o.toMap()),await L(o);const c=await P(o,e);window.location.href=`/Campus.Connect/Activity/Shows/Show/?activityId=${e}&showId=${c}`,V(!1)},children:"Create Show Template"})]})]})}
