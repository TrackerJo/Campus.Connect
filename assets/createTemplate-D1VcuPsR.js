import{r as u,j as e,A as H,d as T,C as v,E as V,e as M,F as L,D as G,f as A,c as ce,i as ie,g as K,h as me}from"./index-BU3vcrHQ.js";import{T as U}from"./trash-BnpXJPEK.js";import{A as de}from"./arrow_forward-CHD_SwLW.js";import{C as q,S as J}from"./Show_Group_Tile-C1nQ39Jj.js";import{E as Q}from"./Ensemble_Section_Tile-B9xKn2yw.js";import{F as X}from"./Full_Cast_Tile-CwKqPBrq.js";import{m as he,l as ue,n as fe,o as Ie}from"./db-CmuqGSBB.js";import{B as be}from"./back-C9T8y7K2.js";function ge({act:t,setAct:m,isCreate:p,removeAct:C,isAssign:f,characters:N,showGroups:B,hasEnsemble:x,selectAct:w}){const[E,h]=u.useState(0);return u.useEffect(()=>{h(Math.floor(Math.random()*1e5))},[]),e.jsx("div",{className:"ActTile",id:"act-tile-"+t.actId,onClick:S=>{S.target.classList.contains("TrashIcon")||S.target.tagName!="INPUT"&&w(t)},children:e.jsxs("div",{className:"header",children:[e.jsx("div",{children:e.jsx("img",{src:U,alt:"",className:"TrashIcon",onClick:()=>{C()}})}),e.jsxs("div",{className:"ActNameDiv",children:[e.jsx("label",{htmlFor:"Act",children:"Act Name: "}),e.jsx("input",{type:"text",name:"",id:"",value:t.name,onChange:S=>{m(H.fromBlank(S.target.value,t.scenes,t.actId))}})]}),e.jsx("div",{children:e.jsx("img",{src:de,alt:"",className:"ForwardIcon"})})]})})}function je({song:t,setSong:m,isCreate:p,removeSong:C,isAssign:f,characters:N,showGroups:B,hasEnsemble:x}){const[w,E]=u.useState(!1),[h,S]=u.useState(!1),[g,D]=u.useState(0);return u.useEffect(()=>{D(Math.floor(Math.random()*1e5))},[]),e.jsxs("div",{className:"SongTile",id:"song-tile-"+t.songId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"SongNameDiv",children:[e.jsx("label",{htmlFor:"Scene",children:"Song Name: "}),e.jsx("input",{type:"text",name:"",id:"",value:t.name,onChange:a=>{m(T.fromBlank(a.target.value,t.characters,t.songId))}})]}),e.jsx("div",{children:e.jsx("img",{src:U,alt:"",className:"TrashIcon",onClick:()=>{C()}})})]}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Characters",children:"Characters: "}),e.jsx("div",{className:"song-characters",id:"characters-"+g,children:t.characters.map((a,l)=>{if(a instanceof v)return e.jsx(q,{character:a,isCreate:p,actors:[],characters:N,isAssign:f,setCharacter:d=>{m(T.fromBlank(t.name,t.characters.map((i,j)=>j===l?d:i),t.songId))},removeCharacter:()=>{m(T.fromBlank(t.name,t.characters.filter((d,i)=>i!==l),t.songId))}},l);if(a instanceof V)return e.jsx(Q,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:a,isAssign:f,actors:[],isCustom:!1,isCreate:p,setEnsembleSection:d=>{m(T.fromBlank(t.name,t.characters.map((i,j)=>j===l?d:i),t.songId))},removeEnsembleSection:()=>{E(!1),m(T.fromBlank(t.name,t.characters.filter((d,i)=>i!==l),t.songId))}},l);if(a instanceof M)return e.jsx(J,{showGroup:a,hasEnsemble:x,actors:[],characters:N,isCreate:p,isAssign:f,showGroups:B,setShowGroup:d=>{m(T.fromBlank(t.name,t.characters.map((i,j)=>j===l?d:i),t.songId))},removeShowGroup:()=>{m(T.fromBlank(t.name,t.characters.filter((d,i)=>i!==l),t.songId))}},l);if(a instanceof L)return e.jsx(X,{canDelete:!0,onDelete:()=>{S(!1),m(T.fromBlank(t.name,t.characters.filter((d,i)=>i!==l),t.songId))}},l)})}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(h?"disabled":""),disabled:h,onClick:()=>{const a=Math.floor(Math.random()*1e5);m(T.fromBlank(t.name,[...t.characters,v.fromBlank("",null,a)],t.songId)),setTimeout(()=>{const l=document.getElementById("characters-"+g);l.scrollTop=l.scrollHeight,document.getElementById("song-tile-"+t.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(h?"disabled":""),disabled:h,onClick:()=>{const a=Math.floor(Math.random()*1e5);m(T.fromBlank(t.name,[...t.characters,M.fromBlank("",[],a)],t.songId)),setTimeout(()=>{const l=document.getElementById("characters-"+g);l.scrollTop=l.scrollHeight,document.getElementById("song-tile-"+t.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(h?"disabled":""),disabled:h,onClick:()=>{S(!0),m(T.fromBlank(t.name,[...t.characters,new L],t.songId)),setTimeout(()=>{const a=document.getElementById("characters"+g);a.scrollTop=a.scrollHeight,document.getElementById("song-tile-"+t.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Full Cast"}),e.jsx("br",{}),x&&e.jsx("button",{className:"ActionBtn "+(w||h?"disabled":""),disabled:w||h,onClick:()=>{w||(E(!0),setTimeout(()=>{const a=document.getElementById("characters-"+g);a.scrollTop=a.scrollHeight,document.getElementById("song-tile-"+t.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),m(T.fromBlank(t.name,[...t.characters,V.fromBlank(!0,!1,!1,!1,[])],t.songId)))},children:"Add Ensemble"})]})]})}function we({dance:t,setDance:m,isCreate:p,removeDance:C,isAssign:f,characters:N,showGroups:B,hasEnsemble:x}){const[w,E]=u.useState(!1),[h,S]=u.useState(!1),[g,D]=u.useState(0);return u.useEffect(()=>{D(Math.floor(Math.random()*1e5))},[]),e.jsxs("div",{className:"DanceTile",id:"dance-tile-"+t.danceId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"DanceNameDiv",children:[e.jsx("label",{htmlFor:"Scene",children:"Song Name: "}),e.jsx("input",{type:"text",name:"",id:"",value:t.name,onChange:a=>{m(G.fromBlank(a.target.value,t.characters,t.danceId))}})]}),e.jsx("div",{children:e.jsx("img",{src:U,alt:"",className:"TrashIcon",onClick:()=>{C()}})})]}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Characters",children:"Characters: "}),e.jsx("div",{className:"characters",id:"characters-"+g,children:t.characters.map((a,l)=>{if(a instanceof v)return e.jsx(q,{character:a,actors:[],isCreate:p,characters:N,isAssign:f,setCharacter:d=>{m(G.fromBlank(t.name,t.characters.map((i,j)=>j===l?d:i),t.danceId))},removeCharacter:()=>{m(G.fromBlank(t.name,t.characters.filter((d,i)=>i!==l),t.danceId))}},l);if(a instanceof V)return e.jsx(Q,{isGroupChatCreate:!1,onAddEnsemble:()=>{},isAssign:!1,ensembleSection:a,isCustom:!1,isCreate:p,actors:[],setEnsembleSection:d=>{m(G.fromBlank(t.name,t.characters.map((i,j)=>j===l?d:i),t.danceId))},removeEnsembleSection:()=>{E(!1),m(G.fromBlank(t.name,t.characters.filter((d,i)=>i!==l),t.danceId))}},l);if(a instanceof M)return e.jsx(J,{showGroup:a,hasEnsemble:x,characters:N,actors:[],isCreate:p,isAssign:f,showGroups:B,setShowGroup:d=>{m(G.fromBlank(t.name,t.characters.map((i,j)=>j===l?d:i),t.danceId))},removeShowGroup:()=>{m(G.fromBlank(t.name,t.characters.filter((d,i)=>i!==l),t.danceId))}},l);if(a instanceof L)return e.jsx(X,{canDelete:!0,onDelete:()=>{m(G.fromBlank(t.name,t.characters.filter((d,i)=>i!==l),t.danceId)),S(!1)}},l)})}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(h?"disabled":""),disabled:h,onClick:()=>{const a=Math.floor(Math.random()*1e5);m(G.fromBlank(t.name,[...t.characters,v.fromBlank("",null,a)],t.danceId)),setTimeout(()=>{const l=document.getElementById("characters-"+g);l.scrollTop=l.scrollHeight,document.getElementById("dance-tile-"+t.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(h?"disabled":""),disabled:h,onClick:()=>{const a=Math.floor(Math.random()*1e5);m(G.fromBlank(t.name,[...t.characters,M.fromBlank("",[],a)],t.danceId)),setTimeout(()=>{const l=document.getElementById("characters-"+g);l.scrollTop=l.scrollHeight,document.getElementById("dance-tile-"+t.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(h?"disabled":""),disabled:h,onClick:()=>{S(!0),m(G.fromBlank(t.name,[...t.characters,new L],t.danceId)),setTimeout(()=>{const a=document.getElementById("characters-"+g);a.scrollTop=a.scrollHeight,document.getElementById("dance-tile-"+t.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Full Cast"}),e.jsx("br",{}),x&&e.jsx("button",{className:"ActionBtn "+(w||h?"disabled":""),disabled:w||h,onClick:()=>{w||(E(!0),setTimeout(()=>{const a=document.getElementById("characters-"+g);a.scrollTop=a.scrollHeight,document.getElementById("dance-tile-"+t.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),m(G.fromBlank(t.name,[...t.characters,V.fromBlank(!0,!1,!1,!1,[])],t.danceId)))},children:"Add Ensemble"})]})]})}function pe({scene:t,setScene:m,isCreate:p,removeScene:C,isAssign:f,characters:N,showGroups:B,hasEnsemble:x}){const[w,E]=u.useState(!1),[h,S]=u.useState(!1),[g,D]=u.useState(0);return u.useEffect(()=>{D(Math.floor(Math.random()*1e5))},[]),e.jsxs("div",{className:"SceneTile",id:"scene-tile-"+t.sceneId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"SceneNameDiv",children:[e.jsx("label",{htmlFor:"Scene",children:"Scene Name: "}),e.jsx("input",{type:"text",name:"",id:"",value:t.name,onChange:a=>{m(A.fromBlank(a.target.value,t.characters,t.sceneId))}})]}),e.jsx("div",{children:e.jsx("img",{src:U,alt:"",className:"TrashIcon",onClick:()=>{C()}})})]}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Characters",children:"Characters: "}),e.jsx("div",{className:"scene-characters",id:"characters-"+g,children:t.characters.map((a,l)=>{if(a instanceof v)return e.jsx(q,{character:a,isCreate:p,actors:[],characters:N,isAssign:f,setCharacter:d=>{m(A.fromBlank(t.name,t.characters.map((i,j)=>j===l?d:i),t.sceneId))},removeCharacter:()=>{m(A.fromBlank(t.name,t.characters.filter((d,i)=>i!==l),t.sceneId))}},l);if(a instanceof V)return e.jsx(Q,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:a,isCustom:!1,isCreate:p,isAssign:f,actors:[],setEnsembleSection:d=>{m(A.fromBlank(t.name,t.characters.map((i,j)=>j===l?d:i),t.sceneId))},removeEnsembleSection:()=>{E(!1),m(A.fromBlank(t.name,t.characters.filter((d,i)=>i!==l),t.sceneId))}},l);if(a instanceof M)return e.jsx(J,{showGroup:a,isCreate:p,isAssign:f,characters:N,actors:[],hasEnsemble:x,showGroups:B,setShowGroup:d=>{m(A.fromBlank(t.name,t.characters.map((i,j)=>j===l?d:i),t.sceneId))},removeShowGroup:()=>{m(A.fromBlank(t.name,t.characters.filter((d,i)=>i!==l),t.sceneId))}},l);if(a instanceof L)return e.jsx(X,{canDelete:!0,onDelete:()=>{S(!1),m(A.fromBlank(t.name,t.characters.filter((d,i)=>i!==l),t.sceneId))}},l)})}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(h?"disabled":""),disabled:h,onClick:()=>{const a=Math.floor(Math.random()*1e5);m(A.fromBlank(t.name,[...t.characters,v.fromBlank("",null,a)],t.sceneId)),setTimeout(()=>{const l=document.getElementById("characters-"+g);l.scrollTop=l.scrollHeight,document.getElementById("scene-tile-"+t.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(h?"disabled":""),disabled:h,onClick:()=>{const a=Math.floor(Math.random()*1e5);m(A.fromBlank(t.name,[...t.characters,M.fromBlank("",[],a)],t.sceneId)),setTimeout(()=>{const l=document.getElementById("characters-"+g);l.scrollTop=l.scrollHeight,document.getElementById("scene-tile-"+t.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),e.jsx("br",{}),x&&e.jsx("button",{className:"ActionBtn "+(w||h?"disabled":""),disabled:w||h,onClick:()=>{w||(E(!0),setTimeout(()=>{const a=document.getElementById("characters-"+g);a.scrollTop=a.scrollHeight,document.getElementById("scene-tile-"+t.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),m(A.fromBlank(t.name,[...t.characters,V.fromBlank(!0,!1,!1,!1,[])],t.sceneId)))},children:"Add Ensemble"}),x&&e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(h?"disabled":""),disabled:h,onClick:()=>{h||(S(!0),setTimeout(()=>{const a=document.getElementById("characters-"+g);a.scrollTop=a.scrollHeight,document.getElementById("scene-tile-"+t.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),m(A.fromBlank(t.name,[...t.characters,new L],t.sceneId)))},children:"Add Full Cast"})]})]})}ce(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(Se,{})}));function Se(){const[t,m]=u.useState(""),[p,C]=u.useState([]),[f,N]=u.useState([]),[B,x]=u.useState([]),[w,E]=u.useState([]),[h,S]=u.useState([]),[g,D]=u.useState(""),[a,l]=u.useState(!1),[d,i]=u.useState(!1),[j,Z]=u.useState(!1),[P,_]=u.useState(!1),[Y,ee]=u.useState(""),[O,te]=u.useState(""),[W,se]=u.useState(null),[$,ae]=u.useState(null),[ne,re]=u.useState(!1),[F,R]=u.useState("Characters"),[I,z]=u.useState(null);function le(){let s=!0;for(let n=0;n<f.length;n++)f[n].actor==null&&(console.log("Actor is null"),s=!1);for(let n=0;n<B.length;n++){const o=B[n];for(let r=0;r<o.characters.length;r++){const c=o.characters[r];c instanceof v&&c.actor==null&&(s=!1)}}return s}function oe(){let s=!0;return B.forEach(n=>{n.characters.forEach(o=>{o instanceof v&&o.name==""&&(s=!1)})}),p.forEach(n=>{n.scenes.forEach(o=>{o.characters.forEach(r=>{r instanceof v?r.name==""&&(s=!1):r instanceof M&&r.name==""&&(s=!1)})})}),w.forEach(n=>{n.characters.forEach(o=>{o instanceof v?o.name==""&&(s=!1):o instanceof M&&o.name==""&&(s=!1)})}),h.forEach(n=>{n.characters.forEach(o=>{o instanceof v?o.name==""&&(s=!1):o instanceof M&&o.name==""&&(s=!1)})}),s}return u.useEffect(()=>{ie(()=>{});const s=new URLSearchParams(window.location.search),n=s.get("activityId");if(n&&m(n),s.get("isEditing")){Z(!0);const r=K.fromMap(JSON.parse(localStorage.getItem("show")));ae(r);for(const c of r.layout){c.hasCreatedSchedule=!0;for(const b of c.scenes)b.hasCreatedSchedule=!0}for(const c of r.songs)c.hasCreatedSchedule=!0;for(const c of r.dances)c.hasCreatedSchedule=!0;for(const c of r.showGroups)c.hasCreatedSchedule=!0;for(const c of r.characters)c.hasCreatedSchedule=!0;te(r.templateId),D(r.name),l(r.hasEnsemble),N(r.characters),console.log(r.characters),x(r.showGroups),C(r.layout),E(r.songs),S(r.dances),ee(r.id),se(r.ensemble),_(r.isCreatingSchedule),r.isCreatingSchedule&&!ne&&re(!0)}},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"title",children:e.jsxs("h1",{children:[P?"Edit":"Create"," Show Template"]})}),e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:"form-question",children:[e.jsx("label",{htmlFor:"name",children:"Show Name: "}),P?e.jsx("label",{className:"showNameLabel",children:g}):e.jsx("input",{type:"text",id:"name",value:g,onChange:s=>D(s.target.value)})]}),!P&&e.jsxs("div",{className:"form-question",children:[e.jsx("label",{htmlFor:"ensemble",children:"Has Ensemble: "}),e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:a,onChange:s=>l(s.target.checked)}),e.jsx("span",{className:"checkmark"})]})]}),e.jsxs("div",{className:"sections",children:[e.jsx("h2",{className:"section "+(F=="Characters"?"selected":""),onClick:()=>{R("Characters")},children:"Characters"}),e.jsx("h2",{className:"section "+(F=="Show Groups"?"selected":""),onClick:()=>{R("Show Groups")},children:"Show Groups"}),e.jsx("h2",{className:"section "+(F=="Layout"?"selected":""),onClick:()=>{R("Layout")},children:"Layout"}),e.jsx("h2",{className:"section "+(F=="Songs"?"selected":""),onClick:()=>{R("Songs")},children:"Songs"}),e.jsx("h2",{className:"section "+(F=="Dances"?"selected":""),onClick:()=>{R("Dances")},children:"Dances"})]}),F=="Characters"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"characters",id:"create-characters",children:f.map((s,n)=>e.jsx(q,{actors:[],character:s,characters:[],hasCreatedSchedule:s.hasCreatedSchedule,isAssign:!1,setCharacter:o=>{N(r=>{const c=[...r];return c[n]=o,c})},removeCharacter:()=>{const o=s.characterId;x(r=>{const c=[...r];for(let b=0;b<c.length;b++){const k=c[b];k.characters=k.characters.filter(y=>y instanceof v?y.characterId!==o:!0)}return c}),C(r=>{const c=[...r];for(let b=0;b<c.length;b++){const k=c[b];k.scenes=k.scenes.filter(y=>y instanceof v?y.characterId!==o:!0)}return c}),E(r=>{const c=[...r];for(let b=0;b<c.length;b++){const k=c[b];k.characters=k.characters.filter(y=>y instanceof v?y.characterId!==o:!0)}return c}),S(r=>{const c=[...r];for(let b=0;b<c.length;b++){const k=c[b];k.characters=k.characters.filter(y=>y instanceof v?y.characterId!==o:!0)}return c}),N(f.filter((r,c)=>c!==n))},isCreate:!0},n))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();N([...f,v.fromBlank("",null,s)]),setTimeout(()=>{const n=document.getElementById("create-characters");n.scrollTop=n.scrollHeight,document.getElementById("character-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"})]}),F=="Show Groups"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"showGroups",id:"create-showGroups",children:B.map((s,n)=>e.jsx(J,{showGroup:s,showGroups:[],actors:[],hasCreatedSchedule:s.hasCreatedSchedule,hasEnsemble:a,characters:f,isAssign:!1,setShowGroup:o=>{x(r=>{const c=[...r];return c[n]=o,c})},removeShowGroup:()=>{x(B.filter((o,r)=>r!==n))},isCreate:!0},n))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();x([...B,M.fromBlank("",[],s)]),setTimeout(()=>{const n=document.getElementById("create-showGroups");n.scrollTop=n.scrollHeight,document.getElementById("show-group-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"})]}),F=="Layout"&&e.jsx(e.Fragment,{children:I==null?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"layout",id:"create-layout",children:p.map((s,n)=>e.jsx(ge,{selectAct:o=>{z(o)},hasEnsemble:a,act:s,characters:f,showGroups:B,isAssign:!1,setAct:o=>{C(r=>{const c=[...r];return c[n]=o,c})},isCreate:!1,removeAct:()=>{C(p.filter((o,r)=>r!==n))}},n))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();C([...p,H.fromBlank("Act "+(p.length+1),[],s)]),setTimeout(()=>{const n=document.getElementById("create-layout");n.scrollTop=n.scrollHeight,document.getElementById("act-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Act"})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"act-header",children:[e.jsx("img",{src:be,alt:"",onClick:()=>{z(null)}}),e.jsx("h2",{children:I.name})]}),e.jsx("label",{htmlFor:"Scene",children:"Scenes: "}),e.jsx("div",{id:"scenes-"+I.actId,className:"scenes",children:I.scenes.map((s,n)=>e.jsx(pe,{hasEnsemble:a,scene:s,isCreate:!1,characters:f,showGroups:B,isAssign:!1,setScene:o=>{C(r=>{const c=[...r],b=c.findIndex(k=>k.actId==I.actId);return c[b]=H.fromBlank(I.name,I.scenes.map((k,y)=>y===n?o:k),I.actId),c})},removeScene:()=>{C(o=>{const r=[...o],c=r.findIndex(b=>b.actId==I.actId);return r[c]=H.fromBlank(I.name,I.scenes.filter((b,k)=>k!==n),I.actId),r})}},n))}),I.scenes.length==0&&e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();C(n=>{const o=[...n],r=o.findIndex(c=>c.actId==I.actId);return o[r]=H.fromBlank(I.name,[...I.scenes,A.fromBlank("Scene "+(I.scenes.length+1),[],s)],I.actId),z(H.fromBlank(I.name,[...I.scenes,A.fromBlank("Scene "+(I.scenes.length+1),[],s)],I.actId)),o}),setTimeout(()=>{const n=document.getElementById("scenes-"+I.actId);n.scrollTop=n.scrollHeight,document.getElementById("scene-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Scene"})]})})}),F=="Songs"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"songs",id:"create-songs",children:w.map((s,n)=>e.jsx(je,{song:s,hasEnsemble:a,characters:f,showGroups:B,isAssign:!1,setSong:o=>{E(r=>{const c=[...r];return c[n]=o,c})},removeSong:()=>{E(w.filter((o,r)=>r!==n))},isCreate:!1},n))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();E([...w,T.fromBlank("Song "+(w.length+1),[],s)]),setTimeout(()=>{const n=document.getElementById("create-songs");n.scrollTop=n.scrollHeight,document.getElementById("song-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Song"})," "]}),F=="Dances"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"dances",id:"create-dances",children:h.map((s,n)=>e.jsx(we,{dance:s,hasEnsemble:a,characters:f,showGroups:B,isAssign:!1,setDance:o=>{S(r=>{const c=[...r];return c[n]=o,c})},removeDance:()=>{S(h.filter((o,r)=>r!==n))},isCreate:!1},n))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();S([...h,G.fromBlank("Dance "+(h.length+1),[],s)]),setTimeout(()=>{const n=document.getElementById("create-dances");n.scrollTop=n.scrollHeight,document.getElementById("dance-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Dance"})," "]}),d?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(i(!0),!oe()){alert("Please select all characters and show groups before creating the show template"),i(!1);return}const s=K.fromBlank(g,Y,t,O,p,f,a?me.fromBlank((W==null?void 0:W.actors)??[],Date.now()):null,B,w,h,!1,a,null,[],"open",P,Date.now());s.templateId=O,console.log(O),console.log(s.toMap());let n=Y;if(j)K.fromMap(s.toMap()),s.formStatus=$.formStatus,s.isCreatingSchedule=$.isCreatingSchedule,s.conflictForm=$.conflictForm,s.canCreateSchedule=le(),s.resources=$.resources,s.templateId=$.templateId,s.canCreateSchedule||alert("Since there are characters that haven't been assigned to actors, you will not be able to edit/create the schedule until you assign actors to all characters"),await fe(s),P&&await Ie(s),localStorage.removeItem("show"),localStorage.setItem("show",JSON.stringify(s==null?void 0:s.toMap()));else{const o=await he(s);s.templateId=o,n=await ue(s)}window.location.href=`/Activity/Shows/Show/?activityId=${t}&showId=${n}`,i(!1)},children:j?"Save Show Template":"Create Show Template"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const n=new URLSearchParams(window.location.search).get("showId");if(j){window.location.href=`/Activity/Shows/Show/?activityId=${t}&showId=${n}`;return}window.location.href=`/Activity/Shows/Add/?activityId=${t}`},children:"Back"})]})]})}
