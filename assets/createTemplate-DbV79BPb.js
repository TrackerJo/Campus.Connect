import{r as A,j as e,A as Q,d as G,C as y,E as O,e as V,F as H,D as R,f as F,c as Ae,i as he,g as X,h as ue}from"./index-CyZc0qSF.js";import{T as Z}from"./trash-BnpXJPEK.js";import{A as fe}from"./arrow_forward-CHD_SwLW.js";import{C as P,S as z}from"./Show_Group_Tile-BBbWz-aB.js";import{E as $}from"./Ensemble_Section_Tile-n29r1RV9.js";import{F as _}from"./Full_Cast_Tile-BtjD4pPW.js";import{m as Ie,l as ge,n as Be,o as be}from"./db-DeTaRERq.js";import{B as Ce}from"./back-C9T8y7K2.js";const ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAVCAYAAAAjODzXAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIqADAAQAAAABAAAAFQAAAAARe8XCAAAB10lEQVRIDbWVTStEURjHzYuZZjBIyleRkiwkRVEIRUlJSbFgYWNjY1azsWLBAkVJUSKKoijKQtn5DuT9ZfyO3Jkzz3Wv++bUv/s8z/m/nLln6hYV+VjZbLYaZEAalPuw8i4luAbcAGNdUFR4d/SgJFC9iWvjBNrzjDrlwdK9hKAqcKWFy/KEQal7ZxcKAirBpUi+o38SsyP6pAtr51SMU+BcBN7T14Fm8Cz2DugTzhMcMDEsA6ci6IG+3pBTt4JXwdmljxscX0+MSsCxCHikb5TGzNrBm+Bu08ck11WPQQIcCmN1BU1WRux1gneh2aSPWmls5wjjYE8YvtC32ArZhNMDPoR2nT7yl7ZgH0EM7Agjdf9tBUSbBm4/kIdZYRa2keW3IBaDLaAvde8deZazCs0g+NSNqJeA/WEgRMEG0Je67y5n0WYW2mEgD7PALGRmM2EjAlaBvtSr7ftV4GKIx6hu+lPPmyzYCINlQVa/YsBE9jjAa1z4qzaTs6MJgUU11ZY6xFCOFFCB56SWYZTpb3u6OWOiPUcCyjbZkDGt5RjllPpvqI+WvsZM6oAHhM3ogdS36iD72nAi4ExLOzJntdw1dZAk6AW1lqp/2iCzAXQDf9+iIM/3BR81SrYDkG4vAAAAAElFTkSuQmCC",te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAVCAYAAAAjODzXAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIqADAAQAAAABAAAAFQAAAAARe8XCAAABy0lEQVRIDc2Wx0pDURBAg+50IWKNxt6wtyAREgQXLvwUf8FP8iPcCi4Exa6x915RBJ9nAgmTm/vCS/ISHDhmZu40X55zDQT+kziOUwllpZ6JnuVQkeiLsgi/cA6TpRqGXjNwCz+wEODHCyTlAWW02MPQIwrvyaZ8xmWQZeUQ9Q6GijUMtSPwClqWZJAg7Gov+g30+z0MNcPwDFpWMaoSvVCa4UCfol9Cr1/DUGscHkHLGkZ1Wg8crXAEWuQF7koLzMOgxjDc68LoG1BrLcdBB5yClhOMdmuCBye5AyB/HVq2MOqzphPQDRc6Cz0OLVkTLYfk9MEVaNnDCFrCM10ESoFrnY2+D02Z0XYPsbZf6BB/yJ7h4iVhEMxHuoOv0SUl5SbG9hUf429LBeWikDgCsuS0bGLUudXhTF56aarlDKPTLceTnwIT8KSroq9DjVkAXwjk8WuRNdBjxuZlU2gK9FUgjdJ2ALYsRnkRtfi/GKk+DW+6C3piK/LZANvGWfGuChrF4MNouIIty0mLbNCxvB6/1yQazMKn7mrocpeEvdYrKI5Gc/BlDCCm3KqRgornmkzDefiGpMj/F9Fc6/gST2MZRnaEXAGxQor+ARxhTdM0H96WAAAAAElFTkSuQmCC",se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAVCAYAAAAjODzXAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIqADAAQAAAABAAAAFQAAAAARe8XCAAADK0lEQVRIDb1VX0hTURy+5171zq0pEm0+2HPRQ2DQQ0ER+SClhlaj/0bsT7u7QxkRDephgQU2WDDcpmnZnwepyIEyUCKJoMKXHvfSQw/Rg/hSS9K03dN3ame7c9PmUi+M37nfOef7fb/vd84dEf7jCYfD2yorTTcopYupVLrH77/8rVw6Uu7GSCRSL4rya0LIjgzHh/n5VJPP5/taDqdYzibmhCgaXulEMJo9BoN5EnM15XCu2ZG+vr6tkmSYgojdxRJSKrzTtIVmVVXnis2vhK3JkWg0WgcRL5eJ+A7yBZ6AEGG/JMmJQGDAyLFSYslCmOWEyJMQ0ciJcUjn8DuSTtMOxJ8cFwRy0GqtGA+FQtU5bPVRSUJ6e++bq6qME6h2b46O/kinhRZFcbxVVceEpgk2QaBLfB5rD1dX18ZRgMyx1eI/hQSDQVNNDU2gyn2cCOdgHg60eb2ONxyDmHFKtVPAf3EMYppRwItAIFDFsZXiqkKYtWZz3TjacYATsBag+nZFcU5xjEdFccUh8ize0xxDAS319Q1PIaYihxWOpELoL8IsleUtYxDRpFuzSAg97vE4JnRY3jCRGEu2trZ9hKAO7M3cSrLTZKrdZTTKo8lkkuZtyLwUvb7MSqu1IQ6eo7lNdEnTyEmPxz6Ww1Ye9fcPdlJKhsGRdR3iRmZmPp8Hv7Z8Z3YRn3C5Bioh4rleBOs7bsbpUkUwLrfb+RjBiV/WAfhzxmLZPgwhBXnzANbHxkZpBCKOMbLMg35r51TVOcqBUiNu1AMUoWB9VowoCp0Qcw9YXjeyQmw2mwQnnkDECZ4IJBrsvIhD+Ixja40QMwCeLv0+iLHHYkMRPfZHFbMKIh5CxAXdJNU0egkH85EOK3uIxD7wh/QEKDKsKPZuhjFHCEQMFhHhWi8RLBGcuQtnrrExf3BmuqLRoSB7Jzjdd6DnKp9kER3x4DsR02PrNY7FBq/jIvXo+eC8H46Ibj0IEd0bJYLlAfct5Lipz4luuEX0aZqD+GJewcIwf9+oiBwBiLnN+fGRnCbs79pikdrxsfrk9drf88nNiGjTIRRvnZ39Et+MfCXl+A2cpS9BEQ2bFQAAAABJRU5ErkJggg==",ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAVCAYAAAAjODzXAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIqADAAQAAAABAAAAFQAAAAARe8XCAAADWUlEQVRIDc1W30tUQRSeufcubFmRUZRZQmX0gyKKiIJidTUIX4rAl156WFf2l/YSvfSy0KMP4q53d2+rf0GvFWFpSi8FGkJGlFEapmA/VDJS9947faOOczdd2wWTBu7Ome/MfPPtOWfmXkL+p9bU1FQUjUaV9dZUW1urRqPGRr4vTSbTtylV7jBGRhmzL4dC/r71EJRI3PVQqt4jhBVTSm4gCsotLgiDUkWhHalU6sS/FqLrxnlFUR9gzx3YWMN+NyGEvZQb022EaE+SybZjEltbK5FIn1VV7SFYiwQzY7RPmZmxrkHMOwEiONvxdOp6+ojE1sZKpdpPI+qPwLZZMrLeqSmzjnIgmUyWUurqgYADjgljpmlXRCL1DpHSW6iFKJ/Emk6koliuZf22PecNhUIT8yclGAx+np21vCjYITmJlqiq2hWLGQ5x0luIFY8bx/EnHztFMMYGpqeti1wE55qPiCCNx9P7NE3pQRHtFRjS9omxjAdihySWv4XiP8qYq5sXplgFEW8IyVSAc1xgWXdHQ4P/o20zRIaNignQWoa0dem67hAnvatZiUT7IYhAOpwiyCDqssopgnNkRUSQcgJFYbxmdgoM4t6bJvU0NPgcIoV3ea/rbeWKQhBdult4kfoPmYztaWz0jwhM9FkREWAo5HuLQq3Cwi8CA2G5pjEemV0Cy9XzFON0dGWLYMOWxbwrieA8KwrhDpyW17hpq1Ej3/mYNxAjUu7OWCy2lO8Fj/xtaTHKNI0+/aPORhib80YidcNyZra1YmqcU1pbjVOapnUC2+rAX5nmr8pIJPLNgZFYLL3H5Zov9v0SZ2OEmJ5AIDAoseXWX4XwJbgDziAeOH5ki6SQdwDHmpuNErdb68Gcg2IOUjtu23ZFOOzHKVm95SWEU7S2tp9TVdaB9GySlKx3ctKqdrsVN55u4Icdvq8QUhkM1g1ILLeVtxBOgffEhYUrms6/uhdpX+BEFUHg0vsJ4wlEwhsO1/fn3jrbU5AQvhSfDV7U+H2kYEM2lRixKaSxOhDw9Qoknz7nqcm1OBj0d9k2uYJ/PbvCnB+4EC8VKoLzFCyELwqHfagVdhXmHB8vtp+WZdbgw+q5AArpC06NkzyVStcgDQawDCJxHSKeOf2F2L8B6DpBSa9fWgMAAAAASUVORK5CYII=";function Se({act:t,setAct:m,isCreate:u,removeAct:j,isAssign:b,characters:D,showGroups:E,hasEnsemble:v,selectAct:p,canMoveDown:w,canMoveUp:g,moveDown:N,moveUp:C}){const[U,c]=A.useState(0);return A.useEffect(()=>{c(Math.floor(Math.random()*1e5))},[]),e.jsx("div",{className:"ActTile",id:"act-tile-"+t.actId,onClick:o=>{o.target.classList.contains("TrashIcon")||o.target.tagName!="INPUT"&&(o.target.classList.contains("UpIcon")||o.target.classList.contains("DownIcon")||p(t))},children:e.jsxs("div",{className:"header",children:[e.jsx("div",{children:e.jsx("img",{src:Z,alt:"",className:"TrashIcon",onClick:()=>{j()}})}),e.jsxs("div",{className:"ActNameDiv",children:[e.jsx("label",{htmlFor:"Act",children:"Act Name: "}),e.jsx("input",{type:"text",name:"",id:"",value:t.name,onChange:o=>{m(Q.fromBlank(o.target.value,t.scenes,t.actId))}})]}),e.jsxs("div",{className:"ActActions",children:[e.jsx("img",{src:g?ee:se,alt:"",className:"UpIcon "+(g?"":"disabled"),onClick:()=>{g&&C()}}),e.jsx("img",{src:w?te:ne,alt:"",className:"DownIcon "+(w?"":"disabled"),onClick:()=>{w&&N()}}),e.jsx("img",{src:fe,alt:"",className:"ForwardIcon"})]})]})})}function je({song:t,setSong:m,isCreate:u,removeSong:j,isAssign:b,characters:D,showGroups:E,hasEnsemble:v}){const[p,w]=A.useState(!1),[g,N]=A.useState(!1),[C,U]=A.useState(0);return A.useEffect(()=>{U(Math.floor(Math.random()*1e5))},[]),e.jsxs("div",{className:"SongTile",id:"song-tile-"+t.songId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"SongNameDiv",children:[e.jsx("label",{htmlFor:"Scene",children:"Song Name: "}),e.jsx("input",{type:"text",name:"",id:"",value:t.name,onChange:c=>{m(G.fromBlank(c.target.value,t.characters,t.songId))}})]}),e.jsx("div",{children:e.jsx("img",{src:Z,alt:"",className:"TrashIcon",onClick:()=>{j()}})})]}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Characters",children:"Characters: "}),e.jsx("div",{className:"song-characters",id:"characters-"+C,children:t.characters.map((c,o)=>{if(c instanceof y)return e.jsx(P,{character:c,isCreate:u,actors:[],characters:D,isAssign:b,setCharacter:I=>{m(G.fromBlank(t.name,t.characters.map((h,d)=>d===o?I:h),t.songId))},removeCharacter:()=>{m(G.fromBlank(t.name,t.characters.filter((I,h)=>h!==o),t.songId))}},o);if(c instanceof O)return e.jsx($,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:c,isAssign:b,actors:[],isCustom:!1,isCreate:u,setEnsembleSection:I=>{m(G.fromBlank(t.name,t.characters.map((h,d)=>d===o?I:h),t.songId))},removeEnsembleSection:()=>{w(!1),m(G.fromBlank(t.name,t.characters.filter((I,h)=>h!==o),t.songId))}},o);if(c instanceof V)return e.jsx(z,{showGroup:c,hasEnsemble:v,actors:[],characters:D,isCreate:u,isAssign:b,showGroups:E,setShowGroup:I=>{m(G.fromBlank(t.name,t.characters.map((h,d)=>d===o?I:h),t.songId))},removeShowGroup:()=>{m(G.fromBlank(t.name,t.characters.filter((I,h)=>h!==o),t.songId))}},o);if(c instanceof H)return e.jsx(_,{canDelete:!0,onDelete:()=>{N(!1),m(G.fromBlank(t.name,t.characters.filter((I,h)=>h!==o),t.songId))}},o)})}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(g?"disabled":""),disabled:g,onClick:()=>{const c=Math.floor(Math.random()*1e5);m(G.fromBlank(t.name,[...t.characters,y.fromBlank("",null,c)],t.songId)),setTimeout(()=>{const o=document.getElementById("characters-"+C);o.scrollTop=o.scrollHeight,document.getElementById("song-tile-"+t.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(g?"disabled":""),disabled:g,onClick:()=>{const c=Math.floor(Math.random()*1e5);m(G.fromBlank(t.name,[...t.characters,V.fromBlank("",[],c)],t.songId)),setTimeout(()=>{const o=document.getElementById("characters-"+C);o.scrollTop=o.scrollHeight,document.getElementById("song-tile-"+t.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(g?"disabled":""),disabled:g,onClick:()=>{N(!0),m(G.fromBlank(t.name,[...t.characters,new H],t.songId)),setTimeout(()=>{const c=document.getElementById("characters"+C);c.scrollTop=c.scrollHeight,document.getElementById("song-tile-"+t.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Full Cast"}),e.jsx("br",{}),v&&e.jsx("button",{className:"ActionBtn "+(p||g?"disabled":""),disabled:p||g,onClick:()=>{p||(w(!0),setTimeout(()=>{const c=document.getElementById("characters-"+C);c.scrollTop=c.scrollHeight,document.getElementById("song-tile-"+t.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),m(G.fromBlank(t.name,[...t.characters,O.fromBlank(!0,!1,!1,!1,[])],t.songId)))},children:"Add Ensemble"})]})]})}function pe({dance:t,setDance:m,isCreate:u,removeDance:j,isAssign:b,characters:D,showGroups:E,hasEnsemble:v}){const[p,w]=A.useState(!1),[g,N]=A.useState(!1),[C,U]=A.useState(0);return A.useEffect(()=>{U(Math.floor(Math.random()*1e5))},[]),e.jsxs("div",{className:"DanceTile",id:"dance-tile-"+t.danceId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"DanceNameDiv",children:[e.jsx("label",{htmlFor:"Scene",children:"Song Name: "}),e.jsx("input",{type:"text",name:"",id:"",value:t.name,onChange:c=>{m(R.fromBlank(c.target.value,t.characters,t.danceId))}})]}),e.jsx("div",{children:e.jsx("img",{src:Z,alt:"",className:"TrashIcon",onClick:()=>{j()}})})]}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Characters",children:"Characters: "}),e.jsx("div",{className:"characters",id:"characters-"+C,children:t.characters.map((c,o)=>{if(c instanceof y)return e.jsx(P,{character:c,actors:[],isCreate:u,characters:D,isAssign:b,setCharacter:I=>{m(R.fromBlank(t.name,t.characters.map((h,d)=>d===o?I:h),t.danceId))},removeCharacter:()=>{m(R.fromBlank(t.name,t.characters.filter((I,h)=>h!==o),t.danceId))}},o);if(c instanceof O)return e.jsx($,{isGroupChatCreate:!1,onAddEnsemble:()=>{},isAssign:!1,ensembleSection:c,isCustom:!1,isCreate:u,actors:[],setEnsembleSection:I=>{m(R.fromBlank(t.name,t.characters.map((h,d)=>d===o?I:h),t.danceId))},removeEnsembleSection:()=>{w(!1),m(R.fromBlank(t.name,t.characters.filter((I,h)=>h!==o),t.danceId))}},o);if(c instanceof V)return e.jsx(z,{showGroup:c,hasEnsemble:v,characters:D,actors:[],isCreate:u,isAssign:b,showGroups:E,setShowGroup:I=>{m(R.fromBlank(t.name,t.characters.map((h,d)=>d===o?I:h),t.danceId))},removeShowGroup:()=>{m(R.fromBlank(t.name,t.characters.filter((I,h)=>h!==o),t.danceId))}},o);if(c instanceof H)return e.jsx(_,{canDelete:!0,onDelete:()=>{m(R.fromBlank(t.name,t.characters.filter((I,h)=>h!==o),t.danceId)),N(!1)}},o)})}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(g?"disabled":""),disabled:g,onClick:()=>{const c=Math.floor(Math.random()*1e5);m(R.fromBlank(t.name,[...t.characters,y.fromBlank("",null,c)],t.danceId)),setTimeout(()=>{const o=document.getElementById("characters-"+C);o.scrollTop=o.scrollHeight,document.getElementById("dance-tile-"+t.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(g?"disabled":""),disabled:g,onClick:()=>{const c=Math.floor(Math.random()*1e5);m(R.fromBlank(t.name,[...t.characters,V.fromBlank("",[],c)],t.danceId)),setTimeout(()=>{const o=document.getElementById("characters-"+C);o.scrollTop=o.scrollHeight,document.getElementById("dance-tile-"+t.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(g?"disabled":""),disabled:g,onClick:()=>{N(!0),m(R.fromBlank(t.name,[...t.characters,new H],t.danceId)),setTimeout(()=>{const c=document.getElementById("characters-"+C);c.scrollTop=c.scrollHeight,document.getElementById("dance-tile-"+t.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Full Cast"}),e.jsx("br",{}),v&&e.jsx("button",{className:"ActionBtn "+(p||g?"disabled":""),disabled:p||g,onClick:()=>{p||(w(!0),setTimeout(()=>{const c=document.getElementById("characters-"+C);c.scrollTop=c.scrollHeight,document.getElementById("dance-tile-"+t.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),m(R.fromBlank(t.name,[...t.characters,O.fromBlank(!0,!1,!1,!1,[])],t.danceId)))},children:"Add Ensemble"})]})]})}function we({scene:t,setScene:m,isCreate:u,removeScene:j,isAssign:b,characters:D,showGroups:E,hasEnsemble:v,canMoveUp:p,canMoveDown:w,moveUp:g,moveDown:N}){const[C,U]=A.useState(!1),[c,o]=A.useState(!1),[I,h]=A.useState(0);return A.useEffect(()=>{h(Math.floor(Math.random()*1e5))},[]),e.jsxs("div",{className:"SceneTile",id:"scene-tile-"+t.sceneId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"SceneNameDiv",children:[e.jsx("label",{htmlFor:"Scene",children:"Scene Name: "}),e.jsx("input",{type:"text",name:"",id:"",value:t.name,onChange:d=>{m(F.fromBlank(d.target.value,t.characters,t.sceneId))}})]}),e.jsxs("div",{className:"SceneActions",children:[e.jsx("img",{src:p?ee:se,alt:"",className:"UpIcon "+(p?"":"disabled"),onClick:()=>{p&&g()}}),e.jsx("img",{src:w?te:ne,alt:"",className:"DownIcon "+(w?"":"disabled"),onClick:()=>{w&&N()}}),e.jsx("img",{src:Z,alt:"",className:"TrashIcon",onClick:()=>{j()}})]})]}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Characters",children:"Characters: "}),e.jsx("div",{className:"scene-characters",id:"characters-"+I,children:t.characters.map((d,S)=>{if(d instanceof y)return e.jsx(P,{character:d,isCreate:u,actors:[],characters:D,isAssign:b,setCharacter:x=>{m(F.fromBlank(t.name,t.characters.map((T,L)=>L===S?x:T),t.sceneId))},removeCharacter:()=>{m(F.fromBlank(t.name,t.characters.filter((x,T)=>T!==S),t.sceneId))}},S);if(d instanceof O)return e.jsx($,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:d,isCustom:!1,isCreate:u,isAssign:b,actors:[],setEnsembleSection:x=>{m(F.fromBlank(t.name,t.characters.map((T,L)=>L===S?x:T),t.sceneId))},removeEnsembleSection:()=>{U(!1),m(F.fromBlank(t.name,t.characters.filter((x,T)=>T!==S),t.sceneId))}},S);if(d instanceof V)return e.jsx(z,{showGroup:d,isCreate:u,isAssign:b,characters:D,actors:[],hasEnsemble:v,showGroups:E,setShowGroup:x=>{m(F.fromBlank(t.name,t.characters.map((T,L)=>L===S?x:T),t.sceneId))},removeShowGroup:()=>{m(F.fromBlank(t.name,t.characters.filter((x,T)=>T!==S),t.sceneId))}},S);if(d instanceof H)return e.jsx(_,{canDelete:!0,onDelete:()=>{o(!1),m(F.fromBlank(t.name,t.characters.filter((x,T)=>T!==S),t.sceneId))}},S)})}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(c?"disabled":""),disabled:c,onClick:()=>{const d=Math.floor(Math.random()*1e5);m(F.fromBlank(t.name,[...t.characters,y.fromBlank("",null,d)],t.sceneId)),setTimeout(()=>{const S=document.getElementById("characters-"+I);S.scrollTop=S.scrollHeight,document.getElementById("scene-tile-"+t.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(c?"disabled":""),disabled:c,onClick:()=>{const d=Math.floor(Math.random()*1e5);m(F.fromBlank(t.name,[...t.characters,V.fromBlank("",[],d)],t.sceneId)),setTimeout(()=>{const S=document.getElementById("characters-"+I);S.scrollTop=S.scrollHeight,document.getElementById("scene-tile-"+t.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),e.jsx("br",{}),v&&e.jsx("button",{className:"ActionBtn "+(C||c?"disabled":""),disabled:C||c,onClick:()=>{C||(U(!0),setTimeout(()=>{const d=document.getElementById("characters-"+I);d.scrollTop=d.scrollHeight,document.getElementById("scene-tile-"+t.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),m(F.fromBlank(t.name,[...t.characters,O.fromBlank(!0,!1,!1,!1,[])],t.sceneId)))},children:"Add Ensemble"}),v&&e.jsx("br",{}),e.jsx("button",{className:"ActionBtn "+(c?"disabled":""),disabled:c,onClick:()=>{c||(o(!0),setTimeout(()=>{const d=document.getElementById("characters-"+I);d.scrollTop=d.scrollHeight,document.getElementById("scene-tile-"+t.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),m(F.fromBlank(t.name,[...t.characters,new H],t.sceneId)))},children:"Add Full Cast"})]})]})}Ae(document.getElementById("root")).render(e.jsx(A.StrictMode,{children:e.jsx(Ee,{})}));function Ee(){const[t,m]=A.useState(""),[u,j]=A.useState([]),[b,D]=A.useState([]),[E,v]=A.useState([]),[p,w]=A.useState([]),[g,N]=A.useState([]),[C,U]=A.useState(""),[c,o]=A.useState(!1),[I,h]=A.useState(!1),[d,S]=A.useState(!1),[x,T]=A.useState(!1),[L,ae]=A.useState(""),[J,re]=A.useState(""),[q,le]=A.useState(null),[K,ce]=A.useState(null),[oe,ie]=A.useState(!1),[M,Y]=A.useState("Characters"),[i,W]=A.useState(null);function me(){let s=!0;for(let r=0;r<b.length;r++)b[r].actor==null&&(console.log("Actor is null"),s=!1);for(let r=0;r<E.length;r++){const a=E[r];for(let n=0;n<a.characters.length;n++){const l=a.characters[n];l instanceof y&&l.actor==null&&(s=!1)}}return s}function de(){let s=!0;return E.forEach(r=>{r.characters.forEach(a=>{a instanceof y&&a.name==""&&(s=!1)})}),u.forEach(r=>{r.scenes.forEach(a=>{a.characters.forEach(n=>{n instanceof y?n.name==""&&(s=!1):n instanceof V&&n.name==""&&(s=!1)})})}),p.forEach(r=>{r.characters.forEach(a=>{a instanceof y?a.name==""&&(s=!1):a instanceof V&&a.name==""&&(s=!1)})}),g.forEach(r=>{r.characters.forEach(a=>{a instanceof y?a.name==""&&(s=!1):a instanceof V&&a.name==""&&(s=!1)})}),s}return A.useEffect(()=>{he(()=>{});const s=new URLSearchParams(window.location.search),r=s.get("activityId");if(r&&m(r),s.get("isEditing")){S(!0);const n=X.fromMap(JSON.parse(localStorage.getItem("show")));ce(n);for(const l of n.layout){l.hasCreatedSchedule=!0;for(const f of l.scenes)f.hasCreatedSchedule=!0}for(const l of n.songs)l.hasCreatedSchedule=!0;for(const l of n.dances)l.hasCreatedSchedule=!0;for(const l of n.showGroups)l.hasCreatedSchedule=!0;for(const l of n.characters)l.hasCreatedSchedule=!0;re(n.templateId),U(n.name),o(n.hasEnsemble),D(n.characters),console.log(n.characters),v(n.showGroups),j(n.layout),w(n.songs),N(n.dances),ae(n.id),le(n.ensemble),T(n.isCreatingSchedule),n.isCreatingSchedule&&!oe&&ie(!0)}},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"title",children:e.jsxs("h1",{children:[x?"Edit":"Create"," Show Template"]})}),e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:"form-question",children:[e.jsx("label",{htmlFor:"name",children:"Show Name: "}),x?e.jsx("label",{className:"showNameLabel",children:C}):e.jsx("input",{type:"text",id:"name",value:C,onChange:s=>U(s.target.value)})]}),!x&&e.jsxs("div",{className:"form-question",children:[e.jsx("label",{htmlFor:"ensemble",children:"Has Ensemble: "}),e.jsxs("label",{className:"custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"ensemble",checked:c,onChange:s=>o(s.target.checked)}),e.jsx("span",{className:"checkmark"})]})]}),e.jsxs("div",{className:"sections",children:[e.jsx("h2",{className:"section "+(M=="Characters"?"selected":""),onClick:()=>{Y("Characters")},children:"Characters"}),e.jsx("h2",{className:"section "+(M=="Show Groups"?"selected":""),onClick:()=>{Y("Show Groups")},children:"Show Groups"}),e.jsx("h2",{className:"section "+(M=="Layout"?"selected":""),onClick:()=>{Y("Layout")},children:"Layout"}),e.jsx("h2",{className:"section "+(M=="Songs"?"selected":""),onClick:()=>{Y("Songs")},children:"Songs"}),e.jsx("h2",{className:"section "+(M=="Dances"?"selected":""),onClick:()=>{Y("Dances")},children:"Dances"})]}),M=="Characters"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"characters",id:"create-characters",children:b.map((s,r)=>e.jsx(P,{actors:[],character:s,characters:[],hasCreatedSchedule:s.hasCreatedSchedule,isAssign:!1,setCharacter:a=>{D(n=>{const l=[...n];return l[r]=a,l})},removeCharacter:()=>{const a=s.characterId;v(n=>{const l=[...n];for(let f=0;f<l.length;f++){const B=l[f];B.characters=B.characters.filter(k=>k instanceof y?k.characterId!==a:!0)}return l}),j(n=>{const l=[...n];for(let f=0;f<l.length;f++){const B=l[f];B.scenes=B.scenes.filter(k=>k instanceof y?k.characterId!==a:!0)}return l}),w(n=>{const l=[...n];for(let f=0;f<l.length;f++){const B=l[f];B.characters=B.characters.filter(k=>k instanceof y?k.characterId!==a:!0)}return l}),N(n=>{const l=[...n];for(let f=0;f<l.length;f++){const B=l[f];B.characters=B.characters.filter(k=>k instanceof y?k.characterId!==a:!0)}return l}),D(b.filter((n,l)=>l!==r))},isCreate:!0},r))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();D([...b,y.fromBlank("",null,s)]),setTimeout(()=>{const r=document.getElementById("create-characters");r.scrollTop=r.scrollHeight,document.getElementById("character-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"})]}),M=="Show Groups"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"showGroups",id:"create-showGroups",children:E.map((s,r)=>e.jsx(z,{showGroup:s,showGroups:[],actors:[],hasCreatedSchedule:s.hasCreatedSchedule,hasEnsemble:c,characters:b,isAssign:!1,setShowGroup:a=>{v(n=>{const l=[...n];return l[r]=a,l})},removeShowGroup:()=>{v(E.filter((a,n)=>n!==r))},isCreate:!0},r))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();v([...E,V.fromBlank("",[],s)]),setTimeout(()=>{const r=document.getElementById("create-showGroups");r.scrollTop=r.scrollHeight,document.getElementById("show-group-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"})]}),M=="Layout"&&e.jsx(e.Fragment,{children:i==null?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"layout",id:"create-layout",children:u.map((s,r)=>e.jsx(Se,{canMoveDown:u.indexOf(s)!=u.length-1,canMoveUp:u.indexOf(s)!=0,moveDown:()=>{j(a=>{const n=[...a],l=u.indexOf(s)+1;return n[u.indexOf(s)]=u[l],n[l]=s,n}),setTimeout(()=>{const a=document.getElementById("create-layout");a.scrollTop=a.scrollHeight,document.getElementById("act-tile-"+s.actId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},moveUp:()=>{j(a=>{const n=[...a],l=u.indexOf(s)-1;return n[u.indexOf(s)]=u[l],n[l]=s,n}),setTimeout(()=>{const a=document.getElementById("create-layout");a.scrollTop=a.scrollHeight,document.getElementById("act-tile-"+s.actId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},selectAct:a=>{W(a)},hasEnsemble:c,act:s,characters:b,showGroups:E,isAssign:!1,setAct:a=>{j(n=>{const l=[...n];return l[r]=a,l})},isCreate:!1,removeAct:()=>{j(u.filter((a,n)=>n!==r))}},r))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();j([...u,Q.fromBlank("Act "+(u.length+1),[],s)]),setTimeout(()=>{const r=document.getElementById("create-layout");r.scrollTop=r.scrollHeight,document.getElementById("act-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Act"})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"act-header",children:[e.jsx("img",{src:Ce,alt:"",onClick:()=>{W(null)}}),e.jsx("h2",{children:i.name})]}),e.jsx("label",{htmlFor:"Scene",children:"Scenes: "}),e.jsx("div",{id:"scenes-"+i.actId,className:"scenes",children:i.scenes.map((s,r)=>e.jsx(we,{canMoveDown:i.scenes.indexOf(s)!=i.scenes.length-1,canMoveUp:i.scenes.indexOf(s)!=0,moveDown:()=>{j(a=>{const n=[...a],l=i.scenes.indexOf(s)+1;return W(Q.fromBlank(i.name,i.scenes.map((f,B)=>B===r?i.scenes[l]:B===l?s:f),i.actId)),n[u.findIndex(f=>f.actId==i.actId)].scenes[i.scenes.indexOf(s)]=i.scenes[l],n[u.findIndex(f=>f.actId==i.actId)].scenes[l]=s,n}),setTimeout(()=>{document.getElementById("scenes-"+i.actId),document.getElementById("scene-tile-"+s.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},moveUp:()=>{j(a=>{const n=[...a],l=i.scenes.indexOf(s)-1,f=i.scenes[l];return console.log(f),W(Q.fromBlank(i.name,i.scenes.map((B,k)=>k===r?f:k===l?s:B),i.actId)),n[u.findIndex(B=>B.actId==i.actId)].scenes[i.scenes.indexOf(s)]=i.scenes[l],n[u.findIndex(B=>B.actId==i.actId)].scenes[l]=s,n}),setTimeout(()=>{document.getElementById("scenes-"+i.actId),document.getElementById("scene-tile-"+s.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},hasEnsemble:c,scene:s,isCreate:!1,characters:b,showGroups:E,isAssign:!1,setScene:a=>{j(n=>{const l=[...n],f=l.findIndex(B=>B.actId==i.actId);return l[f]=Q.fromBlank(i.name,i.scenes.map((B,k)=>k===r?a:B),i.actId),W(Q.fromBlank(i.name,i.scenes.map((B,k)=>k===r?a:B),i.actId)),l})},removeScene:()=>{j(a=>{const n=[...a],l=n.findIndex(f=>f.actId==i.actId);return n[l]=Q.fromBlank(i.name,i.scenes.filter((f,B)=>B!==r),i.actId),W(Q.fromBlank(i.name,i.scenes.filter((f,B)=>B!==r),i.actId)),n})}},r))}),i.scenes.length==0&&e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();j(r=>{const a=[...r],n=a.findIndex(l=>l.actId==i.actId);return a[n]=Q.fromBlank(i.name,[...i.scenes,F.fromBlank("Scene "+(i.scenes.length+1),[],s)],i.actId),W(Q.fromBlank(i.name,[...i.scenes,F.fromBlank("Scene "+(i.scenes.length+1),[],s)],i.actId)),a}),setTimeout(()=>{const r=document.getElementById("scenes-"+i.actId);r.scrollTop=r.scrollHeight,document.getElementById("scene-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Scene"})]})})}),M=="Songs"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"songs",id:"create-songs",children:p.map((s,r)=>e.jsx(je,{song:s,hasEnsemble:c,characters:b,showGroups:E,isAssign:!1,setSong:a=>{w(n=>{const l=[...n];return l[r]=a,l})},removeSong:()=>{w(p.filter((a,n)=>n!==r))},isCreate:!1},r))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();w([...p,G.fromBlank("Song "+(p.length+1),[],s)]),setTimeout(()=>{const r=document.getElementById("create-songs");r.scrollTop=r.scrollHeight,document.getElementById("song-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Song"})," "]}),M=="Dances"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"dances",id:"create-dances",children:g.map((s,r)=>e.jsx(pe,{dance:s,hasEnsemble:c,characters:b,showGroups:E,isAssign:!1,setDance:a=>{N(n=>{const l=[...n];return l[r]=a,l})},removeDance:()=>{N(g.filter((a,n)=>n!==r))},isCreate:!1},r))}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();N([...g,R.fromBlank("Dance "+(g.length+1),[],s)]),setTimeout(()=>{const r=document.getElementById("create-dances");r.scrollTop=r.scrollHeight,document.getElementById("dance-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Dance"})," "]}),I?e.jsx("div",{className:"loader"}):e.jsx("button",{className:"ActionBtn",onClick:async()=>{if(h(!0),!de()){alert("Please select all characters and show groups before creating the show template"),h(!1);return}const s=X.fromBlank(C,L,t,J,u,b,c?ue.fromBlank((q==null?void 0:q.actors)??[],Date.now()):null,E,p,g,!1,c,null,[],"open",x,Date.now());s.templateId=J,console.log(J),console.log(s.toMap());let r=L;if(d)X.fromMap(s.toMap()),s.formStatus=K.formStatus,s.isCreatingSchedule=K.isCreatingSchedule,s.conflictForm=K.conflictForm,s.canCreateSchedule=me(),s.resources=K.resources,s.templateId=K.templateId,s.canCreateSchedule||alert("Since there are characters that haven't been assigned to actors, you will not be able to edit/create the schedule until you assign actors to all characters"),await Be(s),x&&await be(s),localStorage.removeItem("show"),localStorage.setItem("show",JSON.stringify(s==null?void 0:s.toMap()));else{const a=await Ie(s);s.templateId=a,r=await ge(s)}window.location.href=`/Activity/Shows/Show/?activityId=${t}&showId=${r}`,h(!1)},children:d?"Save Show Template":"Create Show Template"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{const r=new URLSearchParams(window.location.search).get("showId");if(d){window.location.href=`/Activity/Shows/Show/?activityId=${t}&showId=${r}`;return}window.location.href=`/Activity/Shows/Add/?activityId=${t}`},children:"Back"})]})]})}
