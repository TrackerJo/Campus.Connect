import{j as n,c as Ne,r as u,i as Le}from"./index-U3pxML4x.js";import{j as ye,c as b,e as U,d as C,F as V,k as Me,l as Re}from"./constants-CrK5oAWg.js";import{i as Be,w as He,q as $e,x as Ge,y as Ye,z as Oe,A as Pe}from"./db-BXeq32WU.js";import{A as _e,S as Ue,D as ze,C as Je,E as Ve,a as qe}from"./Show_Group_Display_Tile-DkGRkKqe.js";import{B as me,C as We}from"./Calendar-BG4YQB9j.js";import{C as Ke,S as Qe}from"./Show_Group_Tile-CHoPKXi2.js";import{E as Xe}from"./Ensemble_Section_Tile-DXys-Uwj.js";import{F as Ze}from"./Full_Cast_Tile-CJX3OvfU.js";import"./trash-BnpXJPEK.js";import"./arrow_forward-CHD_SwLW.js";function he({conflictResponseDate:v,actor:Q}){return n.jsx("div",{className:"ConflictDisplayTile ",id:"conflict-display-tile-"+Q.userId,children:n.jsx("div",{className:"header",children:n.jsxs("div",{className:"CharacterNameDiv",children:[n.jsxs("label",{htmlFor:"Actor",children:["Actor: ",Q.name]}),n.jsx("br",{}),n.jsxs("label",{htmlFor:"Actor",children:["Date: ",v.date.toDateString()]}),n.jsx("br",{}),v.canAttend?n.jsxs("label",{htmlFor:"Actor",children:[v.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",v.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):n.jsx("label",{htmlFor:"Actor",children:"Can't Attend"})]})})})}Ne(document.getElementById("root")).render(n.jsx(u.StrictMode,{children:n.jsx(et,{})}));function et(){const[v,Q]=u.useState(""),[l,Se]=u.useState(),[q,be]=u.useState(""),[i,je]=u.useState(),[z,g]=u.useState("date"),[M,D]=u.useState(null),[R,T]=u.useState(null),[B,w]=u.useState(null),[H,N]=u.useState("custom"),[W,j]=u.useState(""),[K,L]=u.useState(""),[xe,E]=u.useState(""),[Ce,A]=u.useState(""),[y,$]=u.useState(void 0),[ge,ae]=u.useState(!1),[J,X]=u.useState([]),[Z,ee]=u.useState([]),[m,f]=u.useState([]),[ce,G]=u.useState(!1),[p,ve]=u.useState([]),[re,h]=u.useState([]),[ie,De]=u.useState(!1),[I,k]=u.useState(null),[F,te]=u.useState(!1),[Te,we]=u.useState(null),[Y,O]=u.useState(),[P,_]=u.useState(void 0),[se,pe]=u.useState(!1),[le,de]=u.useState(!1),[ue,Ee]=u.useState([]),[x,Ae]=u.useState(void 0),[Ie,ne]=u.useState(!1);u.useEffect(()=>{Le(()=>{});const a=new URLSearchParams(window.location.search),c=a.get("activityId");c&&(Q(c),Be(c).then(t=>{t instanceof ye||(Se(t),O(t==null?void 0:t.rehearsalLocations[0]),_(t==null?void 0:t.eventTypes[0]),$(t==null?void 0:t.defaultLocation))}));const e=a.get("showId");e&&(be(e),He(c,e).then(t=>{const s=[];for(const r of t)for(const d of r.dates)s.find(S=>S.conflictResponseDate.date.getTime()==d.date.getTime()&&S.actor.userId==r.actor.userId)||s.push({conflictResponseDate:d,actor:r.actor});s.sort((r,d)=>r.conflictResponseDate.date.getTime()-d.conflictResponseDate.date.getTime()),ve(s),h([...s])})),$e(c,e).then(t=>{je(t),t!=null&&t.hasEnsemble&&Ee(t.ensemble.actors)}),Ge(c,e).then(t=>{X(t);const s=[];for(const r of t){console.log(r);const d=r.date.from;console.log(r.date.date),d.setDate(r.date.date.getDate()),d.setMonth(r.date.date.getMonth()),d.setFullYear(r.date.date.getFullYear());const S=r.date.to;S.setDate(r.date.date.getDate()),S.setMonth(r.date.date.getMonth()),S.setFullYear(r.date.date.getFullYear()),console.log(d),console.log(S),console.log(r.rehearsalLocation.color),s.push({title:r.name,start:d.toISOString(),end:S.toISOString(),isAllDay:!1,interactive:!0,color:r.rehearsalLocation.color.setAlpha(.8).toHex(),description:r.info,id:r.id,location:r.rehearsalLocation.name})}ee(s)});const o=()=>{window.innerWidth<800?pe(!0):pe(!1)};return window.addEventListener("resize",o),o(),()=>window.removeEventListener("resize",o)},[]);const ke=a=>{const c=a.target.value,[e,o]=c.split(":").map(Number),t=new Date(M);t.setHours(e,o,0,0),T(t),E(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},Fe=a=>{const c=a.target.value,[e,o]=c.split(":").map(Number),t=new Date(M);t.setHours(e,o,0,0),w(t),A(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};Date.prototype.addHours=function(a){return this.setTime(this.getTime()+a*60*60*1e3),this};function oe(){return J}return n.jsxs("div",{className:"center",children:[n.jsx("h1",{className:"title",children:"Create Schedule"}),z=="date"?n.jsxs("div",{className:"page-title",children:[n.jsx("img",{src:me,alt:"back arrow",onClick:()=>{window.location.href="/Activity/Shows/Show/?activityId="+v+"&showId="+q}}),n.jsx("h2",{className:"mode",children:"Select a Date"})," "]}):n.jsx(n.Fragment,{}),n.jsxs("div",{className:"container",children:[z=="date"?n.jsx(n.Fragment,{children:n.jsxs("div",{className:"box left",children:[n.jsxs("h2",{children:["Conflicts",I!=null?" on "+I.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:le,onChange:a=>{if(de(a.target.checked),a.target.checked){const c=[];for(const e of p)ue.find(o=>o.userId==e.actor.userId)||(I!=null?e.conflictResponseDate.date.getTime()==I.getTime()&&c.push(e):c.push(e));h(c)}else if(I!=null){const c=[];for(const e of p)e.conflictResponseDate.date.getTime()==I.getTime()&&c.push(e);h(c)}else h([...p])}}),n.jsx("span",{className:"checkmark",children:" "})]})," "]}),n.jsx("div",{className:"conflicts",children:re.map((a,c)=>n.jsx(he,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},c))})]})}):n.jsx(n.Fragment,{}),n.jsx("div",{className:z!="date"?"datePicker hidden":"datePicker",children:n.jsx(We,{canViewConflicts:!0,canPaste:x!=null,canCopy:!0,copyEvent:a=>{const c=oe().find(e=>e.id==a.id);Ae(c)},pasteEvent:a=>{const c=new Date(a);c.setHours(0,0,0,0),D(c),T(new Date(x.date.from)),E(x.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const e=new Date(x.date.to);w(e),console.log(e),A(e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),j(x.name),L(x.info),$(x.location),O(x.rehearsalLocation),f(x.characters),_(x.activityEventType),N(x.theaterEventType),g("info"),ne(!0)},isCreating:!0,canOpenContextMenu:!0,events:Z,editEvent:a=>{const c=oe().find(e=>e.id==a.id);c&&(console.log(c),g("info"),j(c.name),L(c.info),D(c.date.date),T(c.date.from),E(c.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),w(c.date.to),A(c.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),$(c.location),O(c.rehearsalLocation),f(c.characters),_(c.activityEventType),te(!0),N(c.theaterEventType),we(c))},viewEvent:a=>{const c=oe().find(e=>e.id==a.id);c&&(localStorage.setItem("event",JSON.stringify(c.toMap())),localStorage.setItem("back","/Activity/Shows/Show/CreateSchedule/?activityId="+v+"&showId="+q),window.location.href="/Calendar/Event/")},viewConflicts:a=>{const c=new Date(a);c.setHours(0,0,0,0),k(c);const e=[];for(const o of p)o.conflictResponseDate.date.getTime()==c.getTime()&&e.push(o);h(e)},deleteEvent:async a=>{console.log(a);const c=J.find(t=>t.id==a.id),e=J.filter(t=>t.id!=a.id);X(e);const o=Z.filter(t=>t.id!=a.id);ee(o),await Ye(c)},dateClick:a=>{console.log(a.date),D(a.date);const c=new Date(a.date);c.setHours(0,0,0,0),k(c);const e=[];for(const t of p)t.conflictResponseDate.date.getTime()==c.getTime()&&e.push(t);h(e),T(new Date(a.date)),E(a.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(a.date);w(o.addHours(1)),console.log(o),A(a.date.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),g("type")},eventClick:a=>{if(se){const t=oe().find(s=>s.id==a.event.id);t&&(localStorage.setItem("event",JSON.stringify(t.toMap())),localStorage.setItem("back","/Activity/Shows/Show/CreateSchedule/?activityId="+v+"&showId="+q),window.location.href="/Calendar/Event/");return}D(a.event.start);const c=new Date(a.event.start);c.setHours(0,0,0,0),k(c);const e=[];for(const t of p)t.conflictResponseDate.date.getTime()==c.getTime()&&e.push(t);h(e),T(new Date(a.event.start)),E(a.event.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(a.event.end);w(o),A(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),g("type")}})}),z=="date"?n.jsx(n.Fragment,{}):n.jsx(n.Fragment,{})]}),z=="date"?n.jsxs(n.Fragment,{children:[se&&n.jsx("button",{className:"ActionBtn",onClick:()=>{const a=new Date;console.log(a),D(a);const c=new Date(a);c.setHours(0,0,0,0),k(c);const e=[];for(const t of p)t.conflictResponseDate.date.getTime()==c.getTime()&&e.push(t);h(e),T(new Date(a)),E(a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(a);w(o.addHours(1)),console.log(o),A(a.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),g("type")},children:"Create Event"}),n.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(J)),window.open("/Activity/Shows/Show/Schedule/Print/","_blank")},children:"Print"}),n.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/Shows/Show/?activityId="+v+"&showId="+q},children:"Back"})]}):z=="type"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"page-title",children:[n.jsx("img",{src:me,alt:"back arrow",onClick:()=>{g("date"),k(null),h([...p])}}),n.jsx("h2",{className:"mode",children:F?"Add Characters from Show":"Select a Rehersal Type"})]}),!se&&n.jsxs("div",{className:"conflicts-div",children:[n.jsxs("h2",{children:["Conflicts",I!=null?" on "+I.toDateString():""]}),n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),(i==null?void 0:i.hasEnsemble)&&n.jsx(n.Fragment,{children:n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:le,onChange:a=>{if(de(a.target.checked),a.target.checked){const c=[],e=new Date(M);e.setHours(0,0,0,0);for(const o of p)ue.find(t=>t.userId==o.actor.userId)||o.conflictResponseDate.date.getTime()==e.getTime()&&c.push(o);h(c)}}}),n.jsx("span",{className:"checkmark",children:" "})]})}),n.jsx("div",{className:"conflicts",children:re.map((a,c)=>n.jsx(he,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},c))})]}),!F&&n.jsx("button",{onClick:()=>{g("info"),N("custom"),f([])},className:"ActionBtn",children:"Custom"}),n.jsx("h2",{className:"mode",children:"Show Layout"}),n.jsx("div",{className:"layout",children:i==null?void 0:i.layout.map((a,c)=>n.jsx(_e,{act:a,onClick:e=>{N("scene"),j(e.name+" - "+a.name),g("info"),f(F?s=>[...s,...e.characters]:e.characters);const o=[];for(const s of[...e.characters,m])if(s instanceof b)o.includes(s.actor.userId)&&o.push(s.actor.userId);else if(s instanceof U){for(const r of s.characters)if(r instanceof b)o.includes(r.actor.userId)&&o.push(r.actor.userId);else if(r instanceof C){if(r.includeAll)for(const d of i.ensemble.actors)o.includes(d.userId)&&o.push(d.userId);else if(r.includeMale)for(const d of i.ensemble.actors)d.gender=="male"&&o.includes(d.userId)&&o.push(d.userId);else if(r.includeFemale)for(const d of i.ensemble.actors)d.gender=="female"&&o.includes(d.userId)&&o.push(d.userId);else if(r.includeCustom)for(const d of r.customActors)o.includes(d.userId)&&o.push(d.userId)}}else if(s instanceof C){if(s.includeAll)for(const r of i.ensemble.actors)o.includes(r.userId)&&o.push(r.userId);else if(s.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&o.includes(r.userId)&&o.push(r.userId);else if(s.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&o.includes(r.userId)&&o.push(r.userId);else if(s.includeCustom)for(const r of s.customActors)o.includes(r.userId)&&o.push(r.userId)}else if(s instanceof V){for(const r of i.ensemble.actors)o.includes(r.userId)&&o.push(r.userId);for(const r of i.characters)o.includes(r.actor.userId)||o.push(r.actor.userId)}const t=[];for(const s of p)o.includes(s.actor.userId)&&s.conflictResponseDate.date.getTime()==I.getTime()&&t.push(s);h(t)}},c))}),n.jsx("h2",{className:"mode",children:"Songs"}),n.jsx("div",{className:"songs",children:i==null?void 0:i.songs.map((a,c)=>n.jsx(Ue,{song:a,onClick:()=>{N("song"),j(a.name),f(F?t=>[...t,...a.characters]:a.characters),g("info");const e=[];for(const t of[...a.characters,m])if(t instanceof b)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof U){for(const s of t.characters)if(s instanceof b)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof C){if(s.includeAll)for(const r of i.ensemble.actors)e.includes(r.userId)&&e.push(r.userId);else if(s.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&e.includes(r.userId)&&e.push(r.userId);else if(s.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&e.includes(r.userId)&&e.push(r.userId);else if(s.includeCustom)for(const r of s.customActors)e.includes(r.userId)&&e.push(r.userId)}}else if(t instanceof C){if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(t instanceof V){for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);for(const s of i.characters)e.includes(s.actor.userId)||e.push(s.actor.userId)}const o=[];for(const t of p)e.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==I.getTime()&&o.push(t);h(o)}},c))}),n.jsx("h2",{className:"mode",children:"Dances"}),n.jsx("div",{className:"dances",children:i==null?void 0:i.dances.map((a,c)=>n.jsx(ze,{dance:a,onClick:()=>{N("dance"),j(a.name),g("info"),f(F?t=>[...t,...a.characters]:a.characters);const e=[];for(const t of[...a.characters,m])if(t instanceof b)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof U){for(const s of t.characters)if(s instanceof b)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof C){if(s.includeAll)for(const r of i.ensemble.actors)e.includes(r.userId)&&e.push(r.userId);else if(s.includeMale)for(const r of i.ensemble.actors)r.gender=="male"&&e.includes(r.userId)&&e.push(r.userId);else if(s.includeFemale)for(const r of i.ensemble.actors)r.gender=="female"&&e.includes(r.userId)&&e.push(r.userId);else if(s.includeCustom)for(const r of s.customActors)e.includes(r.userId)&&e.push(r.userId)}}else if(t instanceof C){if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(t instanceof V){for(const s of i.ensemble.actors)e.push(s.userId);for(const s of i.characters)e.includes(s.actor.userId)||e.push(s.actor.userId)}const o=[];for(const t of p)e.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==I.getTime()&&o.push(t);h(o)}},c))}),n.jsx("button",{onClick:()=>{if(F){g("info");return}g("date"),k(null),h([...p])},className:"ActionBtn",children:"Back"})]}):n.jsxs(n.Fragment,{children:[!se&&n.jsxs("div",{className:"conflicts-div",children:[n.jsxs("h2",{children:["Conflicts",I!=null?" on "+I.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:le,onChange:a=>{if(de(a.target.checked),a.target.checked){const c=[],e=[];for(const o of m)if(o instanceof b)e.includes(o.actor.userId)&&e.push(o.actor.userId);else if(o instanceof U){for(const t of o.characters)if(t instanceof b)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(t.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(t.includeCustom)for(const s of t.customActors)e.includes(s.userId)&&e.push(s.userId)}else if(o instanceof C){if(o.includeAll)for(const t of i.ensemble.actors)e.includes(t.userId)&&e.push(t.userId);else if(o.includeMale)for(const t of i.ensemble.actors)t.gender=="male"&&e.includes(t.userId)&&e.push(t.userId);else if(o.includeFemale)for(const t of i.ensemble.actors)t.gender=="female"&&e.includes(t.userId)&&e.push(t.userId);else if(o.includeCustom)for(const t of o.customActors)e.includes(t.userId)&&e.push(t.userId)}else{for(const t of i.ensemble.actors)e.push(t.userId);for(const t of i.characters)e.includes(t.actor.userId)||e.push(t.actor.userId)}for(const o of p)ue.find(t=>t.userId==o.actor.userId)||e.includes(o.actor.userId)&&o.conflictResponseDate.date.getTime()==I.getTime()&&c.push(o);h(c)}}}),n.jsx("span",{className:"checkmark",children:" "})]})," "]}),n.jsx("div",{className:"conflicts",children:re.map((a,c)=>n.jsx(he,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},c))})]}),n.jsxs("div",{className:"page-title",children:[n.jsx("img",{src:me,alt:"back arrow",onClick:()=>{if(F){g("date"),D(null),T(null),w(null),N("custom"),j(""),L(""),E(""),A(""),O(l==null?void 0:l.rehearsalLocations[0]),_(l==null?void 0:l.eventTypes[0]),$(l==null?void 0:l.defaultLocation),G(!1),k(null),h(p),te(!1);return}Ie?(ne(!1),g("date")):g("type"),L(""),j(""),G(!1);const a=[];for(const c of p)c.conflictResponseDate.date.getTime()==I.getTime()&&a.push(c);h(a)}}),n.jsx("h2",{className:"mode",children:"Enter Rehersal Information"})]}),n.jsx("label",{htmlFor:"Name",children:"Name: "}),n.jsx("input",{type:"text",value:W,onChange:a=>{j(a.target.value)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"Description",children:"Description: "}),n.jsx("textarea",{value:K,onChange:a=>{L(a.target.value)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"",children:"Date: "}),n.jsx("input",{type:"date",value:M==null?void 0:M.toISOString().split("T")[0],onChange:a=>{const c=new Date(a.target.value);if(c=="Invalid Date"){D(null);return}c.setHours(0,0,0,0),c.setDate(c.getDate()+1),D(c);const e=new Date(c);e.setHours(R.getHours(),R.getMinutes(),0,0),T(e),E(e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const o=new Date(c);o.setHours(B.getHours(),B.getMinutes(),0,0),w(o),A(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),k(c);const t=[];for(const s of p)s.conflictResponseDate.date.getTime()==c.getTime()&&t.push(s);h(t)}}),n.jsx("br",{}),n.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),n.jsx("input",{type:"time",value:xe,onChange:ke}),n.jsx("br",{}),n.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),n.jsx("input",{type:"time",value:Ce,onChange:Fe}),n.jsx("br",{}),n.jsx("label",{htmlFor:"location",children:"Location: "}),n.jsx("select",{name:"location",id:"location",onChange:a=>{$(l==null?void 0:l.locations.find(c=>c.name==a.target.value))},children:l==null?void 0:l.locations.map((a,c)=>n.jsx("option",{value:a.name,selected:(y==null?void 0:y.name)==a.name,children:a.name+" ("+a.address+")"},c))}),n.jsx("br",{}),n.jsx("label",{htmlFor:"location",children:"Rehersal Location: "}),n.jsx("select",{name:"location",id:"rehersal-location",onChange:a=>{O(l==null?void 0:l.rehearsalLocations.find(c=>c.name==a.target.value))},children:l==null?void 0:l.rehearsalLocations.map((a,c)=>n.jsx("option",{value:a.name,selected:(Y==null?void 0:Y.name)==a.name,children:a.name},c))}),n.jsx("br",{}),n.jsx("label",{htmlFor:"eventType",children:"Event Type: "}),n.jsx("select",{name:"eventType",id:"event-type",onChange:a=>{_(l==null?void 0:l.eventTypes.find(c=>c.name==a.target.value))},children:l==null?void 0:l.eventTypes.map((a,c)=>n.jsx("option",{value:a.name,selected:(P==null?void 0:P.name)==a.name,children:a.name},c))}),n.jsx("br",{}),H=="custom"?n.jsxs(n.Fragment,{children:[n.jsx("label",{htmlFor:"fullCast",children:"Full Cast: "}),n.jsxs("label",{className:"custom-checkbox",children:[n.jsx("input",{type:"checkbox",id:"ensemble",checked:ie,onChange:a=>De(a.target.checked)}),n.jsx("span",{className:"checkmark"})]})]}):n.jsx(n.Fragment,{}),H=="custom"&&n.jsx("br",{}),ie?n.jsx(n.Fragment,{}):n.jsxs(n.Fragment,{children:[" ",n.jsx("h2",{children:"Characters"}),n.jsx("div",{className:"characters",children:m.map((a,c)=>{if(a instanceof b)return H=="custom"?n.jsx(Ke,{character:a,isCreate:!1,actors:[],characters:i.characters,isAssign:!1,setCharacter:e=>{f(m.map((o,t)=>t===c?e:o))},removeCharacter:()=>{f(m.filter((e,o)=>o!==c))}},c):n.jsx(Je,{character:a,canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==c))},isMini:!1},c);if(a instanceof C)return H=="custom"?n.jsx(Xe,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:a,isCustom:!0,setEnsembleSection:e=>{f(m.map((o,t)=>t===c?e:o))},removeEnsembleSection:()=>{f(m.filter((e,o)=>o!==c)),G(!1)},isCreate:!1,isAssign:!1,actors:l.students},c):n.jsx(Ve,{ensembleSection:a,canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==c))},isMini:!1},c);if(a instanceof U)return H=="custom"?n.jsx(Qe,{showGroup:a,characters:i.characters,setShowGroup:e=>{f(m.map((o,t)=>t===c?e:o))},removeShowGroup:()=>{f(m.filter((e,o)=>o!==c))},isCreate:!1,isAssign:!1,actors:l.students,hasEnsemble:i.hasEnsemble,showGroups:i.showGroups},c):n.jsx(qe,{showGroup:a,showCharacters:!0,canClick:!1,onClick:()=>{},canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==c))}},c);if(a instanceof V)return n.jsx(Ze,{canDelete:!0,onDelete:()=>{f(m.filter((e,o)=>o!==c))}},c)})}),H=="custom"?n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);f([...m,b.fromBlank("Character 1",null,a)])},children:"Add Character"}),n.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);f([...m,U.fromBlank("Show Group 1",[],a)])},children:"Add Show Group"}),(i==null?void 0:i.hasEnsemble)&&n.jsx("button",{className:"ActionBtn "+(ce?"disabled":""),disabled:ce,onClick:()=>{ce||(G(!0),f([...m,C.fromBlank(!0,!1,!1,!1,[])]))},children:"Add Ensemble"})," "]}):n.jsx(n.Fragment,{children:n.jsx("button",{className:"ActionBtn",onClick:()=>{g("type")},children:"Add Characters from Show"})})," "]}),n.jsx("br",{}),ge?n.jsx("div",{className:"loader"}):n.jsx("button",{onClick:async()=>{if(ae(!0),console.log(`Name: ${W}, Description: ${K}, Start Time: ${R}, End Time: ${B}, Selected Location: ${y}, Rehearsal Location: ${Y}, Event Type: ${P}`),W==""||K==""||R==null||B==null||y==null||Y==null||P==null){alert("Please fill out all fields"),console.log(`Name: ${W}, Description: ${K}, Start Time: ${R}, End Time: ${B}, Selected Location: ${y}, Rehearsal Location: ${Y}, Event Type: ${P}`),ae(!1);return}console.log("Submit");const a=y??l.locations[0];console.log(R),console.log(B);const c=Me.fromBlank(M,R,B);console.log(c.toMap());const e=[];if(ie){if(m.push(new V),i!=null&&i.hasEnsemble&&(i==null?void 0:i.ensemble)!=null)for(const t of i.ensemble.actors)e.push(t);for(const t of i.characters)e.find(s=>s.userId==t.actor.userId)==null&&e.push(t.actor)}else for(const t of m){if(t instanceof V){for(const s of i.ensemble.actors)e.push(s);for(const s of i.characters)e.find(r=>r.userId==s.actor.userId)==null&&e.push(s.actor);break}if(t instanceof b){if(e.find(s=>s.userId==t.actor.userId)!=null)continue;e.push(t.actor)}if(t instanceof C){if(t.includeAll)for(const s of i.ensemble.actors)e.find(r=>r.userId==s.userId)==null&&e.push(s);else if(t.includeMale){for(const s of i.ensemble.actors)if(s.gender=="male"){if(e.find(r=>r.userId==s.userId)!=null)continue;e.push(s)}}else if(t.includeFemale){for(const s of i.ensemble.actors)if(s.gender=="female"){if(e.find(r=>r.userId==s.userId)!=null)continue;e.push(s)}}else if(t.includeCustom)for(const s of t.customActors)e.find(r=>r.userId==s.userId)==null&&e.push(s)}if(t instanceof U)for(const s of t.characters){if(s instanceof b){if(e.find(r=>r.userId==s.actor.userId)!=null)continue;e.push(s.actor)}if(s instanceof C){if(s.includeAll)for(const r of i.ensemble.actors)e.find(d=>d.userId==r.userId)==null&&e.push(r);else if(s.includeMale){for(const r of i.ensemble.actors)if(r.gender=="male"){if(e.find(d=>d.userId==r.userId)!=null)continue;e.push(r)}}else if(s.includeFemale){for(const r of i.ensemble.actors)if(r.gender=="female"){if(e.find(d=>d.userId==r.userId)!=null)continue;e.push(r)}}else if(s.includeCustom)for(const r of s.customActors)e.find(d=>d.userId==r.userId)==null&&e.push(r)}}}const o=Re.fromBlank(W,K,a,c,"activity-theater-event",Date.now(),v,l.name,q,i.name,m,e,H,P,Y);if(console.log(o),F){o.id=Te.id,await Oe(o),te(!1);const t=o.date.from,s=o.date.to;t.setDate(o.date.date.getDate()),t.setMonth(o.date.date.getMonth()),t.setFullYear(o.date.date.getFullYear()),s.setDate(o.date.date.getDate()),s.setMonth(o.date.date.getMonth()),s.setFullYear(o.date.date.getFullYear());const r={title:o.name,start:t.toISOString(),end:s.toISOString(),isAllDay:!1,interactive:!0,description:o.info,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),location:o.rehearsalLocation.name,id:o.id},d=Z.filter(fe=>fe.id!=o.id);d.push(r),ee(d);const S=J.filter(fe=>fe.id!=o.id);S.push(o),console.log(S),X([...S])}else{await Pe(o);const t=o.date.from,s=o.date.to;t.setDate(o.date.date.getDate()),t.setMonth(o.date.date.getMonth()),t.setFullYear(o.date.date.getFullYear()),s.setDate(o.date.date.getDate()),s.setMonth(o.date.date.getMonth()),s.setFullYear(o.date.date.getFullYear());const r={title:o.name,start:t.toISOString(),end:s.toISOString(),isAllDay:!1,interactive:!0,color:o.rehearsalLocation.color.setAlpha(.8).toHex(),id:o.id,location:o.rehearsalLocation.name,description:o.info};ee([...Z,r]),X([...J,o])}ae(!1),g("date"),D(null),T(null),w(null),N("custom"),j(""),L(""),E(""),A(""),O(l==null?void 0:l.rehearsalLocations[0]),_(l==null?void 0:l.eventTypes[0]),$(l==null?void 0:l.defaultLocation),f([]),G(!1),k(null),h(p),ne(!1)},className:"ActionBtn",children:F?"Save":"Submit"}),!ge&&n.jsx("button",{onClick:()=>{if(F){g("date"),D(null),T(null),w(null),N("custom"),j(""),L(""),E(""),A(""),O(l==null?void 0:l.rehearsalLocations[0]),_(l==null?void 0:l.eventTypes[0]),$(l==null?void 0:l.defaultLocation),G(!1),k(null),h(p),te(!1);return}Ie?(ne(!1),g("date")):g("type"),L(""),j(""),G(!1);const a=[];for(const c of p)c.conflictResponseDate.date.getTime()==I.getTime()&&a.push(c);h(a)},className:"ActionBtn",children:"Back"})]})]})}
