import{c as q,j as e,r as o,i as z}from"./index-U3pxML4x.js";import{g as H,d as a,c,F as g}from"./constants-HHyPtPso.js";import{G as K}from"./db-Dx9I_CLb.js";q(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(Q,{})}));function Q(){const[V,G]=o.useState(""),[W,R]=o.useState(""),[X,T]=o.useState(),[j,C]=o.useState([]),[x,D]=o.useState([]),[S,L]=o.useState([]),[I,P]=o.useState([]),[p,O]=o.useState([]),[Y,B]=o.useState("student");o.useRef(null);const[Z,A]=o.useState(!0);return o.useEffect(()=>{A(!0),z(()=>{});const i=new URLSearchParams(window.location.search),v=i.get("activityId");v&&G(v);const h=i.get("showId");h&&R(h);const w=localStorage.getItem("show-"+h);if(w){const f=H.fromMap(JSON.parse(w));T(f),console.log(f),K().then(E=>{var b;if(!E)return;const s=E,y=f.characters.filter(d=>{var r;return((r=d.actor)==null?void 0:r.userId)===s.uid});f.hasEnsemble&&(b=f.ensemble)!=null&&b.actors.find(d=>d.userId===s.uid)&&y.push(new a),C(y);const J=f.showGroups.filter(d=>d.characters.find(r=>{var n;return r instanceof c?((n=r.actor)==null?void 0:n.userId)===s.uid:r.includeAll?!0:r.customActors?r.customActors.find(l=>l.userId===s.uid):r.includeFemale&&s.gender=="female"?!0:!!(r.includeMale&&s.gender=="male")}));D(J);const F=[];f.layout.forEach(d=>{d.scenes.forEach(r=>{r.characters.find(l=>{var t;return l instanceof g?!0:l instanceof c?((t=l.actor)==null?void 0:t.userId)===s.uid:l instanceof a?l.includeAll?!0:l.customActors?l.customActors.find(u=>u.userId===s.uid):l.includeFemale&&s.gender=="female"?!0:!!(l.includeMale&&s.gender=="male"):l.characters.find(u=>{var m;return u instanceof c?((m=u.actor)==null?void 0:m.userId)===s.uid:u.includeAll?!0:u.customActors?u.customActors.find(k=>k.userId===s.uid):u.includeFemale&&s.gender=="female"?!0:!!(u.includeMale&&s.gender=="male")})})&&(r.name=d.name+" - "+r.name,F.push(r))})}),L(F);const M=[];f.songs.forEach(d=>{d.characters.find(n=>{var l;return n instanceof g?!0:n instanceof c?((l=n.actor)==null?void 0:l.userId)===s.uid:n instanceof a?n.includeAll?!0:n.customActors?n.customActors.find(t=>t.userId===s.uid):n.includeFemale&&s.gender=="female"?!0:!!(n.includeMale&&s.gender=="male"):n.characters.find(t=>{var u;return t instanceof c?((u=t.actor)==null?void 0:u.userId)===s.uid:t.includeAll?!0:t.customActors?t.customActors.find(m=>m.userId===s.uid):t.includeFemale&&s.gender=="female"?!0:!!(t.includeMale&&s.gender=="male")})})&&M.push(d)}),P(M);const U=[];f.dances.forEach(d=>{d.characters.find(n=>{var l;return n instanceof g?!0:n instanceof c?((l=n.actor)==null?void 0:l.userId)===s.uid:n instanceof a?n.includeAll?!0:n.customActors?n.customActors.find(t=>t.userId===s.uid):n.includeFemale&&s.gender=="female"?!0:!!(n.includeMale&&s.gender=="male"):n.characters.find(t=>{var u;return t instanceof c?((u=t.actor)==null?void 0:u.userId)===s.uid:t.includeAll?!0:t.customActors?t.customActors.find(m=>m.userId===s.uid):t.includeFemale&&s.gender=="female"?!0:!!(t.includeMale&&s.gender=="male")})})&&U.push(d)}),O(U),A(!1),setTimeout(()=>{print(),window.close()},500)})}const N=localStorage.getItem("accountType");N&&B(N)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"title",children:e.jsx("h1",{children:"Actor Profile"})}),e.jsxs("div",{className:"center",children:[j.length>0&&e.jsxs("div",{className:"section",children:[e.jsx("h2",{children:"Roles"}),e.jsx("div",{className:"tiles",children:j.map(i=>i instanceof c?e.jsx("div",{className:"tile",children:e.jsx("h3",{children:i.name})},i.name):e.jsx("div",{className:"tile",children:e.jsx("h3",{children:"Ensemble"})},"EnsembleSection"))})]}),x.length>0&&e.jsxs("div",{className:"section",children:[e.jsx("h2",{children:"Show Groups"}),e.jsx("div",{className:"tiles",children:x.map(i=>e.jsx("div",{className:"tile",children:e.jsx("h3",{children:i.name})},i.name))})]}),S.length>0&&e.jsxs("div",{className:"section",children:[e.jsx("h2",{children:"Scenes"}),e.jsx("div",{className:"tiles",children:S.map(i=>e.jsx("div",{className:"tile",children:e.jsx("h3",{children:i.name})},i.name))})]}),I.length>0&&e.jsxs("div",{className:"section",children:[e.jsx("h2",{children:"Songs"}),e.jsx("div",{className:"tiles",children:I.map(i=>e.jsx("div",{className:"tile",children:e.jsx("h3",{children:i.name})},i.name))})]}),p.length>0&&e.jsxs("div",{className:"section",children:[e.jsx("h2",{children:"Dances"}),e.jsx("div",{className:"tiles",children:p.map(i=>e.jsx("div",{className:"tile",children:e.jsx("h3",{children:i.name})},i.name))})]})]})]})}
