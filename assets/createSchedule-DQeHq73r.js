import{j as o,c as Ee,r as d,i as Ae}from"./index-BrfWEQze.js";import{g as we,h as M,i as R,C as g,b as T,E as S,F as B,j as ke,k as Fe}from"./constants-B2y1av-g.js";import{e as Ne,o as ye,m as Le,p as Me,q as Re,r as Be,t as Ge}from"./db-B0VozRgX.js";import{A as He,S as Oe,D as _e,C as Ue,E as Pe,a as Ye}from"./Show_Group_Display_Tile-C4VV1izJ.js";import{C as ze}from"./Calendar-CcmMoGX7.js";import{C as Je,S as qe}from"./Show_Group_Tile-Bm_XDaTS.js";import{E as Ve}from"./Ensemble_Section_Tile-A1KBJ4AF.js";import{F as We}from"./Full_Cast_Tile-fTn-DA5K.js";import"./trash-BnpXJPEK.js";function te({conflictResponseDate:C,actor:G}){return o.jsx("div",{className:"ConflictDisplayTile ",id:"conflict-display-tile-"+G.userId,children:o.jsx("div",{className:"header",children:o.jsxs("div",{className:"CharacterNameDiv",children:[o.jsxs("label",{htmlFor:"Actor",children:["Actor: ",G.name]}),o.jsx("br",{}),o.jsxs("label",{htmlFor:"Actor",children:["Date: ",C.date.toDateString()]}),o.jsx("br",{}),C.canAttend?o.jsxs("label",{htmlFor:"Actor",children:[C.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",C.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):o.jsx("label",{htmlFor:"Actor",children:"Can't Attend"})]})})})}Ee(document.getElementById("root")).render(o.jsx(d.StrictMode,{children:o.jsx(Ke,{})}));function Ke(){const[C,G]=d.useState(""),[f,fe]=d.useState(),[z,he]=d.useState(""),[i,me]=d.useState(),[se,I]=d.useState("date"),[H,y]=d.useState(null),[oe,E]=d.useState(null),[ne,A]=d.useState(null),[x,v]=d.useState("custom"),[ce,D]=d.useState(""),[ae,L]=d.useState(""),[pe,w]=d.useState(""),[ge,k]=d.useState(""),[re,O]=d.useState(void 0),[Ie,ie]=d.useState(!1),[F,_]=d.useState([]),[U,P]=d.useState([]),[h,u]=d.useState([]),[J,Y]=d.useState(!1),[p,be]=d.useState([]),[q,m]=d.useState([]),[V,Se]=d.useState(!1),[b,N]=d.useState(null),[W,K]=d.useState(!1),[je,Ce]=d.useState(null),[xe,Q]=d.useState(),[le,de]=d.useState(!1),[X,Z]=d.useState(!1),[$,ve]=d.useState([]);d.useEffect(()=>{Ae(()=>{});const a=new URLSearchParams(window.location.search),r=a.get("activityId");r&&(G(r),Ne(r).then(s=>{s instanceof we||(fe(s),Q(s==null?void 0:s.rehearsalLocations[0]))}));const e=a.get("showId");e&&(he(e),ye(r,e).then(s=>{const t=[];for(const c of s)for(const l of c.dates)t.push({conflictResponseDate:l,actor:c.actor});t.sort((c,l)=>c.conflictResponseDate.date.getTime()-l.conflictResponseDate.date.getTime()),be(t),m([...t])})),Le(r,e).then(s=>{me(s),s!=null&&s.hasEnsemble&&ve(s.ensemble.actors)}),Me(r,e).then(s=>{_(s);const t=[];for(const c of s){console.log(c);const l=c.date.from;console.log(c.date.date),l.setDate(c.date.date.getDate()),l.setMonth(c.date.date.getMonth()),l.setFullYear(c.date.date.getFullYear());const j=c.date.to;j.setDate(c.date.date.getDate()),j.setMonth(c.date.date.getMonth()),j.setFullYear(c.date.date.getFullYear()),console.log(l),console.log(j),console.log(c.rehearsalLocation.color),console.log(M(R(c.rehearsalLocation.color),0)),console.log(M(R(c.rehearsalLocation.color),1)),t.push({title:c.name,start:l.toISOString(),end:j.toISOString(),isAllDay:!1,interactive:!0,color:M(R(c.rehearsalLocation.color),.8),description:"Location: "+c.rehearsalLocation.name+`
`+c.info,id:c.id})}P(t)});const n=()=>{window.innerWidth<800?de(!0):de(!1)};return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]);const De=a=>{const r=a.target.value,[e,n]=r.split(":").map(Number),s=new Date(H);s.setHours(e,n,0,0),E(s),w(s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))},Te=a=>{const r=a.target.value,[e,n]=r.split(":").map(Number),s=new Date(H);s.setHours(e,n,0,0),A(s),k(s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}))};Date.prototype.addHours=function(a){return this.setTime(this.getTime()+a*60*60*1e3),this};function ue(){return F}return o.jsxs("div",{className:"center",children:[o.jsx("h1",{className:"title",children:"Create Schedule"}),se=="date"?o.jsxs(o.Fragment,{children:[" ",o.jsx("h2",{className:"title",children:"Select a Date"}),o.jsxs("div",{className:"date-div",children:[o.jsxs("div",{children:[o.jsxs("h2",{children:["Conflicts",b!=null?" on "+b.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&o.jsxs(o.Fragment,{children:[o.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),o.jsxs("label",{className:"custom-checkbox",children:[o.jsx("input",{type:"checkbox",id:"ensemble",checked:X,onChange:a=>{if(Z(a.target.checked),a.target.checked){const r=[];for(const e of p)$.find(n=>n.userId==e.actor.userId)||r.push(e);m(r)}}}),o.jsx("span",{className:"checkmark",children:" "})]})," "]}),o.jsx("div",{className:"conflicts",children:q.map((a,r)=>o.jsx(te,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},r))})]}),o.jsx(ze,{canOpenContextMenu:!0,events:U,editEvent:a=>{const r=ue().find(e=>e.id==a.id);r&&(console.log(r),I("info"),D(r.name),L(r.info),y(r.date.date),E(r.date.from),w(r.date.from.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),A(r.date.to),k(r.date.to.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),O(r.location),Q(r.rehearsalLocation),u(r.characters),K(!0),v(r.theaterEventType),Ce(r))},viewEvent:a=>{const r=ue().find(e=>e.id==a.id);r&&(localStorage.setItem("event",JSON.stringify(r)),localStorage.setItem("back","/Activity/Shows/Show/CreateSchedule/?activityId="+C+"&showId="+z),window.location.href="/Calendar/Event/")},viewConflicts:a=>{const r=new Date(a);r.setHours(0,0,0,0),N(r);const e=[];for(const n of p)n.conflictResponseDate.date.getTime()==r.getTime()&&e.push(n);m(e)},deleteEvent:async a=>{console.log(a);const r=F.find(s=>s.id==a.id),e=F.filter(s=>s.id!=a.id);_(e);const n=U.filter(s=>s.id!=a.id);P(n),await Re(r)},dateClick:a=>{console.log(a.date),y(a.date);const r=new Date(a.date);r.setHours(0,0,0,0),N(r);const e=[];for(const s of p)s.conflictResponseDate.date.getTime()==r.getTime()&&e.push(s);m(e),E(new Date(a.date)),w(a.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const n=new Date(a.date);A(n.addHours(1)),console.log(n),k(a.date.addHours(1).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),I("type")},eventClick:a=>{y(a.event.start);const r=new Date(a.event.start);r.setHours(0,0,0,0),N(r);const e=[];for(const s of p)s.conflictResponseDate.date.getTime()==r.getTime()&&e.push(s);m(e),E(new Date(a.event.start)),w(a.event.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}));const n=new Date(a.event.end);A(n),k(n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),I("type")}})]}),o.jsx("button",{className:"ActionBtn",onClick:()=>{localStorage.setItem("events",JSON.stringify(F)),window.open("/Activity/Shows/Show/Schedule/Print/","_blank")},children:"Print"}),o.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href="/Activity/Shows/Show/?activityId="+C+"&showId="+z},children:"Back"})]}):se=="type"?o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:"title",children:"Select a Rehersal Type"}),!le&&o.jsxs("div",{className:"conflicts-div",children:[o.jsxs("h2",{children:["Conflicts",b!=null?" on "+b.toDateString():""]}),o.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),(i==null?void 0:i.hasEnsemble)&&o.jsx(o.Fragment,{children:o.jsxs("label",{className:"custom-checkbox",children:[o.jsx("input",{type:"checkbox",id:"ensemble",checked:X,onChange:a=>{if(Z(a.target.checked),a.target.checked){const r=[],e=new Date(H);e.setHours(0,0,0,0);for(const n of p)$.find(s=>s.userId==n.actor.userId)||n.conflictResponseDate.date.getTime()==e.getTime()&&r.push(n);m(r)}}}),o.jsx("span",{className:"checkmark",children:" "})]})}),o.jsx("div",{className:"conflicts",children:q.map((a,r)=>o.jsx(te,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},r))})]}),o.jsx("button",{onClick:()=>{I("info"),v("custom"),u([])},className:"ActionBtn",children:"Custom"}),o.jsx("h2",{className:"title",children:"Show Layout"}),o.jsx("div",{className:"layout",children:i==null?void 0:i.layout.map((a,r)=>o.jsx(He,{act:a,onClick:e=>{v("scene"),D(e.name+" - "+a.name),I("info"),u(e.characters);const n=[];for(const t of e.characters)if(t instanceof g)n.includes(t.actor.userId)&&n.push(t.actor.userId);else if(t instanceof T){for(const c of t.characters)if(c instanceof g)n.includes(c.actor.userId)&&n.push(c.actor.userId);else if(c instanceof S){if(c.includeAll)for(const l of i.ensemble.actors)n.includes(l.userId)&&n.push(l.userId);else if(c.includeMale)for(const l of i.ensemble.actors)l.gender=="male"&&n.includes(l.userId)&&n.push(l.userId);else if(c.includeFemale)for(const l of i.ensemble.actors)l.gender=="female"&&n.includes(l.userId)&&n.push(l.userId);else if(c.includeCustom)for(const l of c.customActors)n.includes(l.userId)&&n.push(l.userId)}}else if(t instanceof S){if(t.includeAll)for(const c of i.ensemble.actors)n.includes(c.userId)&&n.push(c.userId);else if(t.includeMale)for(const c of i.ensemble.actors)c.gender=="male"&&n.includes(c.userId)&&n.push(c.userId);else if(t.includeFemale)for(const c of i.ensemble.actors)c.gender=="female"&&n.includes(c.userId)&&n.push(c.userId);else if(t.includeCustom)for(const c of t.customActors)n.includes(c.userId)&&n.push(c.userId)}else if(t instanceof B){for(const c of i.ensemble.actors)n.includes(c.userId)&&n.push(c.userId);for(const c of i.characters)n.includes(c.actor.userId)||n.push(c.actor.userId)}const s=[];for(const t of p)n.includes(t.actor.userId)&&t.conflictResponseDate.date.getTime()==b.getTime()&&s.push(t);m(s)}},r))}),o.jsx("h2",{className:"title",children:"Songs"}),o.jsx("div",{className:"songs",children:i==null?void 0:i.songs.map((a,r)=>o.jsx(Oe,{song:a,onClick:()=>{v("song"),D(a.name),u(a.characters),I("info");const e=[];for(const s of a.characters)if(s instanceof g)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof T){for(const t of s.characters)if(t instanceof g)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof S){if(t.includeAll)for(const c of i.ensemble.actors)e.includes(c.userId)&&e.push(c.userId);else if(t.includeMale)for(const c of i.ensemble.actors)c.gender=="male"&&e.includes(c.userId)&&e.push(c.userId);else if(t.includeFemale)for(const c of i.ensemble.actors)c.gender=="female"&&e.includes(c.userId)&&e.push(c.userId);else if(t.includeCustom)for(const c of t.customActors)e.includes(c.userId)&&e.push(c.userId)}}else if(s instanceof S){if(s.includeAll)for(const t of i.ensemble.actors)e.includes(t.userId)&&e.push(t.userId);else if(s.includeMale)for(const t of i.ensemble.actors)t.gender=="male"&&e.includes(t.userId)&&e.push(t.userId);else if(s.includeFemale)for(const t of i.ensemble.actors)t.gender=="female"&&e.includes(t.userId)&&e.push(t.userId);else if(s.includeCustom)for(const t of s.customActors)e.includes(t.userId)&&e.push(t.userId)}else if(s instanceof B){for(const t of i.ensemble.actors)e.includes(t.userId)&&e.push(t.userId);for(const t of i.characters)e.includes(t.actor.userId)||e.push(t.actor.userId)}const n=[];for(const s of p)e.includes(s.actor.userId)&&s.conflictResponseDate.date.getTime()==b.getTime()&&n.push(s);m(n)}},r))}),o.jsx("h2",{className:"title",children:"Dances"}),o.jsx("div",{className:"dances",children:i==null?void 0:i.dances.map((a,r)=>o.jsx(_e,{dance:a,onClick:()=>{v("dance"),D(a.name),I("info"),u(a.characters);const e=[];for(const s of a.characters)if(s instanceof g)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s instanceof T){for(const t of s.characters)if(t instanceof g)e.includes(t.actor.userId)&&e.push(t.actor.userId);else if(t instanceof S){if(t.includeAll)for(const c of i.ensemble.actors)e.includes(c.userId)&&e.push(c.userId);else if(t.includeMale)for(const c of i.ensemble.actors)c.gender=="male"&&e.includes(c.userId)&&e.push(c.userId);else if(t.includeFemale)for(const c of i.ensemble.actors)c.gender=="female"&&e.includes(c.userId)&&e.push(c.userId);else if(t.includeCustom)for(const c of t.customActors)e.includes(c.userId)&&e.push(c.userId)}}else if(s instanceof S){if(s.includeAll)for(const t of i.ensemble.actors)e.includes(t.userId)&&e.push(t.userId);else if(s.includeMale)for(const t of i.ensemble.actors)t.gender=="male"&&e.includes(t.userId)&&e.push(t.userId);else if(s.includeFemale)for(const t of i.ensemble.actors)t.gender=="female"&&e.includes(t.userId)&&e.push(t.userId);else if(s.includeCustom)for(const t of s.customActors)e.includes(t.userId)&&e.push(t.userId)}else if(s instanceof B){for(const t of i.ensemble.actors)e.push(t.userId);for(const t of i.characters)e.includes(t.actor.userId)||e.push(t.actor.userId)}const n=[];for(const s of p)e.includes(s.actor.userId)&&s.conflictResponseDate.date.getTime()==b.getTime()&&n.push(s);m(n)}},r))}),o.jsx("button",{onClick:()=>{I("date"),N(null),m([...p])},className:"ActionBtn",children:"Back"})]}):o.jsxs(o.Fragment,{children:[!le&&o.jsxs("div",{className:"conflicts-div",children:[o.jsxs("h2",{children:["Conflicts",b!=null?" on "+b.toDateString():""]}),(i==null?void 0:i.hasEnsemble)&&o.jsxs(o.Fragment,{children:[o.jsx("label",{htmlFor:"",children:"Ignore Ensemble Conflicts"}),o.jsxs("label",{className:"custom-checkbox",children:[o.jsx("input",{type:"checkbox",id:"ensemble",checked:X,onChange:a=>{if(Z(a.target.checked),a.target.checked){const r=[],e=[];for(const n of h)if(n instanceof g)e.includes(n.actor.userId)&&e.push(n.actor.userId);else if(n instanceof T){for(const s of n.characters)if(s instanceof g)e.includes(s.actor.userId)&&e.push(s.actor.userId);else if(s.includeAll)for(const t of i.ensemble.actors)e.includes(t.userId)&&e.push(t.userId);else if(s.includeMale)for(const t of i.ensemble.actors)t.gender=="male"&&e.includes(t.userId)&&e.push(t.userId);else if(s.includeFemale)for(const t of i.ensemble.actors)t.gender=="female"&&e.includes(t.userId)&&e.push(t.userId);else if(s.includeCustom)for(const t of s.customActors)e.includes(t.userId)&&e.push(t.userId)}else if(n instanceof S){if(n.includeAll)for(const s of i.ensemble.actors)e.includes(s.userId)&&e.push(s.userId);else if(n.includeMale)for(const s of i.ensemble.actors)s.gender=="male"&&e.includes(s.userId)&&e.push(s.userId);else if(n.includeFemale)for(const s of i.ensemble.actors)s.gender=="female"&&e.includes(s.userId)&&e.push(s.userId);else if(n.includeCustom)for(const s of n.customActors)e.includes(s.userId)&&e.push(s.userId)}else{for(const s of i.ensemble.actors)e.push(s.userId);for(const s of i.characters)e.includes(s.actor.userId)||e.push(s.actor.userId)}for(const n of p)$.find(s=>s.userId==n.actor.userId)||e.includes(n.actor.userId)&&n.conflictResponseDate.date.getTime()==b.getTime()&&r.push(n);m(r)}}}),o.jsx("span",{className:"checkmark",children:" "})]})," "]}),o.jsx("div",{className:"conflicts",children:q.map((a,r)=>o.jsx(te,{conflictResponseDate:a.conflictResponseDate,actor:a.actor},r))})]}),o.jsx("h2",{className:"title",children:"Enter Rehersal Information"}),o.jsx("label",{htmlFor:"Name",children:"Name: "}),o.jsx("input",{type:"text",value:ce,onChange:a=>{D(a.target.value)}}),o.jsx("br",{}),o.jsx("label",{htmlFor:"Description",children:"Description: "}),o.jsx("textarea",{value:ae,onChange:a=>{L(a.target.value)}}),o.jsx("br",{}),o.jsx("label",{htmlFor:"StartTime",children:"Start Time: "}),o.jsx("input",{type:"time",value:pe,onChange:De}),o.jsx("br",{}),o.jsx("label",{htmlFor:"EndTime",children:"End Time: "}),o.jsx("input",{type:"time",value:ge,onChange:Te}),o.jsx("br",{}),o.jsx("label",{htmlFor:"location",children:"Location: "}),o.jsx("select",{name:"location",id:"location",onChange:a=>{O(f==null?void 0:f.locations.find(r=>r.name==a.target.value))},children:f==null?void 0:f.locations.map((a,r)=>o.jsx("option",{value:a.name,children:a.name+" ("+a.address+")"},r))}),o.jsx("br",{}),o.jsx("label",{htmlFor:"location",children:"Rehersal Location: "}),o.jsx("select",{name:"location",id:"rehersal-location",onChange:a=>{Q(f==null?void 0:f.rehearsalLocations.find(r=>r.name==a.target.value))},children:f==null?void 0:f.rehearsalLocations.map((a,r)=>o.jsx("option",{value:a.name,children:a.name},r))}),o.jsx("br",{}),x=="custom"?o.jsxs(o.Fragment,{children:[o.jsx("label",{htmlFor:"fullCast",children:"Full Cast: "}),o.jsxs("label",{className:"custom-checkbox",children:[o.jsx("input",{type:"checkbox",id:"ensemble",checked:V,onChange:a=>Se(a.target.checked)}),o.jsx("span",{className:"checkmark"})]})]}):o.jsx(o.Fragment,{}),x=="custom"&&o.jsx("br",{}),V?o.jsx(o.Fragment,{}):o.jsxs(o.Fragment,{children:[" ",o.jsx("h2",{children:"Characters"}),o.jsx("div",{className:"characters",children:h.map((a,r)=>{if(a instanceof g)return x=="custom"?o.jsx(Je,{character:a,isCreate:!1,actors:[],characters:i.characters,isAssign:!1,setCharacter:e=>{u(h.map((n,s)=>s===r?e:n))},removeCharacter:()=>{u(h.filter((e,n)=>n!==r))}},r):o.jsx(Ue,{character:a,canDelete:!0,onDelete:()=>{u(h.filter((e,n)=>n!==r))},isMini:!1},r);if(a instanceof S)return x=="custom"?o.jsx(Ve,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:a,isCustom:!0,setEnsembleSection:e=>{u(h.map((n,s)=>s===r?e:n))},removeEnsembleSection:()=>{u(h.filter((e,n)=>n!==r))},isCreate:!1,isAssign:!1,actors:f.students},r):o.jsx(Pe,{ensembleSection:a,canDelete:!0,onDelete:()=>{u(h.filter((e,n)=>n!==r))},isMini:!1},r);if(a instanceof T)return x=="custom"?o.jsx(qe,{showGroup:a,characters:i.characters,setShowGroup:e=>{u(h.map((n,s)=>s===r?e:n))},removeShowGroup:()=>{u(h.filter((e,n)=>n!==r))},isCreate:!1,isAssign:!1,actors:f.students,hasEnsemble:i.hasEnsemble,showGroups:i.showGroups},r):o.jsx(Ye,{showGroup:a,showCharacters:!0,canClick:!1,onClick:()=>{},canDelete:!0,onDelete:()=>{u(h.filter((e,n)=>n!==r))}},r);if(a instanceof B)return o.jsx(We,{canDelete:!0,onDelete:()=>{u(h.filter((e,n)=>n!==r))}},r)})}),x=="custom"?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);u([...h,g.fromBlank("Character 1",null,a,0)])},children:"Add Character"}),o.jsx("button",{className:"ActionBtn",onClick:()=>{const a=Math.floor(Math.random()*1e5);u([...h,T.fromBlank("Show Group 1",[],a,0)])},children:"Add Show Group"}),(i==null?void 0:i.hasEnsemble)&&o.jsx("button",{className:"ActionBtn "+(J?"disabled":""),disabled:J,onClick:()=>{J||(Y(!0),u([...h,S.fromBlank(!0,!1,!1,!1,[],0)]))},children:"Add Ensemble"})," "]}):o.jsx(o.Fragment,{})," "]}),o.jsx("br",{}),Ie?o.jsx("div",{className:"loader"}):o.jsx("button",{onClick:async()=>{ie(!0),console.log("Submit");const a=re??f.locations[0];console.log(oe),console.log(ne);const r=ke.fromBlank(H,oe,ne);console.log(r);const e=[];if(V){for(const s of i.ensemble.actors)e.push(s);for(const s of i.characters)e.find(t=>t.userId==s.actor.userId)==null&&e.push(s.actor)}else for(const s of h){if(s instanceof B){for(const t of i.ensemble.actors)e.push(t);for(const t of i.characters)e.find(c=>c.userId==t.actor.userId)==null&&e.push(t.actor);break}if(s instanceof g){if(e.find(t=>t.userId==s.actor.userId)!=null)continue;e.push(s.actor)}if(s instanceof S){if(s.includeAll)for(const t of i.ensemble.actors)e.find(c=>c.userId==t.userId)==null&&e.push(t);else if(s.includeMale){for(const t of i.ensemble.actors)if(t.gender=="male"){if(e.find(c=>c.userId==t.userId)!=null)continue;e.push(t)}}else if(s.includeFemale){for(const t of i.ensemble.actors)if(t.gender=="female"){if(e.find(c=>c.userId==t.userId)!=null)continue;e.push(t)}}else if(s.includeCustom)for(const t of s.customActors)e.find(c=>c.userId==t.userId)==null&&e.push(t)}if(s instanceof T)for(const t of s.characters){if(t instanceof g){if(e.find(c=>c.userId==t.actor.userId)!=null)continue;e.push(t.actor)}if(t instanceof S){if(t.includeAll)for(const c of i.ensemble.actors)e.find(l=>l.userId==c.userId)==null&&e.push(c);else if(t.includeMale){for(const c of i.ensemble.actors)if(c.gender=="male"){if(e.find(l=>l.userId==c.userId)!=null)continue;e.push(c)}}else if(t.includeFemale){for(const c of i.ensemble.actors)if(c.gender=="female"){if(e.find(l=>l.userId==c.userId)!=null)continue;e.push(c)}}else if(t.includeCustom)for(const c of t.customActors)e.find(l=>l.userId==c.userId)==null&&e.push(c)}}}const n=Fe.fromBlank(ce,ae,a,r,"activity-theater-event",Date.now(),C,f.name,z,i.name,h,e,x,f.eventTypes[0],xe);if(console.log(n),W){n.id=je.id,await Be(n),K(!1);const s=n.date.from,t=n.date.to,c={title:n.name,start:s.toISOString(),end:t.toISOString(),isAllDay:!1,interactive:!0,description:"Location: "+n.rehearsalLocation.name+`
`+n.info,color:M(R(n.rehearsalLocation.color),.8),id:n.id},l=U.filter(ee=>ee.id!=n.id);l.push(c),P(l);const j=F.filter(ee=>ee.id!=n.id);j.push(n),console.log(j),_([...j])}else{await Ge(n);const s=n.date.from,t=n.date.to,c={title:n.name,start:s.toISOString(),end:t.toISOString(),isAllDay:!1,interactive:!0,color:M(R(n.rehearsalLocation.color),.8),id:n.id,description:"Location: "+n.rehearsalLocation.name+`
`+n.info};P([...U,c]),_([...F,n])}ie(!1),I("date"),y(null),E(null),A(null),v("custom"),D(""),L(""),w(""),k(""),O(void 0),Y(!1),N(null),m(p)},className:"ActionBtn",children:W?"Save":"Submit"}),o.jsx("button",{onClick:()=>{if(W){I("date"),y(null),E(null),A(null),v("custom"),D(""),L(""),w(""),k(""),O(void 0),Y(!1),N(null),m(p),K(!1);return}I("type"),L(""),Y(!1);const a=[];for(const r of p)r.conflictResponseDate.date.getTime()==b.getTime()&&a.push(r);m(a)},className:"ActionBtn",children:"Back"})]})]})}
