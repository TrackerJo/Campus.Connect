import{j as e,c as I,r as s,i as x}from"./index-BrX1-YwQ.js";import{D as n}from"./Dashboard_Tile-C7t7_v7J.js";import{m as j,s as p}from"./db-NP6WfWfT.js";import"./constants-BNam4_mG.js";function C({close:o,confirmed:r,dialogRef:i}){return e.jsx("dialog",{ref:i,children:e.jsxs("div",{className:"ConfirmCreateScheduleDialog",children:[e.jsx("h2",{children:"Confirm Creating Schedule"}),e.jsx("label",{htmlFor:"",children:"Once you start to create the schedule, you will not be able to edit the show template or assign any more actors. Do you wish to continue?"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{r()},children:"Yes"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{o()},children:"No"})]})})}I(document.getElementById("root")).render(e.jsx(s.StrictMode,{children:e.jsx(v,{})}));function v(){const[o,r]=s.useState(""),[i,g]=s.useState(""),[t,f]=s.useState(),[l,w]=s.useState("student"),[y,m]=s.useState(!0),a=s.useRef(null);return s.useEffect(()=>{m(!0),x(()=>{});const c=new URLSearchParams(window.location.search),d=c.get("activityId");d&&r(d);const h=c.get("showId");h&&g(h),j(d,h).then(u=>{f(u),console.log(u),m(!1)});const S=localStorage.getItem("accountType");S&&w(S)},[]),e.jsxs(e.Fragment,{children:[y?e.jsxs("div",{className:"center",children:[" ",e.jsx("div",{className:"loader"})]}):e.jsxs(e.Fragment,{children:[" ",e.jsx("div",{className:"title",children:e.jsx("h1",{children:t==null?void 0:t.name})}),e.jsxs("div",{className:"center",children:[e.jsxs("div",{className:"tiles",children:[l=="teacher"&&!(t!=null&&t.isCreatingSchedule)?e.jsxs(e.Fragment,{children:[" ",e.jsx(n,{title:"Edit Show Template",description:"Edit the show template",onClick:()=>{localStorage.setItem("show",JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/CreateTemplate/?activityId=${o}&isEditing=true&showId=${i}`}})," "]}):e.jsx(e.Fragment,{}),l=="teacher"&&!(t!=null&&t.isCreatingSchedule)?e.jsxs(e.Fragment,{children:[" ",e.jsx(n,{title:"Assign Roles",description:"Assign roles to characters",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/Show/Assign/?activityId=${o}&showId=${i}`}})]}):e.jsx(e.Fragment,{}),(t==null?void 0:t.canCreateSchedule)&&e.jsx(n,{title:"Create/Edit Schedule",description:"Create/Edit the rehersal schedule",onClick:()=>{var c;t!=null&&t.isCreatingSchedule?(localStorage.setItem("show-"+i,JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/Show/CreateSchedule/?activityId=${o}&showId=${i}`):(c=a.current)==null||c.showModal()}}),l=="teacher"?e.jsxs(e.Fragment,{children:[e.jsx(n,{title:"Conflict Form",description:"Create/View the conflict form",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/Show/ConflictForm/?activityId=${o}&showId=${i}`}})," "]}):e.jsxs(e.Fragment,{children:[(t==null?void 0:t.conflictForm)&&e.jsx(n,{title:"Conflict Form",description:"Complete/View the conflict form",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/Show/ConflictForm/?activityId=${o}&showId=${i}`}}),e.jsx(n,{title:"Schedule",description:"View Schedule",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/Show/Schedule/?activityId=${o}&showId=${i}`}})]}),e.jsx(n,{title:"Resources",description:"View all resources",onClick:()=>{localStorage.setItem("show-"+i,JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/Show/Resources/?activityId=${o}&showId=${i}`}})]}),e.jsx("br",{}),e.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href=`/Activity/Shows/?activityId=${o}`},children:"Back"})]})]}),e.jsx(C,{dialogRef:a,close:()=>{var c;(c=a.current)==null||c.close()},confirmed:async()=>{var c;(c=a.current)==null||c.close(),await p(o,i),localStorage.setItem("show-"+i,JSON.stringify(t==null?void 0:t.toMap())),window.location.href=`/Activity/Shows/Show/CreateSchedule/?activityId=${o}&showId=${i}`}})]})}
