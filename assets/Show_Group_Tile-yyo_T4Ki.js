import{r as x,j as e}from"./index-Drzf2ig_.js";import{C as k,p as B,E as j,h as C}from"./db-Cf5ZPQXo.js";import{T as p}from"./trash-BnpXJPEK.js";function F({actor:a,setActor:s,actors:o,dialogRef:f,addedActors:n,close:h,keepPastResult:u}){const[c,l]=x.useState([]),[t,m]=x.useState("");x.useEffect(()=>{if(a.name!=""&&!u){if(l(o.filter(d=>d.name.toLowerCase().includes(d.name.toLowerCase()))),a.name==null)return;m(a.name.toLowerCase())}},[]);function A(d){l(o.filter(r=>(console.log(r.name),r.name==null?!1:r.name.toLowerCase().includes(d.toLowerCase())&&!n.includes(r))))}return e.jsxs("dialog",{ref:f,children:[e.jsx("h2",{children:"Find Actor"}),e.jsx("input",{type:"text",className:"ActorSearchInput",value:t,onChange:d=>{if(m(d.target.value),d.target.value==""){l([]);return}A(d.target.value)}}),e.jsx("br",{}),e.jsx("h3",{children:"Results"}),e.jsx("div",{className:"ActorResults",children:c.map((d,r)=>e.jsxs("div",{className:"ActorResult",onClick:()=>{m(""),l([])},children:[e.jsx("label",{htmlFor:"",children:d.name}),e.jsx("button",{className:"AssignBtn",onClick:()=>{console.log("Assigning actor"),s(d)},children:"Assign"})]},r))}),e.jsx("button",{className:"AssignCloseBtn",onClick:()=>{h()},children:"Close"})]})}function I({character:a,setCharacter:s,isCreate:o,removeCharacter:f,isAssign:n,characters:h,actors:u}){const c=x.useRef(null);return e.jsxs("div",{className:"CharacterTile",id:"character-tile-"+a.characterId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"CharacterNameDiv",children:[e.jsx("label",{htmlFor:"Character",children:"Character: "}),o?e.jsx("input",{type:"text",name:"",id:"",value:a.name,onChange:l=>{s(k.fromBlank(l.target.value,a.actor,a.characterId,a.lastUpdated))}}):n?e.jsxs(e.Fragment,{children:[e.jsxs("label",{htmlFor:"Character",children:[a.name," "]}),e.jsx("br",{}),a.actor!=null?e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"Actor",children:"Actor: "}),e.jsx("label",{htmlFor:"",children:a.actor.name}),e.jsx("button",{className:"EditActorBtn",onClick:()=>{var l;(l=c.current)==null||l.showModal()},children:"Edit Actor"})]}):e.jsx(e.Fragment,{children:e.jsx("button",{className:"AssignActorBtn",onClick:()=>{var l;(l=c.current)==null||l.showModal()},children:"Assign Actor"})})]}):e.jsxs("select",{name:"characters",id:"characters",onChange:l=>{l.target.value!="null"&&s(h.find(t=>t.name==l.target.value))},children:[e.jsx("option",{value:"null",children:"Select a character"}),h.map((l,t)=>e.jsx("option",{value:l.name,children:l.name},t))]})]}),e.jsx("div",{children:e.jsx("img",{src:p,alt:"",className:"TrashIcon",onClick:()=>{f()}})})]}),e.jsx(F,{actor:a.actor??new B,actors:u,keepPastResult:!1,addedActors:[],setActor:l=>{var t;(t=c.current)==null||t.close(),s(k.fromBlank(a.name,l,a.characterId,a.lastUpdated))},dialogRef:c,close:()=>{var l;(l=c.current)==null||l.close()}})]})}function E({ensembleSection:a,setEnsembleSection:s,removeEnsembleSection:o,isCreate:f,isAssign:n,actors:h,isCustom:u}){const c=x.useRef(null);return e.jsxs("div",{className:"EnsembleSectionTile",children:[e.jsxs("div",{className:"header",children:[e.jsx("div",{className:"EnsembleSectionName",children:e.jsx("label",{htmlFor:"Ensemble",children:"Ensemble"})}),e.jsx("div",{children:e.jsx("img",{src:p,alt:"",className:"TrashIcon",onClick:()=>{o()}})})]}),e.jsx("br",{}),!n&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Include Everyone: "}),e.jsx("input",{type:"radio",name:"",id:"",checked:a.includeAll,onChange:l=>{s(j.fromBlank(l.target.checked,!1,!1,!1,a.customActors,a.lastUpdated))}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Include Males: "}),e.jsx("input",{type:"radio",name:"",id:"",checked:a.includeMale,onChange:l=>{s(j.fromBlank(!1,l.target.checked,!1,!1,a.customActors,a.lastUpdated))}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Include Females: "}),e.jsx("input",{type:"radio",name:"",id:"",checked:a.includeFemale,onChange:l=>{s(j.fromBlank(!1,!1,l.target.checked,!1,a.customActors,a.lastUpdated))}}),e.jsx("br",{}),(f||u)&&e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"",children:"Include Custom Actors: "}),e.jsx("input",{type:"radio",name:"",id:"",checked:a.includeCustom,onChange:l=>{s(j.fromBlank(!1,!1,!1,l.target.checked,a.customActors,a.lastUpdated))}})]})]}),(n||u)&&a.includeCustom&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Custom Actors: "}),e.jsx("br",{}),a.customActors.map((l,t)=>e.jsxs("div",{className:"AssignedActor",children:[e.jsx("label",{htmlFor:"",children:l.name}),e.jsx("img",{src:p,alt:"remove actor",className:"RemoveActorImg",onClick:()=>{const m=a.customActors;m.splice(t,1),s(j.fromBlank(a.includeAll,a.includeMale,a.includeFemale,a.includeCustom,m,a.lastUpdated))}})]},t)),e.jsx("button",{className:"AssignActorsBtn",onClick:()=>{var l;(l=c.current)==null||l.showModal()},children:"Assign Actors"})]}),(n||u)&&e.jsx(F,{dialogRef:c,keepPastResult:!1,actor:new B,addedActors:a.customActors,actors:h,setActor:l=>{var m;const t=a.customActors;t.push(l),console.log("Setting actors"),s(j.fromBlank(a.includeAll,a.includeMale,a.includeFemale,a.includeCustom,t,a.lastUpdated)),(m=c.current)==null||m.close()},close:()=>{var l;(l=c.current)==null||l.close()}})]})}function R({showGroup:a,setShowGroup:s,isCreate:o,removeShowGroup:f,isAssign:n,showGroups:h,hasEnsemble:u,characters:c,actors:l}){const[t,m]=x.useState(!1),[A,d]=x.useState(0);return x.useEffect(()=>{d(Math.floor(Math.random()*1e5))},[]),e.jsxs("div",{className:"ShowGroupTile"+(o||n?"Create":""),id:"show-group-tile-"+a.showGroupId,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"ShowGroupNameDiv",children:[e.jsx("label",{htmlFor:"ShowGroup",children:"Show Group: "}),o?e.jsx("input",{type:"text",name:"",id:"",value:a.name,onChange:r=>{s(C.fromBlank(r.target.value,a.characters,a.showGroupId,a.lastUpdated))}}):n?e.jsx(e.Fragment,{children:e.jsx("label",{htmlFor:"",children:a.name})}):e.jsxs("select",{name:"show groups",id:"showGroups",onChange:r=>{r.target.value!="null"&&s(h.find(i=>i.name==r.target.value))},children:[e.jsx("option",{value:"null",children:"Select a show group"}),h.map((r,i)=>e.jsx("option",{value:r.name,children:r.name},i))]})]}),e.jsx("div",{children:e.jsx("img",{src:p,alt:"",className:"TrashIcon",onClick:()=>{f()}})})]}),(o||n)&&e.jsx("br",{}),(o||n)&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Characters",children:"Characters: "}),e.jsx("div",{className:"characters",id:"characters-"+A,children:a.characters.map((r,i)=>{if(r instanceof k&&!n)return e.jsx(I,{character:r,actors:[],isCreate:!1,characters:c,isAssign:n,setCharacter:v=>{s(C.fromBlank(a.name,a.characters.map((g,N)=>N===i?v:g),a.showGroupId,a.lastUpdated))},removeCharacter:()=>{s(C.fromBlank(a.name,a.characters.filter((v,g)=>g!==i),a.showGroupId,a.lastUpdated))}},i);if(r instanceof j)return e.jsx(E,{ensembleSection:r,isAssign:n,actors:l,isCustom:!1,isCreate:!0,setEnsembleSection:v=>{s(C.fromBlank(a.name,a.characters.map((g,N)=>N===i?v:g),a.showGroupId,a.lastUpdated))},removeEnsembleSection:()=>{m(!1),s(C.fromBlank(a.name,a.characters.filter((v,g)=>g!==i),a.showGroupId,a.lastUpdated))}},i)})}),o&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"AddCharacterBtn",onClick:()=>{const r=Math.floor(Math.random()*1e5);s(C.fromBlank(a.name,[...a.characters,k.fromBlank("Character 1",null,r,0)],a.showGroupId,a.lastUpdated)),setTimeout(()=>{const i=document.getElementById("characters-"+A);i.scrollTop=i.scrollHeight},100)},children:"Add Character"}),e.jsx("br",{}),u&&e.jsx("button",{className:"AddEnsembleBtn "+(t?"disabled":""),disabled:t,onClick:()=>{t||(m(!0),setTimeout(()=>{const r=document.getElementById("characters-"+A);r.scrollTop=r.scrollHeight},100),s(C.fromBlank(a.name,[...a.characters,j.fromBlank(!0,!1,!1,!1,[],0)],a.showGroupId,a.lastUpdated)))},children:"Add Ensemble"})]})]})]})}export{F as A,I as C,E,R as S};
