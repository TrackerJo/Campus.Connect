import{r as m,j as t,c as H}from"./index-BvKDzgix.js";import{S as x,C as A,E as y,i as g,F as T,A as U,k as C,D as S,l as L,m as P,n as R,h as $}from"./db-BHX2A2ia.js";import{C as G,S as M}from"./Show_Group_Tile-DmWaKpFJ.js";import{E as V}from"./Ensemble_Section_Tile-CClLQMx2.js";import{T as F}from"./trash-BnpXJPEK.js";import{F as D}from"./Full_Cast_Tile-BF5rcSKR.js";function q({scene:e,setScene:r,isCreate:f,removeScene:N,isAssign:h,characters:k,showGroups:j,hasEnsemble:B}){const[u,v]=m.useState(!1),[o,p]=m.useState(!1),[i,E]=m.useState(0);return m.useEffect(()=>{E(Math.floor(Math.random()*1e5))},[]),t.jsxs("div",{className:"SceneTile",id:"scene-tile-"+e.sceneId,children:[t.jsxs("div",{className:"header",children:[t.jsxs("div",{className:"SceneNameDiv",children:[t.jsx("label",{htmlFor:"Scene",children:"Scene Name: "}),t.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:l=>{r(x.fromBlank(l.target.value,e.characters,e.sceneId,e.lastUpdated))}})]}),t.jsx("div",{children:t.jsx("img",{src:F,alt:"",className:"TrashIcon",onClick:()=>{N()}})})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"Characters",children:"Characters: "}),t.jsx("div",{className:"scene-characters",id:"characters-"+i,children:e.characters.map((l,a)=>{if(l instanceof A)return t.jsx(G,{character:l,isCreate:f,actors:[],characters:k,isAssign:h,setCharacter:c=>{r(x.fromBlank(e.name,e.characters.map((n,s)=>s===a?c:n),e.sceneId,e.lastUpdated))},removeCharacter:()=>{r(x.fromBlank(e.name,e.characters.filter((c,n)=>n!==a),e.sceneId,e.lastUpdated))}},a);if(l instanceof y)return t.jsx(V,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:l,isCustom:!1,isCreate:f,isAssign:h,actors:[],setEnsembleSection:c=>{r(x.fromBlank(e.name,e.characters.map((n,s)=>s===a?c:n),e.sceneId,e.lastUpdated))},removeEnsembleSection:()=>{v(!1),r(x.fromBlank(e.name,e.characters.filter((c,n)=>n!==a),e.sceneId,e.lastUpdated))}},a);if(l instanceof g)return t.jsx(M,{showGroup:l,isCreate:f,isAssign:h,characters:k,actors:[],hasEnsemble:B,showGroups:j,setShowGroup:c=>{r(x.fromBlank(e.name,e.characters.map((n,s)=>s===a?c:n),e.sceneId,e.lastUpdated))},removeShowGroup:()=>{r(x.fromBlank(e.name,e.characters.filter((c,n)=>n!==a),e.sceneId,e.lastUpdated))}},a);if(l instanceof T)return t.jsx(D,{canDelete:!0,onDelete:()=>{p(!1),r(x.fromBlank(e.name,e.characters.filter((c,n)=>n!==a),e.sceneId,e.lastUpdated))}},a)})}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(o?"disabled":""),disabled:o,onClick:()=>{const l=Math.floor(Math.random()*1e5);r(x.fromBlank(e.name,[...e.characters,A.fromBlank("Character 1",null,l,0)],e.sceneId,e.lastUpdated)),setTimeout(()=>{const a=document.getElementById("characters-"+i);a.scrollTop=a.scrollHeight,document.getElementById("scene-tile-"+e.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(o?"disabled":""),disabled:o,onClick:()=>{const l=Math.floor(Math.random()*1e5);r(x.fromBlank(e.name,[...e.characters,g.fromBlank("Show Group 1",[],l,0)],e.sceneId,e.lastUpdated)),setTimeout(()=>{const a=document.getElementById("characters-"+i);a.scrollTop=a.scrollHeight,document.getElementById("scene-tile-"+e.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),t.jsx("br",{}),B&&t.jsx("button",{className:"ActionBtn "+(u||o?"disabled":""),disabled:u||o,onClick:()=>{u||(v(!0),setTimeout(()=>{const l=document.getElementById("characters-"+i);l.scrollTop=l.scrollHeight,document.getElementById("scene-tile-"+e.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),r(x.fromBlank(e.name,[...e.characters,y.fromBlank(!0,!1,!1,!1,[],0)],e.sceneId,e.lastUpdated)))},children:"Add Ensemble"}),B&&t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(o?"disabled":""),disabled:o,onClick:()=>{o||(p(!0),setTimeout(()=>{const l=document.getElementById("characters-"+i);l.scrollTop=l.scrollHeight,document.getElementById("scene-tile-"+e.sceneId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),r(x.fromBlank(e.name,[...e.characters,new T],e.sceneId,e.lastUpdated)))},children:"Add Full Cast"})]})]})}function z({act:e,setAct:r,isCreate:f,removeAct:N,isAssign:h,characters:k,showGroups:j,hasEnsemble:B}){const[u,v]=m.useState(0);return m.useEffect(()=>{v(Math.floor(Math.random()*1e5))},[]),t.jsxs("div",{className:"ActTile",id:"act-tile-"+e.actId,children:[t.jsxs("div",{className:"header",children:[t.jsxs("div",{className:"ActNameDiv",children:[t.jsx("label",{htmlFor:"Act",children:"Act Name: "}),t.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:o=>{r(U.fromBlank(o.target.value,e.scenes,e.actId,e.lastUpdated))}})]}),t.jsx("div",{children:t.jsx("img",{src:F,alt:"",className:"TrashIcon",onClick:()=>{N()}})})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"Scene",children:"Scenes: "}),t.jsx("div",{id:"scenes-"+u,className:"scenes",children:e.scenes.map((o,p)=>t.jsx(q,{hasEnsemble:B,scene:o,isCreate:f,characters:k,showGroups:j,isAssign:h,setScene:i=>{r(U.fromBlank(e.name,e.scenes.map((E,l)=>l===p?i:E),e.actId,e.lastUpdated))},removeScene:()=>{r(U.fromBlank(e.name,e.scenes.filter((i,E)=>E!==p),e.actId,e.lastUpdated))}},p))}),e.scenes.length==0&&t.jsx("br",{}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const o=Math.floor(Math.random()*1e5);r(U.fromBlank(e.name,[...e.scenes,x.fromBlank("Scene "+(e.scenes.length+1),[],o,0)],e.actId,e.lastUpdated)),setTimeout(()=>{const p=document.getElementById("scenes-"+u);p.scrollTop=p.scrollHeight,document.getElementById("scene-tile-"+o).scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),document.getElementById("act-tile-"+e.actId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Scene"})]})]})}function J({song:e,setSong:r,isCreate:f,removeSong:N,isAssign:h,characters:k,showGroups:j,hasEnsemble:B}){const[u,v]=m.useState(!1),[o,p]=m.useState(!1),[i,E]=m.useState(0);return m.useEffect(()=>{E(Math.floor(Math.random()*1e5))},[]),t.jsxs("div",{className:"SongTile",id:"song-tile-"+e.songId,children:[t.jsxs("div",{className:"header",children:[t.jsxs("div",{className:"SongNameDiv",children:[t.jsx("label",{htmlFor:"Scene",children:"Song Name: "}),t.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:l=>{r(C.fromBlank(l.target.value,e.characters,e.songId,e.lastUpdated))}})]}),t.jsx("div",{children:t.jsx("img",{src:F,alt:"",className:"TrashIcon",onClick:()=>{N()}})})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"Characters",children:"Characters: "}),t.jsx("div",{className:"song-characters",id:"characters-"+i,children:e.characters.map((l,a)=>{if(l instanceof A)return t.jsx(G,{character:l,isCreate:f,actors:[],characters:k,isAssign:h,setCharacter:c=>{r(C.fromBlank(e.name,e.characters.map((n,s)=>s===a?c:n),e.songId,e.lastUpdated))},removeCharacter:()=>{r(C.fromBlank(e.name,e.characters.filter((c,n)=>n!==a),e.songId,e.lastUpdated))}},a);if(l instanceof y)return t.jsx(V,{isGroupChatCreate:!1,onAddEnsemble:()=>{},ensembleSection:l,isAssign:h,actors:[],isCustom:!1,isCreate:f,setEnsembleSection:c=>{r(C.fromBlank(e.name,e.characters.map((n,s)=>s===a?c:n),e.songId,e.lastUpdated))},removeEnsembleSection:()=>{v(!1),r(C.fromBlank(e.name,e.characters.filter((c,n)=>n!==a),e.songId,e.lastUpdated))}},a);if(l instanceof g)return t.jsx(M,{showGroup:l,hasEnsemble:B,actors:[],characters:k,isCreate:f,isAssign:h,showGroups:j,setShowGroup:c=>{r(C.fromBlank(e.name,e.characters.map((n,s)=>s===a?c:n),e.songId,e.lastUpdated))},removeShowGroup:()=>{r(C.fromBlank(e.name,e.characters.filter((c,n)=>n!==a),e.songId,e.lastUpdated))}},a);if(l instanceof T)return t.jsx(D,{canDelete:!0,onDelete:()=>{p(!1),r(C.fromBlank(e.name,e.characters.filter((c,n)=>n!==a),e.songId,e.lastUpdated))}},a)})}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(o?"disabled":""),disabled:o,onClick:()=>{const l=Math.floor(Math.random()*1e5);r(C.fromBlank(e.name,[...e.characters,A.fromBlank("Character 1",null,l,0)],e.songId,e.lastUpdated)),setTimeout(()=>{const a=document.getElementById("characters-"+i);a.scrollTop=a.scrollHeight,document.getElementById("song-tile-"+e.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(o?"disabled":""),disabled:o,onClick:()=>{const l=Math.floor(Math.random()*1e5);r(C.fromBlank(e.name,[...e.characters,g.fromBlank("Show Group 1",[],l,0)],e.songId,e.lastUpdated)),setTimeout(()=>{const a=document.getElementById("characters-"+i);a.scrollTop=a.scrollHeight,document.getElementById("song-tile-"+e.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(o?"disabled":""),disabled:o,onClick:()=>{p(!0),r(C.fromBlank(e.name,[...e.characters,new T],e.songId,e.lastUpdated)),setTimeout(()=>{const l=document.getElementById("characters"+i);l.scrollTop=l.scrollHeight,document.getElementById("song-tile-"+e.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Full Cast"}),t.jsx("br",{}),B&&t.jsx("button",{className:"ActionBtn "+(u||o?"disabled":""),disabled:u||o,onClick:()=>{u||(v(!0),setTimeout(()=>{const l=document.getElementById("characters-"+i);l.scrollTop=l.scrollHeight,document.getElementById("song-tile-"+e.songId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),r(C.fromBlank(e.name,[...e.characters,y.fromBlank(!0,!1,!1,!1,[],0)],e.songId,e.lastUpdated)))},children:"Add Ensemble"})]})]})}function K({dance:e,setDance:r,isCreate:f,removeDance:N,isAssign:h,characters:k,showGroups:j,hasEnsemble:B}){const[u,v]=m.useState(!1),[o,p]=m.useState(!1),[i,E]=m.useState(0);return m.useEffect(()=>{E(Math.floor(Math.random()*1e5))},[]),t.jsxs("div",{className:"DanceTile",id:"dance-tile-"+e.danceId,children:[t.jsxs("div",{className:"header",children:[t.jsxs("div",{className:"DanceNameDiv",children:[t.jsx("label",{htmlFor:"Scene",children:"Song Name: "}),t.jsx("input",{type:"text",name:"",id:"",value:e.name,onChange:l=>{r(S.fromBlank(l.target.value,e.characters,e.danceId,e.lastUpdated))}})]}),t.jsx("div",{children:t.jsx("img",{src:F,alt:"",className:"TrashIcon",onClick:()=>{N()}})})]}),t.jsx("br",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"Characters",children:"Characters: "}),t.jsx("div",{className:"characters",id:"characters-"+i,children:e.characters.map((l,a)=>{if(l instanceof A)return t.jsx(G,{character:l,actors:[],isCreate:f,characters:k,isAssign:h,setCharacter:c=>{r(S.fromBlank(e.name,e.characters.map((n,s)=>s===a?c:n),e.danceId,e.lastUpdated))},removeCharacter:()=>{r(S.fromBlank(e.name,e.characters.filter((c,n)=>n!==a),e.danceId,e.lastUpdated))}},a);if(l instanceof y)return t.jsx(V,{isGroupChatCreate:!1,onAddEnsemble:()=>{},isAssign:!1,ensembleSection:l,isCustom:!1,isCreate:f,actors:[],setEnsembleSection:c=>{r(S.fromBlank(e.name,e.characters.map((n,s)=>s===a?c:n),e.danceId,e.lastUpdated))},removeEnsembleSection:()=>{v(!1),r(S.fromBlank(e.name,e.characters.filter((c,n)=>n!==a),e.danceId,e.lastUpdated))}},a);if(l instanceof g)return t.jsx(M,{showGroup:l,hasEnsemble:B,characters:k,actors:[],isCreate:f,isAssign:h,showGroups:j,setShowGroup:c=>{r(S.fromBlank(e.name,e.characters.map((n,s)=>s===a?c:n),e.danceId,e.lastUpdated))},removeShowGroup:()=>{r(S.fromBlank(e.name,e.characters.filter((c,n)=>n!==a),e.danceId,e.lastUpdated))}},a);if(l instanceof T)return t.jsx(D,{canDelete:!0,onDelete:()=>{r(S.fromBlank(e.name,e.characters.filter((c,n)=>n!==a),e.danceId,e.lastUpdated)),p(!1)}},a)})}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(o?"disabled":""),disabled:o,onClick:()=>{const l=Math.floor(Math.random()*1e5);r(S.fromBlank(e.name,[...e.characters,A.fromBlank("Character 1",null,l,0)],e.danceId,e.lastUpdated)),setTimeout(()=>{const a=document.getElementById("characters-"+i);a.scrollTop=a.scrollHeight,document.getElementById("dance-tile-"+e.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(o?"disabled":""),disabled:o,onClick:()=>{const l=Math.floor(Math.random()*1e5);r(S.fromBlank(e.name,[...e.characters,g.fromBlank("Show Group 1",[],l,0)],e.danceId,e.lastUpdated)),setTimeout(()=>{const a=document.getElementById("characters-"+i);a.scrollTop=a.scrollHeight,document.getElementById("dance-tile-"+e.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),t.jsx("br",{}),t.jsx("button",{className:"ActionBtn "+(o?"disabled":""),disabled:o,onClick:()=>{p(!0),r(S.fromBlank(e.name,[...e.characters,new T],e.danceId,e.lastUpdated)),setTimeout(()=>{const l=document.getElementById("characters-"+i);l.scrollTop=l.scrollHeight,document.getElementById("dance-tile-"+e.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Full Cast"}),t.jsx("br",{}),B&&t.jsx("button",{className:"ActionBtn "+(u||o?"disabled":""),disabled:u||o,onClick:()=>{u||(v(!0),setTimeout(()=>{const l=document.getElementById("characters-"+i);l.scrollTop=l.scrollHeight,document.getElementById("dance-tile-"+e.danceId).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100),r(S.fromBlank(e.name,[...e.characters,y.fromBlank(!0,!1,!1,!1,[],0)],e.danceId,e.lastUpdated)))},children:"Add Ensemble"})]})]})}H(document.getElementById("root")).render(t.jsx(m.StrictMode,{children:t.jsx(O,{})}));function O(){const[e,r]=m.useState(""),[f,N]=m.useState([]),[h,k]=m.useState([]),[j,B]=m.useState([]),[u,v]=m.useState([]),[o,p]=m.useState([]),[i,E]=m.useState(""),[l,a]=m.useState(!1),[c,n]=m.useState(!1);return m.useEffect(()=>{const d=new URLSearchParams(window.location.search).get("activityId");d&&r(d)},[]),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"title",children:t.jsx("h1",{children:"Create Show Template"})}),t.jsxs("div",{className:"center",children:[t.jsxs("div",{className:"form-question",children:[t.jsx("label",{htmlFor:"name",children:"Show Name: "}),t.jsx("input",{type:"text",id:"name",value:i,onChange:s=>E(s.target.value)})]}),t.jsxs("div",{className:"form-question",children:[t.jsx("label",{htmlFor:"ensemble",children:"Has Ensemble: "}),t.jsxs("label",{className:"custom-checkbox",children:[t.jsx("input",{type:"checkbox",id:"ensemble",checked:l,onChange:s=>a(s.target.checked)}),t.jsx("span",{className:"checkmark"})]})]}),t.jsx("h2",{children:"Create Characters"}),t.jsx("div",{className:"characters",id:"create-characters",children:h.map((s,d)=>t.jsx(G,{actors:[],character:s,characters:[],isAssign:!1,setCharacter:b=>{k(I=>{const w=[...I];return w[d]=b,w})},removeCharacter:()=>{k(h.filter((b,I)=>I!==d))},isCreate:!0},d))}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();k([...h,A.fromBlank("",null,s,0)]),setTimeout(()=>{const d=document.getElementById("create-characters");d.scrollTop=d.scrollHeight,document.getElementById("character-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Character"}),t.jsx("h2",{children:"Create Show Groups"}),t.jsx("div",{className:"showGroups",id:"create-showGroups",children:j.map((s,d)=>t.jsx(M,{showGroup:s,showGroups:[],actors:[],hasEnsemble:l,characters:h,isAssign:!1,setShowGroup:b=>{B(I=>{const w=[...I];return w[d]=b,w})},removeShowGroup:()=>{B(j.filter((b,I)=>I!==d))},isCreate:!0},d))}),t.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Math.floor(Math.random()*1e5);B([...j,g.fromBlank("",[],s,0)]),setTimeout(()=>{const d=document.getElementById("create-showGroups");d.scrollTop=d.scrollHeight,document.getElementById("show-group-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Show Group"}),t.jsx("h2",{children:"Create Layout"}),t.jsxs("div",{className:"layout",children:[f.map((s,d)=>t.jsx(z,{hasEnsemble:l,act:s,characters:h,showGroups:j,isAssign:!1,setAct:b=>{N(I=>{const w=[...I];return w[d]=b,w})},isCreate:!1,removeAct:()=>{N(f.filter((b,I)=>I!==d))}},d)),t.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();N([...f,U.fromBlank("Act "+(f.length+1),[],s,0)]),setTimeout(()=>{document.getElementById("act-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Act"})]}),t.jsx("h2",{children:"Create Songs"}),t.jsxs("div",{className:"songs",children:[u.map((s,d)=>t.jsx(J,{song:s,hasEnsemble:l,characters:h,showGroups:j,isAssign:!1,setSong:b=>{v(I=>{const w=[...I];return w[d]=b,w})},removeSong:()=>{v(u.filter((b,I)=>I!==d))},isCreate:!1},d)),t.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();v([...u,C.fromBlank("Song "+(u.length+1),[],s,0)]),setTimeout(()=>{document.getElementById("song-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Song"})]}),t.jsx("h2",{children:"Create Dances"}),t.jsxs("div",{className:"dances",children:[o.map((s,d)=>t.jsx(K,{dance:s,hasEnsemble:l,characters:h,showGroups:j,isAssign:!1,setDance:b=>{p(I=>{const w=[...I];return w[d]=b,w})},removeDance:()=>{p(o.filter((b,I)=>I!==d))},isCreate:!1},d)),t.jsx("button",{className:"ActionBtn",onClick:()=>{const s=Date.now();p([...o,S.fromBlank("Dance "+(o.length+1),[],s,0)]),setTimeout(()=>{document.getElementById("dance-tile-"+s).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},children:"Add Dance"})]}),c?t.jsx("div",{className:"loader"}):t.jsx("button",{className:"ActionBtn",onClick:async()=>{n(!0);const s=L.fromBlank(i,"",f,h,l?P.fromBlank([],Date.now()):null,j,u,o,!1,l,null,[],"open",Date.now());console.log(s.toMap()),await R(s);const d=await $(s,e);window.location.href=`/Campus.Connect/Activity/Shows/Show/?activityId=${e}&showId=${d}`,n(!1)},children:"Create Show Template"}),t.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href=`/Campus.Connect/Activity/Shows/Add/?activityId=${e}`},children:"Back"})]})]})}
