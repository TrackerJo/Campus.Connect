import{c as z,j as e,r as d,i as H,g as K,E as m,C as f,F as j}from"./index-AQifkHdA.js";import{g as Q}from"./db-UdxIw7Od.js";z(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(V,{})}));function V(){const[x,R]=d.useState(""),[g,k]=d.useState(""),[W,B]=d.useState(),[S,D]=d.useState([]),[I,G]=d.useState([]),[A,T]=d.useState([]),[w,$]=d.useState([]),[v,L]=d.useState([]),[X,O]=d.useState("student");d.useRef(null);const[J,p]=d.useState(!0);return d.useEffect(()=>{p(!0),H(()=>{});const i=new URLSearchParams(window.location.search),N=i.get("activityId");N&&R(N);const h=i.get("showId");h&&k(h);const y=localStorage.getItem("show-"+h);if(y){const c=K.fromMap(JSON.parse(y));B(c),console.log(c),Q().then(F=>{var P;if(!F)return;const s=F,b=c.characters.filter(o=>{var r;return((r=o.actor)==null?void 0:r.userId)===s.uid});c.hasEnsemble&&(P=c.ensemble)!=null&&P.actors.find(o=>o.userId===s.uid)&&b.push(new m),D(b);const _=c.showGroups.filter(o=>o.characters.find(r=>{var n;return r instanceof f?((n=r.actor)==null?void 0:n.userId)===s.uid:r.includeAll?!0:r.customActors?r.customActors.find(l=>l.userId===s.uid):r.includeFemale&&s.gender=="female"?!0:!!(r.includeMale&&s.gender=="male")}));G(_);const M=[];c.layout.forEach(o=>{o.scenes.forEach(r=>{r.characters.find(l=>{var t;return l instanceof j?!0:l instanceof f?((t=l.actor)==null?void 0:t.userId)===s.uid:l instanceof m?l.includeAll?!0:l.customActors?l.customActors.find(u=>u.userId===s.uid):l.includeFemale&&s.gender=="female"?!0:!!(l.includeMale&&s.gender=="male"):l.characters.find(u=>{var a;return u instanceof f?((a=u.actor)==null?void 0:a.userId)===s.uid:u.includeAll?!0:u.customActors?u.customActors.find(q=>q.userId===s.uid):u.includeFemale&&s.gender=="female"?!0:!!(u.includeMale&&s.gender=="male")})})&&(r.name=o.name+" - "+r.name,M.push(r))})}),T(M);const U=[];c.songs.forEach(o=>{o.characters.find(n=>{var l;return n instanceof j?!0:n instanceof f?((l=n.actor)==null?void 0:l.userId)===s.uid:n instanceof m?n.includeAll?!0:n.customActors?n.customActors.find(t=>t.userId===s.uid):n.includeFemale&&s.gender=="female"?!0:!!(n.includeMale&&s.gender=="male"):n.characters.find(t=>{var u;return t instanceof f?((u=t.actor)==null?void 0:u.userId)===s.uid:t.includeAll?!0:t.customActors?t.customActors.find(a=>a.userId===s.uid):t.includeFemale&&s.gender=="female"?!0:!!(t.includeMale&&s.gender=="male")})})&&U.push(o)}),$(U);const C=[];c.dances.forEach(o=>{o.characters.find(n=>{var l;return n instanceof j?!0:n instanceof f?((l=n.actor)==null?void 0:l.userId)===s.uid:n instanceof m?n.includeAll?!0:n.customActors?n.customActors.find(t=>t.userId===s.uid):n.includeFemale&&s.gender=="female"?!0:!!(n.includeMale&&s.gender=="male"):n.characters.find(t=>{var u;return t instanceof f?((u=t.actor)==null?void 0:u.userId)===s.uid:t.includeAll?!0:t.customActors?t.customActors.find(a=>a.userId===s.uid):t.includeFemale&&s.gender=="female"?!0:!!(t.includeMale&&s.gender=="male")})})&&C.push(o)}),L(C),p(!1)})}const E=localStorage.getItem("accountType");E&&O(E)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"title",children:e.jsx("h1",{children:"Actor Profile"})}),e.jsxs("div",{className:"center",children:[J&&e.jsx("div",{className:"loader"}),S.length>0&&e.jsxs("div",{className:"section",children:[e.jsx("h2",{children:"Roles"}),e.jsx("div",{className:"tiles",children:S.map(i=>i instanceof f?e.jsx("div",{className:"tile",children:e.jsx("h3",{children:i.name})},i.name):e.jsx("div",{className:"tile",children:e.jsx("h3",{children:"Ensemble"})},"EnsembleSection"))})]}),I.length>0&&e.jsxs("div",{className:"section",children:[e.jsx("h2",{children:"Show Groups"}),e.jsx("div",{className:"tiles",children:I.map(i=>e.jsx("div",{className:"tile",children:e.jsx("h3",{children:i.name})},i.name))})]}),A.length>0&&e.jsxs("div",{className:"section",children:[e.jsx("h2",{children:"Scenes"}),e.jsx("div",{className:"tiles",children:A.map(i=>e.jsx("div",{className:"tile",children:e.jsx("h3",{children:i.name})},i.name))})]}),w.length>0&&e.jsxs("div",{className:"section",children:[e.jsx("h2",{children:"Songs"}),e.jsx("div",{className:"tiles",children:w.map(i=>e.jsx("div",{className:"tile",children:e.jsx("h3",{children:i.name})},i.name))})]}),v.length>0&&e.jsxs("div",{className:"section",children:[e.jsx("h2",{children:"Dances"}),e.jsx("div",{className:"tiles",children:v.map(i=>e.jsx("div",{className:"tile",children:e.jsx("h3",{children:i.name})},i.name))})]}),e.jsx("button",{className:"ActionBtn",onClick:()=>{window.open(`/Activity/Shows/Show/Actor/Print/?activityId=${x}&showId=${g}`,"_blank")},children:"Print"}),e.jsx("button",{className:"ActionBtn",onClick:()=>{window.location.href=`/Activity/Shows/Show/?activityId=${x}&showId=${g}`},children:"Back"})]})]})}
